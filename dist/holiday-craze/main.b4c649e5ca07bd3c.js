"use strict";(self.webpackChunkholiday_craze=self.webpackChunkholiday_craze||[]).push([[179],{2011:(pt,Ae,L)=>{L.d(Ae,{Dh:()=>he,GT:()=>de,cc:()=>Re,hO:()=>Le,on:()=>$,pX:()=>se,xv:()=>pe});var d=L(4650),te=L(9260),F=L(2122);pt=L.hmd(pt);const oe=["ngOnDestroy"],se=(ge,tt,dt,Me={})=>new Proxy(ge,{get:(we,Ie)=>dt.runOutsideAngular(()=>{var Be;if(ge[Ie])return!(null===(Be=Me?.spy)||void 0===Be)&&Be.get&&Me.spy.get(Ie,ge[Ie]),ge[Ie];if(oe.indexOf(Ie)>-1)return()=>{};const He=tt.toPromise().then(H=>{const me=H&&H[Ie];return"function"==typeof me?me.bind(H):me&&me.then?me.then(Z=>dt.run(()=>Z)):dt.run(()=>me)});return new Proxy(()=>{},{get:(H,me)=>He[me],apply:(H,me,Z)=>He.then(X=>{var ie;const re=X&&X(...Z);return!(null===(ie=Me?.spy)||void 0===ie)&&ie.apply&&Me.spy.apply(Ie,Z,re),re})})})}),de=(ge,tt)=>{tt.forEach(dt=>{Object.getOwnPropertyNames(dt.prototype||dt).forEach(Me=>{Object.defineProperty(ge.prototype,Me,Object.getOwnPropertyDescriptor(dt.prototype||dt,Me))})})};class le{constructor(tt){return tt}}const he=new d.OlP("angularfire2.app.options"),pe=new d.OlP("angularfire2.app.name");function $(ge,tt,dt){const we="object"==typeof dt&&dt||{};we.name=we.name||"string"==typeof dt&&dt||"[DEFAULT]";const Be=te.Z.apps.filter(He=>He&&He.name===we.name)[0]||tt.runOutsideAngular(()=>te.Z.initializeApp(ge,we));try{JSON.stringify(ge)!==JSON.stringify(Be.options)&&G("error",`${Be.name} Firebase App already initialized with different options${pt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new le(Be)}const G=(ge,...tt)=>{(0,d.X6Q)()&&typeof console<"u"&&console[ge](...tt)},Y={provide:le,useFactory:$,deps:[he,d.R0b,[new d.FiY,pe]]};let Le=(()=>{class ge{constructor(dt){te.Z.registerVersion("angularfire",F.q4.full,"core"),te.Z.registerVersion("angularfire",F.q4.full,"app-compat"),te.Z.registerVersion("angular",d.q4F.full,dt.toString())}static initializeApp(dt,Me){return{ngModule:ge,providers:[{provide:he,useValue:dt},{provide:pe,useValue:Me}]}}}return ge.\u0275fac=function(dt){return new(dt||ge)(d.LFG(d.Lbi))},ge.\u0275mod=d.oAB({type:ge}),ge.\u0275inj=d.cJS({providers:[Y]}),ge})();function Re(ge,tt,dt,Me,we){const[,Ie,Be]=globalThis.\u0275AngularfireInstanceCache.find(He=>He[0]===ge)||[];if(Ie)return function be(ge,tt){try{return ge.toString()===tt.toString()}catch{return ge===tt}}(we,Be)||(ye("error",`${tt} was already initialized on the ${dt} Firebase App with different settings.${ot?" You may need to reload as Firebase is not HMR aware.":""}`),ye("warn",{is:we,was:Be})),Ie;{const He=Me();return globalThis.\u0275AngularfireInstanceCache.push([ge,He,we]),He}}const ot=!!pt.hot,ye=(ge,...tt)=>{(0,d.X6Q)()&&typeof console<"u"&&console[ge](...tt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(pt,Ae,L)=>{L.d(Ae,{q4:()=>Je,iC:()=>ws,fc:()=>Yn,HU:()=>na,vb:()=>Gs,JM:()=>Ya});var d=L(4650),te=L(259),F=L(5861),oe=L(9681),se=L(2090),de=L(4859),le=L(1877),he=L(8766);const pe="@firebase/installations",$="0.6.0",Y=`w:${$}`,Le="FIS_v2",tt=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function dt(I){return I instanceof se.ZR&&I.code.includes("request-failed")}function Me({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function we(I){return{token:I.token,requestStatus:2,expiresIn:X(I.expiresIn),creationTime:Date.now()}}function Ie(I,T){return Be.apply(this,arguments)}function Be(){return(Be=(0,F.Z)(function*(I,T){const U=(yield T.json()).error;return tt.create("request-failed",{requestName:I,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function He({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function H(I,{refreshToken:T}){const M=He(I);return M.append("Authorization",function ie(I){return`${Le} ${I}`}(T)),M}function me(I){return Z.apply(this,arguments)}function Z(){return(Z=(0,F.Z)(function*(I){const T=yield I();return T.status>=500&&T.status<600?I():T})).apply(this,arguments)}function X(I){return Number(I.replace("s","000"))}function re(I,T){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,F.Z)(function*({appConfig:I,heartbeatServiceProvider:T},{fid:M}){const U=Me(I),Q=He(I),ne=T.getImmediate({optional:!0});if(ne){const ht=yield ne.getHeartbeatsHeader();ht&&Q.append("x-firebase-client",ht)}const je={method:"POST",headers:Q,body:JSON.stringify({fid:M,authVersion:Le,appId:I.appId,sdkVersion:Y})},Xe=yield me(()=>fetch(U,je));if(Xe.ok){const ht=yield Xe.json();return{fid:ht.fid||M,registrationStatus:2,refreshToken:ht.refreshToken,authToken:we(ht.authToken)}}throw yield Ie("Create Installation",Xe)})).apply(this,arguments)}function Pe(I){return new Promise(T=>{setTimeout(T,I)})}const en=/^[cdef][\w-]{21}$/;function Ke(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const M=function cn(I){return function gt(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return en.test(M)?M:""}catch{return""}}function En(I){return`${I.appName}!${I.appId}`}const Yt=new Map;function tn(I,T){const M=En(I);dn(M,T),function os(I,T){const M=function Hr(){return!xi&&"BroadcastChannel"in self&&(xi=new BroadcastChannel("[Firebase] FID Change"),xi.onmessage=I=>{dn(I.data.key,I.data.fid)}),xi}();M&&M.postMessage({key:I,fid:T}),function $r(){0===Yt.size&&xi&&(xi.close(),xi=null)}()}(M,T)}function dn(I,T){const M=Yt.get(I);if(M)for(const U of M)U(T)}let xi=null;const Qr="firebase-installations-store";let di=null;function Bo(){return di||(di=(0,he.X3)("firebase-installations-database",1,{upgrade:(I,T)=>{0===T&&I.createObjectStore(Qr)}})),di}function Qe(I,T){return kr.apply(this,arguments)}function kr(){return(kr=(0,F.Z)(function*(I,T){const M=En(I),Q=(yield Bo()).transaction(Qr,"readwrite"),ne=Q.objectStore(Qr),De=yield ne.get(M);return yield ne.put(T,M),yield Q.done,(!De||De.fid!==T.fid)&&tn(I,T.fid),T})).apply(this,arguments)}function Ms(I){return nr.apply(this,arguments)}function nr(){return(nr=(0,F.Z)(function*(I){const T=En(I),U=(yield Bo()).transaction(Qr,"readwrite");yield U.objectStore(Qr).delete(T),yield U.done})).apply(this,arguments)}function hi(I,T){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,F.Z)(function*(I,T){const M=En(I),Q=(yield Bo()).transaction(Qr,"readwrite"),ne=Q.objectStore(Qr),De=yield ne.get(M),je=T(De);return void 0===je?yield ne.delete(M):yield ne.put(je,M),yield Q.done,je&&(!De||De.fid!==je.fid)&&tn(I,je.fid),je})).apply(this,arguments)}function kn(I){return qn.apply(this,arguments)}function qn(){return(qn=(0,F.Z)(function*(I){let T;const M=yield hi(I.appConfig,U=>{const Q=vn(U),ne=vt(I,Q);return T=ne.registrationPromise,ne.installationEntry});return""===M.fid?{installationEntry:yield T}:{installationEntry:M,registrationPromise:T}})).apply(this,arguments)}function vn(I){return St(I||{fid:Ke(),registrationStatus:0})}function vt(I,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(tt.create("app-offline"))};const M={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},U=function ft(I,T){return ln.apply(this,arguments)}(I,M);return{installationEntry:M,registrationPromise:U}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:gr(I)}:{installationEntry:T}}function ln(){return(ln=(0,F.Z)(function*(I,T){try{const M=yield re(I,T);return Qe(I.appConfig,M)}catch(M){throw dt(M)&&409===M.customData.serverCode?yield Ms(I.appConfig):yield Qe(I.appConfig,{fid:T.fid,registrationStatus:0}),M}})).apply(this,arguments)}function gr(I){return jn.apply(this,arguments)}function jn(){return(jn=(0,F.Z)(function*(I){let T=yield Jr(I.appConfig);for(;1===T.registrationStatus;)yield Pe(100),T=yield Jr(I.appConfig);if(0===T.registrationStatus){const{installationEntry:M,registrationPromise:U}=yield kn(I);return U||M}return T})).apply(this,arguments)}function Jr(I){return hi(I,T=>{if(!T)throw tt.create("installation-not-found");return St(T)})}function St(I){return function as(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function nn(I,T){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,F.Z)(function*({appConfig:I,heartbeatServiceProvider:T},M){const U=on(I,M),Q=H(I,M),ne=T.getImmediate({optional:!0});if(ne){const ht=yield ne.getHeartbeatsHeader();ht&&Q.append("x-firebase-client",ht)}const je={method:"POST",headers:Q,body:JSON.stringify({installation:{sdkVersion:Y,appId:I.appId}})},Xe=yield me(()=>fetch(U,je));if(Xe.ok)return we(yield Xe.json());throw yield Ie("Generate Auth Token",Xe)})).apply(this,arguments)}function on(I,{fid:T}){return`${Me(I)}/${T}/authTokens:generate`}function rr(I){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,F.Z)(function*(I,T=!1){let M;const U=yield hi(I.appConfig,ne=>{if(!Vt(ne))throw tt.create("not-registered");const De=ne.authToken;if(!T&&z(De))return ne;if(1===De.requestStatus)return M=it(I,T),ne;{if(!navigator.onLine)throw tt.create("app-offline");const je=K(ne);return M=At(I,je),je}});return M?yield M:U.authToken})).apply(this,arguments)}function it(I,T){return Te.apply(this,arguments)}function Te(){return(Te=(0,F.Z)(function*(I,T){let M=yield nt(I.appConfig);for(;1===M.authToken.requestStatus;)yield Pe(100),M=yield nt(I.appConfig);const U=M.authToken;return 0===U.requestStatus?rr(I,T):U})).apply(this,arguments)}function nt(I){return hi(I,T=>{if(!Vt(T))throw tt.create("not-registered");return function Ee(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function At(I,T){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,F.Z)(function*(I,T){try{const M=yield nn(I,T),U=Object.assign(Object.assign({},T),{authToken:M});return yield Qe(I.appConfig,U),M}catch(M){if(!dt(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const U=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield Qe(I.appConfig,U)}else yield Ms(I.appConfig);throw M}})).apply(this,arguments)}function Vt(I){return void 0!==I&&2===I.registrationStatus}function z(I){return 2===I.requestStatus&&!function B(I){const T=Date.now();return T<I.creationTime||I.creationTime+I.expiresIn<T+36e5}(I)}function K(I){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:T})}function Ge(){return(Ge=(0,F.Z)(function*(I){const T=I,{installationEntry:M,registrationPromise:U}=yield kn(T);return U?U.catch(console.error):rr(T).catch(console.error),M.fid})).apply(this,arguments)}function Qt(){return(Qt=(0,F.Z)(function*(I,T=!1){const M=I;return yield _n(M),(yield rr(M,T)).token})).apply(this,arguments)}function _n(I){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,F.Z)(function*(I){const{registrationPromise:T}=yield kn(I);T&&(yield T)})).apply(this,arguments)}function Rs(I){return tt.create("missing-app-config-values",{valueName:I})}const jo="installations",Tn=I=>{const T=I.getProvider("app").getImmediate(),M=function bn(I){if(!I||!I.options)throw Rs("App Configuration");if(!I.name)throw Rs("App Name");const T=["projectId","apiKey","appId"];for(const M of T)if(!I.options[M])throw Rs(M);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(T);return{app:T,appConfig:M,heartbeatServiceProvider:(0,oe._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},io=I=>{const T=I.getProvider("app").getImmediate(),M=(0,oe._getProvider)(T,jo).getImmediate();return{getId:()=>function J(I){return Ge.apply(this,arguments)}(M),getToken:Q=>function mt(I){return Qt.apply(this,arguments)}(M,Q)}};(function bu(){(0,oe._registerComponent)(new de.wA(jo,Tn,"PUBLIC")),(0,oe._registerComponent)(new de.wA("installations-internal",io,"PRIVATE"))})(),(0,oe.registerVersion)(pe,$),(0,oe.registerVersion)(pe,$,"esm2017");const Ki="@firebase/remote-config",Kn=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ud{constructor(T,M,U,Q){this.client=T,this.storage=M,this.storageCache=U,this.logger=Q}isCachedDataFresh(T,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-M,Q=U<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${Q}.`),Q}fetch(T){var M=this;return(0,F.Z)(function*(){const[U,Q]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(Q&&M.isCachedDataFresh(T.cacheMaxAgeMillis,U))return Q;T.eTag=Q&&Q.eTag;const ne=yield M.client.fetch(T),De=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ne.status&&De.push(M.storage.setLastSuccessfulFetchResponse(ne)),yield Promise.all(De),ne})()}}function Ul(I=navigator){return I.languages&&I.languages[0]||I.language}class Bl{constructor(T,M,U,Q,ne,De){this.firebaseInstallations=T,this.sdkVersion=M,this.namespace=U,this.projectId=Q,this.apiKey=ne,this.appId=De}fetch(T){var M=this;return(0,F.Z)(function*(){const[U,Q]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),De=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,je={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},Xe={sdk_version:M.sdkVersion,app_instance_id:U,app_instance_id_token:Q,app_id:M.appId,language_code:Ul()},ht={method:"POST",headers:je,body:JSON.stringify(Xe)},Rt=fetch(De,ht),Et=new Promise((Gn,ii)=>{T.signal.addEventListener(()=>{const Cs=new Error("The operation was aborted.");Cs.name="AbortError",ii(Cs)})});let Qn;try{yield Promise.race([Rt,Et]),Qn=yield Rt}catch(Gn){let ii="fetch-client-network";throw"AbortError"===Gn?.name&&(ii="fetch-timeout"),Kn.create(ii,{originalErrorMessage:Gn?.message})}let $n=Qn.status;const ra=Qn.headers.get("ETag")||void 0;let ia,Nt;if(200===Qn.status){let Gn;try{Gn=yield Qn.json()}catch(ii){throw Kn.create("fetch-client-parse",{originalErrorMessage:ii?.message})}ia=Gn.entries,Nt=Gn.state}if("INSTANCE_STATE_UNSPECIFIED"===Nt?$n=500:"NO_CHANGE"===Nt?$n=304:("NO_TEMPLATE"===Nt||"EMPTY_CONFIG"===Nt)&&(ia={}),304!==$n&&200!==$n)throw Kn.create("fetch-status",{httpStatus:$n});return{status:$n,eTag:ra,config:ia}})()}}class rg{constructor(T,M){this.client=T,this.storage=M}fetch(T){var M=this;return(0,F.Z)(function*(){const U=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(T,U)})()}attemptFetch(T,{throttleEndTimeMillis:M,backoffCount:U}){var Q=this;return(0,F.Z)(function*(){yield function sr(I,T){return new Promise((M,U)=>{const Q=Math.max(T-Date.now(),0),ne=setTimeout(M,Q);I.addEventListener(()=>{clearTimeout(ne),U(Kn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,M);try{const ne=yield Q.client.fetch(T);return yield Q.storage.deleteThrottleMetadata(),ne}catch(ne){if(!function ld(I){if(!(I instanceof se.ZR&&I.customData))return!1;const T=Number(I.customData.httpStatus);return 429===T||500===T||503===T||504===T}(ne))throw ne;const De={throttleEndTimeMillis:Date.now()+(0,se.$s)(U),backoffCount:U+1};return yield Q.storage.setThrottleMetadata(De),Q.attemptFetch(T,De)}})()}}class cd{constructor(T,M,U,Q,ne){this.app=T,this._client=M,this._storageCache=U,this._storage=Q,this._logger=ne,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function jl(I,T){const M=I.target.error||void 0;return Kn.create(T,{originalErrorMessage:M&&M?.message})}const Os="app_namespace_store";class ag{constructor(T,M,U,Q=function og(){return new Promise((I,T)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=U=>{T(jl(U,"storage-open"))},M.onsuccess=U=>{I(U.target.result)},M.onupgradeneeded=U=>{0===U.oldVersion&&U.target.result.createObjectStore(Os,{keyPath:"compositeKey"})}}catch(M){T(Kn.create("storage-open",{originalErrorMessage:M?.message}))}})}()){this.appId=T,this.appName=M,this.namespace=U,this.openDbPromise=Q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var M=this;return(0,F.Z)(function*(){const U=yield M.openDbPromise;return new Promise((Q,ne)=>{const je=U.transaction([Os],"readonly").objectStore(Os),Xe=M.createCompositeKey(T);try{const ht=je.get(Xe);ht.onerror=Rt=>{ne(jl(Rt,"storage-get"))},ht.onsuccess=Rt=>{const Et=Rt.target.result;Q(Et?Et.value:void 0)}}catch(ht){ne(Kn.create("storage-get",{originalErrorMessage:ht?.message}))}})})()}set(T,M){var U=this;return(0,F.Z)(function*(){const Q=yield U.openDbPromise;return new Promise((ne,De)=>{const Xe=Q.transaction([Os],"readwrite").objectStore(Os),ht=U.createCompositeKey(T);try{const Rt=Xe.put({compositeKey:ht,value:M});Rt.onerror=Et=>{De(jl(Et,"storage-set"))},Rt.onsuccess=()=>{ne()}}catch(Rt){De(Kn.create("storage-set",{originalErrorMessage:Rt?.message}))}})})()}delete(T){var M=this;return(0,F.Z)(function*(){const U=yield M.openDbPromise;return new Promise((Q,ne)=>{const je=U.transaction([Os],"readwrite").objectStore(Os),Xe=M.createCompositeKey(T);try{const ht=je.delete(Xe);ht.onerror=Rt=>{ne(jl(Rt,"storage-delete"))},ht.onsuccess=()=>{Q()}}catch(ht){ne(Kn.create("storage-delete",{originalErrorMessage:ht?.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class hd{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,F.Z)(function*(){const M=T.storage.getLastFetchStatus(),U=T.storage.getLastSuccessfulFetchTimestampMillis(),Q=T.storage.getActiveConfig(),ne=yield M;ne&&(T.lastFetchStatus=ne);const De=yield U;De&&(T.lastSuccessfulFetchTimestampMillis=De);const je=yield Q;je&&(T.activeConfig=je)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function Du(){return Xh.apply(this,arguments)}function Xh(){return(Xh=(0,F.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}!function Fs(){(0,oe._registerComponent)(new de.wA("remote-config",function I(T,{instanceIdentifier:M}){const U=T.getProvider("app").getImmediate(),Q=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Kn.create("registration-window");if(!(0,se.hl)())throw Kn.create("indexed-db-unavailable");const{projectId:ne,apiKey:De,appId:je}=U.options;if(!ne)throw Kn.create("registration-project-id");if(!De)throw Kn.create("registration-api-key");if(!je)throw Kn.create("registration-app-id");const Xe=new ag(je,U.name,M=M||"firebase"),ht=new hd(Xe),Rt=new le.Yd(Ki);Rt.logLevel=le.in.ERROR;const Et=new Bl(Q,oe.SDK_VERSION,M,ne,De,je),Qn=new rg(Et,Xe),$n=new ud(Qn,Xe,ht,Rt),ra=new cd(U,$n,ht,Xe,Rt);return function Pn(I){const T=(0,se.m9)(I);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(ra),ra},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(Ki,"0.4.0"),(0,oe.registerVersion)(Ki,"0.4.0","esm2017")}();const Qi="/firebase-messaging-sw.js",ls="/firebase-cloud-messaging-push-scope",cs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Aa="google.c.a.c_id",Tu="google.c.a.c_l",Hl="google.c.a.ts",ef="google.c.a.e";var ds=(()=>{return(I=ds||(ds={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",ds;var I})();function fi(I){const T=new Uint8Array(I);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ei(I){const M=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(M),Q=new Uint8Array(U.length);for(let ne=0;ne<U.length;++ne)Q[ne]=U.charCodeAt(ne);return Q}const Ho="fcm_token_details_db",Tr="fcm_token_object_Store";function tf(I){return nf.apply(this,arguments)}function nf(){return nf=(0,F.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ne=>ne.name).includes(Ho))return null;let T=null;return(yield(0,he.X3)(Ho,5,{upgrade:(U=(0,F.Z)(function*(Q,ne,De,je){var Xe;if(ne<2||!Q.objectStoreNames.contains(Tr))return;const ht=je.objectStore(Tr),Rt=yield ht.index("fcmSenderId").get(I);if(yield ht.clear(),Rt)if(2===ne){const Et=Rt;if(!Et.auth||!Et.p256dh||!Et.endpoint)return;T={token:Et.fcmToken,createTime:null!==(Xe=Et.createTime)&&void 0!==Xe?Xe:Date.now(),subscriptionOptions:{auth:Et.auth,p256dh:Et.p256dh,endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:"string"==typeof Et.vapidKey?Et.vapidKey:fi(Et.vapidKey)}}}else if(3===ne){const Et=Rt;T={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:fi(Et.auth),p256dh:fi(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:fi(Et.vapidKey)}}}else if(4===ne){const Et=Rt;T={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:fi(Et.auth),p256dh:fi(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:fi(Et.vapidKey)}}}}),function(ne,De,je,Xe){return U.apply(this,arguments)})})).close(),yield(0,he.Lj)(Ho),yield(0,he.Lj)("fcm_vapid_details_db"),yield(0,he.Lj)("undefined"),On(T)?T:null;var U}),nf.apply(this,arguments)}function On(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:T}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const pi="firebase-messaging-store";let Or=null;function Au(){return Or||(Or=(0,he.X3)("firebase-messaging-database",1,{upgrade:(I,T)=>{0===T&&I.createObjectStore(pi)}})),Or}function ao(I){return hs.apply(this,arguments)}function hs(){return(hs=(0,F.Z)(function*(I){const T=ki(I),U=yield(yield Au()).transaction(pi).objectStore(pi).get(T);if(U)return U;{const Q=yield tf(I.appConfig.senderId);if(Q)return yield qt(I,Q),Q}})).apply(this,arguments)}function qt(I,T){return xu.apply(this,arguments)}function xu(){return(xu=(0,F.Z)(function*(I,T){const M=ki(I),Q=(yield Au()).transaction(pi,"readwrite");return yield Q.objectStore(pi).put(T,M),yield Q.done,T})).apply(this,arguments)}function uo(I){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,F.Z)(function*(I){const T=ki(I),U=(yield Au()).transaction(pi,"readwrite");yield U.objectStore(pi).delete(T),yield U.done})).apply(this,arguments)}function ki({appConfig:I}){return I.appId}const An=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function xt(I,T){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,F.Z)(function*(I,T){const M=yield Gl(I),U=Se(T),Q={method:"POST",headers:M,body:JSON.stringify(U)};let ne;try{ne=yield(yield fetch(fs(I.appConfig),Q)).json()}catch(De){throw An.create("token-subscribe-failed",{errorInfo:De?.toString()})}if(ne.error)throw An.create("token-subscribe-failed",{errorInfo:ne.error.message});if(!ne.token)throw An.create("token-subscribe-no-token");return ne.token})).apply(this,arguments)}function sf(I,T){return ku.apply(this,arguments)}function ku(){return(ku=(0,F.Z)(function*(I,T){const M=yield Gl(I),U=Se(T.subscriptionOptions),Q={method:"PATCH",headers:M,body:JSON.stringify(U)};let ne;try{ne=yield(yield fetch(`${fs(I.appConfig)}/${T.token}`,Q)).json()}catch(De){throw An.create("token-update-failed",{errorInfo:De?.toString()})}if(ne.error)throw An.create("token-update-failed",{errorInfo:ne.error.message});if(!ne.token)throw An.create("token-update-no-token");return ne.token})).apply(this,arguments)}function Pu(I,T){return $l.apply(this,arguments)}function $l(){return($l=(0,F.Z)(function*(I,T){const U={method:"DELETE",headers:yield Gl(I)};try{const ne=yield(yield fetch(`${fs(I.appConfig)}/${T}`,U)).json();if(ne.error)throw An.create("token-unsubscribe-failed",{errorInfo:ne.error.message})}catch(Q){throw An.create("token-unsubscribe-failed",{errorInfo:Q?.toString()})}})).apply(this,arguments)}function fs({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function Gl(I){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,F.Z)(function*({appConfig:I,installations:T}){const M=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Se({p256dh:I,auth:T,endpoint:M,vapidKey:U}){const Q={web:{endpoint:M,auth:T,p256dh:I}};return U!==cs&&(Q.web.applicationPubKey=U),Q}const $t=6048e5;function Ou(I){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,F.Z)(function*(I){const T=yield zl(I.swRegistration,I.vapidKey),M={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:T.endpoint,auth:fi(T.getKey("auth")),p256dh:fi(T.getKey("p256dh"))},U=yield ao(I.firebaseDependencies);if(U){if(md(U.subscriptionOptions,M))return Date.now()>=U.createTime+$t?$o(I,{token:U.token,createTime:Date.now(),subscriptionOptions:M}):U.token;try{yield Pu(I.firebaseDependencies,U.token)}catch(Q){console.warn(Q)}return Ra(I.firebaseDependencies,M)}return Ra(I.firebaseDependencies,M)})).apply(this,arguments)}function Fn(I){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,F.Z)(function*(I){const T=yield ao(I.firebaseDependencies);T&&(yield Pu(I.firebaseDependencies,T.token),yield uo(I.firebaseDependencies));const M=yield I.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function $o(I,T){return gi.apply(this,arguments)}function gi(){return(gi=(0,F.Z)(function*(I,T){try{const M=yield sf(I.firebaseDependencies,T),U=Object.assign(Object.assign({},T),{token:M,createTime:Date.now()});return yield qt(I.firebaseDependencies,U),M}catch(M){throw yield Fn(I),M}})).apply(this,arguments)}function Ra(I,T){return Na.apply(this,arguments)}function Na(){return(Na=(0,F.Z)(function*(I,T){const U={token:yield xt(I,T),createTime:Date.now(),subscriptionOptions:T};return yield qt(I,U),U.token})).apply(this,arguments)}function zl(I,T){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,F.Z)(function*(I,T){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ei(T)})})).apply(this,arguments)}function md(I,T){return T.vapidKey===I.vapidKey&&T.endpoint===I.endpoint&&T.auth===I.auth&&T.p256dh===I.p256dh}function ka(I){const T={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function Ln(I,T){if(!T.notification)return;I.notification={};const M=T.notification.title;M&&(I.notification.title=M);const U=T.notification.body;U&&(I.notification.body=U);const Q=T.notification.image;Q&&(I.notification.image=Q);const ne=T.notification.icon;ne&&(I.notification.icon=ne)}(T,I),function Ji(I,T){!T.data||(I.data=T.data)}(T,I),function ql(I,T){var M,U,Q,ne,De;if(!(T.fcmOptions||null!==(M=T.notification)&&void 0!==M&&M.click_action))return;I.fcmOptions={};const je=null!==(Q=null===(U=T.fcmOptions)||void 0===U?void 0:U.link)&&void 0!==Q?Q:null===(ne=T.notification)||void 0===ne?void 0:ne.click_action;je&&(I.fcmOptions.link=je);const Xe=null===(De=T.fcmOptions)||void 0===De?void 0:De.analytics_label;Xe&&(I.fcmOptions.analyticsLabel=Xe)}(T,I),T}function lo(I){return"object"==typeof I&&!!I&&Aa in I}function ps(I,T){const M=[];for(let U=0;U<I.length;U++)M.push(I.charAt(U)),U<T.length&&M.push(T.charAt(U));return M.join("")}function Pa(I){return An.create("missing-app-config-values",{valueName:I})}ps("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ps("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class lg{constructor(T,M,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Q=function ug(I){if(!I||!I.options)throw Pa("App Configuration Object");if(!I.name)throw Pa("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:M}=I;for(const U of T)if(!M[U])throw Pa(U);return{appName:I.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:Q,installations:M,analyticsProvider:U}}_delete(){return Promise.resolve()}}function Zl(I){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,F.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(Qi,{scope:ls}),I.swRegistration.update().catch(()=>{})}catch(T){throw An.create("failed-service-worker-registration",{browserErrorMessage:T?.message})}})).apply(this,arguments)}function Oa(I,T){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,F.Z)(function*(I,T){if(!T&&!I.swRegistration&&(yield Zl(I)),T||!I.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw An.create("invalid-sw-registration");I.swRegistration=T}})).apply(this,arguments)}function Fa(I,T){return Yl.apply(this,arguments)}function Yl(){return(Yl=(0,F.Z)(function*(I,T){T?I.vapidKey=T:I.vapidKey||(I.vapidKey=cs)})).apply(this,arguments)}function Bu(){return(Bu=(0,F.Z)(function*(I,T){if(!navigator)throw An.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw An.create("permission-blocked");return yield Fa(I,T?.vapidKey),yield Oa(I,T?.serviceWorkerRegistration),Ou(I)})).apply(this,arguments)}function Ql(I,T,M){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,F.Z)(function*(I,T,M){const U=Xl(T);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:M[Aa],message_name:M[Tu],message_time:M[Hl],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Xl(I){switch(I){case ds.NOTIFICATION_CLICKED:return"notification_open";case ds.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function co(){return(co=(0,F.Z)(function*(I,T){const M=T.data;if(!M.isFirebaseMessaging)return;I.onMessageHandler&&M.messageType===ds.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(ka(M)):I.onMessageHandler.next(ka(M)));const U=M.data;lo(U)&&"1"===U[ef]&&(yield Ql(I,M.messageType,U))})).apply(this,arguments)}const ho="@firebase/messaging",or=I=>{const T=new lg(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function _d(I,T){return co.apply(this,arguments)}(T,M)),T},ti=I=>{const T=I.getProvider("messaging").getImmediate();return{getToken:U=>function Uu(I,T){return Bu.apply(this,arguments)}(T,U)}};function yd(){return ec.apply(this,arguments)}function ec(){return(ec=(0,F.Z)(function*(){try{yield(0,se.eu)()}catch{return!1}return typeof window<"u"&&(0,se.hl)()&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function wn(){(0,oe._registerComponent)(new de.wA("messaging",or,"PUBLIC")),(0,oe._registerComponent)(new de.wA("messaging-internal",ti,"PRIVATE")),(0,oe.registerVersion)(ho,"0.12.0"),(0,oe.registerVersion)(ho,"0.12.0","esm2017")}();const zo="analytics",Cd="firebase_id",po="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Gu="https://www.googletagmanager.com/gtag/js",Vn=new le.Yd("@firebase/analytics");function zu(I){return Promise.all(I.map(T=>T.catch(M=>M)))}function Wu(I,T){const M=document.createElement("script");M.src=`${Gu}?l=${I}&id=${T}`,M.async=!0,document.head.appendChild(M)}function uf(I,T,M,U,Q,ne){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,F.Z)(function*(I,T,M,U,Q,ne){const De=U[Q];try{if(De)yield T[De];else{const Xe=(yield zu(M)).find(ht=>ht.measurementId===Q);Xe&&(yield T[Xe.appId])}}catch(je){Vn.error(je)}I("config",Q,ne)})).apply(this,arguments)}function qo(I,T,M,U,Q){return go.apply(this,arguments)}function go(){return(go=(0,F.Z)(function*(I,T,M,U,Q){try{let ne=[];if(Q&&Q.send_to){let De=Q.send_to;Array.isArray(De)||(De=[De]);const je=yield zu(M);for(const Xe of De){const ht=je.find(Et=>Et.measurementId===Xe),Rt=ht&&T[ht.appId];if(!Rt){ne=[];break}ne.push(Rt)}}0===ne.length&&(ne=Object.values(T)),yield Promise.all(ne),I("event",U,Q||{})}catch(ne){Vn.error(ne)}})).apply(this,arguments)}function bd(I){const T=window.document.getElementsByTagName("script");for(const M of Object.values(T))if(M.src&&M.src.includes(Gu)&&M.src.includes(I))return M;return null}const yr=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ba=new class Xi{constructor(T={},M=1e3){this.throttleMetadata=T,this.intervalMillis=M}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,M){this.throttleMetadata[T]=M}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Dd(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function ja(I){return nc.apply(this,arguments)}function nc(){return(nc=(0,F.Z)(function*(I){var T;const{appId:M,apiKey:U}=I,Q={method:"GET",headers:Dd(U)},ne=po.replace("{app-id}",M),De=yield fetch(ne,Q);if(200!==De.status&&304!==De.status){let je="";try{const Xe=yield De.json();null!==(T=Xe.error)&&void 0!==T&&T.message&&(je=Xe.error.message)}catch{}throw yr.create("config-fetch-failed",{httpStatus:De.status,responseMessage:je})}return De.json()})).apply(this,arguments)}function Hn(I){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,F.Z)(function*(I,T=Ba,M){const{appId:U,apiKey:Q,measurementId:ne}=I.options;if(!U)throw yr.create("no-app-id");if(!Q){if(ne)return{measurementId:ne,appId:U};throw yr.create("no-api-key")}const De=T.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},je=new Yu;return setTimeout((0,F.Z)(function*(){je.abort()}),void 0!==M?M:6e4),Zu({appId:U,apiKey:Q,measurementId:ne},De,je,T)})).apply(this,arguments)}function Zu(I,T,M){return mo.apply(this,arguments)}function mo(){return(mo=(0,F.Z)(function*(I,{throttleEndTimeMillis:T,backoffCount:M},U,Q=Ba){var ne;const{appId:De,measurementId:je}=I;try{yield Ha(U,T)}catch(Xe){if(je)return Vn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${je} provided in the "measurementId" field in the local Firebase config. [${Xe?.message}]`),{appId:De,measurementId:je};throw Xe}try{const Xe=yield ja(I);return Q.deleteThrottleMetadata(De),Xe}catch(Xe){const ht=Xe;if(!Ku(ht)){if(Q.deleteThrottleMetadata(De),je)return Vn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${je} provided in the "measurementId" field in the local Firebase config. [${ht?.message}]`),{appId:De,measurementId:je};throw Xe}const Rt=503===Number(null===(ne=ht?.customData)||void 0===ne?void 0:ne.httpStatus)?(0,se.$s)(M,Q.intervalMillis,30):(0,se.$s)(M,Q.intervalMillis),Et={throttleEndTimeMillis:Date.now()+Rt,backoffCount:M+1};return Q.setThrottleMetadata(De,Et),Vn.debug(`Calling attemptFetch again in ${Rt} millis`),Zu(I,Et,U,Q)}})).apply(this,arguments)}function Ha(I,T){return new Promise((M,U)=>{const Q=Math.max(T-Date.now(),0),ne=setTimeout(M,Q);I.addEventListener(()=>{clearTimeout(ne),U(yr.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function Ku(I){if(!(I instanceof se.ZR&&I.customData))return!1;const T=Number(I.customData.httpStatus);return 429===T||500===T||503===T||504===T}class Yu{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let Us,Ga;function Bs(){return(Bs=(0,F.Z)(function*(I,T,M,U,Q){if(Q&&Q.global)I("event",M,U);else{const ne=yield T;I("event",M,Object.assign(Object.assign({},U),{send_to:ne}))}})).apply(this,arguments)}function yo(I){Ga=I}function sc(I){Us=I}function ms(){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,F.Z)(function*(){if(!(0,se.hl)())return Vn.warn(yr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(I){return Vn.warn(yr.create("indexeddb-unavailable",{errorInfo:I?.toString()}).message),!1}return!0})).apply(this,arguments)}function Yo(){return(Yo=(0,F.Z)(function*(I,T,M,U,Q,ne,De){var je;const Xe=Hn(I);Xe.then($n=>{M[$n.measurementId]=$n.appId,I.options.measurementId&&$n.measurementId!==I.options.measurementId&&Vn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${$n.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch($n=>Vn.error($n)),T.push(Xe);const ht=ms().then($n=>{if($n)return U.getId()}),[Rt,Et]=yield Promise.all([Xe,ht]);bd(ne)||Wu(ne,Rt.measurementId),Ga&&(Q("consent","default",Ga),yo(void 0)),Q("js",new Date);const Qn=null!==(je=De?.config)&&void 0!==je?je:{};return Qn.origin="firebase",Qn.update=!0,null!=Et&&(Qn[Cd]=Et),Q("config",Rt.measurementId,Qn),Us&&(Q("set",Us),sc(void 0)),Rt.measurementId})).apply(this,arguments)}class Xu{constructor(T){this.app=T}_delete(){return delete ni[this.app.options.appId],Promise.resolve()}}let ni={},js=[];const Qo={};let Xo,vo,Jo="dataLayer",za=!1;function ly(I,T,M){!function cg(){const I=[];if((0,se.ru)()&&I.push("This is a browser extension environment."),(0,se.zI)()||I.push("Cookies are not available."),I.length>0){const T=I.map((U,Q)=>`(${Q+1}) ${U}`).join(" "),M=yr.create("invalid-analytics-context",{errorInfo:T});Vn.warn(M.message)}}();const U=I.options.appId;if(!U)throw yr.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw yr.create("no-api-key");Vn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ni[U])throw yr.create("already-exists",{id:U});if(!za){!function Ed(I){let T=[];Array.isArray(window[I])?T=window[I]:window[I]=T}(Jo);const{wrappedGtag:ne,gtagCore:De}=function La(I,T,M,U,Q){let ne=function(...De){window[U].push(arguments)};return window[Q]&&"function"==typeof window[Q]&&(ne=window[Q]),window[Q]=function qu(I,T,M,U){function ne(){return(ne=(0,F.Z)(function*(De,je,Xe){try{"event"===De?yield qo(I,T,M,je,Xe):"config"===De?yield uf(I,T,M,U,je,Xe):"consent"===De?I("consent","update",Xe):I("set",je)}catch(ht){Vn.error(ht)}})).apply(this,arguments)}return function Q(De,je,Xe){return ne.apply(this,arguments)}}(ne,I,T,M),{gtagCore:ne,wrappedGtag:window[Q]}}(ni,js,Qo,Jo,"gtag");vo=ne,Xo=De,za=!0}return ni[U]=function Ko(I,T,M,U,Q,ne,De){return Yo.apply(this,arguments)}(I,js,Qo,T,Xo,Jo,M),new Xu(I)}function dy(){return lf.apply(this,arguments)}function lf(){return(lf=(0,F.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}const at="@firebase/analytics";!function sn(){(0,oe._registerComponent)(new de.wA(zo,(T,{options:M})=>ly(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,oe._registerComponent)(new de.wA("analytics-internal",function I(T){try{const M=T.getProvider(zo).getImmediate();return{logEvent:(U,Q,ne)=>function rn(I,T,M,U){I=(0,se.m9)(I),function Td(I,T,M,U,Q){return Bs.apply(this,arguments)}(vo,ni[I.app.options.appId],T,M,U).catch(Q=>Vn.error(Q))}(M,U,Q,ne)}}catch(M){throw yr.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,oe.registerVersion)(at,"0.9.0"),(0,oe.registerVersion)(at,"0.9.0","esm2017")}();var Oi=L(4408),wr=L(7565);const tl=new class Hs extends wr.v{}(class Wa extends Oi.o{constructor(T,M){super(T,M),this.scheduler=T,this.work=M}schedule(T,M=0){return M>0?super.schedule(T,M):(this.delay=M,this.state=T,this.scheduler.flush(this),this)}execute(T,M){return M>0||this.closed?super.execute(T,M):this._execute(T,M)}requestAsyncId(T,M,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(T,M,U):(T.flush(this),0)}});var ac=L(4986),qa=L(8505),wo=L(5363),_s=L(9468);const Je=new d.GfV("7.5.0"),Za="__angularfire_symbol__analyticsIsSupportedValue",$s="__angularfire_symbol__analyticsIsSupported",Ka="__angularfire_symbol__remoteConfigIsSupportedValue",ea="__angularfire_symbol__remoteConfigIsSupported",xn="__angularfire_symbol__messagingIsSupportedValue",uc="__angularfire_symbol__messagingIsSupported";function Ya(I,T,M){if(T){if(1===T.length)return T[0];const ne=T.filter(De=>De.app===M);if(1===ne.length)return ne[0]}return M.container.getProvider(I).getImmediate({optional:!0})}globalThis[$s]||(globalThis[$s]=dy().then(I=>globalThis[Za]=I).catch(()=>globalThis[Za]=!1)),globalThis[uc]||(globalThis[uc]=yd().then(I=>globalThis[xn]=I).catch(()=>globalThis[xn]=!1)),globalThis[ea]||(globalThis[ea]=Du().then(I=>globalThis[Ka]=I).catch(()=>globalThis[Ka]=!1));const Gs=(I,T)=>{const M=T?[T]:(0,te.C6)(),U=[];return M.forEach(Q=>{Q.container.getProvider(I).instances.forEach(De=>{U.includes(De)||U.push(De)})}),U};function ys(){}class Fi{constructor(T,M=tl){this.zone=T,this.delegate=M}now(){return this.delegate.now()}schedule(T,M,U){const Q=this.zone;return this.delegate.schedule(function(De){Q.runGuarded(()=>{T.apply(this,[De])})},M,U)}}class cc{constructor(T){this.zone=T,this.task=null}call(T,M){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ys,{},ys,ys)),M.pipe((0,qa.b)({next:U,complete:U,error:U})).subscribe(T).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let na=(()=>{class I{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new Fi(Zone.current)),this.insideAngular=M.run(()=>new Fi(Zone.current,ac.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(M){return new(M||I)(d.LFG(d.R0b))},I.\u0275prov=d.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function ri(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Yn(I){return I.pipe((0,wo.Q)(ri().outsideAngular))}function ws(I){return ri(),function Mn(I){return function(M){return(M=M.lift(new cc(I.ngZone))).pipe((0,_s.R)(I.outsideAngular),(0,wo.Q)(I.insideAngular))}}(ri())(I)}},2090:(pt,Ae,L)=>{L.d(Ae,{$s:()=>nt,BH:()=>jt,DV:()=>Qr,Dv:()=>gr,G6:()=>Ie,GJ:()=>xs,L:()=>he,LL:()=>Yt,Pz:()=>en,Sg:()=>Ke,UG:()=>be,UI:()=>Bo,US:()=>de,Wj:()=>St,Wl:()=>dn,Yr:()=>we,ZB:()=>G,ZR:()=>En,aH:()=>gt,b$:()=>ge,cI:()=>kt,dS:()=>nn,eu:()=>He,g5:()=>F,gK:()=>jn,gQ:()=>kn,h$:()=>le,hl:()=>Be,hu:()=>te,jU:()=>ot,lb:()=>as,m9:()=>Vt,ne:()=>qn,p$:()=>$,pd:()=>Zi,r3:()=>Mi,ru:()=>ye,tV:()=>pe,uI:()=>Re,ug:()=>Ri,vZ:()=>Qe,w1:()=>dt,w9:()=>$r,xO:()=>nr,xb:()=>di,z$:()=>Le,zI:()=>H,zd:()=>hi});const te=function(z,B){if(!z)throw F(B)},F=function(z){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+z)},oe=function(z){const B=[];let K=0;for(let Ee=0;Ee<z.length;Ee++){let J=z.charCodeAt(Ee);J<128?B[K++]=J:J<2048?(B[K++]=J>>6|192,B[K++]=63&J|128):55296==(64512&J)&&Ee+1<z.length&&56320==(64512&z.charCodeAt(Ee+1))?(J=65536+((1023&J)<<10)+(1023&z.charCodeAt(++Ee)),B[K++]=J>>18|240,B[K++]=J>>12&63|128,B[K++]=J>>6&63|128,B[K++]=63&J|128):(B[K++]=J>>12|224,B[K++]=J>>6&63|128,B[K++]=63&J|128)}return B},de={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(z,B){if(!Array.isArray(z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const K=B?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ee=[];for(let J=0;J<z.length;J+=3){const Ge=z[J],mt=J+1<z.length,Qt=mt?z[J+1]:0,_n=J+2<z.length,Wt=_n?z[J+2]:0;let Ut=(15&Qt)<<2|Wt>>6,mr=63&Wt;_n||(mr=64,mt||(Ut=64)),Ee.push(K[Ge>>2],K[(3&Ge)<<4|Qt>>4],K[Ut],K[mr])}return Ee.join("")},encodeString(z,B){return this.HAS_NATIVE_SUPPORT&&!B?btoa(z):this.encodeByteArray(oe(z),B)},decodeString(z,B){return this.HAS_NATIVE_SUPPORT&&!B?atob(z):function(z){const B=[];let K=0,Ee=0;for(;K<z.length;){const J=z[K++];if(J<128)B[Ee++]=String.fromCharCode(J);else if(J>191&&J<224){const Ge=z[K++];B[Ee++]=String.fromCharCode((31&J)<<6|63&Ge)}else if(J>239&&J<365){const _n=((7&J)<<18|(63&z[K++])<<12|(63&z[K++])<<6|63&z[K++])-65536;B[Ee++]=String.fromCharCode(55296+(_n>>10)),B[Ee++]=String.fromCharCode(56320+(1023&_n))}else{const Ge=z[K++],mt=z[K++];B[Ee++]=String.fromCharCode((15&J)<<12|(63&Ge)<<6|63&mt)}}return B.join("")}(this.decodeStringToByteArray(z,B))},decodeStringToByteArray(z,B){this.init_();const K=B?this.charToByteMapWebSafe_:this.charToByteMap_,Ee=[];for(let J=0;J<z.length;){const Ge=K[z.charAt(J++)],Qt=J<z.length?K[z.charAt(J)]:0;++J;const Wt=J<z.length?K[z.charAt(J)]:64;++J;const $e=J<z.length?K[z.charAt(J)]:64;if(++J,null==Ge||null==Qt||null==Wt||null==$e)throw Error();Ee.push(Ge<<2|Qt>>4),64!==Wt&&(Ee.push(Qt<<4&240|Wt>>2),64!==$e&&Ee.push(Wt<<6&192|$e))}return Ee},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let z=0;z<this.ENCODED_VALS.length;z++)this.byteToCharMap_[z]=this.ENCODED_VALS.charAt(z),this.charToByteMap_[this.byteToCharMap_[z]]=z,this.byteToCharMapWebSafe_[z]=this.ENCODED_VALS_WEBSAFE.charAt(z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[z]]=z,z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(z)]=z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(z)]=z)}}},le=function(z){const B=oe(z);return de.encodeByteArray(B,!0)},he=function(z){return le(z).replace(/\./g,"")},pe=function(z){try{return de.decodeString(z,!0)}catch(B){console.error("base64Decode failed: ",B)}return null};function $(z){return G(void 0,z)}function G(z,B){if(!(B instanceof Object))return B;switch(B.constructor){case Date:return new Date(B.getTime());case Object:void 0===z&&(z={});break;case Array:z=[];break;default:return B}for(const K in B)!B.hasOwnProperty(K)||!Y(K)||(z[K]=G(z[K],B[K]));return z}function Y(z){return"__proto__"!==z}function Le(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Re(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function be(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ot(){return"object"==typeof self&&self.self===self}function ye(){const z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof z&&void 0!==z.id}function ge(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function dt(){const z=Le();return z.indexOf("MSIE ")>=0||z.indexOf("Trident/")>=0}function we(){return!1}function Ie(){return!be()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Be(){try{return"object"==typeof indexedDB}catch{return!1}}function He(){return new Promise((z,B)=>{try{let K=!0;const Ee="validate-browser-context-for-indexeddb-analytics-module",J=self.indexedDB.open(Ee);J.onsuccess=()=>{J.result.close(),K||self.indexedDB.deleteDatabase(Ee),z(!0)},J.onupgradeneeded=()=>{K=!1},J.onerror=()=>{var Ge;B((null===(Ge=J.error)||void 0===Ge?void 0:Ge.message)||"")}}catch(K){B(K)}})}function H(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const re=()=>{try{return function me(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const z=process.env.__FIREBASE_DEFAULTS__;return z?JSON.parse(z):void 0})()||(()=>{if(typeof document>"u")return;let z;try{z=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const B=z&&pe(z[1]);return B&&JSON.parse(B)})()}catch(z){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${z}`)}},gt=()=>{var z;return null===(z=re())||void 0===z?void 0:z.config},en=z=>{var B;return null===(B=re())||void 0===B?void 0:B[`_${z}`]};class jt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((B,K)=>{this.resolve=B,this.reject=K})}wrapCallback(B){return(K,Ee)=>{K?this.reject(K):this.resolve(Ee),"function"==typeof B&&(this.promise.catch(()=>{}),1===B.length?B(K):B(K,Ee))}}}function Ke(z,B){if(z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ee=B||"demo-project",J=z.iat||0,Ge=z.sub||z.user_id;if(!Ge)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const mt=Object.assign({iss:`https://securetoken.google.com/${Ee}`,aud:Ee,iat:J,exp:J+3600,auth_time:J,sub:Ge,user_id:Ge,firebase:{sign_in_provider:"custom",identities:{}}},z);return[he(JSON.stringify({alg:"none",type:"JWT"})),he(JSON.stringify(mt)),""].join(".")}class En extends Error{constructor(B,K,Ee){super(K),this.code=B,this.customData=Ee,this.name="FirebaseError",Object.setPrototypeOf(this,En.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yt.prototype.create)}}class Yt{constructor(B,K,Ee){this.service=B,this.serviceName=K,this.errors=Ee}create(B,...K){const Ee=K[0]||{},J=`${this.service}/${B}`,Ge=this.errors[B],mt=Ge?function tn(z,B){return z.replace(jr,(K,Ee)=>{const J=B[Ee];return null!=J?String(J):`<${Ee}?>`})}(Ge,Ee):"Error";return new En(J,`${this.serviceName}: ${mt} (${J}).`,Ee)}}const jr=/\{\$([^}]+)}/g;function kt(z){return JSON.parse(z)}function dn(z){return JSON.stringify(z)}const os=function(z){let B={},K={},Ee={},J="";try{const Ge=z.split(".");B=kt(pe(Ge[0])||""),K=kt(pe(Ge[1])||""),J=Ge[2],Ee=K.d||{},delete K.d}catch{}return{header:B,claims:K,data:Ee,signature:J}},$r=function(z){const K=os(z).claims;return!!K&&"object"==typeof K&&K.hasOwnProperty("iat")},xs=function(z){const B=os(z).claims;return"object"==typeof B&&!0===B.admin};function Mi(z,B){return Object.prototype.hasOwnProperty.call(z,B)}function Qr(z,B){if(Object.prototype.hasOwnProperty.call(z,B))return z[B]}function di(z){for(const B in z)if(Object.prototype.hasOwnProperty.call(z,B))return!1;return!0}function Bo(z,B,K){const Ee={};for(const J in z)Object.prototype.hasOwnProperty.call(z,J)&&(Ee[J]=B.call(K,z[J],J,z));return Ee}function Qe(z,B){if(z===B)return!0;const K=Object.keys(z),Ee=Object.keys(B);for(const J of K){if(!Ee.includes(J))return!1;const Ge=z[J],mt=B[J];if(kr(Ge)&&kr(mt)){if(!Qe(Ge,mt))return!1}else if(Ge!==mt)return!1}for(const J of Ee)if(!K.includes(J))return!1;return!0}function kr(z){return null!==z&&"object"==typeof z}function nr(z){const B=[];for(const[K,Ee]of Object.entries(z))Array.isArray(Ee)?Ee.forEach(J=>{B.push(encodeURIComponent(K)+"="+encodeURIComponent(J))}):B.push(encodeURIComponent(K)+"="+encodeURIComponent(Ee));return B.length?"&"+B.join("&"):""}function hi(z){const B={};return z.replace(/^\?/,"").split("&").forEach(Ee=>{if(Ee){const[J,Ge]=Ee.split("=");B[decodeURIComponent(J)]=decodeURIComponent(Ge)}}),B}function Zi(z){const B=z.indexOf("?");if(!B)return"";const K=z.indexOf("#",B);return z.substring(B,K>0?K:void 0)}class kn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let B=1;B<this.blockSize;++B)this.pad_[B]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(B,K){K||(K=0);const Ee=this.W_;if("string"==typeof B)for(let $e=0;$e<16;$e++)Ee[$e]=B.charCodeAt(K)<<24|B.charCodeAt(K+1)<<16|B.charCodeAt(K+2)<<8|B.charCodeAt(K+3),K+=4;else for(let $e=0;$e<16;$e++)Ee[$e]=B[K]<<24|B[K+1]<<16|B[K+2]<<8|B[K+3],K+=4;for(let $e=16;$e<80;$e++){const Ut=Ee[$e-3]^Ee[$e-8]^Ee[$e-14]^Ee[$e-16];Ee[$e]=4294967295&(Ut<<1|Ut>>>31)}let Wt,Ve,J=this.chain_[0],Ge=this.chain_[1],mt=this.chain_[2],Qt=this.chain_[3],_n=this.chain_[4];for(let $e=0;$e<80;$e++){$e<40?$e<20?(Wt=Qt^Ge&(mt^Qt),Ve=1518500249):(Wt=Ge^mt^Qt,Ve=1859775393):$e<60?(Wt=Ge&mt|Qt&(Ge|mt),Ve=2400959708):(Wt=Ge^mt^Qt,Ve=3395469782);const Ut=(J<<5|J>>>27)+Wt+_n+Ve+Ee[$e]&4294967295;_n=Qt,Qt=mt,mt=4294967295&(Ge<<30|Ge>>>2),Ge=J,J=Ut}this.chain_[0]=this.chain_[0]+J&4294967295,this.chain_[1]=this.chain_[1]+Ge&4294967295,this.chain_[2]=this.chain_[2]+mt&4294967295,this.chain_[3]=this.chain_[3]+Qt&4294967295,this.chain_[4]=this.chain_[4]+_n&4294967295}update(B,K){if(null==B)return;void 0===K&&(K=B.length);const Ee=K-this.blockSize;let J=0;const Ge=this.buf_;let mt=this.inbuf_;for(;J<K;){if(0===mt)for(;J<=Ee;)this.compress_(B,J),J+=this.blockSize;if("string"==typeof B){for(;J<K;)if(Ge[mt]=B.charCodeAt(J),++mt,++J,mt===this.blockSize){this.compress_(Ge),mt=0;break}}else for(;J<K;)if(Ge[mt]=B[J],++mt,++J,mt===this.blockSize){this.compress_(Ge),mt=0;break}}this.inbuf_=mt,this.total_+=K}digest(){const B=[];let K=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let J=this.blockSize-1;J>=56;J--)this.buf_[J]=255&K,K/=256;this.compress_(this.buf_);let Ee=0;for(let J=0;J<5;J++)for(let Ge=24;Ge>=0;Ge-=8)B[Ee]=this.chain_[J]>>Ge&255,++Ee;return B}}function qn(z,B){const K=new vn(z,B);return K.subscribe.bind(K)}class vn{constructor(B,K){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=K,this.task.then(()=>{B(this)}).catch(Ee=>{this.error(Ee)})}next(B){this.forEachObserver(K=>{K.next(B)})}error(B){this.forEachObserver(K=>{K.error(B)}),this.close(B)}complete(){this.forEachObserver(B=>{B.complete()}),this.close()}subscribe(B,K,Ee){let J;if(void 0===B&&void 0===K&&void 0===Ee)throw new Error("Missing Observer.");J=function ft(z,B){if("object"!=typeof z||null===z)return!1;for(const K of B)if(K in z&&"function"==typeof z[K])return!0;return!1}(B,["next","error","complete"])?B:{next:B,error:K,complete:Ee},void 0===J.next&&(J.next=ln),void 0===J.error&&(J.error=ln),void 0===J.complete&&(J.complete=ln);const Ge=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?J.error(this.finalError):J.complete()}catch{}}),this.observers.push(J),Ge}unsubscribeOne(B){void 0===this.observers||void 0===this.observers[B]||(delete this.observers[B],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(B){if(!this.finalized)for(let K=0;K<this.observers.length;K++)this.sendOne(K,B)}sendOne(B,K){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[B])try{K(this.observers[B])}catch(Ee){typeof console<"u"&&console.error&&console.error(Ee)}})}close(B){this.finalized||(this.finalized=!0,void 0!==B&&(this.finalError=B),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ln(){}const gr=function(z,B,K,Ee){let J;if(Ee<B?J="at least "+B:Ee>K&&(J=0===K?"none":"no more than "+K),J)throw new Error(z+" failed: Was called with "+Ee+(1===Ee?" argument.":" arguments.")+" Expects "+J+".")};function jn(z,B){return`${z} failed: ${B} argument `}function St(z,B,K,Ee){if((!Ee||K)&&"function"!=typeof K)throw new Error(jn(z,B)+"must be a valid function.")}function as(z,B,K,Ee){if((!Ee||K)&&("object"!=typeof K||null===K))throw new Error(jn(z,B)+"must be a valid context object.")}const nn=function(z){const B=[];let K=0;for(let Ee=0;Ee<z.length;Ee++){let J=z.charCodeAt(Ee);if(J>=55296&&J<=56319){const Ge=J-55296;Ee++,te(Ee<z.length,"Surrogate pair missing trail surrogate."),J=65536+(Ge<<10)+(z.charCodeAt(Ee)-56320)}J<128?B[K++]=J:J<2048?(B[K++]=J>>6|192,B[K++]=63&J|128):J<65536?(B[K++]=J>>12|224,B[K++]=J>>6&63|128,B[K++]=63&J|128):(B[K++]=J>>18|240,B[K++]=J>>12&63|128,B[K++]=J>>6&63|128,B[K++]=63&J|128)}return B},Ri=function(z){let B=0;for(let K=0;K<z.length;K++){const Ee=z.charCodeAt(K);Ee<128?B++:Ee<2048?B+=2:Ee>=55296&&Ee<=56319?(B+=4,K++):B+=3}return B};function nt(z,B=1e3,K=2){const Ee=B*Math.pow(K,z),J=Math.round(.5*Ee*(Math.random()-.5)*2);return Math.min(144e5,Ee+J)}function Vt(z){return z&&z._delegate?z._delegate:z}},4896:(pt,Ae,L)=>{var d=L(4650);let te=null;function F(){return te}const le=new d.OlP("DocumentToken");let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function pe(){return(0,d.LFG)(G)}()},providedIn:"platform"}),n})();const $=new d.OlP("Location Initialized");let G=(()=>{class n extends he{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){Y()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){Y()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(le))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Le(){return new G((0,d.LFG)(le))}()},providedIn:"platform"}),n})();function Y(){return!!window.history.pushState}function Re(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function be(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ot(n){return n&&"?"!==n[0]?"?"+n:n}let ye=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(tt)},providedIn:"root"}),n})();const ge=new d.OlP("appBaseHref");let tt=(()=>{class n extends ye{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(le).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Re(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ot(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+ot(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+ot(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(he),d.LFG(ge,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),dt=(()=>{class n extends ye{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Re(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+ot(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+ot(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(he),d.LFG(ge,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Me=(()=>{class n{constructor(t){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=be(Be(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ot(r))}normalize(t){return n.stripTrailingSlash(function Ie(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Be(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ot(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ot(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=ot,n.joinWithSlash=Re,n.stripTrailingSlash=be,n.\u0275fac=function(t){return new(t||n)(d.LFG(ye))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function we(){return new Me((0,d.LFG)(ye))}()},providedIn:"root"}),n})();function Be(n){return n.replace(/\/index.html$/,"")}function Da(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}let Jt=(()=>{class n{constructor(t,r,i,a){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,d.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,d.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.ZZ4),d.Y36(d.aQg),d.Y36(d.SBq),d.Y36(d.Qsj))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class Ta{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Yi=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Ta(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===a?void 0:a);else if(null!==a){const h=r.get(a);r.move(h,l),Ps(h,i)}});for(let i=0,a=r.length;i<a;i++){const h=r.get(i).context;h.index=i,h.count=a,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Ps(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Ps(n,e){n.context.$implicit=e.item}let Pn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Ll,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){_r("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){_r("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Ll{constructor(){this.$implicit=null,this.ngIf=null}}function _r(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}let ud=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,a]=t.split("."),l=-1===i.indexOf("-")?void 0:d.JOm.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,a?`${r}${a}`:r,l):this._renderer.removeStyle(this._ngEl.nativeElement,i,l)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.aQg),d.Y36(d.Qsj))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),xa=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function Tr(n){return"server"===n}let Su=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new rf((0,d.LFG)(le),window)}),n})();class rf{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Or(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=pi(this.window.history)||pi(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function pi(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ao{}class co extends class _d extends class de{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function se(n){te||(te=n)}(new co)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ju(){return ho=ho||document.querySelector("base"),ho?ho.getAttribute("href"):null}();return null==t?null:function ti(n){or=or||document.createElement("a"),or.setAttribute("href",n);const e=or.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ho=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Da(document.cookie,e)}}let or,ho=null;const wn=new d.OlP("TRANSITION_ID"),ec=[{provide:d.ip1,useFactory:function yd(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=F(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[wn,le,d.zs3],multi:!0}];let tc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Hu=new d.OlP("EventManagerPlugins");let vd=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Hu),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class $u{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=F().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let fo=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Go=(()=>{class n extends fo{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(wd),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(wd))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(le))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function wd(n){F().remove(n)}const zo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Cd=/%COMP%/g;function Wu(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Wu(n,i,t):(i=i.replace(Cd,n),t.push(i))}return t}function Ed(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Wo=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new qo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new bd(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case d.ifc.ShadowDom:return new Id(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Wu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(vd),d.LFG(Go),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class qo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(zo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(La(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(La(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=zo[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=zo[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ed(r)):this.eventManager.addEventListener(e,t,Ed(r))}}function La(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class bd extends qo{constructor(e,t,r,i){super(e),this.component=r;const a=Wu(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function Vn(n){return"_ngcontent-%COMP%".replace(Cd,n)}(i+"-"+r.id),this.hostAttr=function zu(n){return"_nghost-%COMP%".replace(Cd,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Id extends qo{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Wu(i.id,i.styles,[]);for(let l=0;l<a.length;l++){const h=document.createElement("style");h.textContent=a[l],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let yr=(()=>{class n extends $u{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(le))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Va=["alt","control","meta","shift"],Ua={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Xi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ba=(()=>{class n extends $u{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),l="code."),Va.forEach(w=>{const D=r.indexOf(w);D>-1&&(r.splice(D,1),l+=w+".")}),l+=a,0!=r.length||0===a.length)return null;const _={};return _.domEventName=i,_.fullKey=l,_}static matchEventFullKeyCode(t,r){let i=Ua[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Va.forEach(l=>{l!==i&&(0,Xi[l])(t)&&(a+=l+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(le))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Yu=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function Zu(){co.makeCurrent()},multi:!0},{provide:le,useFactory:function Ha(){return(0,d.RDi)(document),document},deps:[]}]),Us=new d.OlP(""),Td=[{provide:d.rWj,useClass:class af{addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const h=function(_){l=l||_,a--,0==a&&r(l)};i.forEach(function(_){_.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],Bs=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function mo(){return new d.qLn},deps:[]},{provide:Hu,useClass:yr,multi:!0,deps:[le,d.R0b,d.Lbi]},{provide:Hu,useClass:Ba,multi:!0,deps:[le]},{provide:Wo,useClass:Wo,deps:[vd,Go,d.AFp]},{provide:d.FYo,useExisting:Wo},{provide:fo,useExisting:Go},{provide:Go,useClass:Go,deps:[le]},{provide:vd,useClass:vd,deps:[Hu,d.R0b]},{provide:ao,useClass:tc,deps:[]},[]];let rc=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:wn,useExisting:d.AFp},ec]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Us,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[...Bs,...Td],imports:[xa,d.hGG]}),n})(),gs=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(le))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Zo(){return new gs((0,d.LFG)(le))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var rn=L(8996),mi=L(7669);function at(...n){const e=(0,mi.yG)(n);return(0,rn.D)(n,e)}var _i=L(7579);class sn extends _i.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Wa=(0,L(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var wr=L(9751);const{isArray:Hs}=Array,{getPrototypeOf:tl,prototype:hg,keys:ac}=Object;function qa(n){if(1===n.length){const e=n[0];if(Hs(e))return{args:e,keys:null};if(function wo(n){return n&&"object"==typeof n&&tl(n)===hg}(e)){const t=ac(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var _s=L(4671),Je=L(4004);const{isArray:Za}=Array;function Ka(n){return(0,Je.U)(e=>function $s(n,e){return Za(e)?n(...e):n(e)}(n,e))}function ea(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var xn=L(5403),uc=L(9672);function ta(...n){const e=(0,mi.yG)(n),t=(0,mi.jO)(n),{args:r,keys:i}=qa(n);if(0===r.length)return(0,rn.D)([],e);const a=new wr.y(function fg(n,e,t=_s.y){return r=>{lc(e,()=>{const{length:i}=n,a=new Array(i);let l=i,h=i;for(let _=0;_<i;_++)lc(e,()=>{const w=(0,rn.D)(n[_],e);let D=!1;w.subscribe((0,xn.x)(r,S=>{a[_]=S,D||(D=!0,h--),h||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>ea(i,l):_s.y));return t?a.pipe(Ka(t)):a}function lc(n,e,t){n?(0,uc.f)(t,n,e):e()}var nl=L(8189);function Gs(...n){return function Ya(){return(0,nl.J)(1)}()((0,rn.D)(n,(0,mi.yG)(n)))}var ys=L(8421);function Fi(n){return new wr.y(e=>{(0,ys.Xf)(n()).subscribe(e)})}var cc=L(9635),na=L(576);function ri(n,e){const t=(0,na.m)(n)?n:()=>n,r=i=>i.error(t());return new wr.y(e?i=>e.schedule(r,0,i):r)}var vs=L(515),es=L(727),Yn=L(4482);function zs(){return(0,Yn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,xn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class ws extends wr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Yn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new es.w0;const t=this.getSubject();e.add(this.source.subscribe((0,xn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=es.w0.EMPTY)}return e}refCount(){return zs()(this)}}function Mn(n,e){return(0,Yn.e)((t,r)=>{let i=null,a=0,l=!1;const h=()=>l&&!i&&r.complete();t.subscribe((0,xn.x)(r,_=>{i?.unsubscribe();let w=0;const D=a++;(0,ys.Xf)(n(_,D)).subscribe(i=(0,xn.x)(r,S=>r.next(e?e(_,S,D,w++):S),()=>{i=null,h()}))},()=>{l=!0,h()}))})}function In(n){return n<=0?()=>vs.E:(0,Yn.e)((e,t)=>{let r=0;e.subscribe((0,xn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function rl(...n){const e=(0,mi.yG)(n);return(0,Yn.e)((t,r)=>{(e?Gs(n,t,e):Gs(n,t)).subscribe(r)})}function I(n,e){return(0,Yn.e)((t,r)=>{let i=0;t.subscribe((0,xn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var T=L(5577);function M(n){return(0,Yn.e)((e,t)=>{let r=!1;e.subscribe((0,xn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function U(n=Q){return(0,Yn.e)((e,t)=>{let r=!1;e.subscribe((0,xn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Q(){return new Wa}function ne(n,e){const t=arguments.length>=2;return r=>r.pipe(n?I((i,a)=>n(i,a,r)):_s.y,In(1),t?M(e):U(()=>new Wa))}function De(n,e){return(0,na.m)(e)?(0,T.z)(n,e,1):(0,T.z)(n,1)}var je=L(8505);function Xe(n){return(0,Yn.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,xn.x)(t,void 0,void 0,l=>{a=(0,ys.Xf)(n(l,Xe(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function ht(n,e,t,r,i){return(a,l)=>{let h=t,_=e,w=0;a.subscribe((0,xn.x)(l,D=>{const S=w++;_=h?n(_,D,S):(h=!0,D),r&&l.next(_)},i&&(()=>{h&&l.next(_),l.complete()})))}}function Rt(n,e){return(0,Yn.e)(ht(n,e,arguments.length>=2,!0))}function Et(n){return n<=0?()=>vs.E:(0,Yn.e)((e,t)=>{let r=[];e.subscribe((0,xn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Qn(n,e){const t=arguments.length>=2;return r=>r.pipe(n?I((i,a)=>n(i,a,r)):_s.y,Et(1),t?M(e):U(()=>new Wa))}function ia(n){return(0,Yn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Nt="primary",Gn=Symbol("RouteTitle");class ii{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Cs(n){return new ii(n)}function VC(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],h=n[a];if(l.startsWith(":"))i[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ws(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!cf(n[i],e[i]))return!1;return!0}function cf(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function gg(n){return Array.prototype.concat.apply([],n)}function mg(n){return n.length>0?n[n.length-1]:null}function ar(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ts(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,rn.D)(Promise.resolve(n)):at(n)}const UC={exact:function yg(n,e,t){if(!ol(n.segments,e.segments)||!il(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!yg(n.children[r],e.children[r],t))return!1;return!0},subset:pf},hf={exact:function my(n,e){return Ws(n,e)},subset:function ff(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>cf(n[t],e[t]))},ignored:()=>!0};function gy(n,e,t){return UC[t.paths](n.root,e.root,t.matrixParams)&&hf[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function pf(n,e,t){return _y(n,e,e.segments,t)}function _y(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!ol(i,t)||e.hasChildren()||!il(i,t,r))}if(n.segments.length===t.length){if(!ol(n.segments,t)||!il(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!pf(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(ol(n.segments,i)&&il(n.segments,i,r)&&n.children[Nt])&&_y(n.children[Nt],e,a,r)}}function il(n,e,t){return e.every((r,i)=>hf[t](n[i].parameters,r.parameters))}class sl{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Cs(this.queryParams)),this._queryParamMap}toString(){return xd.serialize(this)}}class zt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,ar(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return hc(this)}}class Ad{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Cs(this.parameters)),this._parameterMap}toString(){return mf(this)}}function ol(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let gf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return new dc},providedIn:"root"}),n})();class dc{parse(e){const t=new Co(e);return new sl(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${sa(e.root,!0)}`,r=function Ey(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${fc(t)}=${fc(i)}`).join("&"):`${fc(t)}=${fc(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function wy(n){return encodeURI(n)}(e.fragment)}`:""}`}}const xd=new dc;function hc(n){return n.segments.map(e=>mf(e)).join("/")}function sa(n,e){if(!n.hasChildren())return hc(n);if(e){const t=n.children[Nt]?sa(n.children[Nt],!1):"",r=[];return ar(n.children,(i,a)=>{a!==Nt&&r.push(`${a}:${sa(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function vy(n,e){let t=[];return ar(n.children,(r,i)=>{i===Nt&&(t=t.concat(e(r,i)))}),ar(n.children,(r,i)=>{i!==Nt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Nt?[sa(n.children[Nt],!1)]:[`${i}:${sa(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Nt]?`${hc(n)}/${t[0]}`:`${hc(n)}/(${t.join("//")})`}}function Es(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function fc(n){return Es(n).replace(/%3B/gi,";")}function pc(n){return Es(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function gc(n){return decodeURIComponent(n)}function mc(n){return gc(n.replace(/\+/g,"%20"))}function mf(n){return`${pc(n.path)}${function Cy(n){return Object.keys(n).map(e=>`;${pc(e)}=${pc(n[e])}`).join("")}(n.parameters)}`}const vg=/^[^\/()?;=#]+/;function Md(n){const e=n.match(vg);return e?e[0]:""}const by=/^[^=?&#]+/,_f=/^[^&#]+/;class Co{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new zt([],{}):new zt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Nt]=new zt(e,t)),r}parseSegment(){const e=Md(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.vHH(4009,!1);return this.capture(e),new Ad(gc(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Md(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Md(this.remaining);i&&(r=i,this.capture(r))}e[gc(t)]=gc(r)}parseQueryParam(e){const t=function Wr(n){const e=n.match(by);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function Iy(n){const e=n.match(_f);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=mc(t),a=mc(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Md(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new d.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Nt);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[Nt]:new zt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.vHH(4011,!1)}}function Sr(n){return n.segments.length>0?new zt([],{[Nt]:n}):n}function oa(n){const e={};for(const r of Object.keys(n.children)){const a=oa(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function Rd(n){if(1===n.numberOfChildren&&n.children[Nt]){const e=n.children[Nt];return new zt(n.segments.concat(e.segments),e.children)}return n}(new zt(n.segments,e))}function Qa(n){return n instanceof sl}function Sy(n,e,t,r,i){if(0===t.length)return ul(e.root,e.root,e.root,r,i);const a=function wg(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Pd(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return ar(a.outlets,(_,w)=>{h[w]="string"==typeof _?_.split("/"):_}),[...i,{outlets:h}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((h,_)=>{0==_&&"."===h||(0==_&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,a]},[]);return new Pd(t,e,r)}(t);return a.toRoot()?ul(e.root,e.root,new zt([],{}),r,i):function l(_){const w=function eu(n,e,t,r){if(n.isAbsolute)return new Xa(e.root,!0,0);if(-1===r)return new Xa(t,t===e.root,0);return function Eg(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new d.vHH(4005,!1);i=r.segments.length}return new Xa(r,!1,i-a)}(t,r+(al(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,_),D=w.processChildren?Eo(w.segmentGroup,w.index,a.commands):tu(w.segmentGroup,w.index,a.commands);return ul(e.root,w.segmentGroup,D,r,i)}(n.snapshot?._lastPathIndex)}function al(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ja(n){return"object"==typeof n&&null!=n&&n.outlets}function ul(n,e,t,r,i){let l,a={};r&&ar(r,(_,w)=>{a[w]=Array.isArray(_)?_.map(D=>`${D}`):`${_}`}),l=n===e?t:kd(n,e,t);const h=Sr(oa(l));return new sl(h,a,i)}function kd(n,e,t){const r={};return ar(n.children,(i,a)=>{r[a]=i===e?t:kd(i,e,t)}),new zt(n.segments,r)}class Pd{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&al(r[0]))throw new d.vHH(4003,!1);const i=r.find(Ja);if(i&&i!==mg(r))throw new d.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Xa{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function tu(n,e,t){if(n||(n=new zt([],{})),0===n.segments.length&&n.hasChildren())return Eo(n,e,t);const r=function bg(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],h=t[r];if(Ja(h))break;const _=`${h}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&w&&"object"==typeof w&&void 0===w.outlets){if(!yf(_,w,l))return a;r+=2}else{if(!yf(_,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new zt(n.segments.slice(0,r.pathIndex),{});return a.children[Nt]=new zt(n.segments.slice(r.pathIndex),n.children),Eo(a,0,i)}return r.match&&0===i.length?new zt(n.segments,{}):r.match&&!n.hasChildren()?Ig(n,e,t):r.match?Eo(n,0,i):Ig(n,e,t)}function Eo(n,e,t){if(0===t.length)return new zt(n.segments,{});{const r=function Ay(n){return Ja(n[0])?n[0].outlets:{[Nt]:n}}(t),i={};return ar(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=tu(n.children[l],e,a))}),ar(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new zt(n.segments,i)}}function Ig(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Ja(a)){const _=bo(a.outlets);return new zt(r,_)}if(0===i&&al(t[0])){r.push(new Ad(n.segments[e].path,Od(t[0]))),i++;continue}const l=Ja(a)?a.outlets[Nt]:`${a}`,h=i<t.length-1?t[i+1]:null;l&&h&&al(h)?(r.push(new Ad(l,Od(h))),i+=2):(r.push(new Ad(l,{})),i++)}return new zt(r,{})}function bo(n){const e={};return ar(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Ig(new zt([],{}),0,t))}),e}function Od(n){const e={};return ar(n,(t,r)=>e[r]=`${t}`),e}function yf(n,e,t){return n==t.path&&Ws(e,t.parameters)}class Io{constructor(e,t){this.id=e,this.url=t}}class ll extends Io{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class nu extends Io{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Fd extends Io{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Dg extends Io{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class xy extends Io{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yc extends Io{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class My extends Io{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class vf extends Io{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wf extends Io{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Tg{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Cf{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ry{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sg{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ld{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vd{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Do{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class vc{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Ef(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Ef(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=yi(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return yi(e,this._root).map(t=>t.value)}}function Ef(n,e){if(n===e.value)return e;for(const t of e.children){const r=Ef(n,t);if(r)return r}return null}function yi(n,e){if(n===e.value)return[e];for(const t of e.children){const r=yi(n,t);if(r.length)return r.unshift(e),r}return[]}class qr{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ru(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class bf extends vc{constructor(e,t){super(e),this.snapshot=t,Cc(this,e)}toString(){return this.snapshot.toString()}}function wc(n,e){const t=function Ud(n,e){const l=new vi([],{},{},"",{},Nt,e,null,n.root,-1,{});return new Hd("",new qr(l,[]))}(n,e),r=new sn([new Ad("",{})]),i=new sn({}),a=new sn({}),l=new sn({}),h=new sn(""),_=new To(r,i,l,h,a,Nt,e,t.root);return _.snapshot=t.root,new bf(new qr(_,[]),t)}class To{constructor(e,t,r,i,a,l,h,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this.title=this.data?.pipe((0,Je.U)(w=>w[Gn]))??at(void 0),this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Je.U)(e=>Cs(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Je.U)(e=>Cs(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Bd(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function jd(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class vi{constructor(e,t,r,i,a,l,h,_,w,D,S,R){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this.title=this.data?.[Gn],this.routeConfig=_,this._urlSegment=w,this._lastPathIndex=D,this._correctedLastPathIndex=R??D,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Cs(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Cs(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Hd extends vc{constructor(e,t){super(t),this.url=e,Cc(this,t)}toString(){return $d(this._root)}}function Cc(n,e){e.value._routerState=n,e.children.forEach(t=>Cc(n,t))}function $d(n){const e=n.children.length>0?` { ${n.children.map($d).join(", ")} } `:"";return`${n.value}${e}`}function Ec(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ws(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ws(e.params,t.params)||n.params.next(t.params),function pg(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ws(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ws(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function aa(n,e){const t=Ws(n.params,e.params)&&function yy(n,e){return ol(n,e)&&n.every((t,r)=>Ws(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||aa(n.parent,e.parent))}function ua(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function If(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ua(n,r,i);return ua(n,r)})}(n,e,t);return new qr(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(h=>ua(n,h)),l}}const r=function Ny(n){return new To(new sn(n.url),new sn(n.params),new sn(n.queryParams),new sn(n.fragment),new sn(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>ua(n,a));return new qr(r,i)}}const ns="ngNavigationCancelingError";function la(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Qa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=cl(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function cl(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[ns]=!0,r.cancellationCode=e,t&&(r.url=t),r}function bc(n){return ca(n)&&Qa(n.url)}function ca(n){return n&&n[ns]}class Df{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Ic,this.attachRef=null}}let Ic=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Df,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Tf=!1;let Gd=(()=>{class n{constructor(t,r,i,a,l){this.parentContexts=t,this.location=r,this.changeDetector=a,this.environmentInjector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.name=i||Nt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,Tf);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,Tf);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,Tf);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new d.vHH(4013,Tf);this._activatedRoute=t;const i=this.location,l=t._futureSnapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,_=new Sf(t,h,i.injector);if(r&&function y(n){return!!n.resolveComponentFactory}(r)){const w=r.resolveComponentFactory(l);this.activated=i.createComponent(w,i.length,_)}else this.activated=i.createComponent(l,{index:i.length,injector:_,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ic),d.Y36(d.s_b),d.$8M("name"),d.Y36(d.sBO),d.Y36(d.lqb))},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class Sf{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===To?this.route:e===Ic?this.childContexts:this.parent.get(e,t)}}let p=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[Gd],encapsulation:2}),n})();function m(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function _t(n){const e=n.children&&n.children.map(_t),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Nt&&(t.component=p),t}function hn(n){return n.outlet||Nt}function Cr(n,e){const t=n.filter(r=>hn(r)===e);return t.push(...n.filter(r=>hn(r)!==e)),t}function rs(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Mg{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Ec(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=ru(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),ar(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=ru(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=ru(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=ru(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new Vd(a.value.snapshot))}),e.children.length&&this.forwardEvent(new Sg(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(Ec(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),Ec(h.route.value),this.activateChildRoutes(e,null,l.children)}else{const h=rs(i.snapshot),_=h?.get(d._Vd)??null;l.attachRef=null,l.route=i,l.resolver=_,l.injector=h,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class Rg{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class zd{constructor(e,t){this.component=e,this.route=t}}function Ng(n,e,t){const r=n._root;return iu(r,e?e._root:null,t,[r.value])}function da(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,d.Z0I)(n)?e.get(n):n:r}function iu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=ru(e);return n.children.forEach(l=>{(function kg(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const _=function Py(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ol(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ol(n.url,e.url)||!Ws(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!aa(n,e)||!Ws(n.queryParams,e.queryParams);default:return!aa(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new Rg(r)):(a.data=l.data,a._resolvedData=l._resolvedData),iu(n,e,a.component?h?h.children:null:t,r,i),_&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new zd(h.outlet.component,l))}else l&&su(e,h,i),i.canActivateChecks.push(new Rg(r)),iu(n,null,a.component?h?h.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),ar(a,(l,h)=>su(l,t.getContext(h),i)),i}function su(n,e,t){const r=ru(n),i=n.value;ar(r,(a,l)=>{su(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new zd(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function ou(n){return"function"==typeof n}function xf(n){return n instanceof Wa||"EmptyError"===n?.name}const Wd=Symbol("INITIAL_VALUE");function Mf(){return Mn(n=>ta(n.map(e=>e.pipe(In(1),rl(Wd)))).pipe((0,Je.U)(e=>{for(const t of e)if(!0!==t){if(t===Wd)return Wd;if(!1===t||t instanceof sl)return t}return!0}),I(e=>e!==Wd),In(1)))}function Og(n){return(0,cc.z)((0,je.b)(e=>{if(Qa(e))throw la(0,e)}),(0,Je.U)(e=>!0===e))}const ur={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function zC(n,e,t,r,i){const a=Oy(n,e,t);return a.matched?function yS(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?at(i.map(l=>{const h=da(l,n);return ts(function Ck(n){return n&&ou(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))})).pipe(Mf(),Og()):at(!0)}(r=m(e,r),e,t).pipe((0,Je.U)(l=>!0===l?a:{...ur})):at(a)}function Oy(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...ur}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||VC)(t,n,e);if(!i)return{...ur};const a={};ar(i.posParams,(h,_)=>{a[_]=h.path});const l=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function qd(n,e,t,r,i="corrected"){if(t.length>0&&function wS(n,e,t){return t.some(r=>Fg(n,e,r)&&hn(r)!==Nt)}(n,t,r)){const l=new zt(e,function vS(n,e,t,r){const i={};i[Nt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&hn(a)!==Nt){const l=new zt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[hn(a)]=l}return i}(n,e,r,new zt(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function CS(n,e,t){return t.some(r=>Fg(n,e,r))}(n,t,r)){const l=new zt(n.segments,function WC(n,e,t,r,i,a){const l={};for(const h of r)if(Fg(n,t,h)&&!i[hn(h)]){const _=new zt([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===a?n.segments.length:e.length,l[hn(h)]=_}return{...i,...l}}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const a=new zt(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function Fg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function qC(n,e,t,r){return!!(hn(n)===r||r!==Nt&&Fg(e,t,n))&&("**"===n.path||Oy(e,n,t).matched)}function ES(n,e,t){return 0===e.length&&!n.children[t]}const Fy=!1;class dl{constructor(e){this.segmentGroup=e||null}}class Lg{constructor(e){this.urlTree=e}}function Zd(n){return ri(new dl(n))}function Ly(n){return ri(new Lg(n))}class YC{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=qd(this.urlTree.root,[],[],this.config).segmentGroup,t=new zt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Nt).pipe((0,Je.U)(a=>this.createUrlTree(oa(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Xe(a=>{if(a instanceof Lg)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof dl?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Nt).pipe((0,Je.U)(i=>this.createUrlTree(oa(i),e.queryParams,e.fragment))).pipe(Xe(i=>{throw i instanceof dl?this.noMatchError(i):i}))}noMatchError(e){return new d.vHH(4002,Fy)}createUrlTree(e,t,r){const i=Sr(e);return new sl(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Je.U)(a=>new zt([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,rn.D)(i).pipe(De(a=>{const l=r.children[a],h=Cr(t,a);return this.expandSegmentGroup(e,h,l,a).pipe((0,Je.U)(_=>({segment:_,outlet:a})))}),Rt((a,l)=>(a[l.outlet]=l.segment,a),{}),Qn())}expandSegment(e,t,r,i,a,l){return(0,rn.D)(r).pipe(De(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,a,l).pipe(Xe(w=>{if(w instanceof dl)return at(null);throw w}))),ne(h=>!!h),Xe((h,_)=>{if(xf(h))return ES(t,i,a)?at(new zt([],{})):Zd(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,a,l,h){return qC(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):Zd(t):Zd(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Ly(a):this.lineralizeSegments(r,a).pipe((0,T.z)(l=>{const h=new zt(l,{});return this.expandSegment(e,h,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:h,consumedSegments:_,remainingSegments:w,positionalParamSegments:D}=Oy(t,i,a);if(!h)return Zd(t);const S=this.applyRedirectCommands(_,i.redirectTo,D);return i.redirectTo.startsWith("/")?Ly(S):this.lineralizeSegments(i,S).pipe((0,T.z)(R=>this.expandSegment(e,t,r,R.concat(w),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=m(r,e),r.loadChildren?(r._loadedRoutes?at({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,Je.U)(h=>(r._loadedRoutes=h.routes,r._loadedInjector=h.injector,new zt(i,{})))):at(new zt(i,{}))):zC(t,r,i,e).pipe(Mn(({matched:l,consumedSegments:h,remainingSegments:_})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,T.z)(D=>{const S=D.injector??e,R=D.routes,{segmentGroup:V,slicedSegments:j}=qd(t,h,_,R),ae=new zt(V.segments,V.children);if(0===j.length&&ae.hasChildren())return this.expandChildren(S,R,ae).pipe((0,Je.U)(rt=>new zt(h,rt)));if(0===R.length&&0===j.length)return at(new zt(h,{}));const ve=hn(r)===a;return this.expandSegment(S,ae,R,j,ve?Nt:a,!0).pipe((0,Je.U)(lt=>new zt(h.concat(lt.segments),lt.children)))})):Zd(t)))}getChildConfig(e,t,r){return t.children?at({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?at({routes:t._loadedRoutes,injector:t._loadedInjector}):function _S(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?at(!0):at(i.map(l=>{const h=da(l,n);return ts(function Af(n){return n&&ou(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))})).pipe(Mf(),Og())}(e,t,r).pipe((0,T.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,je.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function bS(n){return ri(cl(Fy,3))}())):at({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return at(r);if(i.numberOfChildren>1||!i.children[Nt])return ri(new d.vHH(4e3,Fy));i=i.children[Nt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new sl(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return ar(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[a]=t[h]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return ar(t.children,(h,_)=>{l[_]=this.createSegmentGroup(e,h,r,i)}),new zt(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new d.vHH(4001,Fy);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class IS{}class JC{constructor(e,t,r,i,a,l,h,_){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=h,this.urlSerializer=_}recognize(){const e=qd(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Nt).pipe((0,Je.U)(t=>{if(null===t)return null;const r=new vi([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Nt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new qr(r,t),a=new Hd(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=Bd(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,rn.D)(Object.keys(r.children)).pipe(De(i=>{const a=r.children[i],l=Cr(t,i);return this.processSegmentGroup(e,l,a,i)}),Rt((i,a)=>i&&a?(i.push(...a),i):null),function $n(n,e=!1){return(0,Yn.e)((t,r)=>{let i=0;t.subscribe((0,xn.x)(r,a=>{const l=n(a,i++);(l||e)&&r.next(a),!l&&r.complete()}))})}(i=>null!==i),M(null),Qn(),(0,Je.U)(i=>{if(null===i)return null;const a=Rf(i);return function Dc(n){n.sort((e,t)=>e.value.outlet===Nt?-1:t.value.outlet===Nt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,rn.D)(t).pipe(De(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,a)),ne(l=>!!l),Xe(l=>{if(xf(l))return ES(r,i,a)?at([]):at(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!qC(t,r,i,a))return at(null);let l;if("**"===t.path){const h=i.length>0?mg(i).parameters:{},_=Nf(r)+i.length;l=at({snapshot:new vi(i,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Hy(t),hn(t),t.component??t._loadedComponent??null,t,Vg(r),_,Ug(t),_),consumedSegments:[],remainingSegments:[]})}else l=zC(r,t,i,e).pipe((0,Je.U)(({matched:h,consumedSegments:_,remainingSegments:w,parameters:D})=>{if(!h)return null;const S=Nf(r)+_.length;return{snapshot:new vi(_,D,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Hy(t),hn(t),t.component??t._loadedComponent??null,t,Vg(r),S,Ug(t),S),consumedSegments:_,remainingSegments:w}}));return l.pipe(Mn(h=>{if(null===h)return at(null);const{snapshot:_,consumedSegments:w,remainingSegments:D}=h;e=t._injector??e;const S=t._loadedInjector??e,R=function DS(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:V,slicedSegments:j}=qd(r,w,D,R.filter(ve=>void 0===ve.redirectTo),this.relativeLinkResolution);if(0===j.length&&V.hasChildren())return this.processChildren(S,R,V).pipe((0,Je.U)(ve=>null===ve?null:[new qr(_,ve)]));if(0===R.length&&0===j.length)return at([new qr(_,[])]);const ae=hn(t)===a;return this.processSegment(S,R,V,j,ae?Nt:a).pipe((0,Je.U)(ve=>null===ve?null:[new qr(_,ve)]))}))}}function jy(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Rf(n){const e=[],t=new Set;for(const r of n){if(!jy(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Rf(r.children);e.push(new qr(r.value,i))}return e.filter(r=>!t.has(r))}function Vg(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Nf(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Hy(n){return n.data||{}}function Ug(n){return n.resolve||{}}function eE(n){return"string"==typeof n.title||null===n.title}function $y(n){return Mn(e=>{const t=n(e);return t?(0,rn.D)(t).pipe((0,Je.U)(()=>e)):at(e)})}let Bg=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===Nt);return r}getResolvedTitleForRoute(t){return t.data[Gn]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(tE)},providedIn:"root"}),n})(),tE=(()=>{class n extends Bg{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(gs))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class NS{}class Ik extends class nE{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const fl=new d.OlP("",{providedIn:"root",factory:()=>({})}),pl=new d.OlP("ROUTES");let Tc=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return at(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=ts(t.loadComponent()).pipe((0,je.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),ia(()=>{this.componentLoaders.delete(t)})),i=new ws(r,()=>new _i.x).pipe(zs());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return at({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,Je.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);let _,w,D=!1;Array.isArray(h)?w=h:(_=h.create(t).injector,w=gg(_.get(pl,[],d.XFs.Self|d.XFs.Optional)));return{routes:w.map(_t),injector:_}}),ia(()=>{this.childrenLoaders.delete(r)})),l=new ws(a,()=>new _i.x).pipe(zs());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return ts(t()).pipe((0,T.z)(r=>r instanceof d.YKP||Array.isArray(r)?at(r):(0,rn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3),d.LFG(d.Sil))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class PS{}class Dk{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function OS(n){throw n}function FS(n,e,t){return e.parse("/")}const LS={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},iE={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function jg(){const n=(0,d.f3M)(gf),e=(0,d.f3M)(Ic),t=(0,d.f3M)(Me),r=(0,d.f3M)(d.zs3),i=(0,d.f3M)(d.Sil),a=(0,d.f3M)(pl,{optional:!0})??[],l=(0,d.f3M)(fl,{optional:!0})??{},h=(0,d.f3M)(tE),_=(0,d.f3M)(Bg,{optional:!0}),w=(0,d.f3M)(PS,{optional:!0}),D=(0,d.f3M)(NS,{optional:!0}),S=new Jn(null,n,e,t,r,i,gg(a));return w&&(S.urlHandlingStrategy=w),D&&(S.routeReuseStrategy=D),S.titleStrategy=_??h,function sE(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,S),S}let Jn=(()=>{class n{constructor(t,r,i,a,l,h,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new _i.x,this.errorHandler=OS,this.malformedUriErrorHandler=FS,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>at(void 0),this.urlHandlingStrategy=new Dk,this.routeReuseStrategy=new Ik,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=l.get(Tc),this.configLoader.onLoadEndListener=R=>this.triggerEvent(new Cf(R)),this.configLoader.onLoadStartListener=R=>this.triggerEvent(new Tg(R)),this.ngModule=l.get(d.h0i),this.console=l.get(d.c2e);const S=l.get(d.R0b);this.isNgZoneEnabled=S instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function _g(){return new sl(new zt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=wc(this.currentUrlTree,this.rootComponentType),this.transitions=new sn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(I(i=>0!==i.id),(0,Je.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Mn(i=>{let a=!1,l=!1;return at(i).pipe((0,je.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.rawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Mn(h=>{const _=this.browserUrlTree.toString(),w=!this.navigated||h.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||w)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return Hg(h.source)&&(this.browserUrlTree=h.extractedUrl),at(h).pipe(Mn(S=>{const R=this.transitions.getValue();return r.next(new ll(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),R!==this.transitions.getValue()?vs.E:Promise.resolve(S)}),function Vy(n,e,t,r){return Mn(i=>function KC(n,e,t,r,i){return new YC(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Je.U)(a=>({...i,urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,je.b)(S=>{this.currentNavigation={...this.currentNavigation,finalUrl:S.urlAfterRedirects},i.urlAfterRedirects=S.urlAfterRedirects}),function SS(n,e,t,r,i,a){return(0,T.z)(l=>function QC(n,e,t,r,i,a,l="emptyOnly",h="legacy"){return new JC(n,e,t,r,i,l,h,a).recognize().pipe(Mn(_=>null===_?function By(n){return new wr.y(e=>e.error(n))}(new IS):at(_)))}(n,e,t,l.urlAfterRedirects,r.serialize(l.urlAfterRedirects),r,i,a).pipe((0,Je.U)(h=>({...l,targetSnapshot:h}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,je.b)(S=>{if(i.targetSnapshot=S.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const V=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(V,S)}this.browserUrlTree=S.urlAfterRedirects}const R=new xy(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(R)}));if(w&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:R,extractedUrl:V,source:j,restoredState:ae,extras:ve}=h,qe=new ll(R,this.serializeUrl(V),j,ae);r.next(qe);const lt=wc(V,this.rootComponentType).snapshot;return at(i={...h,targetSnapshot:lt,urlAfterRedirects:V,extras:{...ve,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=h.rawUrl,h.resolve(null),vs.E}),(0,je.b)(h=>{const _=new yc(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(_)}),(0,Je.U)(h=>i={...h,guards:Ng(h.targetSnapshot,h.currentSnapshot,this.rootContexts)}),function bk(n,e){return(0,T.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?at({...t,guardsResult:!0}):function $C(n,e,t,r){return(0,rn.D)(n).pipe((0,T.z)(i=>function Pg(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?at(a.map(h=>{const _=rs(e)??i,w=da(h,_);return ts(function HC(n){return n&&ou(n.canDeactivate)}(w)?w.canDeactivate(n,e,t,r):_.runInContext(()=>w(n,e,t,r))).pipe(ne())})).pipe(Mf()):at(!0)}(i.component,i.route,t,e,r)),ne(i=>!0!==i,!0))}(l,r,i,n).pipe((0,T.z)(h=>h&&function au(n){return"boolean"==typeof n}(h)?function fS(n,e,t,r){return(0,rn.D)(e).pipe(De(i=>Gs(function gS(n,e){return null!==n&&e&&e(new Ry(n)),at(!0)}(i.route.parent,r),function pS(n,e){return null!==n&&e&&e(new Ld(n)),at(!0)}(i.route,r),function GC(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function ky(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Fi(()=>at(l.guards.map(_=>{const w=rs(l.node)??t,D=da(_,w);return ts(function jC(n){return n&&ou(n.canActivateChild)}(D)?D.canActivateChild(r,n):w.runInContext(()=>D(r,n))).pipe(ne())})).pipe(Mf())));return at(a).pipe(Mf())}(n,i.path,t),function mS(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return at(!0);const i=r.map(a=>Fi(()=>{const l=rs(e)??t,h=da(a,l);return ts(function BC(n){return n&&ou(n.canActivate)}(h)?h.canActivate(e,n):l.runInContext(()=>h(e,n))).pipe(ne())}));return at(i).pipe(Mf())}(n,i.route,t))),ne(i=>!0!==i,!0))}(r,a,n,e):at(h)),(0,Je.U)(h=>({...t,guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,je.b)(h=>{if(i.guardsResult=h.guardsResult,Qa(h.guardsResult))throw la(0,h.guardsResult);const _=new My(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(_)}),I(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,"",3),!1)),$y(h=>{if(h.guards.canActivateChecks.length)return at(h).pipe((0,je.b)(_=>{const w=new vf(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}),Mn(_=>{let w=!1;return at(_).pipe(function AS(n,e){return(0,T.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return at(t);let a=0;return(0,rn.D)(i).pipe(De(l=>function XC(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!eE(i)&&(a[Gn]=i.title),function Kd(n,e,t,r){const i=function xS(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return at({});const a={};return(0,rn.D)(i).pipe((0,T.z)(l=>function MS(n,e,t,r){const i=rs(e)??r,a=da(n,i);return ts(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[l],e,t,r).pipe(ne(),(0,je.b)(h=>{a[l]=h}))),Et(1),function ra(n){return(0,Je.U)(()=>n)}(a),Xe(l=>xf(l)?vs.E:ri(l)))}(a,n,e,r).pipe((0,Je.U)(l=>(n._resolvedData=l,n.data=Bd(n,t).resolve,i&&eE(i)&&(n.data[Gn]=i.title),null)))}(l.route,r,n,e)),(0,je.b)(()=>a++),Et(1),(0,T.z)(l=>a===i.length?at(t):vs.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,je.b)({next:()=>w=!0,complete:()=>{w||(this.restoreHistory(_),this.cancelNavigationTransition(_,"",2))}}))}),(0,je.b)(_=>{const w=new wf(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}))}),$y(h=>{const _=w=>{const D=[];w.routeConfig?.loadComponent&&!w.routeConfig._loadedComponent&&D.push(this.configLoader.loadComponent(w.routeConfig).pipe((0,je.b)(S=>{w.component=S}),(0,Je.U)(()=>{})));for(const S of w.children)D.push(..._(S));return D};return ta(_(h.targetSnapshot.root)).pipe(M(),In(1))}),$y(()=>this.afterPreactivation()),(0,Je.U)(h=>{const _=function wi(n,e,t){const r=ua(n,e._root,t?t._root:void 0);return new bf(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return i={...h,targetRouterState:_}}),(0,je.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,Je.U)(r=>(new Mg(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,je.b)({next(){a=!0},complete(){a=!0}}),ia(()=>{a||l||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Xe(h=>{if(l=!0,ca(h)){bc(h)||(this.navigated=!0,this.restoreHistory(i,!0));const _=new Fd(i.id,this.serializeUrl(i.extractedUrl),h.message,h.cancellationCode);if(r.next(_),bc(h)){const w=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),D={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Hg(i.source)};this.scheduleNavigation(w,"imperative",null,D,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new Dg(i.id,this.serializeUrl(i.extractedUrl),h,i.targetSnapshot??void 0);r.next(_);try{i.resolve(this.errorHandler(h))}catch(w){i.reject(w)}}return vs.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},a=t.state?.navigationId?t.state:null;if(a){const h={...a};delete h.navigationId,delete h.\u0275routerPageId,0!==Object.keys(h).length&&(i.state=h)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,a,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(_t),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:h,preserveFragment:_}=r,w=i||this.routerState.root,D=_?this.currentUrlTree.fragment:l;let S=null;switch(h){case"merge":S={...this.currentUrlTree.queryParams,...a};break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=a||null}return null!==S&&(S=this.removeEmptyProps(S)),Sy(w,this.currentUrlTree,t,S,D??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Qa(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function VS(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new d.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...LS}:!1===r?{...iE}:r,Qa(t))return gy(this.currentUrlTree,t,i);const a=this.parseUrl(t);return gy(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new nu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,l){if(this.disposed)return Promise.resolve(!1);let h,_,w;l?(h=l.resolve,_=l.reject,w=l.promise):w=new Promise((R,V)=>{h=R,_=V});const D=++this.navigationId;let S;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),S=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):S=0,this.setTransition({id:D,targetPageId:S,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:h,reject:_,promise:w,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),w.catch(R=>Promise.reject(R))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const a=new Fd(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:function(){return jg()},providedIn:"root"}),n})();function Hg(n){return"imperative"!==n}let Sc=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=l,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new _i.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,d.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,d.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,d.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Jn),d.Y36(To),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&d.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[d.TTD]}),n})(),$g=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new _i.x,this.subscription=t.events.subscribe(a=>{a instanceof nu&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,d.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,d.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,d.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,a,l){return!!(0!==t||r||i||a||l||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Jn),d.Y36(To),d.Y36(ye))},n.\u0275dir=d.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&d.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&d.uIk("target",r.target)("href",r.href,d.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[d.TTD]}),n})(),oE=(()=>{class n{constructor(t,r,i,a,l,h){this.router=t,this.element=r,this.renderer=i,this.cdr=a,this.link=l,this.linkWithHref=h,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new d.vpe,this.routerEventsSubscription=t.events.subscribe(_=>{_ instanceof nu&&this.update()})}ngAfterContentInit(){at(this.links.changes,this.linksWithHrefs.changes,at(null)).pipe((0,nl.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,rn.D)(t).pipe((0,nl.J)()).subscribe(r=>{this.isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function US(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Jn),d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.sBO),d.Y36(Sc,8),d.Y36($g,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,i){if(1&t&&(d.Suo(i,Sc,5),d.Suo(i,$g,5)),2&t){let a;d.iGM(a=d.CRH())&&(r.links=a),d.iGM(a=d.CRH())&&(r.linksWithHrefs=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[d.TTD]}),n})();class aE{}let BS=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(I(t=>t instanceof nu),De(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,d.MMx)(a.providers,t,`Route: ${a.path}`));const l=a._injector??t,h=a._loadedInjector??l;a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(l,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(h,a.children??a._loadedRoutes))}return(0,rn.D)(i).pipe((0,nl.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):at(null);const a=i.pipe((0,T.z)(l=>null===l?at(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,rn.D)([a,l]).pipe((0,nl.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Jn),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(aE),d.LFG(Tc))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const gl=new d.OlP("");let ha=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ll?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof nu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Do&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Do(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Pf(n,e){return{\u0275kind:n,\u0275providers:e}}function zg(n){return[{provide:pl,multi:!0,useValue:n}]}function Gy(){const n=(0,d.f3M)(d.zs3);return e=>{const t=n.get(d.z2F);if(e!==t.components[0])return;const r=n.get(Jn),i=n.get(HS);1===n.get(Wg)&&r.initialNavigation(),n.get(lE,null,d.XFs.Optional)?.setUpPreloading(),n.get(gl,null,d.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const HS=new d.OlP("",{factory:()=>new _i.x}),Wg=new d.OlP("",{providedIn:"root",factory:()=>1});const lE=new d.OlP("");function So(n){return Pf(0,[{provide:lE,useExisting:BS},{provide:aE,useExisting:n}])}const cE=new d.OlP("ROUTER_FORROOT_GUARD"),zS=[Me,{provide:gf,useClass:dc},{provide:Jn,useFactory:jg},Ic,{provide:To,useFactory:function jS(n){return n.routerState.root},deps:[Jn]},Tc];function WS(){return new d.PXZ("Router",Jn)}let zy=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[zS,[],zg(t),{provide:cE,useFactory:Ft,deps:[[Jn,new d.FiY,new d.tp0]]},{provide:fl,useValue:r||{}},r?.useHash?{provide:ye,useClass:dt}:{provide:ye,useClass:tt},{provide:gl,useFactory:()=>{const n=(0,d.f3M)(Jn),e=(0,d.f3M)(Su),t=(0,d.f3M)(fl);return t.scrollOffset&&e.setOffset(t.scrollOffset),new ha(n,e,t)}},r?.preloadingStrategy?So(r.preloadingStrategy).\u0275providers:[],{provide:d.PXZ,multi:!0,useFactory:WS},r?.initialNavigation?dE(r):[],[{provide:Wy,useFactory:Gy},{provide:d.tb,multi:!0,useExisting:Wy}]]}}static forChild(t){return{ngModule:n,providers:[zg(t)]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(cE,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[p]}),n})();function Ft(n){return"guarded"}function dE(n){return["disabled"===n.initialNavigation?Pf(3,[{provide:d.ip1,multi:!0,useFactory:()=>{const e=(0,d.f3M)(Jn);return()=>{e.setUpLocationChangeListener()}}},{provide:Wg,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Pf(2,[{provide:Wg,useValue:0},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:e=>{const t=e.get($,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(a=>{const l=e.get(Jn),h=e.get(HS);(function i(a){e.get(Jn).events.pipe(I(h=>h instanceof nu||h instanceof Fd||h instanceof Dg),(0,Je.U)(h=>h instanceof nu||h instanceof Fd&&(0===h.code||1===h.code)&&null),I(h=>null!==h),In(1)).subscribe(()=>{a()})})(()=>{a(!0),r=!0}),l.afterPreactivation=()=>(a(!0),r||h.closed?at(void 0):h),l.initialNavigation()}))}}]).\u0275providers:[]]}const Wy=new d.OlP("");let qy=(()=>{class n{constructor(){this.holidaySetsArray=new sn([]),this.index=new sn(null),this.timerState=new sn(!1),this.memoryboxStatus=new sn("unavailable"),this.addCount=new sn(0)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var _e=L(5861);class fE{}class Zy{}class uu{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(l):this.headers.set(a,[l])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof uu?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new uu;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof uu?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let l=this.headers.get(t);if(!l)return;l=l.filter(h=>-1===a.indexOf(h)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class kk{encodeKey(e){return mE(e)}encodeValue(e){return mE(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const gE=/%(\d[a-f0-9])/gi,Ac={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function mE(n){return encodeURIComponent(n).replace(gE,(e,t)=>Ac[t]??e)}function Yd(n){return`${n}`}class fa{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new kk,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function pE(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[l,h]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],_=t.get(l)||[];_.push(h),t.set(l,_)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(Yd):[Yd(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new fa({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Yd(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(Yd(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Ok{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function YS(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function _E(n){return typeof Blob<"u"&&n instanceof Blob}function Ky(n){return typeof FormData<"u"&&n instanceof FormData}class Ff{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Fk(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new uu),this.context||(this.context=new Ok),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+l}}else this.params=new fa,this.urlWithParams=t}serializeBody(){return null===this.body?null:YS(this.body)||_E(this.body)||Ky(this.body)||function Lk(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof fa?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Ky(this.body)?null:_E(this.body)?this.body.type||null:YS(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof fa?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,a=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,h=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let _=e.headers||this.headers,w=e.params||this.params;const D=e.context??this.context;return void 0!==e.setHeaders&&(_=Object.keys(e.setHeaders).reduce((S,R)=>S.set(R,e.setHeaders[R]),_)),e.setParams&&(w=Object.keys(e.setParams).reduce((S,R)=>S.set(R,e.setParams[R]),w)),new Ff(t,r,a,{params:w,headers:_,context:D,reportProgress:h,responseType:i,withCredentials:l})}}var Un=(()=>((Un=Un||{})[Un.Sent=0]="Sent",Un[Un.UploadProgress=1]="UploadProgress",Un[Un.ResponseHeader=2]="ResponseHeader",Un[Un.DownloadProgress=3]="DownloadProgress",Un[Un.Response=4]="Response",Un[Un.User=5]="User",Un))();class Yy{constructor(e,t=200,r="OK"){this.headers=e.headers||new uu,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class qg extends Yy{constructor(e={}){super(e),this.type=Un.ResponseHeader}clone(e={}){return new qg({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class xc extends Yy{constructor(e={}){super(e),this.type=Un.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new xc({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class yE extends Yy{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Zg(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Kg=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof Ff)a=t;else{let _,w;_=i.headers instanceof uu?i.headers:new uu(i.headers),i.params&&(w=i.params instanceof fa?i.params:new fa({fromObject:i.params})),a=new Ff(t,r,void 0!==i.body?i.body:null,{headers:_,context:i.context,params:w,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const l=at(a).pipe(De(_=>this.handler.handle(_)));if(t instanceof Ff||"events"===i.observe)return l;const h=l.pipe(I(_=>_ instanceof xc));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return h.pipe((0,Je.U)(_=>{if(null!==_.body&&!(_.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return _.body}));case"blob":return h.pipe((0,Je.U)(_=>{if(null!==_.body&&!(_.body instanceof Blob))throw new Error("Response is not a Blob.");return _.body}));case"text":return h.pipe((0,Je.U)(_=>{if(null!==_.body&&"string"!=typeof _.body)throw new Error("Response is not a string.");return _.body}));default:return h.pipe((0,Je.U)(_=>_.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new fa).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Zg(i,r))}post(t,r,i={}){return this.request("POST",t,Zg(i,r))}put(t,r,i={}){return this.request("PUT",t,Zg(i,r))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(fE))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class vE{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const wE=new d.OlP("HTTP_INTERCEPTORS");let QS=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const jk=/^\)\]\}',?\n/;let Qy=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new wr.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((V,j)=>i.setRequestHeader(V,j.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const V=t.detectContentTypeHeader();null!==V&&i.setRequestHeader("Content-Type",V)}if(t.responseType){const V=t.responseType.toLowerCase();i.responseType="json"!==V?V:"text"}const a=t.serializeBody();let l=null;const h=()=>{if(null!==l)return l;const V=i.statusText||"OK",j=new uu(i.getAllResponseHeaders()),ae=function Qd(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return l=new qg({headers:j,status:i.status,statusText:V,url:ae}),l},_=()=>{let{headers:V,status:j,statusText:ae,url:ve}=h(),qe=null;204!==j&&(qe=typeof i.response>"u"?i.responseText:i.response),0===j&&(j=qe?200:0);let lt=j>=200&&j<300;if("json"===t.responseType&&"string"==typeof qe){const rt=qe;qe=qe.replace(jk,"");try{qe=""!==qe?JSON.parse(qe):null}catch(ct){qe=rt,lt&&(lt=!1,qe={error:ct,text:qe})}}lt?(r.next(new xc({body:qe,headers:V,status:j,statusText:ae,url:ve||void 0})),r.complete()):r.error(new yE({error:qe,headers:V,status:j,statusText:ae,url:ve||void 0}))},w=V=>{const{url:j}=h(),ae=new yE({error:V,status:i.status||0,statusText:i.statusText||"Unknown Error",url:j||void 0});r.error(ae)};let D=!1;const S=V=>{D||(r.next(h()),D=!0);let j={type:Un.DownloadProgress,loaded:V.loaded};V.lengthComputable&&(j.total=V.total),"text"===t.responseType&&!!i.responseText&&(j.partialText=i.responseText),r.next(j)},R=V=>{let j={type:Un.UploadProgress,loaded:V.loaded};V.lengthComputable&&(j.total=V.total),r.next(j)};return i.addEventListener("load",_),i.addEventListener("error",w),i.addEventListener("timeout",w),i.addEventListener("abort",w),t.reportProgress&&(i.addEventListener("progress",S),null!==a&&i.upload&&i.upload.addEventListener("progress",R)),i.send(a),r.next({type:Un.Sent}),()=>{i.removeEventListener("error",w),i.removeEventListener("abort",w),i.removeEventListener("load",_),i.removeEventListener("timeout",w),t.reportProgress&&(i.removeEventListener("progress",S),null!==a&&i.upload&&i.upload.removeEventListener("progress",R)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ao))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Yg=new d.OlP("XSRF_COOKIE_NAME"),Jd=new d.OlP("XSRF_HEADER_NAME");class qs{}let bE=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Da(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(le),d.LFG(d.Lbi),d.LFG(Yg))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Jy=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const a=this.tokenService.getToken();return null!==a&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,a)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(qs),d.LFG(Jd))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Xy=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(wE,[]);this.chain=r.reduceRight((i,a)=>new vE(i,a),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Zy),d.LFG(d.zs3))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),DE=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:Jy,useClass:QS}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:Yg,useValue:t.cookieName}:[],t.headerName?{provide:Jd,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Jy,{provide:wE,useExisting:Jy,multi:!0},{provide:qs,useClass:bE},{provide:Yg,useValue:"XSRF-TOKEN"},{provide:Jd,useValue:"X-XSRF-TOKEN"}]}),n})(),Qg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Kg,{provide:fE,useClass:Xy},Qy,{provide:Zy,useExisting:Qy}],imports:[DE.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})(),Jg=(()=>{class n{constructor(t){this.http=t,this.memoriesArray=new sn([]),this.currentMemoriesArray=this.memoriesArray.asObservable(),this.viewedMemoriesArray=new sn([]),this.count=new sn(0)}saveMemory(t){this.http.post(`https://holiday-craze-780c4-default-rtdb.firebaseio.com/${JSON.stringify(localStorage.getItem("userUID"))}/memories.json`,t).subscribe()}saveCount(){this.http.put(`https://holiday-craze-780c4-default-rtdb.firebaseio.com/${JSON.stringify(localStorage.getItem("userUID"))}/addCount.json`,this.count.getValue()).subscribe()}saveViewedMemory(t){this.http.post(`https://holiday-craze-780c4-default-rtdb.firebaseio.com/${JSON.stringify(localStorage.getItem("userUID"))}/viewedMemories.json`,t).subscribe()}retrieveMemories(){return this.http.get(`https://holiday-craze-780c4-default-rtdb.firebaseio.com/${JSON.stringify(localStorage.getItem("userUID"))}/memories.json`,{}).subscribe(t=>{null!==t&&(console.log(Object.values(t)),this.memoriesArray.next(Object.values(t)),console.log(this.memoriesArray.getValue()))})}retrieveCount(){return this.http.get(`https://holiday-craze-780c4-default-rtdb.firebaseio.com/${JSON.stringify(localStorage.getItem("userUID"))}/addCount.json`,{}).subscribe(t=>{null!==t&&this.count.next(t)})}retrieveViewedMemories(){var t=this;return(0,_e.Z)(function*(){return t.http.get(`https://holiday-craze-780c4-default-rtdb.firebaseio.com/${JSON.stringify(localStorage.getItem("userUID"))}/viewedMemories.json`,{}).subscribe(r=>{null!==r&&t.viewedMemoriesArray.next(Object.values(r))})})()}updateMemory(t){this.http.get(`https://holiday-craze-780c4-default-rtdb.firebaseio.com/${JSON.stringify(localStorage.getItem("userUID"))}/memories.json`,{}).subscribe(r=>{const i=Object.keys(r),a=Object.values(r),l=i[t],h=a[t];console.log("value",h),console.log("key",l),this.http.post(`https://holiday-craze-780c4-default-rtdb.firebaseio.com/${JSON.stringify(localStorage.getItem("userUID"))}/viewedMemories.json`,h).subscribe(),this.http.delete(`https://holiday-craze-780c4-default-rtdb.firebaseio.com/${JSON.stringify(localStorage.getItem("userUID"))}/memories/${l}.json`).subscribe()})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Kg))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Xg=["label1"],em=["label2"],ev=["country1"],tv=["country2"];function nv(n,e){1&n&&(d.TgZ(0,"h3",13,14),d._uU(2,"Country with most memories viewed."),d.qZA())}function Hk(n,e){if(1&n&&(d.TgZ(0,"h3",16,17),d._uU(2),d.qZA()),2&n){const t=d.oxw().$implicit;d.xp6(2),d.Oqu(t)}}function nA(n,e){if(1&n&&(d.TgZ(0,"div"),d.YNc(1,Hk,3,1,"h3",15),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngIf",t.viewCountry1)}}function rA(n,e){1&n&&(d.TgZ(0,"h3",13,18),d._uU(2,"Country with most memories to view."),d.qZA())}function iA(n,e){if(1&n&&(d.TgZ(0,"h3",16,19),d._uU(2),d.qZA()),2&n){const t=d.oxw().$implicit;d.xp6(2),d.Oqu(t)}}function sA(n,e){if(1&n&&(d.TgZ(0,"div"),d.YNc(1,iA,3,1,"h3",15),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngIf",t.viewCountry2)}}let TE=(()=>{class n{constructor(t,r,i){this.holidayService=t,this.dbService=r,this.http=i,this.viewCountry1=!1,this.viewCountry2=!1,this.currentYear=(new Date).getFullYear(),this.memoryCount=0,this.memoriesToView=[],this.memoriesViewed=[],this.countriesMTV={US:[],NO:[],JP:[],GR:[],RU:[],EG:[]},this.countriesMV={US:[],NO:[],JP:[],GR:[],RU:[],EG:[]},this.mv=[],this.mtv=[]}ngOnInit(){this.dbService.retrieveMemories(),this.dbService.retrieveViewedMemories(),this.holidayService.memoryboxStatus.subscribe(t=>this.memoryBoxStatus=t),this.dbService.memoriesArray.subscribe(t=>this.memoriesToView=t),this.dbService.memoriesArray.subscribe(t=>this.memoriesToV=t.length),this.dbService.viewedMemoriesArray.subscribe(t=>this.memoriesViewed=t),this.dbService.viewedMemoriesArray.subscribe(t=>this.memoriesVd=t.length),this.countrySort(),0!==this.memoriesToView.length&&this.sortMTV(),0!==this.memoriesViewed.length&&this.sortMV(),0===this.memoriesToView.length&&(this.mtv=["Add memories!"]),0===this.memoriesViewed.length&&(this.mv=["View memories!"])}ngAfterViewInit(){this.label1.nativeElement.style.opacity="1",this.label2.nativeElement.style.opacity="1"}countryState1(){this.viewCountry1=!this.viewCountry1,setTimeout(()=>{!0===this.viewCountry1&&(this.country1.nativeElement.style.opacity="1"),!1===this.viewCountry1&&(this.label1.nativeElement.style.opacity="1")},50)}countryState2(){this.viewCountry2=!this.viewCountry2,setTimeout(()=>{!0===this.viewCountry2&&(this.country2.nativeElement.style.opacity="1"),!1===this.viewCountry2&&(this.label2.nativeElement.style.opacity="1")},50)}countrySort(){if(0!==this.memoriesToView.length)for(let t=0;t<this.memoriesToView.length;t++)"United States"===this.memoriesToView[t].country&&this.countriesMTV.US.push("USmemory"),"Norway"===this.memoriesToView[t].country&&this.countriesMTV.NO.push("NOmemory"),"Japan"===this.memoriesToView[t].country&&this.countriesMTV.JP.push("JPmemory"),"Greece"===this.memoriesToView[t].country&&this.countriesMTV.GR.push("GRmemory"),"Russia"===this.memoriesToView[t].country&&this.countriesMTV.RU.push("RUmemory"),"Egypt"===this.memoriesToView[t].country&&this.countriesMTV.EG.push("EGmemory");if(0!==this.memoriesViewed.length)for(let t=0;t<this.memoriesViewed.length;t++)"United States"===this.memoriesViewed[t].country&&this.countriesMV.US.push("USmemory"),"Norway"===this.memoriesViewed[t].country&&this.countriesMV.NO.push("NOmemory"),"Japan"===this.memoriesViewed[t].country&&this.countriesMV.JP.push("JPmemory"),"Greece"===this.memoriesViewed[t].country&&this.countriesMV.GR.push("GRmemory"),"Russia"===this.memoriesViewed[t].country&&this.countriesMV.RU.push("RUmemory"),"Egypt"===this.memoriesViewed[t].country&&this.countriesMV.EG.push("EGmemory")}sortMTV(){let t=[];const r=Object.keys(this.countriesMTV).length,i=Object.keys(this.countriesMTV);for(let h=0;h<r;h++){let _=Object.keys(this.countriesMTV)[h];t.push(this.countriesMTV[_].length)}const a=Math.max(...t),l=[];for(let h=0;h<r;h++)t[h]===a&&("US"===i[h]&&l.push("United States"),"NO"===i[h]&&l.push("Norway"),"JP"===i[h]&&l.push("Japan"),"GR"===i[h]&&l.push("Greece"),"RU"===i[h]&&l.push("Russia"),"EG"===i[h]&&l.push("Egypt"));l.length>1&&(this.mtv=["Tied"]),1===l.length&&(this.mtv=l)}sortMV(){let t=[];const r=Object.keys(this.countriesMV).length,i=Object.keys(this.countriesMV);console.log(Object.keys(this.countriesMV)[0]);for(let h=0;h<r;h++){let _=Object.keys(this.countriesMV)[h];t.push(this.countriesMV[_].length)}const a=Math.max(...t),l=[];for(let h=0;h<r;h++)t[h]===a&&("US"===i[h]&&l.push("United States"),"NO"===i[h]&&l.push("Norway"),"JP"===i[h]&&l.push("Japan"),"GR"===i[h]&&l.push("Greece"),"RU"===i[h]&&l.push("Russia"),"EG"===i[h]&&l.push("Egypt"));l.length>1&&(this.mv=["Tied"]),1===l.length&&(this.mv=l)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(qy),d.Y36(Jg),d.Y36(Kg))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-dashboard"]],viewQuery:function(t,r){if(1&t&&(d.Gf(Xg,5),d.Gf(em,5),d.Gf(ev,5),d.Gf(tv,5)),2&t){let i;d.iGM(i=d.CRH())&&(r.label1=i.first),d.iGM(i=d.CRH())&&(r.label2=i.first),d.iGM(i=d.CRH())&&(r.country1=i.first),d.iGM(i=d.CRH())&&(r.country2=i.first)}},decls:25,vars:9,consts:[[1,"container"],[1,"s1"],[1,"mStatus"],[1,"s2"],[1,"subContainer"],[1,"group"],[1,"infoContainer"],[1,"label"],[1,"value"],[1,"infoContainer2"],[1,"subGroup",3,"ngClass","click"],["class","label2",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"label2"],["label1",""],["class","value2",4,"ngIf"],[1,"value2"],["country1",""],["label2",""],["country2",""]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"section",1)(2,"h1",2),d._uU(3),d.qZA()(),d.TgZ(4,"section",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"h3",7),d._uU(9,"Memories viewed to date."),d.qZA(),d.TgZ(10,"h3",8),d._uU(11),d.qZA()(),d.TgZ(12,"div",6)(13,"h3",7),d._uU(14,"Memories to view this year."),d.qZA(),d.TgZ(15,"h3",8),d._uU(16),d.qZA()()(),d.TgZ(17,"div",5)(18,"div",9)(19,"div",10),d.NdJ("click",function(){return r.countryState1()}),d.YNc(20,nv,3,0,"h3",11),d.YNc(21,nA,2,1,"div",12),d.qZA(),d.TgZ(22,"div",10),d.NdJ("click",function(){return r.countryState2()}),d.YNc(23,rA,3,0,"h3",11),d.YNc(24,sA,2,1,"div",12),d.qZA()()()()()()),2&t&&(d.xp6(3),d.hij("Memories ",r.memoryBoxStatus,""),d.xp6(8),d.Oqu(r.memoriesVd),d.xp6(5),d.Oqu(r.memoriesToV),d.xp6(3),d.Q6J("ngClass",!0===r.viewCountry1?"subGroupActive":"!subGroupActive"),d.xp6(1),d.Q6J("ngIf",!r.viewCountry1),d.xp6(1),d.Q6J("ngForOf",r.mv),d.xp6(1),d.Q6J("ngClass",!0===r.viewCountry2?"subGroupActive":"subGroup"),d.xp6(1),d.Q6J("ngIf",!r.viewCountry2),d.xp6(1),d.Q6J("ngForOf",r.mtv))},dependencies:[Jt,Yi,Pn],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;align-items:center;height:85vh;width:90vw;gap:1.15rem}.s1[_ngcontent-%COMP%]{display:flex;justify-content:center}.mStatus[_ngcontent-%COMP%]{text-align:center;padding:1rem;font-size:.9rem;background-color:#363062;color:#e9d5da;border-radius:2rem;letter-spacing:.1rem;width:210px;font-weight:200}.s2[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;width:90.22%;background-color:#363062;border-radius:2rem}.subContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:85%;width:90%}.group[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column;gap:3rem;padding-left:2rem;padding-right:2rem}.infoContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:50%;background-color:#363062;border-radius:1rem;gap:2rem;box-shadow:inset 7px 7px 10px #0003,inset -7px -7px 5px #e9d5da0a}.infoContainer2[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%;background-color:#363062;border-radius:1rem;gap:3rem;box-shadow:inset 7px 7px 10px #0003,inset -7px -7px 5px #e9d5da0a}.subGroup[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;background-color:#363062;width:65%;border:1px solid transparent;height:35%;text-align:center;padding:3rem 1rem;border-radius:1rem;cursor:pointer;box-shadow:0 0 15px #827397;transition:.5s ease-out}.subGroupActive[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;border:1px solid #e9d5da;width:65%;height:35%;box-shadow:none;text-align:center;padding:3rem 1rem;border-radius:1rem;cursor:pointer;transition:.5s ease-in}.label2[_ngcontent-%COMP%]{color:#e9d5da;font-weight:200;font-size:1.2em;letter-spacing:.1rem;opacity:0;transition:.3s ease-out}.value2[_ngcontent-%COMP%]{color:#e9d5da;font-weight:200;font-size:1.6em;letter-spacing:.1rem;transition:.3s ease-in;opacity:0}.label[_ngcontent-%COMP%]{color:#e9d5da;font-family:Josefin sans,sans-serif;font-weight:200;font-size:1.6rem;letter-spacing:.04rem}.value[_ngcontent-%COMP%]{color:#e9d5da;font-family:Josefin sans,sans-serif;font-weight:200;font-size:1.5rem;letter-spacing:.04rem}@media (max-width: 1062px){.subContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%;width:100%}.infoContainer[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;height:50%;background-color:#363062;border-radius:1rem}.infoContainer2[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%;background-color:#363062;border-radius:1rem;gap:1rem;box-shadow:inset 7px 7px 10px #0003,inset -7px -7px 5px #e9d5da0a}.subGroup[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;background-color:#363062;width:65%;min-width:375px;border:1px solid transparent;height:35%;text-align:center;padding:1rem;border-radius:1rem;cursor:pointer;box-shadow:0 0 15px #827397;transition:.5s ease-out}.subGroupActive[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;border:1px solid #e9d5da;width:65%;height:35%;box-shadow:none;text-align:center;padding:1rem;border-radius:1rem;cursor:pointer;transition:.5s ease-in}.label2[_ngcontent-%COMP%]{color:#e9d5da;font-weight:200;font-size:1rem;letter-spacing:.1rem;opacity:0;transition:.3s ease-out}.value2[_ngcontent-%COMP%]{color:#e9d5da;font-weight:200;font-size:1.2em;letter-spacing:.1rem;transition:.3s ease-in;opacity:0}.label[_ngcontent-%COMP%]{color:#e9d5da;font-family:Josefin sans,sans-serif;font-weight:200;font-size:1.3rem;text-align:center;letter-spacing:.04rem}.value[_ngcontent-%COMP%]{color:#e9d5da;font-family:Josefin sans,sans-serif;font-weight:200;font-size:1.5rem;letter-spacing:.04rem}}@media (max-width: 462){.label[_ngcontent-%COMP%]{color:#e9d5da;font-family:Josefin sans,sans-serif;font-weight:200;font-size:1rem;text-align:center;letter-spacing:.04rem}.value[_ngcontent-%COMP%]{color:#e9d5da;font-family:Josefin sans,sans-serif;font-weight:200;font-size:1rem;letter-spacing:.04rem}.label2[_ngcontent-%COMP%]{color:#e9d5da;font-weight:200;font-size:1rem;letter-spacing:.1rem;opacity:0;transition:.3s ease-out}.value2[_ngcontent-%COMP%]{color:#e9d5da;font-weight:200;font-size:1em;transition:.3s ease-in;opacity:0}.subGroupActive[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;border:1px solid #e9d5da;width:35%;height:35%;box-shadow:none;text-align:center;padding:1rem;border-radius:1rem;cursor:pointer;transition:.5s ease-in}.subGroup[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;background-color:#363062;min-width:300px;border:1px solid transparent;height:35%;text-align:center;padding:1rem;border-radius:1rem;cursor:pointer;box-shadow:0 0 15px #827397;transition:.5s ease-out}.infoContainer2[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%;width:80%;background-color:#363062;border-radius:1rem;gap:1rem;box-shadow:inset 7px 7px 10px #0003,inset -7px -7px 5px #e9d5da0a}}"]}),n})();var SE=L(6451),tm=L(5363),$k=L(6063);class AE extends _i.x{constructor(e=1/0,t=1/0,r=$k.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let h=0;for(let _=1;_<r.length&&r[_]<=l;_+=2)h=_;h&&r.splice(0,h+1)}}}var rv=L(3099);function xE(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,rv.B)({connector:()=>new AE(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function nm(n,e){return(0,na.m)(e)?Mn(()=>n,e):Mn(()=>n)}var ME=L(9468),mn=L(2122),Zr=L(2011);L(259);var Li=L(9681),Zs=L(4859),P=L(2090),Ao=L(1877);const Xd=new Map,Nc={activated:!1,tokenObservers:[]},ov={initialized:!1,enabled:!1};function lr(n){return Xd.get(n)||Object.assign({},Nc)}function kc(){return ov}class dA{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,_e.Z)(function*(){t.stop();try{t.pending=new P.BH,yield function Zk(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new P.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ci=new P.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function hv(n){if(!lr(n).activated)throw Ci.create("use-before-activation",{appName:n.name})}function Vi(n,e){return am.apply(this,arguments)}function am(){return(am=(0,_e.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const a={method:"POST",body:JSON.stringify(e),headers:r};let l,h;try{l=yield fetch(n,a)}catch(S){throw Ci.create("fetch-network-error",{originalErrorMessage:S?.message})}if(200!==l.status)throw Ci.create("fetch-status-error",{httpStatus:l.status});try{h=yield l.json()}catch(S){throw Ci.create("fetch-parse-error",{originalErrorMessage:S?.message})}const _=h.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw Ci.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const w=1e3*Number(_[1]),D=Date.now();return{token:h.token,expireTimeMillis:D+w,issuedAtTimeMillis:D}})).apply(this,arguments)}function pA(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Lf="firebase-app-check-store";let um=null;function pv(){return um||(um=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ci.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Lf,{keyPath:"compositeKey"})}}catch(t){e(Ci.create("storage-open",{originalErrorMessage:t?.message}))}}),um)}function lm(){return(lm=(0,_e.Z)(function*(n,e){const r=(yield pv()).transaction(Lf,"readwrite"),a=r.objectStore(Lf).put({compositeKey:n,value:e});return new Promise((l,h)=>{a.onsuccess=_=>{l()},r.onerror=_=>{var w;h(Ci.create("storage-set",{originalErrorMessage:null===(w=_.target.error)||void 0===w?void 0:w.message}))}})})).apply(this,arguments)}const Vf=new Ao.Yd("@firebase/app-check");function dm(n,e){return(0,P.hl)()?function LE(n,e){return function gv(n,e){return lm.apply(this,arguments)}(function cm(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Vf.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function BE(){return kc().enabled}function hm(){return _v.apply(this,arguments)}function _v(){return(_v=(0,_e.Z)(function*(){const n=kc();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const fm={error:"UNKNOWN_ERROR"};function yv(n){return P.US.encodeString(JSON.stringify(n),!1)}function Pc(n){return jE.apply(this,arguments)}function jE(){return(jE=(0,_e.Z)(function*(n,e=!1){const t=n.app;hv(t);const r=lr(t);let a,i=r.token;if(i&&!Oc(i)&&(r.token=void 0,i=void 0),!i){const _=yield r.cachedTokenPromise;_&&(Oc(_)?i=_:yield dm(t,void 0))}if(!e&&i&&Oc(i))return{token:i.token};let h,l=!1;if(BE()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Vi(pA(t,yield hm()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const _=yield r.exchangeTokenPromise;return yield dm(t,_),r.token=_,{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield lr(t).exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?Vf.warn(_.message):Vf.error(_),a=_}return i?a?h=Oc(i)?{token:i.token,internalError:a}:pm(a):(h={token:i.token},r.token=i,yield dm(t,i)):h=pm(a),l&&wv(t,h),h})).apply(this,arguments)}function HE(n,e){const t=lr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function vv(n){const{app:e}=n,t=lr(e);let r=t.tokenRefresher;r||(r=function $E(n){const{app:e}=n;return new dA((0,_e.Z)(function*(){let r;if(r=lr(e).token?yield Pc(n,!0):yield Pc(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=lr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function wv(n,e){const t=lr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Oc(n){return n.expireTimeMillis-Date.now()>0}function pm(n){return{token:yv(fm),error:n}}class lu{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=lr(this.app);for(const t of e)HE(this.app,t.next);return Promise.resolve()}}const yl="app-check-internal";!function tP(){(0,Li._registerComponent)(new Zs.wA("app-check",n=>function gm(n,e){return new lu(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(yl).initialize()})),(0,Li._registerComponent)(new Zs.wA(yl,n=>function mm(n){return{getToken:e=>Pc(n,e),addTokenListener:e=>function Uf(n,e,t,r){const{app:i}=n,a=lr(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&Oc(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),vv(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>vv(n))}(n,"INTERNAL",e),removeTokenListener:e=>HE(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Li.registerVersion)("@firebase/app-check","0.6.0")}();class jf{constructor(){return(0,mn.vb)("app-check")}}typeof window<"u"&&window;var du=L(9260);const vl=new d.OlP("angularfire2.auth.use-emulator"),Cm=new d.OlP("angularfire2.auth.settings"),Em=new d.OlP("angularfire2.auth.tenant-id"),bm=new d.OlP("angularfire2.auth.langugage-code"),Im=new d.OlP("angularfire2.auth.use-device-language"),Dm=new d.OlP("angularfire.auth.persistence"),Tm=(n,e,t,r,i,a,l,h)=>(0,Zr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,a&&_.useDeviceLanguage(),l)for(const[w,D]of Object.entries(l))_.settings[w]=D;return h&&_.setPersistence(h),_},[t,r,i,a,l,h]);let Lc=(()=>{class n{constructor(t,r,i,a,l,h,_,w,D,S,R,V){const j=new _i.x,ae=at(void 0).pipe((0,tm.Q)(l.outsideAngular),Mn(()=>a.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,9169)))),(0,Je.U)(()=>(0,Zr.on)(t,a,r)),(0,Je.U)(ve=>Tm(ve,a,h,w,D,S,_,R)),xE({bufferSize:1,refCount:!1}));if(Tr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=at(null);else{ae.pipe(ne()).subscribe();const qe=ae.pipe(Mn(ct=>ct.getRedirectResult().then(Tt=>Tt,()=>null)),mn.iC,xE({bufferSize:1,refCount:!1})),lt=ae.pipe(Mn(ct=>new wr.y(Tt=>({unsubscribe:a.runOutsideAngular(()=>ct.onAuthStateChanged(Ot=>Tt.next(Ot),Ot=>Tt.error(Ot),()=>Tt.complete()))})))),rt=ae.pipe(Mn(ct=>new wr.y(Tt=>({unsubscribe:a.runOutsideAngular(()=>ct.onIdTokenChanged(Ot=>Tt.next(Ot),Ot=>Tt.error(Ot),()=>Tt.complete()))}))));this.authState=qe.pipe(nm(lt),(0,ME.R)(l.outsideAngular),(0,tm.Q)(l.insideAngular)),this.user=qe.pipe(nm(rt),(0,ME.R)(l.outsideAngular),(0,tm.Q)(l.insideAngular)),this.idToken=this.user.pipe(Mn(ct=>ct?(0,rn.D)(ct.getIdToken()):at(null))),this.idTokenResult=this.user.pipe(Mn(ct=>ct?(0,rn.D)(ct.getIdTokenResult()):at(null))),this.credential=(0,SE.T)(qe,j,this.authState.pipe(I(ct=>!ct))).pipe((0,Je.U)(ct=>ct?.user?ct:null),(0,ME.R)(l.outsideAngular),(0,tm.Q)(l.insideAngular))}return(0,Zr.pX)(this,ae,a,{spy:{apply:(ve,qe,lt)=>{(ve.startsWith("signIn")||ve.startsWith("createUser"))&&lt.then(rt=>j.next(rt))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Zr.Dh),d.LFG(Zr.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(mn.HU),d.LFG(vl,8),d.LFG(Cm,8),d.LFG(Em,8),d.LFG(bm,8),d.LFG(Im,8),d.LFG(Dm,8),d.LFG(jf,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),YE=(()=>{class n{constructor(){du.Z.registerVersion("angularfire",mn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Lc]}),n})(),Sv=(()=>{class n{constructor(t,r){this.fireAuth=t,this.router=r}get isLoggedIn(){return null!==JSON.parse(localStorage.getItem("token"))}logout(){this.fireAuth.signOut().then(()=>{localStorage.clear(),this.router.navigate(["/login"])},t=>{alert(t.message)})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Lc),d.LFG(Jn))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const AA=function(n,e){return[n,e]},xA=function(n,e,t){return[n,e,t]};let QE=(()=>{class n{constructor(t,r){this.router=t,this.authService=r,this.introGreet="Welcome",this.logoutButtonState=null,this.arrayDisplay=[],this.position=Number(sessionStorage.getItem("position"))}ngOnInit(){null===sessionStorage.getItem("position")&&(sessionStorage.setItem("position","1"),this.position=1)}ngAfterViewInit(){}changeState(){null===this.logoutButtonState&&(this.logoutButtonState=!1),this.logoutButtonState=!this.logoutButtonState,!1===this.logoutButtonState?setTimeout(()=>{this.introGreet="Welcome"},600):setTimeout(()=>{this.introGreet="Goodbye"},600)}changePosition1(){this.position=1,sessionStorage.setItem("position","1")}changePosition2(){this.position=2,sessionStorage.setItem("position","2")}changePosition3(){this.position=3,sessionStorage.setItem("position","3")}logout(){sessionStorage.clear(),localStorage.removeItem("token"),localStorage.removeItem("userUID"),this.authService.logout()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Jn),d.Y36(Sv))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-navbar"]],decls:26,vars:13,consts:[[1,"container"],[1,"subContainer"],[1,"wrapper"],[1,"textContainer"],[1,"text",3,"ngClass"],["introText",""],[1,"logoutIcon",3,"ngClass","click"],[1,"circleBottom"],[1,"state",3,"mouseenter","mouseleave"],[1,"circleMiddle",3,"ngClass"],[1,"topCircleBackground"],[1,"circleTop",3,"ngClass"],[1,"linkBar"],[3,"ngClass"],["routerLink","/home/dashboard","routerLinkActive","routerLinkActive",3,"click"],["dashboard",""],["routerLink","/home/search","routerLinkActive","routerLinkActive",3,"click"],["search",""],["routerLink","/home/memories","routerLinkActive","routerLinkActive",3,"click"],["memories",""]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),d._uU(5),d.qZA(),d.TgZ(6,"h1",null,5),d._uU(8,"Human"),d.qZA()(),d.TgZ(9,"div",6),d.NdJ("click",function(){return r.logout()}),d.TgZ(10,"div",7)(11,"div",8),d.NdJ("mouseenter",function(){return r.changeState()})("mouseleave",function(){return r.changeState()}),d.qZA(),d.TgZ(12,"div",9)(13,"div",10),d._UZ(14,"div",11),d.qZA()()()()()(),d.TgZ(15,"div",12),d._UZ(16,"div",13),d.TgZ(17,"a",14,15),d.NdJ("click",function(){return r.changePosition1()}),d._uU(19,"Dashboard"),d.qZA(),d.TgZ(20,"a",16,17),d.NdJ("click",function(){return r.changePosition2()}),d._uU(22,"Search"),d.qZA(),d.TgZ(23,"a",18,19),d.NdJ("click",function(){return r.changePosition3()}),d._uU(25,"Memories"),d.qZA()()()),2&t&&(d.xp6(4),d.Q6J("ngClass",d.WLB(6,AA,!0===r.logoutButtonState?"fadeIn":"!fadeIn",!1===r.logoutButtonState?"fadeOut":"!fadeOut")),d.xp6(1),d.hij(" ",r.introGreet,""),d.xp6(4),d.Q6J("ngClass",!0===r.logoutButtonState?"logoutIconActive":"logoutIconInactive"),d.xp6(3),d.Q6J("ngClass",!0===r.logoutButtonState?"circleMiddleActive":"!circleMiddleActive"),d.xp6(2),d.Q6J("ngClass",!0===r.logoutButtonState?"circleTopActive":"circleTopInactive"),d.xp6(2),d.Q6J("ngClass",d.kEZ(9,xA,1===r.position?"position1":"!position1",2===r.position?"position2":"!position2",3===r.position?"position3":"!position3")))},dependencies:[Jt,$g,oE],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100vw;margin-bottom:1.5rem}.subContainer[_ngcontent-%COMP%]{background-color:#363062;width:-moz-fit-content;width:fit-content;border-radius:0 3rem 3rem 0}.linkBar[_ngcontent-%COMP%]{display:flex;gap:2rem;padding-right:3rem;position:relative}.wrapper[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center;padding:0rem .45rem 0rem 2rem}.textContainer[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:.75rem;padding-top:.5rem;padding-bottom:.15rem}h1[_ngcontent-%COMP%]{font-family:Josefin sans,sans-serif;font-weight:200;font-size:2.45rem;color:#e9d5da;transition:.4s ease-in-out}.text[_ngcontent-%COMP%]{border:1px solid transparent}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.fadeIn[_ngcontent-%COMP%]{transition:.3s;transition-delay:.6s;animation:fadeIn;animation-timing-function:ease-in;animation-duration:.6s;animation-delay:.6s;animation-iteration-count:1;opacity:1}@keyframes fadeOut{0%{opacity:1}to{opacity:0}}.fadeOut[_ngcontent-%COMP%]{transition:.6s;animation:fadeOut;animation-timing-function:ease-in;animation-duration:.6s;animation-iteration-count:1;opacity:1}.logoutIcon[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:-moz-fit-content;height:fit-content}.logoutIconInactive[_ngcontent-%COMP%]{transition:.6s;transition-delay:.6s;transform:rotate(90deg);cursor:pointer}.logoutIconActive[_ngcontent-%COMP%]{transition:.6s;transition-delay:.6s;transform:rotate(0);cursor:pointer}.circleBottom[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;background-color:#e9d5da;height:35px;width:35px;border-radius:50%;padding:.15rem}.circleMiddle[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;background-color:#363062;height:30px;width:30px;border-radius:50%;border:2px solid #363062;transition:.3s;transition-delay:.3s}.circleMiddleActive[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;background-color:#e9d5da;height:30px;width:30px;border-radius:50%;border:none;transition:.3s;transition-delay:.3s;border:2px solid #363062}@keyframes changColor{0%{background-color:#363062}to{background-color:#e9d5da}}.topCircleBackground[_ngcontent-%COMP%]{background-color:#e9d5da;height:34px;border-radius:1rem;transition:.1s;transition-delay:.1s}.circleTop[_ngcontent-%COMP%]{background-color:#363062;height:15px;width:3px;margin:.14rem;border-radius:1rem;transform:translateY(0);transition:.6s}@keyframes cTopDown{0%{transform:translateY(0)}50%{transform:translateY(18px);background-color:#e9d5da}to{transform:translateY(0)}}.circleTopActive[_ngcontent-%COMP%]{transition:.6s;animation-name:cTopDown;animation-timing-function:cubic-bezier(.39,.575,.565,1);animation-duration:.6s;animation-iteration-count:1;transform:translateY(0)}.state[_ngcontent-%COMP%]{background-color:transparent;height:35px;width:35px;position:absolute;isolation:isolate;border-radius:50%;z-index:10;transform:translate(0) translateY(0)}a[_ngcontent-%COMP%]{text-decoration:none;color:#827397;border:2px solid transparent;padding:.3rem .6rem;border-radius:3rem;transition:.3s ease-out}a[_ngcontent-%COMP%]:hover{padding:.3rem .6rem;border-radius:3rem}.routerLinkActive[_ngcontent-%COMP%]{color:#e9d5da}.position1[_ngcontent-%COMP%]{height:37.59px;width:109.91px;border:2px solid #827397;background-color:#363062;padding:.3rem .6rem;border-radius:3rem;position:absolute;isolation:isolate;z-index:-1;transition:.4s cubic-bezier(.175,.885,.32,1.275);transform:translate(-5.5px)}.position2[_ngcontent-%COMP%]{height:37.59px;width:82.91px;border:2px solid #827397;background-color:#363062;padding:.3rem .6rem;border-radius:3rem;position:absolute;isolation:isolate;z-index:-1;transition:.4s cubic-bezier(.175,.885,.32,1.275);transform:translate(125px)}.position3[_ngcontent-%COMP%]{height:37.59px;width:98.91px;border:2px solid #827397;background-color:#363062;padding:.3rem .6rem;border-radius:3rem;position:absolute;isolation:isolate;z-index:-1;transition:.4s cubic-bezier(.175,.885,.32,1.275);transform:translate(230px)}@media (max-width: 690px){.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;align-items:center;width:100vw;gap:.7rem;margin-bottom:1.5rem}.subContainer[_ngcontent-%COMP%]{background-color:#363062;width:-moz-fit-content;width:fit-content;border-radius:3rem}.linkBar[_ngcontent-%COMP%]{display:flex;gap:2rem;padding-right:3rem;position:relative;transform:translate(23px)}}"]}),n})(),MA=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-home"]],decls:5,vars:0,consts:[[1,"container"],[1,"subContainer"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1),d._UZ(2,"app-navbar"),d.qZA(),d.TgZ(3,"div",1),d._UZ(4,"router-outlet"),d.qZA()())},dependencies:[Gd,QE],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-top:1rem;padding-right:2rem;padding-left:2rem;animation-name:fadeIn;animation-timing-function:ease-in;animation-iteration-count:1;animation-duration:.5s;transition:.5s}.subContainer[_ngcontent-%COMP%]{display:flex;justify-content:center}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}"]}),n})();const JE=["holidayName"],Av=["holidayDate"],xv=["country"],RA=["memory"],Sm=["memoryContainer"],Am=["modal"],Mv=["timer"],NA=["days"],Rv=["hours"],Nv=["info"],XE=["mins"],eb=["seconds"],kv=["hoursUp"],tb=["minsUp"],nb=["secondsUp"],Pv=function(n,e,t,r){return{top:n,left:e,height:t,width:r}};function rb(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",9),d.NdJ("click",function(){const a=d.CHM(t).$implicit,l=d.oxw(2);return d.KtG(l.modalState(a.id))}),d.qZA()}if(2&n){const t=e.$implicit;d.Q6J("ngStyle",d.l5B(2,Pv,t.y+"%",t.x+"%",t.h+"px",t.w+"px"))("id",t.id)}}function kA(n,e){if(1&n&&(d.TgZ(0,"div",5,6)(2,"div",7),d.YNc(3,rb,1,7,"div",8),d.qZA()()),2&n){const t=d.oxw();d.xp6(3),d.Q6J("ngForOf",t.circles)}}function ib(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",10,11)(2,"div",12,13)(4,"div",14),d._UZ(5,"p",15,16),d.TgZ(7,"div",17)(8,"p"),d._uU(9,"in"),d.qZA(),d._UZ(10,"p",18,19),d.qZA()(),d.TgZ(12,"div",20),d._UZ(13,"p",21,22),d.qZA(),d.TgZ(15,"div",23),d._UZ(16,"p",24,25),d.qZA(),d.TgZ(18,"div",26),d._UZ(19,"div",27),d.TgZ(20,"button",28),d.NdJ("mouseenter",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.hoverStateA())})("mouseleave",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.hoverStateI())})("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.closeMemory())}),d._UZ(21,"div",29)(22,"div",29),d.qZA()()()()}if(2&n){const t=d.oxw();d.xp6(21),d.Q6J("ngClass",!0===t.hover?"line1F":"line1"),d.xp6(1),d.Q6J("ngClass",!0===t.hover?"line2F":"line2")}}function sb(n,e){if(1&n&&(d.TgZ(0,"div",30)(1,"div",31)(2,"p",32,33),d._uU(4),d.qZA(),d.TgZ(5,"p",32,34),d._uU(7),d.qZA(),d.TgZ(8,"p",32,35),d._uU(10),d.qZA(),d.TgZ(11,"p",32,36),d._uU(13),d.qZA()(),d.TgZ(14,"p",37),d._uU(15,"to view"),d.qZA()()),2&n){const t=d.oxw();d.xp6(4),d.hij("",t.daysCountUp,"d"),d.xp6(3),d.hij("",t.hourCountUp,"h"),d.xp6(3),d.hij("",t.minCountUp,"m"),d.xp6(3),d.hij("",t.secondCountUp,"s")}}function ob(n,e){if(1&n&&(d.TgZ(0,"div",38,6)(2,"div",39)(3,"div",40,41)(5,"div",42)(6,"p",43,44),d._uU(8),d.qZA()(),d.TgZ(9,"div",42)(10,"p",45,46),d._uU(12),d.qZA()(),d.TgZ(13,"div",42)(14,"p",47,48),d._uU(16),d.qZA()(),d.TgZ(17,"div",42)(18,"p",49,50),d._uU(20),d.qZA()()(),d.TgZ(21,"h1",51,52),d._uU(23,"till memories become available."),d.qZA()()()),2&n){const t=d.oxw();d.xp6(8),d.hij("",t.dayCountDown,"d"),d.xp6(4),d.hij("",t.hourCountDown,"h"),d.xp6(4),d.hij("",t.minCountDown,"m"),d.xp6(4),d.hij("",t.secondCountDown,"s")}}let ab=(()=>{class n{constructor(t,r){this.holidayService=t,this.dbService=r,this.modalStatus=!1,this.viewTime=!1,this.circles=[],this.hover=!1}ngOnInit(){this.dbService.retrieveMemories(),this.dbService.memoriesArray.subscribe(D=>this.memories=D),this.dbService.count.next(this.dbService.memoriesArray.getValue().length),this.dbService.count.subscribe(D=>this.numberOfMemories=D),this.holidayService.index.subscribe(D=>this.currentIndex=D),this.generateCircle();let t=(new Date).getTime(),r=(new Date).getFullYear(),i=(new Date).getMinutes(),a=(new Date).getHours(),l=(new Date).getMonth()+1,h=(new Date).getDate();new Date(`${l} ${h}, ${r} ${a}:${i}:29`).getTime()-t<0?this.viewState():this.closeState()}ngAfterViewInit(){}memoriesTimerDown(){let t=setInterval(()=>{let r=(new Date).getTime(),i=(new Date).getFullYear(),a=(new Date).getMinutes(),l=(new Date).getHours(),h=(new Date).getMonth()+1,_=(new Date).getDate(),D=new Date(`${h} ${_}, ${i} ${l}:${a}:30`).getTime()-r,S=Math.floor(D/864e5),R=Math.floor(D%864e5/36e5),V=Math.floor(D%36e5/6e4),j=Math.floor(D%6e4/1e3);this.dayCountDown=S.toString(),this.hourCountDown=R.toString(),this.minCountDown=V.toString(),this.secondCountDown=j.toString(),this.days.nativeElement.style.opacity="1",this.hours.nativeElement.style.opacity="1",this.mins.nativeElement.style.opacity="1",this.seconds.nativeElement.style.opacity="1",this.info.nativeElement.style.opacity="1",D<0&&(clearInterval(t),this.viewState())},1e3)}memoriesTimerUp(){let t=setInterval(()=>{let r=(new Date).getTime(),i=(new Date).getFullYear(),a=(new Date).getMinutes(),l=(new Date).getHours(),h=(new Date).getMonth()+1,_=(new Date).getDate(),D=new Date(`${h} ${_}, ${i} ${l}:${a}:59`).getTime()-r,S=Math.floor(D/864e5),R=Math.floor(D%864e5/36e5),V=Math.floor(D%36e5/6e4),j=Math.floor(D%6e4/1e3);this.daysCountUp=S.toString(),this.hourCountUp=R.toString(),this.minCountUp=V.toString(),this.secondCountUp=j.toString(),D<0&&(clearInterval(t),this.closeState())},1e3)}viewState(){this.memoriesTimerUp(),this.viewTime=!0,this.holidayService.memoryboxStatus.next("available")}closeState(){this.memoriesTimerDown(),this.viewTime=!1,this.holidayService.memoryboxStatus.next("unavailable")}generateRandom(t,r){const i=r-t;let a=Math.random();return a=Math.floor(a*i),a+=t,a}generateCircle(){this.circles=[];for(let t=0;t<this.numberOfMemories;t++){const r=this.generateRandom(10,40),i=this.generateRandom(0,95);let l={y:this.generateRandom(10,95),x:i,h:r,w:r,id:t};this.circles.push(l)}}modalState(t){this.modalStatus=!0;const r=Number(t);this.holidayService.index.next(r),setTimeout(()=>{console.log("modalState i:",t),this.updateView(t)},50)}updateView(t){console.log("updateView I:",t),console.log(this.memories);const r=this.memories.findIndex(a=>a.id===t);console.log(r);const i=this.circles.findIndex(a=>a.id===this.currentIndex);this.dbService.updateMemory(t),(void 0!==this.memories[r]||null!==this.memories[r])&&this.dbService.viewedMemoriesArray.next(this.dbService.viewedMemoriesArray.getValue().concat([this.memories[r]])),setTimeout(()=>{this.memories.length>0&&(this.holidayName.nativeElement.innerText=this.memories.at(r).holidayName,this.holidayDate.nativeElement.innerText=this.memories.at(r).holidayDate,this.country.nativeElement.innerText=this.memories.at(r).country,this.memory.nativeElement.innerText=this.memories.at(r).memory),this.memories.splice(r,1),this.circles.splice(i,1)},50)}closeMemory(){null!==this.currentIndex&&(this.modal.nativeElement.style.opacity="0",setTimeout(()=>{this.modalStatus=!1,this.hover=!1},200))}hoverStateA(){this.hover=!0}hoverStateI(){this.hover=!1}ngOnDestroy(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(qy),d.Y36(Jg))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-memories"]],viewQuery:function(t,r){if(1&t&&(d.Gf(JE,5),d.Gf(Av,5),d.Gf(xv,5),d.Gf(RA,5),d.Gf(Sm,5),d.Gf(Am,5),d.Gf(Mv,5),d.Gf(NA,5),d.Gf(Rv,5),d.Gf(Nv,5),d.Gf(XE,5),d.Gf(eb,5),d.Gf(kv,5),d.Gf(tb,5),d.Gf(nb,5)),2&t){let i;d.iGM(i=d.CRH())&&(r.holidayName=i.first),d.iGM(i=d.CRH())&&(r.holidayDate=i.first),d.iGM(i=d.CRH())&&(r.country=i.first),d.iGM(i=d.CRH())&&(r.memory=i.first),d.iGM(i=d.CRH())&&(r.memoryContainer=i.first),d.iGM(i=d.CRH())&&(r.modal=i.first),d.iGM(i=d.CRH())&&(r.timer=i.first),d.iGM(i=d.CRH())&&(r.days=i.first),d.iGM(i=d.CRH())&&(r.hours=i.first),d.iGM(i=d.CRH())&&(r.info=i.first),d.iGM(i=d.CRH())&&(r.mins=i.first),d.iGM(i=d.CRH())&&(r.seconds=i.first),d.iGM(i=d.CRH())&&(r.hoursUp=i.first),d.iGM(i=d.CRH())&&(r.minsUp=i.first),d.iGM(i=d.CRH())&&(r.secondsUp=i.first)}},decls:5,vars:4,consts:[[1,"container"],["class","subContainer",4,"ngIf"],["class","modal",4,"ngIf"],["class","timerContainer2","id","timerContainer2",4,"ngIf"],["class","subContainer2",4,"ngIf"],[1,"subContainer"],["subContainer",""],[1,"memoryContainer"],["class"," circle",3,"ngStyle","id","click",4,"ngFor","ngForOf"],[1,"circle",3,"ngStyle","id","click"],[1,"modal"],["modal",""],[1,"memoryBox"],["memoryContainer",""],[1,"group1"],[1,"holidayName"],["holidayName",""],[1,"subGroup"],[1,"country"],["country",""],[1,"group4"],[1,"holidayDate"],["holidayDate",""],[1,"group2"],[1,"memory"],["memory",""],[1,"group3"],[1,"overlay"],[1,"buttonAdd",3,"mouseenter","mouseleave","click"],[3,"ngClass"],["id","timerContainer2",1,"timerContainer2"],[1,"timer2"],[1,"number2"],["DaysUp",""],["hoursUp",""],["minsUp",""],["secondsUp",""],[1,"info2"],[1,"subContainer2"],[1,"timerContainer"],[1,"timer"],["timer",""],[1,"tContainer"],["id","days",1,"number"],["days",""],["id","hours",1,"number"],["hours",""],["id","mins",1,"number"],["mins",""],["id","seconds",1,"number"],["seconds",""],[1,"info"],["info",""]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d.YNc(1,kA,4,1,"div",1),d.YNc(2,ib,23,2,"div",2),d.YNc(3,sb,16,4,"div",3),d.YNc(4,ob,24,4,"div",4),d.qZA()),2&t&&(d.xp6(1),d.Q6J("ngIf",!0===r.viewTime),d.xp6(1),d.Q6J("ngIf",!0===r.modalStatus),d.xp6(1),d.Q6J("ngIf",!0===r.viewTime),d.xp6(1),d.Q6J("ngIf",!1===r.viewTime))},dependencies:[Jt,Yi,Pn,ud],styles:[".container[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;width:-moz-fit-content;width:fit-content;display:flex;flex-direction:column;justify-content:center;align-items:center;height:85vh;width:95vw}.subContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;width:100%;background-color:#363062;border-radius:2rem;position:relative}.memoryContainer[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;width:-moz-fit-content;width:fit-content}.circle[_ngcontent-%COMP%]{position:absolute;isolation:isolate;z-index:5;background-color:#e9d5da;overflow:hidden;box-shadow:0 0 20px #827397;transition:.6s;border-radius:50%;transform:scale(1);padding:0}.circle[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#827397;transition:.4s;border-radius:50%;animation-name:none;z-index:5;box-shadow:0 0 20px #e9d5da}.modal[_ngcontent-%COMP%]{height:100vh;width:100vw;position:fixed;isolation:isolate;display:flex;justify-content:center;align-items:center;top:0;left:0;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);animation-name:activeModal;animation-duration:.2s;animation-timing-function:ease-in;animation-iteration-count:1;transition:.2s;z-index:10}.overlay[_ngcontent-%COMP%]{height:100%;width:100%;background-color:#363062;opacity:.8;z-index:-1;position:absolute;isolation:isolate;top:0;left:0}.memoryBox[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;width:350px;background-color:#827397;border-radius:2rem;display:flex;flex-direction:column;justify-content:flex-start;align-items:center;padding:3rem 2rem;gap:1rem;transition:.3s ease-in}.group1[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;max-width:270px;box-shadow:inset 2px 2px 5px 1px #00000026,inset -5px -5px 8px #e9d5da0d;border-radius:1.25rem;padding:1rem 2rem;gap:.25rem}.subGroup[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;gap:.45rem}.group2[_ngcontent-%COMP%]{margin-bottom:1rem}.group4[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;gap:.3rem;height:0px}@keyframes activeModal{0%{opacity:0}to{opacity:1}}@keyframes inactiveModal{0%{opacity:1}to{opacity:0}}.country[_ngcontent-%COMP%]{font-weight:400;letter-spacing:.1rem;color:#e9d5da;font-size:.65rem}p[_ngcontent-%COMP%]{font-size:.8rem;font-weight:100;color:#e9d5da;letter-spacing:.1rem}.holidayName[_ngcontent-%COMP%]{font-weight:100;letter-spacing:.15rem;font-family:Josefin sans,sans-serif;color:#e9d5da;font-size:1.1rem;text-align:center}.holidayDate[_ngcontent-%COMP%]{letter-spacing:.07rem;font-weight:200;font-size:.6rem}.memory[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border:2px solid red;background-color:#827397;border:none;height:250px;width:270px;border-radius:1.5rem;box-shadow:inset 2px 2px 5px 1px #00000026,inset -5px -5px 8px #e9d5da0d;outline:none;padding:.5rem 1rem;color:#e9d5da;resize:none;text-align:center;font-size:1.2rem;font-family:Reenie Beanie,cursive}.buttonAdd[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:-moz-fit-content;height:fit-content;width:-moz-fit-content;width:fit-content;background-color:transparent;cursor:pointer;border:none}.line1[_ngcontent-%COMP%]{height:18px;width:2.25px;border-radius:1rem;background-color:#e9d5da;transform:rotate(-45deg);transition:.4s}.line1F[_ngcontent-%COMP%]{height:18px;width:2.25px;border-radius:1rem;transition:.4s;background-color:#363062;transform:rotate(-45deg)}.line2[_ngcontent-%COMP%]{height:18px;width:2.25px;border-radius:1rem;transition:.4s;background-color:#e9d5da;transform-origin:center;transform:translate(-2.25px) rotate(45deg)}.line2F[_ngcontent-%COMP%]{height:18px;width:2.25px;transition:.4s;border-radius:1rem;background-color:#363062;transform:translate(-2.25px) rotate(45deg)}.subContainer2[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:-moz-fit-content;height:fit-content;min-height:100%;width:100%;background-color:#363062;border-radius:2rem;position:relative}.timerContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;height:-moz-fit-content;height:fit-content;width:-moz-fit-content;width:fit-content;background-color:#363062;border-radius:1rem;gap:2rem}.tContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:1rem;width:200px}.timer[_ngcontent-%COMP%]{text-align:center;display:flex;justify-content:center;align-items:center;flex-wrap:wrap;height:-moz-fit-content;height:fit-content;width:-moz-fit-content;width:fit-content;background-color:#363062;border-radius:1rem;box-shadow:7px 7px 10px #0003,-7px -7px 10px #e9d5da0a;padding:2rem 3rem}.number[_ngcontent-%COMP%]{font-size:4.5rem;opacity:0;transition:.2s}.number2[_ngcontent-%COMP%]{font-size:.9rem;color:#363062;font-weight:600;width:37px;text-align:center}.info[_ngcontent-%COMP%]{color:#e9d5da;font-weight:100;letter-spacing:.1rem;opacity:0;transition:.2s}.info2[_ngcontent-%COMP%]{color:#363062;font-weight:600;font-size:.85rem}.timerContainer2[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;margin-top:.5rem;transition:.2s;opacity:1;gap:.5rem}.timer2[_ngcontent-%COMP%]{display:flex}@media (max-width: 520){.number[_ngcontent-%COMP%]{font-size:1rem;opacity:0;transition:.2s}.info[_ngcontent-%COMP%]{color:#e9d5da;font-weight:100;letter-spacing:.1rem;opacity:0;font-size:.85rem;transition:.2s}.tContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:1rem;width:100px}.timerContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;height:-moz-fit-content;height:fit-content;width:-moz-fit-content;width:fit-content;background-color:#363062;border-radius:1rem}}"]}),n})(),ub=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),Vc=(()=>{class n extends ub{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const Ys=new d.OlP("NgValueAccessor"),lb={provide:Ys,useExisting:(0,d.Gpc)(()=>Zf),multi:!0},db=new d.OlP("CompositionEventMode");let Zf=(()=>{class n extends ub{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function cb(){const n=F()?F().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(db,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[d._Bn([lb]),d.qOj]}),n})();const Bi=new d.OlP("NgValidators"),wl=new d.OlP("NgAsyncValidators");function Kf(n){return null}function Uc(n){return null!=n}function _b(n){return(0,d.QGY)(n)?(0,rn.D)(n):n}function yb(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function jv(n,e){return e.map(t=>t(n))}function Hv(n){return n.map(e=>function LA(n){return!n.validate}(e)?e:t=>e.validate(t))}function xm(n){return null!=n?function VA(n){if(!n)return null;const e=n.filter(Uc);return 0==e.length?null:function(t){return yb(jv(t,e))}}(Hv(n)):null}function Qs(n){return null!=n?function Mm(n){if(!n)return null;const e=n.filter(Uc);return 0==e.length?null:function(t){return function PA(...n){const e=(0,mi.jO)(n),{args:t,keys:r}=qa(n),i=new wr.y(a=>{const{length:l}=t;if(!l)return void a.complete();const h=new Array(l);let _=l,w=l;for(let D=0;D<l;D++){let S=!1;(0,ys.Xf)(t[D]).subscribe((0,xn.x)(a,R=>{S||(S=!0,w--),h[D]=R},()=>_--,void 0,()=>{(!_||!S)&&(w||a.next(r?ea(r,h):h),a.complete())}))}});return e?i.pipe(Ka(e)):i}(jv(t,e).map(_b)).pipe((0,Je.U)(yb))}}(Hv(n)):null}function vb(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function wb(n){return n._rawValidators}function Mo(n){return n._rawAsyncValidators}function bs(n){return n?Array.isArray(n)?n:[n]:[]}function is(n,e){return Array.isArray(n)?n.includes(e):n===e}function $v(n,e){const t=bs(e);return bs(n).forEach(i=>{is(t,i)||t.push(i)}),t}function Gv(n,e){return bs(e).filter(t=>!is(n,t))}class Cb{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=xm(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Qs(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ji extends Cb{get formDirective(){return null}get path(){return null}}class Cl extends Cb{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Eb{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Ib=(()=>{class n extends Eb{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Cl,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[d.qOj]}),n})(),Nm=(()=>{class n extends Eb{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ji,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[d.qOj]}),n})();const Qf="VALID",km="INVALID",ih="PENDING",Jf="DISABLED";function Kv(n){return(Pm(n)?n.validators:n)||null}function Rb(n){return Array.isArray(n)?xm(n):n||null}function Yv(n,e){return(Pm(e)?e.asyncValidators:n)||null}function Nb(n){return Array.isArray(n)?Qs(n):n||null}function Pm(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class Ob{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Rb(this._rawValidators),this._composedAsyncValidatorFn=Nb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Qf}get invalid(){return this.status===km}get pending(){return this.status==ih}get disabled(){return this.status===Jf}get enabled(){return this.status!==Jf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Rb(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Nb(e)}addValidators(e){this.setValidators($v(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators($v(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Gv(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Gv(e,this._rawAsyncValidators))}hasValidator(e){return is(this._rawValidators,e)}hasAsyncValidator(e){return is(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ih,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Jf,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Qf,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Qf||this.status===ih)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Jf:Qf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ih,this._hasOwnPendingAsyncValidator=!0;const t=_b(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?Jf:this.errors?km:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ih)?ih:this._anyControlsHaveStatus(km)?km:Qf}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Pm(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class Om extends Ob{constructor(e,t,r){super(Kv(t),Yv(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function Pb(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new d.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function kb(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[t])throw new d.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function sh(n,e){Fm(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function Lb(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Qv(n,e)})}(n,e),function Ub(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Vb(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Qv(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Fb(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ep(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),np(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function tp(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Fm(n,e){const t=wb(n);null!==e.validator?n.setValidators(vb(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Mo(n);null!==e.asyncValidator?n.setAsyncValidators(vb(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();tp(e._rawValidators,i),tp(e._rawAsyncValidators,i)}function np(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=wb(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(l=>l!==e.validator);a.length!==i.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const i=Mo(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(l=>l!==e.asyncValidator);a.length!==i.length&&(t=!0,n.setAsyncValidators(a))}}}const r=()=>{};return tp(e._rawValidators,r),tp(e._rawAsyncValidators,r),t}function Qv(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function El(n,e){Fm(n,e)}function Jv(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}const ZA={provide:ji,useExisting:(0,d.Gpc)(()=>fu)},rp=(()=>Promise.resolve())();let fu=(()=>{class n extends ji{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new d.vpe,this.form=new Om({},xm(t),Qs(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){rp.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),sh(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){rp.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){rp.then(()=>{const r=this._findContainer(t.path),i=new Om({});El(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){rp.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){rp.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Jv(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Bi,10),d.Y36(wl,10))},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([ZA]),d.qOj]}),n})();function Gb(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function ip(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const pa=class extends Ob{constructor(e=null,t,r){super(Kv(t),Yv(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Pm(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=ip(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Gb(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Gb(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){ip(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let Bc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),n0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const jc=new d.OlP("NgModelWithFormControlWarning"),rx={provide:ji,useExisting:(0,d.Gpc)(()=>sp)};let sp=(()=>{class n extends ji{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(np(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return sh(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){ep(t.control||null,t,!1),function Dt(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,Jv(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(ep(r||null,t),(n=>n instanceof pa)(i)&&(sh(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);El(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function WA(n,e){return np(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Fm(this.form,this),this._oldForm&&np(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Bi,10),d.Y36(wl,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([rx]),d.qOj,d.TTD]}),n})();const sx={provide:Cl,useExisting:(0,d.Gpc)(()=>Xb)};let Xb=(()=>{class n extends Cl{constructor(t,r,i,a,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.update=new d.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function $b(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===Zf?t=a:function Hb(n){return Object.getPrototypeOf(n.constructor)===Vc}(a)?r=a:i=a}),i||r||t||null}(0,a)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function jb(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function Xf(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(d.Y36(ji,13),d.Y36(Bi,10),d.Y36(wl,10),d.Y36(Ys,10),d.Y36(jc,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[d._Bn([sx]),d.qOj,d.TTD]}),n})();let Hc=(()=>{class n{constructor(){this._validator=Kf}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Kf,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,features:[d.TTD]}),n})();const fx={provide:Bi,useExisting:(0,d.Gpc)(()=>$m),multi:!0};let $m=(()=>{class n extends Hc{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=t=>function nI(n){return"number"==typeof n?n:parseInt(n,10)}(t),this.createValidator=t=>function mb(n){return e=>function Lv(n){return null!=n&&"number"==typeof n.length}(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&d.uIk("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},features:[d._Bn([fx]),d.qOj]}),n})(),cI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[n0]}),n})(),dI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[cI]}),n})(),px=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:jc,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[cI]}),n})();function hI(n,e){1&n&&(d.TgZ(0,"div",5)(1,"h2"),d._uU(2,"Nothing here till you view a memory."),d.qZA()())}function _x(n,e){if(1&n&&(d.TgZ(0,"div",8)(1,"div",9)(2,"p",10),d._uU(3),d.qZA(),d.TgZ(4,"p",11),d._uU(5),d.qZA(),d.TgZ(6,"p",12),d._uU(7),d.qZA(),d.TgZ(8,"div",13)(9,"p",14),d._uU(10),d.qZA()()()()),2&n){const t=e.$implicit;d.xp6(3),d.Oqu(t.country),d.xp6(2),d.Oqu(t.holidayName),d.xp6(2),d.Oqu(t.holidayDate),d.xp6(3),d.Oqu(t.memory)}}function yx(n,e){if(1&n&&(d.TgZ(0,"div",6),d.YNc(1,_x,11,4,"div",7),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngForOf",t.viewedMemories)}}let fI=(()=>{class n{constructor(t){this.dbService=t,this.viewedMemories=[],this.viewedM=!1}ngOnInit(){this.dbService.retrieveViewedMemories(),this.dbService.viewedMemoriesArray.subscribe(t=>this.viewedMemories=t),0!==this.viewedMemories.length&&(this.viewedM=!0)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Jg))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-p-memories"]],decls:6,vars:2,consts:[[1,"container"],[1,"titleContainer"],[1,"title"],["class","infoContainer",4,"ngIf"],["class","memoryContainer",4,"ngIf"],[1,"infoContainer"],[1,"memoryContainer"],["class","memoryBox",4,"ngFor","ngForOf"],[1,"memoryBox"],[1,"group"],[1,"country"],[1,"holidayName"],[1,"holidayDate"],[1,"box"],[1,"memory"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"a",2),d._uU(3,"Memories Viewed"),d.qZA()(),d.YNc(4,hI,3,0,"div",3),d.YNc(5,yx,2,1,"div",4),d.qZA()),2&t&&(d.xp6(4),d.Q6J("ngIf",!1===r.viewedM),d.xp6(1),d.Q6J("ngIf",!0===r.viewedM))},dependencies:[Yi,Pn],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;align-items:center;gap:1rem;height:-moz-fit-content;height:fit-content;width:86vw;padding-bottom:1.25rem;padding-left:2.5rem;padding-right:2.5rem}.titleContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;background-color:#363062;color:#a296b1;padding:1rem 3rem;border-radius:2rem;cursor:pointer;width:641.82px;min-width:-moz-fit-content;min-width:fit-content;height:56px}.title[_ngcontent-%COMP%]{color:#e9d5da;font-weight:200;letter-spacing:.1rem}.memoryContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;align-items:center;padding:2rem;background-color:#363062;width:100%;border-radius:2rem;height:100%;gap:2rem}.infoContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;text-align:center;padding:4rem;background-color:#363062;width:100%;border-radius:2rem;height:100%;gap:1rem}h2[_ngcontent-%COMP%]{color:#a296b1;font-weight:200;letter-spacing:.1rem}.memoryBox[_ngcontent-%COMP%]{background-color:#827397;border-radius:1rem;height:-moz-fit-content;height:fit-content;padding:2rem;width:95%}.group[_ngcontent-%COMP%]{display:flex;text-align:center;justify-content:space-evenly;align-items:center;gap:1.5rem}.box[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;width:-moz-fit-content;width:fit-content;padding:1rem;display:flex;justify-content:center;align-items:center;text-align:center;border-radius:.4rem;width:500px;height:137px;min-width:350px;box-shadow:inset 3px 3px 5px #00000026,inset -1px -1px 5px #e9d5da14}.memory[_ngcontent-%COMP%]{font-size:.75rem;font-weight:300;letter-spacing:.05rem;color:#3d385f}.holidayName[_ngcontent-%COMP%]{color:#3d385f;font-weight:300;letter-spacing:.1rem}.holidayDate[_ngcontent-%COMP%]{color:#3d385f;font-weight:300;letter-spacing:.02rem}.country[_ngcontent-%COMP%]{color:#3d385f;font-weight:300;letter-spacing:.1rem}"]}),n})();const vx=["country"],wx=["holidayName"],Cx=["holidayDate"],l0=["memory"],c0=["view"],pI=["modal"],d0=["memoryContainer"];function Ex(n,e){1&n&&d._UZ(0,"app-p-memories")}function bx(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",6)(1,"a",7),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.fetchData("US"))}),d._uU(2,"United States"),d.qZA(),d.TgZ(3,"a",7),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.fetchData("NO"))}),d._uU(4,"Norway"),d.qZA(),d.TgZ(5,"a",7),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.fetchData("JP"))}),d._uU(6,"Japan"),d.qZA(),d.TgZ(7,"a",7),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.fetchData("GR"))}),d._uU(8,"Greece"),d.qZA(),d.TgZ(9,"a",7),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.fetchData("RU"))}),d._uU(10,"Russia"),d.qZA(),d.TgZ(11,"a",7),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.fetchData("EG"))}),d._uU(12,"Egypt"),d.qZA()()}}function h0(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",12)(1,"button",13),d.NdJ("mouseover",function(){d.CHM(t);const i=d.oxw(2);return d.KtG(i.changeState())})("mouseout",function(){d.CHM(t);const i=d.oxw(2);return d.KtG(i.changeState())})("mouseover",function(){const a=d.CHM(t).index,l=d.oxw(2);return d.KtG(l.getId(a))})("mouseout",function(){const a=d.CHM(t).index,l=d.oxw(2);return d.KtG(l.getId(a))})("click",function(){const a=d.CHM(t).index,l=d.oxw(2);return d.KtG(l.modalState(a))}),d._uU(2),d.qZA(),d.TgZ(3,"p",14),d._uU(4),d.qZA()()}if(2&n){const t=e.$implicit,r=e.index;d.xp6(1),d.s9C("id",r),d.xp6(1),d.hij(" ",t.localName," "),d.xp6(2),d.hij("",t.date," ")}}function Ix(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",15,16)(2,"div",17,18)(4,"div",19)(5,"div",20)(6,"p",21),d._uU(7,"Celebrating"),d.qZA(),d._UZ(8,"p",22,23),d.qZA(),d._UZ(10,"p",24,25),d.qZA(),d.TgZ(12,"div",26)(13,"div",27)(14,"label"),d._uU(15,"Memory highlight:"),d.qZA(),d.TgZ(16,"textarea",28,29),d.NdJ("input",function(){d.CHM(t);const i=d.oxw(2);return d.KtG(i.checkInput())}),d.qZA()()(),d.TgZ(18,"div",30)(19,"button",31),d.NdJ("click",function(){d.CHM(t);const i=d.oxw(2);return d.KtG(i.add())}),d._UZ(20,"div",32)(21,"div",33),d.qZA(),d.TgZ(22,"p",34,35),d._uU(24,"Memory added!"),d.qZA()()()()}if(2&n){const t=d.oxw(2);d.xp6(19),d.Q6J("disabled",t.isInputEmpty),d.xp6(1),d.Q6J("ngClass",!0===t.added?"line1F":"line1"),d.xp6(1),d.Q6J("ngClass",!0===t.added?"line2F":"line2")}}function gI(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",8),d.YNc(1,h0,5,3,"div",9),d.TgZ(2,"form",10),d.NdJ("ngSubmit",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.newMemory)}),d.YNc(3,Ix,25,3,"div",11),d.qZA()()}if(2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngForOf",t.holidaysArray),d.xp6(1),d.Q6J("formGroup",t.newMemory),d.xp6(1),d.Q6J("ngIf",!0===t.modalStatus)}}let lh=(()=>{class n{constructor(t,r,i){this.http=t,this.holidaySetsService=r,this.dbService=i,this.currentYear=(new Date).getFullYear,this.holidaysArray=[],this.hover=!1,this.modalStatus=!1,this.added=!1,this.isInputEmpty=!0,this.pMemories=!1,this.memoryObject={holidayName:null,holidayDate:null,country:null,peopleCount:null,memory:null,id:null}}changeView(){this.pMemories=!this.pMemories}ngOnInit(){this.dbService.retrieveMemories(),this.dbService.retrieveCount(),this.dbService.count.subscribe(t=>this.addCount=t),this.holidaySetsService.holidaySetsArray.subscribe(t=>this.holidaysArray=t),this.holidaySetsService.addCount.subscribe(t=>this.addCount=t),this.newMemory=new Om({holidayName:new pa(null),holidayDate:new pa(null),country:new pa(null),memory:new pa(null),id:new pa(null)}),this.fetchData("NO")}ngAfterViewInit(){}modalState(t){this.modalStatus=!0,this.updateView(t)}fetchData(t){this.http.get(`https://date.nager.at/api/v3/publicholidays/2022/${t}`).subscribe(r=>{this.savedData(r)}),this.updateCountry(t)}updateCountry(t){switch(t){case"NO":this.newMemory.patchValue({country:"Norway"});break;case"US":this.newMemory.patchValue({country:"United States"});break;case"GR":this.newMemory.patchValue({country:"Greece"});break;case"JP":this.newMemory.patchValue({country:"Japan"});break;case"RU":this.newMemory.patchValue({country:"Russia"});break;case"EG":this.newMemory.patchValue({country:"Egypt"})}}savedData(t){this.holidaySetsService.holidaySetsArray.next(t)}updateView(t){setTimeout(()=>{this.holidayName.nativeElement.innerText=this.holidaysArray[t].localName,this.newMemory.patchValue({holidayName:this.holidaysArray[t].localName,holidayDate:this.holidaysArray[t].date,id:this.addCount})},50)}changeState(){this.hover=!this.hover}getId(t){document.getElementById(`${t}`).innerText=!0===this.hover?this.holidaysArray[t].name:this.holidaysArray[t].localName}add(){this.added=!0,this.dbService.memoriesArray.next(this.dbService.memoriesArray.getValue().concat([this.newMemory.value]));const t=this.newMemory.value.country;this.dbService.saveMemory(this.newMemory.value),this.newMemory.reset(),this.dbService.count.next(this.dbService.count.getValue()+1),this.dbService.saveCount(),this.newMemory.patchValue({country:t}),setTimeout(()=>{this.view.nativeElement.style.opacity="1",setTimeout(()=>{this.view.nativeElement.style.opacity="0",setTimeout(()=>{this.memoryContainer.nativeElement.style.opacity="0",setTimeout(()=>{this.modalStatus=!1,this.added=!1},550)},250)},1e3)},500)}checkInput(){""!==this.memory.nativeElement.value&&(this.isInputEmpty=!1)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Kg),d.Y36(qy),d.Y36(Jg))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-search"]],viewQuery:function(t,r){if(1&t&&(d.Gf(vx,5),d.Gf(wx,5),d.Gf(Cx,5),d.Gf(l0,5),d.Gf(c0,5),d.Gf(pI,5),d.Gf(d0,5)),2&t){let i;d.iGM(i=d.CRH())&&(r.country=i.first),d.iGM(i=d.CRH())&&(r.holidayName=i.first),d.iGM(i=d.CRH())&&(r.holidayDate=i.first),d.iGM(i=d.CRH())&&(r.memory=i.first),d.iGM(i=d.CRH())&&(r.view=i.first),d.iGM(i=d.CRH())&&(r.modal=i.first),d.iGM(i=d.CRH())&&(r.memoryContainer=i.first)}},decls:6,vars:5,consts:[[1,"container"],[1,"pastBtn",3,"ngClass","click"],[1,"innerCircle",3,"ngClass"],[4,"ngIf"],["class","countries",4,"ngIf"],["class","countryContainer",4,"ngIf"],[1,"countries"],[3,"click"],[1,"countryContainer"],["class","info",4,"ngFor","ngForOf"],["accept-charset","utf-8",3,"formGroup","ngSubmit"],["class","modal",4,"ngIf"],[1,"info"],[1,"localName",3,"id","mouseover","mouseout","click"],[1,"date"],[1,"modal"],["modal",""],[1,"memoryContainer"],["memoryContainer",""],[1,"group"],[1,"nameContainer"],[1,"country"],[1,"holidayName"],["holidayName",""],[1,"holidayDate"],["holidayDate",""],[1,"group1"],[1,"subGroup"],["maxlength","450","formControlName","memory","type","text",1,"memory",3,"input"],["memory",""],[1,"group2"],[1,"buttonAdd",3,"disabled","click"],[1,"line1",3,"ngClass"],[1,"line2",3,"ngClass"],[1,"indication"],["view",""]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"button",1),d.NdJ("click",function(){return r.changeView()}),d._UZ(2,"div",2),d.qZA(),d.YNc(3,Ex,1,0,"app-p-memories",3),d.YNc(4,bx,13,0,"div",4),d.YNc(5,gI,4,3,"div",5),d.qZA()),2&t&&(d.xp6(1),d.Q6J("ngClass",!0===r.pMemories?"pastBtnActive":"pastBtn"),d.xp6(1),d.Q6J("ngClass",!0===r.pMemories?"innerCircleActive":"innerCircle"),d.xp6(1),d.Q6J("ngIf",!0===r.pMemories),d.xp6(1),d.Q6J("ngIf",!1===r.pMemories),d.xp6(1),d.Q6J("ngIf",!1===r.pMemories))},dependencies:[Jt,Yi,Pn,Bc,Zf,Ib,Nm,$m,sp,Xb,fI],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;align-items:center;gap:1rem;height:-moz-fit-content;height:fit-content;width:86vw;padding-bottom:1.25rem;padding-left:2.5rem;padding-right:2.5rem;position:relative}.countries[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:2.75rem;background-color:#363062;color:#e9d5da;padding:1rem 3rem;border-radius:2rem;cursor:pointer;height:56px}.countryContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;align-items:center;padding:1rem;background-color:#363062;width:100%;min-width:-moz-fit-content;min-width:fit-content;border-radius:2rem;height:100%;gap:.25rem}button[_ngcontent-%COMP%]{border:none;max-height:32.5px}.info[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:center;padding:.55rem 1rem}.localName[_ngcontent-%COMP%]{font-size:.9rem;letter-spacing:.1rem;background-color:#827397;padding:.5rem 2rem;border-radius:1rem;font-family:Titillium,sans-serif;font-weight:100;color:#e9d5da;cursor:pointer;transition:.25s ease-in-out}.localName[_ngcontent-%COMP%]:hover{background-color:#363062;color:#e9d5da;box-shadow:inset 3px 3px 5px #00000026,inset -1px -1px 5px #e9d5da14;transform:scale(.97);transform-origin:center;transition:.25s ease-in}.date[_ngcontent-%COMP%]{font-size:.7rem;color:#e9d5da}.modal[_ngcontent-%COMP%]{height:100vh;width:100vw;position:fixed;isolation:isolate;display:flex;justify-content:center;align-items:center;top:0;left:0;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);animation-name:activeModal;animation-duration:.2s;animation-timing-function:ease-in;animation-iteration-count:1;transition:.2s}.memoryContainer[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;width:350px;background-color:#827397;border-radius:2rem;display:flex;flex-direction:column;justify-content:flex-start;align-items:center;padding:3rem 2rem;gap:1rem;opacity:1;transition:.3s ease-in}.group1[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:1.5rem}.group2[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:.7rem}.subGroup[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:.75rem}@keyframes activeModal{0%{opacity:0}to{opacity:1}}@keyframes inactiveModal{0%{opacity:1}to{opacity:0}}.country[_ngcontent-%COMP%]{font-weight:400;letter-spacing:.1rem;color:#e9d5da;font-size:.825rem}label[_ngcontent-%COMP%]{font-size:.8rem;font-weight:100;color:#e9d5da;letter-spacing:.1rem}.nameContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.holidayName[_ngcontent-%COMP%]{font-weight:800;letter-spacing:.15rem;color:#e9d5da;font-size:1rem;text-align:center}.memory[_ngcontent-%COMP%]{background-color:#827397;border:none;height:250px;width:270px;border-radius:1.5rem;box-shadow:inset 2px 2px 5px 1px #00000026,inset -5px -5px 8px #e9d5da0d;outline:none;padding:.5rem 1rem;color:#e9d5da;resize:none;text-align:center;font-size:1.2rem;font-family:Reenie Beanie,cursive;margin-bottom:1rem}.buttonAdd[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:-moz-fit-content;height:fit-content;width:-moz-fit-content;width:fit-content;cursor:pointer;border:none;background-color:transparent}.buttonAdd[_ngcontent-%COMP%]:disabled{cursor:default}.line1[_ngcontent-%COMP%]{height:18px;width:2.25px;border-radius:1rem;background-color:#e9d5da;transform-origin:center;transform:rotate(0) translateY(0) translate(0);transition:.5s}.line1F[_ngcontent-%COMP%]{height:18px;width:2.25px;border-radius:1rem;background-color:#363062;transform-origin:right;transform:rotate(210deg) translate(-1px) translateY(1px);animation-name:checkMarkLine1;transition:.5s;animation-duration:.8s;animation-iteration-count:1;animation-timing-function:cubic-bezier(.175,.885,.32,1.275)}@keyframes checkMarkLine1{0%{color:#e9d5da;transform-origin:center;transform:rotate(0) translateY(0) translate(0)}to{color:#363062;transform-origin:right;transform:rotate(210deg) translate(-1px) translateY(1px)}}.line2[_ngcontent-%COMP%]{height:18px;width:2.15px;border-radius:1rem;background-color:#e9d5da;transform-origin:center;transform:translate(-2.25px) rotate(90deg) translateY(0);transition:.7s}.line2F[_ngcontent-%COMP%]{height:7px;width:2.15px;border-radius:1rem;background-color:#363062;transform-origin:center;transform:rotate(310deg) translateY(-1px) translate(-7px);animation-name:checkMarkLine2;transition:.7s;transition-delay:.2s;animation-duration:.8s;animation-delay:.2s;animation-iteration-count:1;animation-timing-function:cubic-bezier(.175,.885,.32,1.275)}@keyframes checkMarkLine2{0%{color:#e9d5da;transform-origin:center;transform:rotate(90deg) translateY(0) translate(-2.25px)}to{color:#363062;transform-origin:center;transform:rotate(310deg) translateY(-1px) translate(-7px)}}.indication[_ngcontent-%COMP%]{font-size:.6rem;color:#363062;font-weight:300;letter-spacing:.01rem;opacity:0;transition:.6s}.pastBtn[_ngcontent-%COMP%]{position:absolute;isolation:isolate;transform:translate(345px) translateY(12px) rotate(0) scale(1);transform-origin:center;background-color:#e9d5da;border-radius:50%;border:3.5px dotted #363062;height:3rem;width:2rem;cursor:pointer;transition:.45s cubic-bezier(.165,.84,.44,1);display:flex;justify-content:center;align-items:center}.pastBtnActive[_ngcontent-%COMP%]{background-color:#363062;border:3.5px dotted #e9d5da;transition:.45s cubic-bezier(.165,.84,.44,1);transform:translate(345px) translateY(12px) rotate(180deg) scale(.95);transform-origin:center}.innerCircle[_ngcontent-%COMP%]{height:80%;width:80%;border:2.5px dotted #363062;border-radius:50%;transition:.65s cubic-bezier(.165,.84,.44,1);transform:rotate(0) scale(1);transform-origin:center}.innerCircleActive[_ngcontent-%COMP%]{border:2.5px dotted #e9d5da;transition:.65s cubic-bezier(.165,.84,.44,1);transform:rotate(-720deg) scale(.95);transform-origin:center}"]}),n})();const mI=["email2"],Dx=["password2"],vP=["email"],_I=["password"];function f0(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",3)(1,"h1"),d._uU(2,"Login"),d.qZA(),d.TgZ(3,"form")(4,"div",4),d._UZ(5,"input",5,6),d.qZA(),d.TgZ(7,"div",4),d._UZ(8,"input",7,8),d.qZA(),d.TgZ(10,"div",4)(11,"button",9),d.NdJ("click",function(){d.CHM(t);const i=d.MAs(6),a=d.MAs(9),l=d.oxw();return d.KtG(l.login(i.value,a.value))}),d._uU(12,"Login"),d.qZA()()(),d.TgZ(13,"div",10)(14,"h4"),d._uU(15,"Don't have an account?"),d.qZA(),d.TgZ(16,"h4"),d._uU(17,"Click "),d.TgZ(18,"button",11),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.changeForm())}),d._uU(19,"here"),d.qZA()()(),d._UZ(20,"div",12),d.qZA()}if(2&n){const t=d.oxw();d.xp6(20),d.Q6J("ngClass",!0===t.active?"circle1Active":"circle1Inactive")}}function Tx(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",3)(1,"h1",13),d._uU(2,"SignUp"),d.qZA(),d.TgZ(3,"form")(4,"div",4),d._UZ(5,"input",5,14),d.qZA(),d.TgZ(7,"div",4),d._UZ(8,"input",7,15),d.qZA(),d.TgZ(10,"div",4)(11,"button",9),d.NdJ("click",function(){d.CHM(t);const i=d.MAs(6),a=d.MAs(9),l=d.oxw();return d.KtG(l.register(i.value,a.value))}),d._uU(12,"Sign up"),d.qZA()()(),d.TgZ(13,"div",10)(14,"h4"),d._uU(15,"Already have an account?"),d.qZA(),d.TgZ(16,"h4"),d._uU(17,"Click "),d.TgZ(18,"button",11),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.changeForm())}),d._uU(19,"here"),d.qZA()()()()}}const vI=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:(()=>{class n{constructor(t,r,i){this.fireAuth=t,this.router=r,this.dbService=i,this.formNo=1,this.active=null}ngOnInit(){}changeState(){this.active=!0}login(t,r){this.fireAuth.signInWithEmailAndPassword(t,r).then(()=>{this.changeState(),setTimeout(()=>{localStorage.setItem("token","true"),this.router.navigate(["home/dashboard"]),this.fireAuth.onAuthStateChanged(i=>{i&&(localStorage.setItem("userUID",i.uid),this.dbService.retrieveMemories(),this.dbService.retrieveViewedMemories())})},250)},i=>{alert(i.message),this.router.navigate(["/login"])}),this.email.nativeElement.value="",this.password.nativeElement.value=""}register(t,r){this.fireAuth.createUserWithEmailAndPassword(t,r).then(()=>{alert("Registration Successful"),this.formNo=1},i=>{alert(i.message)}),this.email2.nativeElement.value="",this.password2.nativeElement.value=""}changeForm(){1===this.formNo?this.formNo=2:2===this.formNo&&(this.formNo=1)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Lc),d.Y36(Jn),d.Y36(Jg))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-login"]],viewQuery:function(t,r){if(1&t&&(d.Gf(mI,5),d.Gf(Dx,5),d.Gf(vP,5),d.Gf(_I,5)),2&t){let i;d.iGM(i=d.CRH())&&(r.email2=i.first),d.iGM(i=d.CRH())&&(r.password2=i.first),d.iGM(i=d.CRH())&&(r.email=i.first),d.iGM(i=d.CRH())&&(r.password=i.first)}},decls:8,vars:2,consts:[[1,"container"],[1,"subContainer1"],["class","subContainer",4,"ngIf"],[1,"subContainer"],[1,"group"],["type","text","placeholder","Email"],["email",""],["type","password","placeholder","password"],["password",""],[1,"btn1",3,"click"],[1,"subGroup"],[1,"btn2",3,"click"],[1,"circle1Inactive",3,"ngClass"],[1,"signUp"],["email2",""],["password2",""]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"h1"),d._uU(3,"Holiday Craze"),d.qZA(),d.TgZ(4,"h2"),d._uU(5,"Create memories for every holiday."),d.qZA()(),d.YNc(6,f0,21,1,"div",2),d.YNc(7,Tx,20,0,"div",2),d.qZA()),2&t&&(d.xp6(6),d.Q6J("ngIf",1===r.formNo),d.xp6(1),d.Q6J("ngIf",2===r.formNo))},dependencies:[Jt,Pn,Bc,Nm,fu],styles:[".container[_ngcontent-%COMP%]{background-color:#363062;height:100vh;width:100vw;display:flex;justify-content:center;align-items:center;gap:3rem;position:relative;overflow:hidden;padding-bottom:2rem}.subContainer[_ngcontent-%COMP%]{height:500px;background-color:#363062;width:500px;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:1.5rem;position:relative;border-radius:50%;box-shadow:10px 10px 20px #0003,-10px -10px 20px #e9d5da0a}.group[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.subGroup[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}form[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;gap:.7rem}h1[_ngcontent-%COMP%]{color:#e9d5da;font-size:5rem;font-family:Reenie Beanie,cursive;font-weight:100}h2[_ngcontent-%COMP%]{color:#e9d5da;font-size:2.15rem;letter-spacing:.1rem;font-weight:100}h4[_ngcontent-%COMP%]{color:#e9d5da;font-size:.85rem;letter-spacing:.1rem;font-weight:100}input[_ngcontent-%COMP%]{text-align:center;border:none;background-color:#e9d5da;padding:.4rem;height:35px;width:250px;max-width:250px;outline:none;border-radius:2rem;letter-spacing:.07rem;color:#363062;transition:.2s ease-out;opacity:1}input[_ngcontent-%COMP%]::placeholder{transition:.2s ease-out;opacity:1}input[_ngcontent-%COMP%]:focus::placeholder{opacity:0;transition:.2s ease-in}.btn1[_ngcontent-%COMP%]{outline:none;background-color:#363062;height:70px;width:70px;padding:.25rem;border:none;border-radius:50%;letter-spacing:.05rem;color:#e9d5da;cursor:pointer;box-shadow:5px 5px 10px #0003,-2px -2px 5px #e9d5da0a;margin-top:.75rem;transition:.4s}.btn2[_ngcontent-%COMP%]{background-color:transparent;color:#e9d5da;outline:none;border:none;cursor:pointer;letter-spacing:.1rem;transition:.3s}.btn2[_ngcontent-%COMP%]:hover{color:#84797c;transition:.3s}.circle1Inactive[_ngcontent-%COMP%]{position:absolute;isolation:isolate;background-color:#dcdcdc;height:0%;width:0%;border-radius:50%;transition:.5s;animation:none;animation-duration:1s;animation-timing-function:cubic-bezier(.165,.84,.44,1);animation-iteration-count:1;transform-origin:center;transform:scale(0);z-index:-1;position:relative}.circle1Active[_ngcontent-%COMP%]{position:absolute;isolation:isolate;background-color:#e9d5da;height:500%;width:500%;border-radius:50%;transition:.5s;animation:change;animation-duration:1s;transform:scale(1);transform-origin:center;animation-timing-function:cubic-bezier(.165,.84,.44,1);animation-iteration-count:1;z-index:1}@keyframes change{0%{height:0%;width:0%;z-index:-1;transform:scale(0);transform-origin:center}to{height:500%;width:500%;z-index:1;transform:scale(1);transform-origin:center}}.signUp[_ngcontent-%COMP%]{font-size:3.5rem}@media (max-width: 1059px){.container[_ngcontent-%COMP%]{background-color:#363062;height:100vh;width:100vw;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:3rem;position:relative;overflow:hidden;text-align:center;padding-bottom:2rem}.subContainer[_ngcontent-%COMP%]{height:350px;background-color:#363062;width:350px;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:1.5rem;position:relative;border-radius:50%;box-shadow:10px 10px 20px #0003,-10px -10px 20px #e9d5da0a}h1[_ngcontent-%COMP%]{color:#e9d5da;font-size:3rem;font-family:Reenie Beanie,cursive;font-weight:100}h2[_ngcontent-%COMP%]{color:#e9d5da;font-size:1.5rem;letter-spacing:.1rem;font-weight:100}h4[_ngcontent-%COMP%]{color:#e9d5da;font-size:.75rem;letter-spacing:.1rem;font-weight:100}input[_ngcontent-%COMP%]{text-align:center;border:none;background-color:#e9d5da;padding:.4rem;height:25px;width:190px;max-width:250px;outline:none;border-radius:2rem;letter-spacing:.07rem;color:#363062;transition:.2s ease-out;opacity:1}}"]}),n})()},{path:"home",component:MA,canActivate:[(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!0!==this.authService.isLoggedIn&&this.router.navigate(["login"]),!0}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Sv),d.LFG(Jn))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()],children:[{path:"dashboard",component:TE},{path:"search",component:lh},{path:"memories",component:ab}]}];let p0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[zy.forRoot(vI),zy]}),n})(),wI=(()=>{class n{constructor(){this.title="holiday-craze"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[Gd],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-top:1rem;padding-right:2rem;padding-left:2rem}.subContainer[_ngcontent-%COMP%]{display:flex;justify-content:center}"]}),n})();var Gm=L(4986),zm=L(3942);const EI="firebasestorage.googleapis.com",bI="storageBucket";class cr extends P.ZR{constructor(e,t,r=0){super(Wm(e),`Firebase Storage: ${t} (${Wm(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,cr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Wm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Wm(n){return"storage/"+n}function g0(){return new cr("unknown","An unknown error occurred, please check the error payload for server response.")}function DI(){return new cr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function TI(){return new cr("canceled","User canceled the upload/download.")}function MI(){return new cr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function ch(n){return new cr("invalid-argument",n)}function dh(){return new cr("app-deleted","The Firebase app was deleted.")}function m0(n){return new cr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function hh(n,e){return new cr("invalid-format","String does not match format '"+n+"': "+e)}function fh(n){throw new cr("internal-error","Internal error: "+n)}class si{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=si.makeFromUrl(e,t)}catch{return new si(e,"")}if(""===r.path)return r;throw function AI(n){return new cr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function w(ct){ct.path_=decodeURIComponent(ct.path)}const S=t.replace(/[.]/g,"\\."),rt=[{regex:h,indices:{bucket:1,path:3},postModify:function a(ct){"/"===ct.path.charAt(ct.path.length-1)&&(ct.path_=ct.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:w},{regex:new RegExp(`^https?://${t===EI?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:w}];for(let ct=0;ct<rt.length;ct++){const Tt=rt[ct],Ot=Tt.regex.exec(e);if(Ot){let Eu=Ot[Tt.indices.path];Eu||(Eu=""),r=new si(Ot[Tt.indices.bucket],Eu),Tt.postModify(r);break}}if(null==r)throw function SI(n){return new cr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class RI{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function qm(n){return"string"==typeof n||n instanceof String}function NI(n){return _0()&&n instanceof Blob}function _0(){return typeof Blob<"u"&&!(0,P.UG)()}function $c(n,e,t,r){if(r<e)throw ch(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw ch(`Invalid value for '${n}'. Expected ${t} or less.`)}function pu(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Zm(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var oi=(()=>{return(n=oi||(oi={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",oi;var n})();function kI(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}class y0{constructor(e,t,r,i,a,l,h,_,w,D,S,R=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=_,this.timeout_=w,this.progressCallback_=D,this.connectionFactory_=S,this.retry=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((V,j)=>{this.resolve_=V,this.reject_=j,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const _=this.callback_(h,h.getResponse());!function bP(n){return void 0!==n}(_)?a():a(_)}catch(_){l(_)}else if(null!==h){const _=g0();_.serverResponse=h.getErrorText(),l(this.errorCallback_?this.errorCallback_(h,_):_)}else l(i.canceled?this.appDelete_?dh():TI():DI())};this.canceled_?t(0,new bl(!1,null,!0)):this.backoffId_=function Ox(n,e,t){let r=1,i=null,a=null,l=!1,h=0;function _(){return 2===h}let w=!1;function D(...ve){w||(w=!0,e.apply(null,ve))}function S(ve){i=setTimeout(()=>{i=null,n(V,_())},ve)}function R(){a&&clearTimeout(a)}function V(ve,...qe){if(w)return void R();if(ve)return R(),void D.call(null,ve,...qe);if(_()||l)return R(),void D.call(null,ve,...qe);let rt;r<64&&(r*=2),1===h?(h=2,rt=0):rt=1e3*(r+Math.random()),S(rt)}let j=!1;function ae(ve){j||(j=!0,R(),!w&&(null!==i?(ve||(h=2),clearTimeout(i),S(0)):ve||(h=1)))}return S(0),a=setTimeout(()=>{l=!0,ae(!0)},t),ae}((r,i)=>{if(i)return void r(!1,new bl(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const h=a.getErrorCode()===oi.NO_ERROR,_=a.getStatus();if((!h||kI(_,this.additionalRetryCodes_))&&this.retry){const D=a.getErrorCode()===oi.ABORT;return void r(!1,new bl(!1,null,D))}const w=-1!==this.successCodes_.indexOf(_);r(!0,new bl(w,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function Fx(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class bl{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function $x(...n){const e=function Hx(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(_0())return new Blob(n);throw new cr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Hi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Qm{constructor(e,t){this.data=e,this.contentType=t||null}}function v0(n,e){switch(n){case Hi.RAW:return new Qm(FI(e));case Hi.BASE64:case Hi.BASE64URL:return new Qm(Jm(n,e));case Hi.DATA_URL:return new Qm(function LI(n){const e=new Xm(n);return e.base64?Jm(Hi.BASE64,e.rest):function IP(n){let e;try{e=decodeURIComponent(n)}catch{throw hh(Hi.DATA_URL,"Malformed data URL.")}return FI(e)}(e.rest)}(e),function w0(n){return new Xm(n).contentType}(e))}throw g0()}function FI(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Jm(n,e){switch(n){case Hi.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw hh(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Hi.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw hh(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function OI(n){if(typeof atob>"u")throw function Px(n){return new cr("unsupported-environment",`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:hh(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class Xm{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw hh(Hi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function C0(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class ga{constructor(e,t){let r=0,i="";NI(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(NI(this.data_)){const i=function PI(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new ga(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new ga(r,!0)}}static getBlob(...e){if(_0()){const t=e.map(r=>r instanceof ga?r.data_:r);return new ga($x.apply(null,t))}{const t=e.map(l=>qm(l)?v0(Hi.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let h=0;h<l.length;h++)i[a++]=l[h]}),new ga(i,!0)}}uploadData(){return this.data_}}function E0(n){let e;try{e=JSON.parse(n)}catch{return null}return function Vx(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function b0(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function I0(n,e){return e}class Ei{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||I0}}let op=null;function ph(){if(op)return op;const n=[];n.push(new Ei("bucket")),n.push(new Ei("generation")),n.push(new Ei("metageneration")),n.push(new Ei("name","fullPath",!0));const t=new Ei("name");t.xform=function e(a,l){return function VI(n){return!qm(n)||n.length<2?n:b0(n)}(l)},n.push(t);const i=new Ei("size");return i.xform=function r(a,l){return void 0!==l?Number(l):l},n.push(i),n.push(new Ei("timeCreated")),n.push(new Ei("updated")),n.push(new Ei("md5Hash",null,!0)),n.push(new Ei("cacheControl",null,!0)),n.push(new Ei("contentDisposition",null,!0)),n.push(new Ei("contentEncoding",null,!0)),n.push(new Ei("contentLanguage",null,!0)),n.push(new Ei("contentType",null,!0)),n.push(new Ei("metadata","customMetadata",!0)),op=n,op}function D0(n,e,t){const r=E0(e);return null===r?null:function UI(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return function Wx(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new si(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function e_(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const BI="prefixes";class ma{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function gu(n){if(!n)throw g0()}function T0(n,e){return function t(r,i){const a=D0(n,i,e);return gu(null!==a),a}}function _a(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function Mx(){return new cr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function EP(){return new cr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function CP(n){return new cr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function Rx(n){return new cr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function ap(n){const e=_a(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function xx(n){return new cr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function t_(n,e,t){const i=pu(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new ma(i,"GET",T0(n,t),l);return h.errorHandler=ap(e),h}function Kx(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const h=pu(e.bucketOnlyServerUrl(),n.host,n._protocol),w=n.maxOperationRetryTime,D=new ma(h,"GET",function jI(n,e){return function t(r,i){const a=function Zx(n,e,t){const r=E0(t);return null===r?null:function gh(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[BI])for(const i of t[BI]){const a=i.replace(/\/$/,""),l=n._makeStorageReference(new si(e,a));r.prefixes.push(l)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new si(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return gu(null!==a),a}}(n,e.bucket),w);return D.urlParams=a,D.errorHandler=_a(e),D}function x0(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function A0(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class Gc{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function up(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{gu(!1)}return gu(!!t&&-1!==(e||["active"]).indexOf(t)),t}const mh={STATE_CHANGED:"state_changed"},$i={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function n_(n){switch(n){case"running":case"pausing":case"canceling":return $i.RUNNING;case"paused":return $i.PAUSED;case"success":return $i.SUCCESS;case"canceled":return $i.CANCELED;default:return $i.ERROR}}class R0{constructor(e,t,r){if(function Lx(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function lp(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class Xx extends class TP{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=oi.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=oi.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=oi.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw fh("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw fh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw fh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw fh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw fh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Ro(){return new Xx}class N0{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=ph(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(kI(i.status,[])){if(!a)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=DI()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function DP(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l=x0(e,r,i),h={name:l.fullPath},_=pu(a,n.host,n._protocol),D={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},S=e_(l,t),j=new ma(_,"POST",function V(ae){let ve;up(ae);try{ve=ae.getResponseHeader("X-Goog-Upload-URL")}catch{gu(!1)}return gu(qm(ve)),ve},n.maxUploadRetryTime);return j.urlParams=h,j.headers=D,j.body=S,j.errorHandler=_a(e),j}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ro,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function $I(n,e,t,r){const _=new ma(t,"POST",function a(w){const D=up(w,["active","final"]);let S=null;try{S=w.getResponseHeader("X-Goog-Upload-Size-Received")}catch{gu(!1)}S||gu(!1);const R=Number(S);return gu(!isNaN(R)),new Gc(R,r.size(),"final"===D)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=_a(e),_}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,Ro,t,r);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new Gc(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let l;try{l=function zI(n,e,t,r,i,a,l,h){const _=new Gc(0,0);if(l?(_.current=l.current,_.total=l.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function Nx(){return new cr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const w=_.total-_.current;let D=w;i>0&&(D=Math.min(D,i));const S=_.current;let V="";V=0===D?"finalize":w===D?"upload, finalize":"upload";const j={"X-Goog-Upload-Command":V,"X-Goog-Upload-Offset":`${_.current}`},ae=r.slice(S,S+D);if(null===ae)throw MI();const rt=new ma(t,"POST",function ve(ct,Tt){const Ot=up(ct,["active","final"]),Ir=_.current+D,Eu=r.size();let wk;return wk="final"===Ot?T0(e,a)(ct,Tt):null,new Gc(Ir,Eu,"final"===Ot,wk)},e.maxUploadRetryTime);return rt.headers=j,rt.body=ae.uploadData(),rt.progressCallback=h||null,rt.errorHandler=_a(n),rt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const h=this._ref.storage._makeRequest(l,Ro,i,a,!1);this._request=h,h.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=t_(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Ro,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function M0(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},_=function h(){let rt="";for(let ct=0;ct<2;ct++)rt+=Math.random().toString().slice(2);return rt}();l["Content-Type"]="multipart/related; boundary="+_;const w=x0(e,r,i),D=e_(w,t),V=ga.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+D+"\r\n--"+_+"\r\nContent-Type: "+w.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===V)throw MI();const j={name:w.fullPath},ae=pu(a,n.host,n._protocol),qe=n.maxUploadRetryTime,lt=new ma(ae,"POST",T0(n,t),qe);return lt.urlParams=j,lt.headers=l,lt.body=V.uploadData(),lt.errorHandler=_a(e),lt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ro,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=TI(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=n_(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new R0(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(n_(this._state)){case $i.SUCCESS:lp(this._resolve.bind(null,this.snapshot))();break;case $i.CANCELED:case $i.ERROR:lp(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(n_(this._state)){case $i.RUNNING:case $i.PAUSED:e.next&&lp(e.next.bind(e,this.snapshot))();break;case $i.SUCCESS:e.complete&&lp(e.complete.bind(e))();break;default:e.error&&lp(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Il{constructor(e,t){this._service=e,this._location=t instanceof si?t:si.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Il(e,t)}get root(){const e=new si(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return b0(this._location.path)}get storage(){return this._service}get parent(){const e=function Gx(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new si(this._location.bucket,e);return new Il(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw m0(e)}}function P0(n,e,t){return r_.apply(this,arguments)}function r_(){return(r_=(0,_e.Z)(function*(n,e,t){const i=yield QI(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield P0(n,e,i.nextPageToken))})).apply(this,arguments)}function QI(n,e){null!=e&&"number"==typeof e.maxResults&&$c("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=Kx(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Ro)}function JI(n){n._throwIfRoot("getDownloadURL");const e=function Yx(n,e,t){const i=pu(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new ma(i,"GET",function HI(n,e){return function t(r,i){const a=D0(n,i,e);return gu(null!==a),function qx(n,e,t,r){const i=E0(e);if(null===i||!qm(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const l=encodeURIComponent;return a.split(",").map(w=>{const S=n.fullPath;return pu("/b/"+l(n.bucket)+"/o/"+l(S),t,r)+Zm({alt:"media",token:w})})[0]}(a,i,n.host,n._protocol)}}(n,t),l);return h.errorHandler=ap(e),h}(n.storage,n._location,ph());return n.storage.makeRequestWithTokens(e,Ro).then(t=>{if(null===t)throw function kx(){return new cr("no-download-url","The given file does not have any download URLs.")}();return t})}function oM(n,e){const t=function zx(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new si(n._location.bucket,t);return new Il(n.storage,r)}function aM(n,e){if(n instanceof _h){const t=n;if(null==t._bucket)throw function xI(){return new cr("no-default-bucket","No default bucket found. Did you set the '"+bI+"' property when initializing the app?")}();const r=new Il(t,t._bucket);return null!=e?aM(r,e):r}return void 0!==e?oM(n,e):n}function RP(n,e){if(e&&function xP(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof _h)return function MP(n,e){return new Il(n,e)}(n,e);throw ch("To use ref(service, url), the first argument must be a Storage instance.")}return aM(n,e)}function uM(n,e){const t=e?.[bI];return null==t?null:si.makeFromBucketSpec(t,n)}class _h{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=EI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?si.makeFromBucketSpec(i,this._host):uM(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?si.makeFromBucketSpec(this._url,e):uM(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){$c("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){$c("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,_e.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,_e.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Il(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new RI(dh());{const l=function Ym(n,e,t,r,i,a,l=!0){const h=Zm(n.urlParams),_=n.url+h,w=Object.assign({},n.headers);return function jx(n,e){e&&(n["X-Firebase-GMPID"]=e)}(w,e),function Ux(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(w,t),function Bx(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(w,a),function Km(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(w,r),new y0(_,n.method,w,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,_e.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const lM="@firebase/storage";function tD(n,e){return RP(n=(0,P.m9)(n),e)}function gM(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new _h(t,r,i,e,Li.SDK_VERSION)}!function mM(){(0,Li._registerComponent)(new Zs.wA("storage",gM,"PUBLIC").setMultipleInstances(!0)),(0,Li.registerVersion)(lM,"0.10.0",""),(0,Li.registerVersion)(lM,"0.10.0","esm2017")}();class s_{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class _M{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new s_(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new s_(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?l=>t(new s_(l,this,this._ref)):{next:t.next?l=>t.next(new s_(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class nD{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new ya(e,this._service))}get items(){return this._delegate.items.map(e=>new ya(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class ya{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function i_(n,e){return oM(n,e)}(this._delegate,e);return new ya(t,this.storage)}get root(){return new ya(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new ya(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new _M(function F0(n,e,t){return function iM(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new N0(n,new ga(e),t)}(n=(0,P.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Hi.RAW,r){this._throwIfRoot("putString");const i=v0(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new _M(new N0(this._delegate,new ga(i.data,!0),a),this)}listAll(){return function kP(n){return function YI(n){const e={prefixes:[],items:[]};return P0(n,e).then(()=>e)}(n=(0,P.m9)(n))}(this._delegate).then(e=>new nD(e,this.storage))}list(e){return function eD(n,e){return QI(n=(0,P.m9)(n),e)}(this._delegate,e||void 0).then(t=>new nD(t,this.storage))}getMetadata(){return function XI(n){return function sM(n){n._throwIfRoot("getMetadata");const e=t_(n.storage,n._location,ph());return n.storage.makeRequestWithTokens(e,Ro)}(n=(0,P.m9)(n))}(this._delegate)}updateMetadata(e){return function hM(n,e){return function SP(n,e){n._throwIfRoot("updateMetadata");const t=function Qx(n,e,t,r){const a=pu(e.fullServerUrl(),n.host,n._protocol),h=e_(t,r),w=n.maxOperationRetryTime,D=new ma(a,"PATCH",T0(n,r),w);return D.headers={"Content-Type":"application/json; charset=utf-8"},D.body=h,D.errorHandler=ap(e),D}(n.storage,n._location,e,ph());return n.storage.makeRequestWithTokens(t,Ro)}(n=(0,P.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function PP(n){return JI(n=(0,P.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function fM(n){return function AP(n){n._throwIfRoot("deleteObject");const e=function Jx(n,e){const r=pu(e.fullServerUrl(),n.host,n._protocol),h=new ma(r,"DELETE",function l(_,w){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=ap(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Ro)}(n=(0,P.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw m0(e)}}class L0{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(yM(e))throw ch("ref() expected a child path but got a URL, use refFromURL instead.");return new ya(tD(this._delegate,e),this)}refFromURL(e){if(!yM(e))throw ch("refFromURL() expected a full URL but got a child path, use ref() instead.");try{si.makeFromUrl(e,this._delegate.host)}catch{throw ch("refFromUrl() expected a valid full URL but got an invalid one.")}return new ya(tD(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function pM(n,e,t,r={}){!function NP(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,P.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function yM(n){return/^[A-Za-z]+:\/\//.test(n)}function wM(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new L0(t,r)}function o_(n){const e=function CM(n){return new wr.y(e=>{const t=l=>e.next(l);t(n.snapshot);const a=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){a()}}).pipe(function CI(n,e=Gm.z){return(0,Yn.e)((t,r)=>{let i=null,a=null,l=null;const h=()=>{if(i){i.unsubscribe(),i=null;const w=a;a=null,r.next(w)}};function _(){const w=l+n,D=e.now();if(D<w)return i=this.schedule(void 0,w-D),void r.add(i);h()}t.subscribe((0,xn.x)(r,w=>{a=w,l=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Je.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function a_(n){return{getDownloadURL:()=>at(void 0).pipe(mn.fc,Mn(()=>n.getDownloadURL()),mn.iC),getMetadata:()=>at(void 0).pipe(mn.fc,Mn(()=>n.getMetadata()),mn.iC),delete:()=>(0,rn.D)(n.delete()),child:e=>a_(n.child(e)),updateMetadata:e=>(0,rn.D)(n.updateMetadata(e)),put:(e,t)=>o_(n.put(e,t)),putString:(e,t,r)=>o_(n.putString(e,t,r)),list:e=>(0,rn.D)(n.list(e)),listAll:()=>(0,rn.D)(n.listAll())}}!function Js(n){const e={TaskState:$i,TaskEvent:mh,StringFormat:Hi,Storage:L0,Reference:ya};n.INTERNAL.registerComponent(new Zs.wA("storage-compat",wM,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.2.0")}(zm.Z);const EM=new d.OlP("angularfire2.storageBucket"),U0=new d.OlP("angularfire2.storage.maxUploadRetryTime"),rD=new d.OlP("angularfire2.storage.maxOperationRetryTime"),iD=new d.OlP("angularfire2.storage.use-emulator");let bM=(()=>{class n{constructor(t,r,i,a,l,h,_,w,D,S){const R=(0,Zr.on)(t,l,r);this.storage=(0,Zr.cc)(`${R.name}.storage.${i}`,"AngularFireStorage",R.name,()=>{const V=l.runOutsideAngular(()=>R.storage(i||void 0)),j=D;return j&&V.useEmulator(...j),_&&V.setMaxUploadRetryTime(_),w&&V.setMaxOperationRetryTime(w),V},[_,w])}ref(t){return a_(this.storage.ref(t))}refFromURL(t){return a_(this.storage.refFromURL(t))}upload(t,r,i){return a_(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Zr.Dh),d.LFG(Zr.xv,8),d.LFG(EM,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(mn.HU),d.LFG(U0,8),d.LFG(rD,8),d.LFG(iD,8),d.LFG(jf,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),sD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),DM=(()=>{class n{constructor(){du.Z.registerVersion("angularfire",mn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[bM],imports:[sD]}),n})();function u_(){return(0,Yn.e)((n,e)=>{let t,r=!1;n.subscribe((0,xn.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function oD(n,e=_s.y){return n=n??B0,(0,Yn.e)((t,r)=>{let i,a=!0;t.subscribe((0,xn.x)(r,l=>{const h=e(l);(a||!n(i,h))&&(a=!1,i=h,r.next(l))}))})}function B0(n,e){return n===e}L(9169);var st,aD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ko={},j0=j0||{},Lt=aD||self;function l_(){}function c_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function dp(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var d_="closure_uid_"+(1e9*Math.random()>>>0),FP=0;function uD(n,e,t){return n.call.apply(n.bind,arguments)}function SM(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function ai(n,e,t){return(ai=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?uD:SM).apply(null,arguments)}function H0(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Fr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,a){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return e.prototype[i].apply(r,l)}}function mu(){this.s=this.s,this.o=this.o}mu.prototype.s=!1,mu.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function TM(n){Object.prototype.hasOwnProperty.call(n,d_)&&n[d_]||(n[d_]=++FP)}(this)},mu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const $0=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function h_(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function G0(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(c_(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let l=0;l<a;l++)n[i+l]=r[l]}else n.push(r)}}function Lr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Lr.prototype.h=function(){this.defaultPrevented=!0};var f_=function(){if(!Lt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Lt.addEventListener("test",l_,e),Lt.removeEventListener("test",l_,e)}catch{}return n}();function hp(n){return/^[\s\xa0]*$/.test(n)}var cD=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function p_(n,e){return n<e?-1:n>e?1:0}function fp(){var n=Lt.navigator;return n&&(n=n.userAgent)?n:""}function va(n){return-1!=fp().indexOf(n)}function z0(n){return z0[" "](n),n}z0[" "]=l_;var q0,n,VP=va("Opera"),Wc=va("Trident")||va("MSIE"),dD=va("Edge"),W0=dD||Wc,hD=va("Gecko")&&!(-1!=fp().toLowerCase().indexOf("webkit")&&!va("Edge"))&&!(va("Trident")||va("MSIE"))&&!va("Edge"),UP=-1!=fp().toLowerCase().indexOf("webkit")&&!va("Edge");function AM(){var n=Lt.document;return n?n.documentMode:void 0}e:{var fD="",pD=(n=fp(),hD?/rv:([^\);]+)(\)|;)/.exec(n):dD?/Edge\/([\d\.]+)/.exec(n):Wc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):UP?/WebKit\/(\S+)/.exec(n):VP?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(pD&&(fD=pD?pD[1]:""),Wc){var Z0=AM();if(null!=Z0&&Z0>parseFloat(fD)){q0=String(Z0);break e}}q0=fD}var g_={};var qc=Lt.document&&Wc&&(AM()||parseInt(q0,10))||void 0;function yh(n,e){if(Lr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(hD){e:{try{z0(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Q0[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&yh.X.h.call(this)}}Fr(yh,Lr);var Q0={2:"touch",3:"pen",4:"mouse"};yh.prototype.h=function(){yh.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Zc="closure_listenable_"+(1e6*Math.random()|0),MM=0;function J0(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++MM,this.ba=this.ea=!1}function vh(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function wh(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function RM(n){const e={};for(const t in n)e[t]=n[t];return e}const NM="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function kM(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<NM.length;a++)t=NM[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function X0(n){this.src=n,this.g={},this.h=0}function m_(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=$0(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(vh(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function ew(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ba&&a.listener==e&&a.capture==!!t&&a.ha==r)return i}return-1}X0.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=ew(n,e,r,i);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new J0(e,this.src,a,!!r,i)).ea=t,n.push(e)),e};var tw="closure_lm_"+(1e6*Math.random()|0),nw={};function gD(n,e,t,r,i){if(r&&r.once)return iw(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)gD(n,e[a],t,r,i);return null}return t=pp(t),n&&n[Zc]?n.N(e,t,dp(r)?!!r.capture:!!r,i):rw(n,e,t,!1,r,i)}function rw(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=dp(i)?!!i.capture:!!i,h=yD(n);if(h||(n[tw]=h=new X0(n)),(t=h.add(e,t,r,l,a)).proxy)return t;if(r=function mD(){const e=aw;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)f_||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(ow(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function iw(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)iw(n,e[a],t,r,i);return null}return t=pp(t),n&&n[Zc]?n.O(e,t,dp(r)?!!r.capture:!!r,i):rw(n,e,t,!0,r,i)}function _D(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)_D(n,e[a],t,r,i);else r=dp(r)?!!r.capture:!!r,t=pp(t),n&&n[Zc]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=ew(a=n.g[e],t,r,i))&&(vh(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=yD(n))&&(e=n.g[e.toString()],n=-1,e&&(n=ew(e,t,r,i)),(t=-1<n?e[n]:null)&&sw(t))}function sw(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Zc])m_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(ow(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=yD(e))?(m_(t,n),0==t.h&&(t.src=null,e[tw]=null)):vh(n)}}}function ow(n){return n in nw?nw[n]:nw[n]="on"+n}function aw(n,e){if(n.ba)n=!0;else{e=new yh(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&sw(n),n=t.call(r,e)}return n}function yD(n){return(n=n[tw])instanceof X0?n:null}var __="__closure_events_fn_"+(1e9*Math.random()>>>0);function pp(n){return"function"==typeof n?n:(n[__]||(n[__]=function(e){return n.handleEvent(e)}),n[__])}function Kr(){mu.call(this),this.i=new X0(this),this.P=this,this.I=null}function ui(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Lr(e,n);else if(e instanceof Lr)e.target=e.target||n;else{var i=e;kM(e=new Lr(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=uw(l,r,!0,e)&&i}if(i=uw(l=e.g=n,r,!0,e)&&i,i=uw(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=uw(l=e.g=t[a],r,!1,e)&&i}function uw(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ba&&l.capture==t){var h=l.listener,_=l.ha||l.src;l.ea&&m_(n.i,l),i=!1!==h.call(_,r)&&i}}return i&&!r.defaultPrevented}Fr(Kr,mu),Kr.prototype[Zc]=!0,Kr.prototype.removeEventListener=function(n,e,t,r){_D(this,n,e,t,r)},Kr.prototype.M=function(){if(Kr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)vh(t[r]);delete n.g[e],n.h--}}this.I=null},Kr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Kr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var vD=Lt.JSON.stringify;function PM(){var n=LM;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var CD,wD=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new BP,n=>n.reset());class BP{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function jP(n){Lt.setTimeout(()=>{throw n},0)}function FM(n,e){CD||function HP(){var n=Lt.Promise.resolve(void 0);CD=function(){n.then($P)}}(),lw||(CD(),lw=!0),LM.add(n,e)}var lw=!1,LM=new class OM{constructor(){this.h=this.g=null}add(e,t){const r=wD.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function $P(){for(var n;n=PM();){try{n.h.call(n.g)}catch(t){jP(t)}var e=wD;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}lw=!1}function cw(n,e){Kr.call(this),this.h=n||1,this.g=e||Lt,this.j=ai(this.lb,this),this.l=Date.now()}function ED(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function bD(n,e,t){if("function"==typeof n)t&&(n=ai(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ai(n.handleEvent,n)}return 2147483647<Number(e)?-1:Lt.setTimeout(n,e||0)}function VM(n){n.g=bD(()=>{n.g=null,n.i&&(n.i=!1,VM(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Fr(cw,Kr),(st=cw.prototype).ca=!1,st.R=null,st.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),ui(this,"tick"),this.ca&&(ED(this),this.start()))}},st.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},st.M=function(){cw.X.M.call(this),ED(this),delete this.g};class s extends mu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:VM(this)}M(){super.M(),this.g&&(Lt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function o(n){mu.call(this),this.h=n,this.g={}}Fr(o,mu);var u=[];function c(n,e,t,r){Array.isArray(t)||(t&&(u[0]=t.toString()),t=u);for(var i=0;i<t.length;i++){var a=gD(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function f(n){wh(n.g,function(e,t){this.g.hasOwnProperty(t)&&sw(e)},n),n.g={}}function g(){this.g=!0}function b(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function N(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return vD(t)}catch{return e}}(n,t)+(r?" "+r:"")})}o.prototype.M=function(){o.X.M.call(this),f(this)},o.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},g.prototype.Aa=function(){this.g=!1},g.prototype.info=function(){};var O={},W=null;function ee(){return W=W||new Kr}function Ce(n){Lr.call(this,O.Pa,n)}function ke(n){const e=ee();ui(e,new Ce(e))}function ze(n,e){Lr.call(this,O.STAT_EVENT,n),this.stat=e}function We(n){const e=ee();ui(e,new ze(e,n))}function wt(n,e){Lr.call(this,O.Qa,n),this.size=e}function xe(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Lt.setTimeout(function(){n()},e)}O.Pa="serverreachability",Fr(Ce,Lr),O.STAT_EVENT="statevent",Fr(ze,Lr),O.Qa="timingevent",Fr(wt,Lr);var It={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},fn={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Rn(){}function y_(){}Rn.prototype.h=null;var _p,Kc={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function gp(){Lr.call(this,"d")}function mp(){Lr.call(this,"c")}function Ch(){}function Yc(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new o(this),this.O=dw,this.T=new cw(n=W0?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new v_}function v_(){this.i=null,this.g="",this.h=!1}Fr(gp,Lr),Fr(mp,Lr),Fr(Ch,Rn),Ch.prototype.g=function(){return new XMLHttpRequest},Ch.prototype.i=function(){return{}},_p=new Ch;var dw=45e3,UM={},ID={};function BM(n,e,t){n.K=1,n.v=AD(Qc(e)),n.s=t,n.P=!0,GP(n,null)}function GP(n,e){n.F=Date.now(),hw(n),n.A=Qc(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),eO(t.i,"t",r),n.C=0,t=n.l.H,n.h=new v_,n.g=IO(n.l,t?e:null,!n.s),0<n.N&&(n.L=new s(ai(n.La,n,n.g),n.N)),c(n.S,n.g,"readystatechange",n.ib),e=n.H?RM(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),ke(),function v(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",h=a.split("&"),_=0;_<h.length;_++){var w=h[_].split("=");if(1<w.length){var D=w[0];w=w[1];var S=D.split("_");l=2<=S.length&&"type"==S[1]?l+(D+"=")+w+"&":l+(D+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function zP(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function WP(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=FB(n,t),i==ID){4==e&&(n.o=4,We(14),r=!1),b(n.j,n.m,null,"[Incomplete Response]");break}if(i==UM){n.o=4,We(15),b(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}b(n.j,n.m,i,null),jM(n,i)}zP(n)&&i!=ID&&i!=UM&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,We(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),KM(e),e.K=!0,We(11))):(b(n.j,n.m,t,"[Invalid Chunked Response]"),yp(n),fw(n))}function FB(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?ID:(t=Number(e.substring(t,r)),isNaN(t)?UM:(r+=1)+t>e.length?ID:(e=e.substr(r,t),n.C=r+t,e))}function hw(n){n.V=Date.now()+n.O,qP(n,n.O)}function qP(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=xe(ai(n.gb,n),e)}function DD(n){n.B&&(Lt.clearTimeout(n.B),n.B=null)}function fw(n){0==n.l.G||n.I||wO(n.l,n)}function yp(n){DD(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,ED(n.T),f(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function jM(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||HM(t.h,n)))if(!n.J&&HM(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;PD(t),ND(t)}ZM(t),We(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=xe(ai(t.cb,t),6e3));if(1>=rO(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else wp(t,11)}else if((n.J||t.g==n)&&PD(t),!hp(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.T=w[0],w=w[1],2==t.G)if("c"==w[0]){t.I=w[1],t.ka=w[2];const D=w[3];null!=D&&(t.ma=D,t.j.info("VER="+t.ma));const S=w[4];null!=S&&(t.Ca=S,t.j.info("SVER="+t.Ca));const R=w[5];null!=R&&"number"==typeof R&&0<R&&(t.J=r=1.5*R,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const V=n.g;if(V){const j=V.g?V.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(j){var a=r.h;a.g||-1==j.indexOf("spdy")&&-1==j.indexOf("quic")&&-1==j.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&($M(a,a.h),a.h=null))}if(r.D){const ae=V.g?V.g.getResponseHeader("X-HTTP-Session-Id"):null;ae&&(r.za=ae,dr(r.F,r.D,ae))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=bO(r,r.H?r.ka:null,r.V),l.J){iO(r.h,l);var h=l,_=r.J;_&&h.setTimeout(_),h.B&&(DD(h),hw(h)),r.g=l}else yO(r);0<t.i.length&&kD(t)}else"stop"!=w[0]&&"close"!=w[0]||wp(t,7);else 3==t.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?wp(t,7):qM(t):"noop"!=w[0]&&t.l&&t.l.wa(w),t.A=0)}ke()}catch{}}function ZP(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(c_(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function VB(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(c_(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function LB(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(c_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(st=Yc.prototype).setTimeout=function(n){this.O=n},st.ib=function(n){n=n.target;const e=this.L;e&&3==Jc(n)?e.l():this.La(n)},st.La=function(n){try{if(n==this.g)e:{const D=Jc(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>D)&&(3!=D||W0||this.g&&(this.h.h||this.g.fa()||hO(this.g)))){this.I||4!=D||7==e||ke(),DD(this);var t=this.g.aa();this.Y=t;t:if(zP(this)){var r=hO(this.g);n="";var i=r.length,a=4==Jc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){yp(this),fw(this);var l="";break t}this.h.i=new Lt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function E(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.U,D,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var h,_=this.g;if((h=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!hp(h)){var w=h;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,We(12),yp(this),fw(this);break e}b(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,jM(this,t)}this.P?(WP(this,D,l),W0&&this.i&&3==D&&(c(this.S,this.T,"tick",this.hb),this.T.start())):(b(this.j,this.m,l,null),jM(this,l)),4==D&&yp(this),this.i&&!this.I&&(4==D?wO(this.l,this):(this.i=!1,hw(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,We(12)):(this.o=0,We(13)),yp(this),fw(this)}}}catch{}},st.hb=function(){if(this.g){var n=Jc(this.g),e=this.g.fa();this.C<e.length&&(DD(this),WP(this,n,e),this.i&&4!=n&&hw(this))}},st.cancel=function(){this.I=!0,yp(this)},st.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function A(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(ke(),We(17)),yp(this),this.o=2,fw(this)):qP(this,this.V-n)};var KP=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vp(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof vp){this.h=void 0!==e?e:n.h,TD(this,n.j),this.s=n.s,this.g=n.g,SD(this,n.m),this.l=n.l,e=n.i;var t=new mw;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),YP(this,t),this.o=n.o}else n&&(t=String(n).match(KP))?(this.h=!!e,TD(this,t[1]||"",!0),this.s=pw(t[2]||""),this.g=pw(t[3]||"",!0),SD(this,t[4]),this.l=pw(t[5]||"",!0),YP(this,t[6]||"",!0),this.o=pw(t[7]||"")):(this.h=!!e,this.i=new mw(null,this.h))}function Qc(n){return new vp(n)}function TD(n,e,t){n.j=t?pw(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function SD(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function YP(n,e,t){e instanceof mw?(n.i=e,function zB(n,e){e&&!n.j&&(Eh(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(JP(this,r),eO(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=gw(e,$B)),n.i=new mw(e,n.h))}function dr(n,e,t){n.i.set(e,t)}function AD(n){return dr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function pw(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function gw(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,BB),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function BB(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}vp.prototype.toString=function(){var n=[],e=this.j;e&&n.push(gw(e,QP,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(gw(e,QP,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(gw(t,"/"==t.charAt(0)?HB:jB,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",gw(t,GB)),n.join("")};var QP=/[#\/\?@]/g,jB=/[#\?:]/g,HB=/[#\?]/g,$B=/[#\?@]/g,GB=/#/g;function mw(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Eh(n){n.g||(n.g=new Map,n.h=0,n.i&&function UB(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function JP(n,e){Eh(n),e=w_(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function XP(n,e){return Eh(n),e=w_(n,e),n.g.has(e)}function eO(n,e,t){JP(n,e),0<t.length&&(n.i=null,n.g.set(w_(n,e),h_(t)),n.h+=t.length)}function w_(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function tO(n){this.l=n||qB,n=Lt.PerformanceNavigationTiming?0<(n=Lt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Lt.g&&Lt.g.Ga&&Lt.g.Ga()&&Lt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(st=mw.prototype).add=function(n,e){Eh(this),this.i=null,n=w_(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},st.forEach=function(n,e){Eh(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},st.oa=function(){Eh(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},st.W=function(n){Eh(this);let e=[];if("string"==typeof n)XP(this,n)&&(e=e.concat(this.g.get(w_(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},st.set=function(n,e){return Eh(this),this.i=null,XP(this,n=w_(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},st.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},st.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var i=a;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var qB=10;function nO(n){return!!n.h||!!n.g&&n.g.size>=n.j}function rO(n){return n.h?1:n.g?n.g.size:0}function HM(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function $M(n,e){n.g?n.g.add(e):n.h=e}function iO(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function sO(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return h_(n.i)}function GM(){}function ZB(){this.g=new GM}function KB(n,e,t){const r=t||"";try{ZP(n,function(i,a){let l=i;dp(i)&&(l=vD(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function xD(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function _w(n){this.l=n.ac||null,this.j=n.jb||!1}function MD(n,e){Kr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=zM,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}tO.prototype.cancel=function(){if(this.i=sO(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},GM.prototype.stringify=function(n){return Lt.JSON.stringify(n,void 0)},GM.prototype.parse=function(n){return Lt.JSON.parse(n,void 0)},Fr(_w,Rn),_w.prototype.g=function(){return new MD(this.l,this.j)},_w.prototype.i=function(n){return function(){return n}}({}),Fr(MD,Kr);var zM=0;function oO(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function yw(n){n.readyState=4,n.l=null,n.j=null,n.A=null,vw(n)}function vw(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(st=MD.prototype).open=function(n,e){if(this.readyState!=zM)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,vw(this)},st.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Lt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},st.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,yw(this)),this.readyState=zM},st.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,vw(this)),this.g&&(this.readyState=3,vw(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Lt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;oO(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},st.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?yw(this):vw(this),3==this.readyState&&oO(this)}},st.Va=function(n){this.g&&(this.response=this.responseText=n,yw(this))},st.Ua=function(n){this.g&&(this.response=n,yw(this))},st.ga=function(){this.g&&yw(this)},st.setRequestHeader=function(n,e){this.v.append(n,e)},st.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},st.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(MD.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var QB=Lt.JSON.parse;function xr(n){Kr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=aO,this.K=this.L=!1}Fr(xr,Kr);var aO="",JB=/^https?$/i,XB=["POST","PUT"];function uO(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,lO(n),RD(n)}function lO(n){n.D||(n.D=!0,ui(n,"complete"),ui(n,"error"))}function cO(n){if(n.h&&typeof j0<"u"&&(!n.C[1]||4!=Jc(n)||2!=n.aa()))if(n.v&&4==Jc(n))bD(n.Ha,0,n);else if(ui(n,"readystatechange"),4==Jc(n)){n.h=!1;try{const h=n.aa();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(KP)[1]||null;if(!i&&Lt.self&&Lt.self.location){var a=Lt.self.location.protocol;i=a.substr(0,a.length-1)}r=!JB.test(i?i.toLowerCase():"")}t=r}if(t)ui(n,"complete"),ui(n,"success");else{n.m=6;try{var l=2<Jc(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",lO(n)}}finally{RD(n)}}}function RD(n,e){if(n.g){dO(n);const t=n.g,r=n.C[0]?l_:null;n.g=null,n.C=null,e||ui(n,"ready");try{t.onreadystatechange=r}catch{}}}function dO(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Lt.clearTimeout(n.A),n.A=null)}function Jc(n){return n.g?n.g.readyState:0}function hO(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case aO:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function fO(n){let e="";return wh(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function WM(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=fO(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):dr(n,e,t))}function ww(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function pO(n){this.Ca=0,this.i=[],this.j=new g,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=ww("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=ww("baseRetryDelayMs",5e3,n),this.bb=ww("retryDelaySeedMs",1e4,n),this.$a=ww("forwardChannelMaxRetries",2,n),this.ta=ww("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new tO(n&&n.concurrentRequestLimit),this.Fa=new ZB,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function qM(n){if(gO(n),3==n.G){var e=n.U++,t=Qc(n.F);dr(t,"SID",n.I),dr(t,"RID",e),dr(t,"TYPE","terminate"),Cw(n,t),(e=new Yc(n,n.j,e,void 0)).K=2,e.v=AD(Qc(t)),t=!1,Lt.navigator&&Lt.navigator.sendBeacon&&(t=Lt.navigator.sendBeacon(e.v.toString(),"")),!t&&Lt.Image&&((new Image).src=e.v,t=!0),t||(e.g=IO(e.l,null),e.g.da(e.v)),e.F=Date.now(),hw(e)}EO(n)}function ND(n){n.g&&(KM(n),n.g.cancel(),n.g=null)}function gO(n){ND(n),n.u&&(Lt.clearTimeout(n.u),n.u=null),PD(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Lt.clearTimeout(n.m),n.m=null)}function kD(n){nO(n.h)||n.m||(n.m=!0,FM(n.Ja,n),n.C=0)}function mO(n,e){var t;t=e?e.m:n.U++;const r=Qc(n.F);dr(r,"SID",n.I),dr(r,"RID",t),dr(r,"AID",n.T),Cw(n,r),n.o&&n.s&&WM(r,n.o,n.s),t=new Yc(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=_O(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),$M(n.h,t),BM(t,r,e)}function Cw(n,e){n.ia&&wh(n.ia,function(t,r){dr(e,r,t)}),n.l&&ZP({},function(t,r){dr(e,r,t)})}function _O(n,e,t){t=Math.min(n.i.length,t);var r=n.l?ai(n.l.Ra,n.l,n):null;e:{var i=n.i;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let h=!0;for(let _=0;_<t;_++){let w=i[_].h;const D=i[_].g;if(w-=a,0>w)a=Math.max(0,i[_].h-100),h=!1;else try{KB(D,l,"req"+w+"_")}catch{r&&r(D)}}if(h){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function yO(n){n.g||n.u||(n.Z=1,FM(n.Ia,n),n.A=0)}function ZM(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=xe(ai(n.Ia,n),CO(n,n.A)),n.A++,0))}function KM(n){null!=n.B&&(Lt.clearTimeout(n.B),n.B=null)}function vO(n){n.g=new Yc(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Qc(n.sa);dr(e,"RID","rpc"),dr(e,"SID",n.I),dr(e,"CI",n.L?"0":"1"),dr(e,"AID",n.T),dr(e,"TYPE","xmlhttp"),Cw(n,e),n.o&&n.s&&WM(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=AD(Qc(e)),t.s=null,t.P=!0,GP(t,n)}function PD(n){null!=n.v&&(Lt.clearTimeout(n.v),n.v=null)}function wO(n,e){var t=null;if(n.g==e){PD(n),KM(n),n.g=null;var r=2}else{if(!HM(n.h,e))return;t=e.D,iO(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;ui(r=ee(),new wt(r,t)),kD(n)}else yO(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function tj(n,e){return!(rO(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=xe(ai(n.Ja,n,e),CO(n,n.C)),n.C++,0)))}(n,e)||2==r&&ZM(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:wp(n,5);break;case 4:wp(n,10);break;case 3:wp(n,6);break;default:wp(n,2)}}function CO(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function wp(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=ai(n.kb,n);t||(t=new vp("//www.google.com/images/cleardot.gif"),Lt.location&&"http"==Lt.location.protocol||TD(t,"https"),AD(t)),function YB(n,e){const t=new g;if(Lt.Image){const r=new Image;r.onload=H0(xD,t,r,"TestLoadImage: loaded",!0,e),r.onerror=H0(xD,t,r,"TestLoadImage: error",!1,e),r.onabort=H0(xD,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=H0(xD,t,r,"TestLoadImage: timeout",!1,e),Lt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else We(2);n.G=0,n.l&&n.l.va(e),EO(n),gO(n)}function EO(n){if(n.G=0,n.la=[],n.l){const e=sO(n.h);(0!=e.length||0!=n.i.length)&&(G0(n.la,e),G0(n.la,n.i),n.h.i.length=0,h_(n.i),n.i.length=0),n.l.ua()}}function bO(n,e,t){var r=t instanceof vp?Qc(t):new vp(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),SD(r,r.m);else{var i=Lt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new vp(null,void 0);r&&TD(a,r),e&&(a.g=e),i&&SD(a,i),t&&(a.l=t),r=a}return e=n.za,(t=n.D)&&e&&dr(r,t,e),dr(r,"VER",n.ma),Cw(n,r),r}function IO(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new xr(t&&n.Da&&!n.ra?new _w({jb:!0}):n.ra)).Ka(n.H),e}function DO(){}function OD(){if(Wc&&!(10<=Number(qc)))throw Error("Environmental error: no available transport.")}function Po(n,e){Kr.call(this),this.g=new pO(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!hp(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!hp(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new C_(this)}function TO(n){gp.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function SO(){mp.call(this),this.status=1}function C_(n){this.g=n}(st=xr.prototype).Ka=function(n){this.L=n},st.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():_p.g(),this.C=function Dl(n){return n.h||(n.h=n.i())}(this.u?this.u:_p),this.g.onreadystatechange=ai(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void uO(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=Lt.FormData&&n instanceof Lt.FormData,!(0<=$0(XB,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,l]of t)this.g.setRequestHeader(a,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{dO(this),0<this.B&&((this.K=function ej(n){return Wc&&function xM(){return function LP(n){var e=g_;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=cD(String(q0)).split("."),t=cD("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=p_(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||p_(0==i[2].length,0==a[2].length)||p_(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ai(this.qa,this)):this.A=bD(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){uO(this,a)}},st.qa=function(){typeof j0<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ui(this,"timeout"),this.abort(8))},st.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ui(this,"complete"),ui(this,"abort"),RD(this))},st.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),RD(this,!0)),xr.X.M.call(this)},st.Ha=function(){this.s||(this.F||this.v||this.l?cO(this):this.fb())},st.fb=function(){cO(this)},st.aa=function(){try{return 2<Jc(this)?this.g.status:-1}catch{return-1}},st.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},st.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),QB(e)}},st.Ea=function(){return this.m},st.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(st=pO.prototype).ma=8,st.G=1,st.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new Yc(this,this.j,n,void 0);let a=this.s;if(this.S&&(a?(a=RM(a),kM(a,this.S)):a=this.S),null!==this.o||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=_O(this,i,e),dr(t=Qc(this.F),"RID",n),dr(t,"CVER",22),this.D&&dr(t,"X-HTTP-Session-Id",this.D),Cw(this,t),a&&(this.N?e="headers="+encodeURIComponent(String(fO(a)))+"&"+e:this.o&&WM(t,this.o,a)),$M(this.h,i),this.Ya&&dr(t,"TYPE","init"),this.O?(dr(t,"$req",e),dr(t,"SID","null"),i.Z=!0,BM(i,t,null)):BM(i,t,e),this.G=2}}else 3==this.G&&(n?mO(this,n):0==this.i.length||nO(this.h)||mO(this))},st.Ia=function(){if(this.u=null,vO(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=xe(ai(this.eb,this),n)}},st.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,We(10),ND(this),vO(this))},st.cb=function(){null!=this.v&&(this.v=null,ND(this),ZM(this),We(19))},st.kb=function(n){n?(this.j.info("Successfully pinged google.com"),We(2)):(this.j.info("Failed to ping google.com"),We(1))},(st=DO.prototype).xa=function(){},st.wa=function(){},st.va=function(){},st.ua=function(){},st.Ra=function(){},OD.prototype.g=function(n,e){return new Po(n,e)},Fr(Po,Kr),Po.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;We(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=bO(n,null,n.V),kD(n)},Po.prototype.close=function(){qM(this.g)},Po.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=vD(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&kD(e)},Po.prototype.M=function(){this.g.l=null,delete this.j,qM(this.g),delete this.g,Po.X.M.call(this)},Fr(TO,gp),Fr(SO,mp),Fr(C_,DO),C_.prototype.xa=function(){ui(this.g,"a")},C_.prototype.wa=function(n){ui(this.g,new TO(n))},C_.prototype.va=function(n){ui(this.g,new SO)},C_.prototype.ua=function(){ui(this.g,"b")},OD.prototype.createWebChannel=OD.prototype.g,Po.prototype.send=Po.prototype.u,Po.prototype.open=Po.prototype.m,Po.prototype.close=Po.prototype.close,It.NO_ERROR=0,It.TIMEOUT=8,It.HTTP_ERROR=6,fn.COMPLETE="complete",y_.EventType=Kc,Kc.OPEN="a",Kc.CLOSE="b",Kc.ERROR="c",Kc.MESSAGE="d",Kr.prototype.listen=Kr.prototype.N,xr.prototype.listenOnce=xr.prototype.O,xr.prototype.getLastError=xr.prototype.Oa,xr.prototype.getLastErrorCode=xr.prototype.Ea,xr.prototype.getStatus=xr.prototype.aa,xr.prototype.getResponseJson=xr.prototype.Sa,xr.prototype.getResponseText=xr.prototype.fa,xr.prototype.send=xr.prototype.da,xr.prototype.setWithCredentials=xr.prototype.Ka;var nj=ko.createWebChannelTransport=function(){return new OD},rj=ko.getStatEventTarget=function(){return ee()},YM=ko.ErrorCode=It,ij=ko.EventType=fn,sj=ko.Event=O,AO=ko.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},oj=ko.FetchXmlHttpFactory=_w,FD=ko.WebChannel=y_,aj=ko.XhrIo=xr;const xO="@firebase/firestore";class Ii{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ii.UNAUTHENTICATED=new Ii(null),Ii.GOOGLE_CREDENTIALS=new Ii("google-credentials-uid"),Ii.FIRST_PARTY=new Ii("first-party-uid"),Ii.MOCK_USER=new Ii("mock-user");let E_="9.15.0";const bh=new Ao.Yd("@firebase/firestore");function QM(){return bh.logLevel}function Oe(n,...e){if(bh.logLevel<=Ao.in.DEBUG){const t=e.map(JM);bh.debug(`Firestore (${E_}): ${n}`,...t)}}function Vr(n,...e){if(bh.logLevel<=Ao.in.ERROR){const t=e.map(JM);bh.error(`Firestore (${E_}): ${n}`,...t)}}function Cp(n,...e){if(bh.logLevel<=Ao.in.WARN){const t=e.map(JM);bh.warn(`Firestore (${E_}): ${n}`,...t)}}function JM(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ut(n="Unexpected state"){const e=`FIRESTORE (${E_}) INTERNAL ASSERTION FAILED: `+n;throw Vr(e),new Error(e)}function yt(n,e){n||ut()}function Ye(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends P.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class li{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class MO{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ii.UNAUTHENTICATED))}shutdown(){}}class dj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class hj{constructor(e){this.t=e,this.currentUser=Ii.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let l=new li;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new li,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const w=l;e.enqueueRetryable((0,_e.Z)(function*(){yield w.promise,yield a(r.currentUser)}))},_=w=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(w=>_(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?_(w):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new li)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(yt("string"==typeof r.accessToken),new MO(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return yt(null===e||"string"==typeof e),new Ii(e)}}class fj{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=Ii.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(yt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class pj{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new fj(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Ii.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class RO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gj{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=a=>{null!=a.error&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.A;return this.A=a.token,Oe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(yt("string"==typeof t.token),this.A=t.token,new RO(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function mj(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class NO{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=mj(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Bt(n,e){return n<e?-1:n>e?1:0}function b_(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function kO(n){return n+"\0"}class hr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return hr.fromMillis(Date.now())}static fromDate(e){return hr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new hr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Bt(this.nanoseconds,e.nanoseconds):Bt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ct{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ct(e)}static min(){return new Ct(new hr(0,0))}static max(){return new Ct(new hr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ew{constructor(e,t,r){void 0===t?t=0:t>e.length&&ut(),void 0===r?r=e.length-t:r>e.length-t&&ut(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Ew.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ew?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class pn extends Ew{construct(e,t,r){return new pn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new pn(t)}static emptyPath(){return new pn([])}}const _j=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mr extends Ew{construct(e,t,r){return new Mr(e,t,r)}static isValidIdentifier(e){return _j.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Mr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Ne(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Ne(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Ne(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===h?(l=!l,i++):"."!==h||l?(r+=h,i++):(a(),i++)}if(a(),l)throw new Ne(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mr(t)}static emptyPath(){return new Mr([])}}class Ze{constructor(e){this.path=e}static fromPath(e){return new Ze(pn.fromString(e))}static fromName(e){return new Ze(pn.fromString(e).popFirst(5))}static empty(){return new Ze(pn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===pn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return pn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ze(new pn(e.slice()))}}class LD{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function XM(n){return n.fields.find(e=>2===e.kind)}function Ep(n){return n.fields.filter(e=>2!==e.kind)}LD.UNKNOWN_ID=-1;class VD{constructor(e,t){this.fieldPath=e,this.kind=t}}class bw{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new bw(0,Oo.min())}}function PO(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ct.fromTimestamp(1e9===r?new hr(t+1,0):new hr(t,r));return new Oo(i,Ze.empty(),e)}function OO(n){return new Oo(n.readTime,n.key,-1)}class Oo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Oo(Ct.min(),Ze.empty(),-1)}static max(){return new Oo(Ct.max(),Ze.empty(),-1)}}function eR(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ze.comparator(n.documentKey,e.documentKey),0!==t?t:Bt(n.largestBatchId,e.largestBatchId))}const FO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class LO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ih(n){return tR.apply(this,arguments)}function tR(){return tR=(0,_e.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==FO)throw n;Oe("LocalStore","Unexpectedly lost primary lease")}),tR.apply(this,arguments)}class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ut(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.reject(t)}static resolve(e){return new ue((t,r)=>{t(e)})}static reject(e){return new ue((t,r)=>{r(e)})}static waitFor(e){return new ue((t,r)=>{let i=0,a=0,l=!1;e.forEach(h=>{++i,h.next(()=>{++a,l&&a===i&&t()},_=>r(_))}),l=!0,a===i&&t()})}static or(e){let t=ue.resolve(!1);for(const r of e)t=t.next(i=>i?ue.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new ue((r,i)=>{const a=e.length,l=new Array(a);let h=0;for(let _=0;_<a;_++){const w=_;t(e[w]).next(D=>{l[w]=D,++h,h===a&&r(l)},D=>i(D))}})}static doWhile(e,t){return new ue((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class UD{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new li,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Iw(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=nR(r.target.error);this.P.reject(new Iw(e,i))}}static open(e,t,r,i){try{return new UD(t,e.transaction(i,r))}catch(a){throw new Iw(t,a)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Oe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Cj(t)}}class _u{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===_u.D((0,P.z$)())&&Vr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Oe("SimpleDb","Removing database:",e),bp(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,P.hl)())return!1;if(_u.N())return!0;const e=(0,P.z$)(),t=_u.D(e),r=0<t&&t<10,i=_u.k(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,_e.Z)(function*(){return t.db||(Oe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new Iw(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const h=l.target.error;i("VersionError"===h.name?new Ne(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Ne(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new Iw(e,h))},a.onupgradeneeded=l=>{Oe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{Oe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,_e.Z)(function*(){const l="readonly"===t;let h=0;for(;;){++h;try{a.db=yield a.F(e);const _=UD.open(a.db,e,l?"readonly":"readwrite",r),w=i(_).next(D=>(_.V(),D)).catch(D=>(_.abort(D),ue.reject(D))).toPromise();return w.catch(()=>{}),yield _.v,w}catch(_){const w=_,D="FirebaseError"!==w.name&&h<3;if(Oe("SimpleDb","Transaction failed with error:",w.message,"Retrying:",D),a.close(),!D)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class wj{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return bp(this.q.delete())}}class Iw extends Ne{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Dh(n){return"IndexedDbTransactionError"===n.name}class Cj{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Oe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Oe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),bp(r)}add(e){return Oe("SimpleDb","ADD",this.store.name,e,e),bp(this.store.add(e))}get(e){return bp(this.store.get(e)).next(t=>(void 0===t&&(t=null),Oe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Oe("SimpleDb","DELETE",this.store.name,e),bp(this.store.delete(e))}count(){return Oe("SimpleDb","COUNT",this.store.name),bp(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.H(i,(l,h)=>{a.push(h)}).next(()=>a)}{const i=this.store.getAll(r.range);return new ue((a,l)=>{i.onerror=h=>{l(h.target.error)},i.onsuccess=h=>{a(h.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ue((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Y(e,t){Oe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(a,l,h)=>h.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new ue((r,i)=>{t.onerror=a=>{const l=nR(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(h=>{h?l.continue():r()}):r()}})}H(e,t){const r=[];return new ue((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void i();const _=new wj(h),w=t(h.primaryKey,h.value,_);if(w instanceof ue){const D=w.catch(S=>(_.done(),ue.reject(S)));r.push(D)}_.isDone?i():null===_.G?h.continue():h.continue(_.G)}}).next(()=>ue.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function bp(n){return new ue((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=nR(r.target.error);t(i)}})}let VO=!1;function nR(n){const e=_u.D((0,P.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return VO||(VO=!0,setTimeout(()=>{throw r},0)),r}}return n}class Ej{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Oe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,_e.Z)(function*(){t.task=null;try{Oe("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Dh(r)?Oe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Ih(r)}yield t.nt(6e4)}))}}class bj{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,_e.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,a=!0;return ue.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Oe("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,i).next(h=>{i-=h,r.add(l)});a=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(i,a)).next(h=>(Oe("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=OO(a);eR(l,r)>0&&(r=l)}),new Oo(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Fo=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>r.writeSequenceNumber(i))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class Ij{constructor(e,t,r,i,a,l,h,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.useFetchStreams=_}}class Th{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Th("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Th&&e.projectId===this.projectId&&e.database===this.database}}function UO(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ip(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function BO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Dw(n){return null==n}function Tw(n){return 0===n&&1/n==-1/0}function jO(n){return"number"==typeof n&&Number.isInteger(n)&&!Tw(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class ci{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ci(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new ci(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Bt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ci.EMPTY_BYTE_STRING=new ci("");const Tj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sh(n){if(yt(!!n),"string"==typeof n){let e=0;const t=Tj.exec(n);if(yt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Rr(n.seconds),nanos:Rr(n.nanos)}}function Rr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Dp(n){return"string"==typeof n?ci.fromBase64String(n):ci.fromUint8Array(n)}function rR(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function HO(n){const e=n.mapValue.fields.__previous_value__;return rR(e)?HO(e):e}function Sw(n){const e=Sh(n.mapValue.fields.__local_write_time__.timestampValue);return new hr(e.seconds,e.nanos)}const Ah={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},BD={nullValue:"NULL_VALUE"};function Tp(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?rR(n)?4:WO(n)?9007199254740991:10:ut()}function Tl(n,e){if(n===e)return!0;const t=Tp(n);if(t!==Tp(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Sw(n).isEqual(Sw(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Sh(r.timestampValue),l=Sh(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Dp(n.bytesValue).isEqual(Dp(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Rr(r.geoPointValue.latitude)===Rr(i.geoPointValue.latitude)&&Rr(r.geoPointValue.longitude)===Rr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Rr(r.integerValue)===Rr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Rr(r.doubleValue),l=Rr(i.doubleValue);return a===l?Tw(a)===Tw(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return b_(n.arrayValue.values||[],e.arrayValue.values||[],Tl);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(UO(a)!==UO(l))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===l[h]||!Tl(a[h],l[h])))return!1;return!0}(n,e);default:return ut()}var i}function Aw(n,e){return void 0!==(n.values||[]).find(t=>Tl(t,e))}function xh(n,e){if(n===e)return 0;const t=Tp(n),r=Tp(e);if(t!==r)return Bt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Bt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Rr(i.integerValue||i.doubleValue),h=Rr(a.integerValue||a.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,e);case 3:return $O(n.timestampValue,e.timestampValue);case 4:return $O(Sw(n),Sw(e));case 5:return Bt(n.stringValue,e.stringValue);case 6:return function(i,a){const l=Dp(i),h=Dp(a);return l.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),h=a.split("/");for(let _=0;_<l.length&&_<h.length;_++){const w=Bt(l[_],h[_]);if(0!==w)return w}return Bt(l.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Bt(Rr(i.latitude),Rr(a.latitude));return 0!==l?l:Bt(Rr(i.longitude),Rr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],h=a.values||[];for(let _=0;_<l.length&&_<h.length;++_){const w=xh(l[_],h[_]);if(w)return w}return Bt(l.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===Ah.mapValue&&a===Ah.mapValue)return 0;if(i===Ah.mapValue)return 1;if(a===Ah.mapValue)return-1;const l=i.fields||{},h=Object.keys(l),_=a.fields||{},w=Object.keys(_);h.sort(),w.sort();for(let D=0;D<h.length&&D<w.length;++D){const S=Bt(h[D],w[D]);if(0!==S)return S;const R=xh(l[h[D]],_[w[D]]);if(0!==R)return R}return Bt(h.length,w.length)}(n.mapValue,e.mapValue);default:throw ut()}}function $O(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Bt(n,e);const t=Sh(n),r=Sh(e),i=Bt(t.seconds,r.seconds);return 0!==i?i:Bt(t.nanos,r.nanos)}function I_(n){return iR(n)}function iR(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Sh(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Dp(n.bytesValue).toBase64():"referenceValue"in n?Ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=iR(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const h of i)l?l=!1:a+=",",a+=`${h}:${iR(r.fields[h])}`;return a+"}"}(n.mapValue):ut();var e}function Sp(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function sR(n){return!!n&&"integerValue"in n}function xw(n){return!!n&&"arrayValue"in n}function GO(n){return!!n&&"nullValue"in n}function zO(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function jD(n){return!!n&&"mapValue"in n}function Mw(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ip(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Mw(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Mw(n.arrayValue.values[t]);return e}return Object.assign({},n)}function WO(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Sj(n){return"nullValue"in n?BD:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Sp(Th.empty(),Ze.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ut()}function Aj(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Sp(Th.empty(),Ze.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ah:ut()}function qO(n,e){const t=xh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function ZO(n,e){const t=xh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Mh{constructor(e,t){this.position=e,this.inclusive=t}}function KO(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?Ze.comparator(Ze.fromName(l.referenceValue),t.key):xh(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function YO(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Tl(n.position[t],e.position[t]))return!1;return!0}class QO{}class an extends QO{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new xj(e,t,r):"array-contains"===t?new Nj(e,r):"in"===t?new sF(e,r):"not-in"===t?new kj(e,r):"array-contains-any"===t?new Pj(e,r):new an(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Mj(e,r):new Rj(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(xh(t,this.value)):null!==t&&Tp(this.value)===Tp(t)&&this.matchesComparison(xh(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ut()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Sn extends QO{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new Sn(e,t)}matches(e){return D_(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function D_(n){return"and"===n.op}function oR(n){return"or"===n.op}function JO(n){return XO(n)&&D_(n)}function XO(n){for(const e of n.filters)if(e instanceof Sn)return!1;return!0}function eF(n){if(n instanceof an)return n.field.canonicalString()+n.op.toString()+I_(n.value);{const e=n.filters.map(t=>eF(t)).join(",");return`${n.op}(${e})`}}function tF(n,e){return n instanceof an?(t=n,(r=e)instanceof an&&t.op===r.op&&t.field.isEqual(r.field)&&Tl(t.value,r.value)):n instanceof Sn?function(t,r){return r instanceof Sn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,a,l)=>i&&tF(a,r.filters[l]),!0)}(n,e):void ut();var t,r}function nF(n,e){const t=n.filters.concat(e);return Sn.create(t,n.op)}function rF(n){return n instanceof an?`${(e=n).field.canonicalString()} ${e.op} ${I_(e.value)}`:n instanceof Sn?function(e){return e.op.toString()+" {"+e.getFilters().map(rF).join(" ,")+"}"}(n):"Filter";var e}class xj extends an{constructor(e,t,r){super(e,t,r),this.key=Ze.fromName(r.referenceValue)}matches(e){const t=Ze.comparator(e.key,this.key);return this.matchesComparison(t)}}class Mj extends an{constructor(e,t){super(e,"in",t),this.keys=iF(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Rj extends an{constructor(e,t){super(e,"not-in",t),this.keys=iF(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function iF(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ze.fromName(r.referenceValue))}class Nj extends an{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return xw(t)&&Aw(t.arrayValue,this.value)}}class sF extends an{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Aw(this.value.arrayValue,t)}}class kj extends an{constructor(e,t){super(e,"not-in",t)}matches(e){if(Aw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Aw(this.value.arrayValue,t)}}class Pj extends an{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!xw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Aw(this.value.arrayValue,r))}}class T_{constructor(e,t="asc"){this.field=e,this.dir=t}}function Oj(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Nr{constructor(e,t){this.comparator=e,this.root=t||Gi.EMPTY}insert(e,t){return new Nr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Gi.BLACK,null,null))}remove(e){return new Nr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new HD(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new HD(this.root,e,this.comparator,!1)}getReverseIterator(){return new HD(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new HD(this.root,e,this.comparator,!0)}}class HD{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gi{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Gi.RED,this.left=i??Gi.EMPTY,this.right=a??Gi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Gi(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Gi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Gi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ut();const e=this.left.check();if(e!==this.right.check())throw ut();return e+(this.isRed()?0:1)}}Gi.EMPTY=null,Gi.RED=!0,Gi.BLACK=!1,Gi.EMPTY=new class{constructor(){this.size=0}get key(){throw ut()}get value(){throw ut()}get color(){throw ut()}get left(){throw ut()}get right(){throw ut()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Gi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Nn{constructor(e){this.comparator=e,this.data=new Nr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new oF(this.data.getIterator())}getIteratorFrom(e){return new oF(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Nn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Nn(this.comparator);return t.data=e,t}}class oF{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function S_(n){return n.hasNext()?n.getNext():void 0}class Lo{constructor(e){this.fields=e,e.sort(Mr.comparator)}static empty(){return new Lo([])}unionWith(e){let t=new Nn(Mr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Lo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return b_(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class zi{constructor(e){this.value=e}static empty(){return new zi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!jD(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Mw(t)}setAll(e){let t=Mr.emptyPath(),r={},i=[];e.forEach((l,h)=>{if(!t.isImmediateParentOf(h)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=h.popLast()}l?r[h.lastSegment()]=Mw(l):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());jD(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Tl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];jD(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ip(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new zi(Mw(this.value))}}function aF(n){const e=[];return Ip(n.fields,(t,r)=>{const i=new Mr([t]);if(jD(r)){const a=aF(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new Lo(e)}class Xn{constructor(e,t,r,i,a,l,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=h}static newInvalidDocument(e){return new Xn(e,0,Ct.min(),Ct.min(),Ct.min(),zi.empty(),0)}static newFoundDocument(e,t,r,i){return new Xn(e,1,t,Ct.min(),r,i,0)}static newNoDocument(e,t){return new Xn(e,2,t,Ct.min(),Ct.min(),zi.empty(),0)}static newUnknownDocument(e,t){return new Xn(e,3,t,Ct.min(),Ct.min(),zi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ct.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ct.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Fj{constructor(e,t=null,r=[],i=[],a=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=h,this.ft=null}}function aR(n,e=null,t=[],r=[],i=null,a=null,l=null){return new Fj(n,e,t,r,i,a,l)}function Ap(n){const e=Ye(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>eF(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Dw(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>I_(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>I_(r)).join(",")),e.ft=t}return e.ft}function Rw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Oj(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!tF(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!YO(n.startAt,e.startAt)&&YO(n.endAt,e.endAt)}function $D(n){return Ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function GD(n,e){return n.filters.filter(t=>t instanceof an&&t.field.isEqual(e))}function uF(n,e,t){let r=BD,i=!0;for(const a of GD(n,e)){let l=BD,h=!0;switch(a.op){case"<":case"<=":l=Sj(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,h=!1;break;case"!=":case"not-in":l=BD}qO({value:r,inclusive:i},{value:l,inclusive:h})<0&&(r=l,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];qO({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function lF(n,e,t){let r=Ah,i=!0;for(const a of GD(n,e)){let l=Ah,h=!0;switch(a.op){case">=":case">":l=Aj(a.value),h=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,h=!1;break;case"!=":case"not-in":l=Ah}ZO({value:r,inclusive:i},{value:l,inclusive:h})>0&&(r=l,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];ZO({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class Xc{constructor(e,t=null,r=[],i=[],a=null,l="F",h=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=_,this.dt=null,this._t=null}}function cF(n,e,t,r,i,a,l,h){return new Xc(n,e,t,r,i,a,l,h)}function A_(n){return new Xc(n)}function dF(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function uR(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function zD(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function lR(n){return null!==n.collectionGroup}function xp(n){const e=Ye(n);if(null===e.dt){e.dt=[];const t=zD(e),r=uR(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new T_(t)),e.dt.push(new T_(Mr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.dt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new T_(Mr.keyField(),a))}}}return e.dt}function Is(n){const e=Ye(n);if(!e._t)if("F"===e.limitType)e._t=aR(e.path,e.collectionGroup,xp(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of xp(e))t.push(new T_(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Mh(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Mh(e.startAt.position,e.startAt.inclusive):null;e._t=aR(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function cR(n,e){e.getFirstInequalityField(),zD(n);const t=n.filters.concat([e]);return new Xc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function WD(n,e,t){return new Xc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Nw(n,e){return Rw(Is(n),Is(e))&&n.limitType===e.limitType}function hF(n){return`${Ap(Is(n))}|lt:${n.limitType}`}function dR(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>rF(r)).join(", ")}]`),Dw(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>I_(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>I_(r)).join(",")),`Target(${t})`}(Is(n))}; limitType=${n.limitType})`}function hR(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ze.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of xp(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const h=KO(i,a,l);return i.inclusive?h<=0:h<0}(t.startAt,xp(t),r)||t.endAt&&!function(i,a,l){const h=KO(i,a,l);return i.inclusive?h>=0:h>0}(t.endAt,xp(t),r)));var t,r}function fF(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function pF(n){return(e,t)=>{let r=!1;for(const i of xp(n)){const a=Lj(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function Lj(n,e,t){const r=n.field.isKeyField()?Ze.comparator(e.key,t.key):function(i,a,l){const h=a.data.field(i),_=l.data.field(i);return null!==h&&null!==_?xh(h,_):ut()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ut()}}function gF(n,e){if(n.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tw(e)?"-0":e}}function mF(n){return{integerValue:""+n}}function _F(n,e){return jO(e)?mF(e):gF(n,e)}class qD{constructor(){this._=void 0}}function Vj(n,e,t){return n instanceof x_?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Mp?vF(n,e):n instanceof Rp?wF(n,e):function(r,i){const a=yF(r,i),l=CF(a)+CF(r.gt);return sR(a)&&sR(r.gt)?mF(l):gF(r.yt,l)}(n,e)}function Uj(n,e,t){return n instanceof Mp?vF(n,e):n instanceof Rp?wF(n,e):t}function yF(n,e){return n instanceof M_?sR(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class x_ extends qD{}class Mp extends qD{constructor(e){super(),this.elements=e}}function vF(n,e){const t=EF(e);for(const r of n.elements)t.some(i=>Tl(i,r))||t.push(r);return{arrayValue:{values:t}}}class Rp extends qD{constructor(e){super(),this.elements=e}}function wF(n,e){let t=EF(e);for(const r of n.elements)t=t.filter(i=>!Tl(i,r));return{arrayValue:{values:t}}}class M_ extends qD{constructor(e,t){super(),this.yt=e,this.gt=t}}function CF(n){return Rr(n.integerValue||n.doubleValue)}function EF(n){return xw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class kw{constructor(e,t){this.field=e,this.transform=t}}class jj{constructor(e,t){this.version=e,this.transformResults=t}}class fr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new fr}static exists(e){return new fr(void 0,e)}static updateTime(e){return new fr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ZD(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class KD{}function bF(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new N_(n.key,fr.none()):new R_(n.key,n.data,fr.none());{const t=n.data,r=zi.empty();let i=new Nn(Mr.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new ed(n.key,r,new Lo(i.toArray()),fr.none())}}function Hj(n,e,t){n instanceof R_?function(r,i,a){const l=r.value.clone(),h=TF(r.fieldTransforms,i,a.transformResults);l.setAll(h),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof ed?function(r,i,a){if(!ZD(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=TF(r.fieldTransforms,i,a.transformResults),h=i.data;h.setAll(DF(r)),h.setAll(l),i.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Pw(n,e,t,r){return n instanceof R_?function(i,a,l,h){if(!ZD(i.precondition,a))return l;const _=i.value.clone(),w=SF(i.fieldTransforms,h,a);return _.setAll(w),a.convertToFoundDocument(a.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof ed?function(i,a,l,h){if(!ZD(i.precondition,a))return l;const _=SF(i.fieldTransforms,h,a),w=a.data;return w.setAll(DF(i)),w.setAll(_),a.convertToFoundDocument(a.version,w).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(D=>D.field))}(n,e,t,r):(l=t,ZD(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function $j(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=yF(r.transform,i||null);null!=a&&(null===t&&(t=zi.empty()),t.set(r.field,a))}return t||null}function IF(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&b_(t,r,(i,a)=>function Bj(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Mp&&r instanceof Mp||t instanceof Rp&&r instanceof Rp?b_(t.elements,r.elements,Tl):t instanceof M_&&r instanceof M_?Tl(t.gt,r.gt):t instanceof x_&&r instanceof x_);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class R_ extends KD{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ed extends KD{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function DF(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function TF(n,e,t){const r=new Map;yt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,h=e.data.field(a.field);r.set(a.field,Uj(l,h,t[i]))}return r}function SF(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,Vj(a,l,e))}return r}class N_ extends KD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fR extends KD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Gj{constructor(e){this.count=e}}var Yr,gn;function AF(n){switch(n){default:return ut();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function xF(n){if(void 0===n)return Vr("GRPC error has no .code"),ce.UNKNOWN;switch(n){case Yr.OK:return ce.OK;case Yr.CANCELLED:return ce.CANCELLED;case Yr.UNKNOWN:return ce.UNKNOWN;case Yr.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Yr.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Yr.INTERNAL:return ce.INTERNAL;case Yr.UNAVAILABLE:return ce.UNAVAILABLE;case Yr.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Yr.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Yr.NOT_FOUND:return ce.NOT_FOUND;case Yr.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Yr.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Yr.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Yr.ABORTED:return ce.ABORTED;case Yr.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Yr.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Yr.DATA_LOSS:return ce.DATA_LOSS;default:return ut()}}(gn=Yr||(Yr={}))[gn.OK=0]="OK",gn[gn.CANCELLED=1]="CANCELLED",gn[gn.UNKNOWN=2]="UNKNOWN",gn[gn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gn[gn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gn[gn.NOT_FOUND=5]="NOT_FOUND",gn[gn.ALREADY_EXISTS=6]="ALREADY_EXISTS",gn[gn.PERMISSION_DENIED=7]="PERMISSION_DENIED",gn[gn.UNAUTHENTICATED=16]="UNAUTHENTICATED",gn[gn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gn[gn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gn[gn.ABORTED=10]="ABORTED",gn[gn.OUT_OF_RANGE=11]="OUT_OF_RANGE",gn[gn.UNIMPLEMENTED=12]="UNIMPLEMENTED",gn[gn.INTERNAL=13]="INTERNAL",gn[gn.UNAVAILABLE=14]="UNAVAILABLE",gn[gn.DATA_LOSS=15]="DATA_LOSS";class Rh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ip(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return BO(this.inner)}size(){return this.innerSize}}const zj=new Nr(Ze.comparator);function Xs(){return zj}const MF=new Nr(Ze.comparator);function Ow(...n){let e=MF;for(const t of n)e=e.insert(t.key,t);return e}function RF(n){let e=MF;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Sl(){return Fw()}function NF(){return Fw()}function Fw(){return new Rh(n=>n.toString(),(n,e)=>n.isEqual(e))}const Wj=new Nr(Ze.comparator),qj=new Nn(Ze.comparator);function Gt(...n){let e=qj;for(const t of n)e=e.add(t);return e}const Zj=new Nn(Bt);function YD(){return Zj}class Lw{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Vw.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Lw(Ct.min(),i,YD(),Xs(),Gt())}}class Vw{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Vw(r,t,Gt(),Gt(),Gt())}}class QD{constructor(e,t,r,i){this.It=e,this.removedTargetIds=t,this.key=r,this.Tt=i}}class kF{constructor(e,t){this.targetId=e,this.Et=t}}class PF{constructor(e,t,r=ci.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class OF{constructor(){this.At=0,this.Rt=LF(),this.bt=ci.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=Gt(),t=Gt(),r=Gt();return this.Rt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ut()}}),new Vw(this.bt,this.Pt,e,t,r)}xt(){this.vt=!1,this.Rt=LF()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class Kj{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=Xs(),this.qt=FF(),this.Ut=new Nn(Bt)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const r=this.Wt(t);switch(e.state){case 0:this.zt(t)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),r.Dt(e.resumeToken));break;default:ut()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((r,i)=>{this.zt(i)&&t(i)})}Jt(e){const t=e.targetId,r=e.Et.count,i=this.Yt(t);if(i){const a=i.target;if($D(a))if(0===r){const l=new Ze(a.path);this.Qt(t,l,Xn.newNoDocument(l,Ct.min()))}else yt(1===r);else this.Xt(t)!==r&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((a,l)=>{const h=this.Yt(l);if(h){if(a.current&&$D(h.target)){const _=new Ze(h.target.path);null!==this.Lt.get(_)||this.te(l,_)||this.Qt(l,_,Xn.newNoDocument(_,e))}a.St&&(t.set(l,a.Ct()),a.xt())}});let r=Gt();this.qt.forEach((a,l)=>{let h=!0;l.forEachWhile(_=>{const w=this.Yt(_);return!w||2===w.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.Lt.forEach((a,l)=>l.setReadTime(e));const i=new Lw(e,t,this.Ut,this.Lt,r);return this.Lt=Xs(),this.qt=FF(),this.Ut=new Nn(Bt),i}Gt(e,t){if(!this.zt(e))return;const r=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,r),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,r){if(!this.zt(e))return;const i=this.Wt(e);this.te(e,t)?i.Nt(t,1):i.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),r&&(this.Lt=this.Lt.insert(t,r))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new OF,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new Nn(Bt),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||Oe("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new OF),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function FF(){return new Nr(Ze.comparator)}function LF(){return new Nr(Ze.comparator)}const Yj={asc:"ASCENDING",desc:"DESCENDING"},Qj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Jj={and:"AND",or:"OR"};class Xj{constructor(e,t){this.databaseId=e,this.wt=t}}function k_(n,e){return n.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function VF(n,e){return n.wt?e.toBase64():e.toUint8Array()}function eH(n,e){return k_(n,e.toTimestamp())}function Ur(n){return yt(!!n),Ct.fromTimestamp(function(e){const t=Sh(e);return new hr(t.seconds,t.nanos)}(n))}function pR(n,e){return(t=n,new pn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function UF(n){const e=pn.fromString(n);return yt(ZF(e)),e}function Uw(n,e){return pR(n.databaseId,e.path)}function Al(n,e){const t=UF(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ze(jF(t))}function gR(n,e){return pR(n.databaseId,e)}function BF(n){const e=UF(n);return 4===e.length?pn.emptyPath():jF(e)}function Bw(n){return new pn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function jF(n){return yt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function HF(n,e,t){return{name:Uw(n,e),fields:t.value.mapValue.fields}}function $F(n,e,t){const r=Al(n,e.name),i=Ur(e.updateTime),a=e.createTime?Ur(e.createTime):Ct.min(),l=new zi({mapValue:{fields:e.fields}}),h=Xn.newFoundDocument(r,i,a,l);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function jw(n,e){let t;if(e instanceof R_)t={update:HF(n,e.key,e.value)};else if(e instanceof N_)t={delete:Uw(n,e.key)};else if(e instanceof ed)t={update:HF(n,e.key,e.data),updateMask:uH(e.fieldMask)};else{if(!(e instanceof fR))return ut();t={verify:Uw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof x_)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Mp)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Rp)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof M_)return{fieldPath:a.field.canonicalString(),increment:l.gt};throw ut()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:eH(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ut()),t;var i}function mR(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?fr.updateTime(Ur(i.updateTime)):void 0!==i.exists?fr.exists(i.exists):fr.none():fr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let h=null;"setToServerValue"in l?(yt("REQUEST_TIME"===l.setToServerValue),h=new x_):"appendMissingElements"in l?h=new Mp(l.appendMissingElements.values||[]):"removeAllFromArray"in l?h=new Rp(l.removeAllFromArray.values||[]):"increment"in l?h=new M_(a,l.increment):ut();const _=Mr.fromServerFormat(l.fieldPath);return new kw(_,h)}(n,i)):[];var i;if(e.update){const i=Al(n,e.update.name),a=new zi({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Lo((e.updateMask.fieldPaths||[]).map(w=>Mr.fromServerFormat(w)));return new ed(i,a,l,t,r)}return new R_(i,a,t,r)}if(e.delete){const i=Al(n,e.delete);return new N_(i,t)}if(e.verify){const i=Al(n,e.verify);return new fR(i,t)}return ut()}function GF(n,e){return{documents:[gR(n,e.path)]}}function _R(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=gR(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=gR(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0!==_.length)return qF(Sn.create(_,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(_){if(0!==_.length)return _.map(w=>{return{field:P_((D=w).field),direction:sH(D.dir)};var D})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(w=e.limit,n.wt||Dw(w)?w:{value:w});var w,h,_;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function zF(n){let e=BF(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){yt(1===r);const D=t.from[0];D.allDescendants?i=D.collectionId:e=e.child(D.collectionId)}let a=[];t.where&&(a=function(D){const S=WF(D);return S instanceof Sn&&JO(S)?S.getFilters():[S]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(D=>{return new T_(O_((S=D).field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let h=null;t.limit&&(h=function(D){let S;return S="object"==typeof D?D.value:D,Dw(S)?null:S}(t.limit));let _=null;var D;t.startAt&&(_=new Mh((D=t.startAt).values||[],!!D.before));let w=null;return t.endAt&&(w=function(D){return new Mh(D.values||[],!D.before)}(t.endAt)),cF(e,i,l,a,h,"F",_,w)}function WF(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=O_(e.unaryFilter.field);return an.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=O_(e.unaryFilter.field);return an.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=O_(e.unaryFilter.field);return an.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=O_(e.unaryFilter.field);return an.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ut()}}(n):void 0!==n.fieldFilter?an.create(O_((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ut()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Sn.create(e.compositeFilter.filters.map(t=>WF(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ut()}}(e.compositeFilter.op))}(n):ut();var e}function sH(n){return Yj[n]}function oH(n){return Qj[n]}function aH(n){return Jj[n]}function P_(n){return{fieldPath:n.canonicalString()}}function O_(n){return Mr.fromServerFormat(n.fieldPath)}function qF(n){return n instanceof an?function(e){if("=="===e.op){if(zO(e.value))return{unaryFilter:{field:P_(e.field),op:"IS_NAN"}};if(GO(e.value))return{unaryFilter:{field:P_(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(zO(e.value))return{unaryFilter:{field:P_(e.field),op:"IS_NOT_NAN"}};if(GO(e.value))return{unaryFilter:{field:P_(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:P_(e.field),op:oH(e.op),value:e.value}}}(n):n instanceof Sn?function(e){const t=e.getFilters().map(r=>qF(r));return 1===t.length?t[0]:{compositeFilter:{op:aH(e.op),filters:t}}}(n):ut()}function uH(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ZF(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ds(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=KF(e)),e=lH(n.get(t),e);return KF(e)}function lH(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function KF(n){return n+"\x01\x01"}function xl(n){const e=n.length;if(yt(e>=2),2===e)return yt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),pn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&ut(),n.charAt(l+1)){case"\x01":const h=n.substring(a,l);let _;0===i.length?_=h:(i+=h,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:ut()}a=l+2}return new pn(r)}const YF=["userId","batchId"];function JD(n,e){return[n,Ds(e)]}function QF(n,e,t){return[n,Ds(e),t]}const cH={},dH=["prefixPath","collectionGroup","readTime","documentId"],hH=["prefixPath","collectionGroup","documentId"],fH=["collectionGroup","readTime","prefixPath","documentId"],pH=["canonicalId","targetId"],gH=["targetId","path"],mH=["path","targetId"],_H=["collectionId","parent"],yH=["indexId","uid"],vH=["uid","sequenceNumber"],wH=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],CH=["indexId","uid","orderedDocumentKey"],EH=["userId","collectionPath","documentId"],bH=["userId","collectionPath","largestBatchId"],IH=["userId","collectionGroup","largestBatchId"],JF=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],DH=[...JF,"documentOverlays"],XF=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],eL=XF,TH=[...eL,"indexConfiguration","indexState","indexEntries"];class yR extends LO{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function Di(n,e){const t=Ye(n);return _u.M(t.se,e)}class vR{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&Hj(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Pw(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Pw(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=NF();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let h=this.applyToLocalView(l,a.mutatedFields);h=t.has(i.key)?null:h;const _=bF(l,h);null!==_&&r.set(i.key,_),l.isValidDocument()||l.convertToNoDocument(Ct.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Gt())}isEqual(e){return this.batchId===e.batchId&&b_(this.mutations,e.mutations,(t,r)=>IF(t,r))&&b_(this.baseMutations,e.baseMutations,(t,r)=>IF(t,r))}}class wR{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){yt(e.mutations.length===r.length);let i=Wj;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new wR(e,t,r,i)}}class CR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Nh{constructor(e,t,r,i,a=Ct.min(),l=Ct.min(),h=ci.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h}withSequenceNumber(e){return new Nh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Nh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Nh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class tL{constructor(e){this.ie=e}}function nL(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:XD(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Uw(i=n.ie,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:k_(i,a.version.toTimestamp()),createTime:k_(i,a.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Np(e.version)};else{if(!e.isUnknownDocument())return ut();r.unknownDocument={path:t.path.toArray(),version:Np(e.version)}}var i,a;return r}function XD(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Np(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function kp(n){const e=new hr(n.seconds,n.nanoseconds);return Ct.fromTimestamp(e)}function Pp(n,e){const t=(e.baseMutations||[]).map(a=>mR(n.ie,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(l.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>mR(n.ie,a)),i=hr.fromMillis(e.localWriteTimeMs);return new vR(e.batchId,i,t,r)}function Hw(n){const e=kp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?kp(n.lastLimboFreeSnapshotVersion):Ct.min();let r;var i;return void 0!==n.query.documents?(yt(1===(i=n.query).documents.length),r=Is(A_(BF(i.documents[0])))):r=Is(zF(n.query)),new Nh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,ci.fromBase64String(n.resumeToken))}function rL(n,e){const t=Np(e.snapshotVersion),r=Np(e.lastLimboFreeSnapshotVersion);let i;i=$D(e.target)?GF(n.ie,e.target):_R(n.ie,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ap(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function ER(n){const e=zF({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?WD(e,e.limit,"L"):e}function bR(n,e){return new CR(e.largestBatchId,mR(n.ie,e.overlayMutation))}function iL(n,e){const t=e.path.lastSegment();return[n,Ds(e.path.popLast()),t]}function sL(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Np(r.readTime),documentKey:Ds(r.documentKey.path),largestBatchId:r.largestBatchId}}class AH{getBundleMetadata(e,t){return oL(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:kp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return oL(e).put({bundleId:(r=t).id,createTime:Np(Ur(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return aL(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:ER(i.bundledQuery),readTime:kp(i.readTime)};var i})}saveNamedQuery(e,t){return aL(e).put({name:(r=t).name,readTime:Np(Ur(r.readTime)),bundledQuery:r.bundledQuery});var r}}function oL(n){return Di(n,"bundles")}function aL(n){return Di(n,"namedQueries")}class eT{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new eT(e,t.uid||"")}getOverlay(e,t){return $w(e).get(iL(this.userId,t)).next(r=>r?bR(this.yt,r):null)}getOverlays(e,t){const r=Sl();return ue.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const h=new CR(t,l);i.push(this.oe(e,h))}),ue.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Ds(l.getCollectionPath())));const a=[];return i.forEach(l=>{const h=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push($w(e).Y("collectionPathOverlayIndex",h))}),ue.waitFor(a)}getOverlaysForCollection(e,t,r){const i=Sl(),a=Ds(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return $w(e).W("collectionPathOverlayIndex",l).next(h=>{for(const _ of h){const w=bR(this.yt,_);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=Sl();let l;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return $w(e).Z({index:"collectionGroupOverlayIndex",range:h},(_,w,D)=>{const S=bR(this.yt,w);a.size()<i||S.largestBatchId===l?(a.set(S.getKey(),S),l=S.largestBatchId):D.done()}).next(()=>a)}oe(e,t){return $w(e).put(function(r,i,a){const[l,h,_]=iL(i,a.mutation.key);return{userId:i,collectionPath:h,documentId:_,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:jw(r.ie,a.mutation)}}(this.yt,this.userId,t))}}function $w(n){return Di(n,"documentOverlays")}class Op{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(Rr(e.integerValue));else if("doubleValue"in e){const r=Rr(e.doubleValue);isNaN(r)?this.he(t,13):(this.he(t,15),Tw(r)?t.le(0):t.le(r))}else if("timestampValue"in e){const r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe(`${r.seconds||""}`),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(Dp(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.he(t,45),t.le(r.latitude||0),t.le(r.longitude||0)}else"mapValue"in e?WO(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):ut()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const r=e.fields||{};this.he(t,55);for(const i of Object.keys(r))this.de(i,t),this.ce(r[i],t)}ye(e,t){const r=e.values||[];this.he(t,50);for(const i of r)this.ce(i,t)}me(e,t){this.he(t,37),Ze.fromName(e).path.forEach(r=>{this.he(t,60),this.pe(r,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function xH(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function uL(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=xH(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}Op.Ie=new Op;class MH{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ee(r.value),r=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.be(r.value),r=t.next();this.Pe()}ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ee(r);else if(r<2048)this.Ee(960|r>>>6),this.Ee(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|r>>>12),this.Ee(128|63&r>>>6),this.Ee(128|63&r);else{const i=t.codePointAt(0);this.Ee(240|i>>>18),this.Ee(128|63&i>>>12),this.Ee(128|63&i>>>6),this.Ee(128|63&i)}}this.Ae()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const i=t.codePointAt(0);this.be(240|i>>>18),this.be(128|63&i>>>12),this.be(128|63&i>>>6),this.be(128|63&i)}}this.Pe()}Se(e){const t=this.De(e),r=uL(t);this.Ce(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}xe(e){const t=this.De(e),r=uL(t);this.Ce(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class RH{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class NH{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class Gw{constructor(){this.$e=new MH,this.Be=new RH(this.$e),this.Le=new NH(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class Fp{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Fp(this.indexId,this.documentKey,this.arrayValue,r)}}function kh(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=lL(n.arrayValue,e.arrayValue),0!==t?t:(t=lL(n.directionalValue,e.directionalValue),0!==t?t:Ze.comparator(n.documentKey,e.documentKey)))}function lL(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class kH{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const r=t;r.isInequality()?this.Qe=r:this.Ge.push(r)}}je(e){yt(e.collectionGroup===this.collectionId);const t=XM(e);if(void 0!==t&&!this.We(t))return!1;const r=Ep(e);let i=0,a=0;for(;i<r.length&&this.We(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Qe){const l=r[i];if(!this.ze(this.Qe,l)||!this.He(this.Ke[a++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(a>=this.Ke.length||!this.He(this.Ke[a++],l))return!1}return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function cL(n){var e,t;if(yt(n instanceof an||n instanceof Sn),n instanceof an){if(n instanceof sF){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(a=>an.create(n.field,"==",a)))||[];return Sn.create(i,"or")}return n}const r=n.filters.map(i=>cL(i));return Sn.create(r,n.op)}function PH(n){if(0===n.getFilters().length)return[];const e=TR(cL(n));return yt(dL(e)),IR(e)||DR(e)?[e]:e.getFilters()}function IR(n){return n instanceof an}function DR(n){return n instanceof Sn&&JO(n)}function dL(n){return IR(n)||DR(n)||function(e){if(e instanceof Sn&&oR(e)){for(const t of e.getFilters())if(!IR(t)&&!DR(t))return!1;return!0}return!1}(n)}function TR(n){if(yt(n instanceof an||n instanceof Sn),n instanceof an)return n;if(1===n.filters.length)return TR(n.filters[0]);const e=n.filters.map(r=>TR(r));let t=Sn.create(e,n.op);return t=tT(t),dL(t)?t:(yt(t instanceof Sn),yt(D_(t)),yt(t.filters.length>1),t.filters.reduce((r,i)=>SR(r,i)))}function SR(n,e){let t;return yt(n instanceof an||n instanceof Sn),yt(e instanceof an||e instanceof Sn),t=n instanceof an?e instanceof an?Sn.create([n,e],"and"):hL(n,e):e instanceof an?hL(e,n):function(r,i){if(yt(r.filters.length>0&&i.filters.length>0),D_(r)&&D_(i))return nF(r,i.getFilters());const a=oR(r)?r:i,l=oR(r)?i:r,h=a.filters.map(_=>SR(_,l));return Sn.create(h,"or")}(n,e),tT(t)}function hL(n,e){if(D_(e))return nF(e,n.getFilters());{const t=e.filters.map(r=>SR(n,r));return Sn.create(t,"or")}}function tT(n){if(yt(n instanceof an||n instanceof Sn),n instanceof an)return n;const e=n.getFilters();if(1===e.length)return tT(e[0]);if(XO(n))return n;const t=e.map(i=>tT(i)),r=[];return t.forEach(i=>{i instanceof an?r.push(i):i instanceof Sn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Sn.create(r,n.op)}class OH{constructor(){this.Je=new AR}addToCollectionParentIndex(e,t){return this.Je.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(Oo.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(Oo.min())}updateCollectionGroup(e,t,r){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class AR{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Nn(pn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Nn(pn.comparator)).toArray()}}const nT=new Uint8Array(0);class FH{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new AR,this.Xe=new Rh(r=>Ap(r),(r,i)=>Rw(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const a={collectionId:r,parent:Ds(i)};return fL(e).put(a)}return ue.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[kO(t),""],!1,!0);return fL(e).W(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(xl(l.parent))}return r})}addFieldIndex(e,t){const r=rT(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var l;delete i.indexId;const a=r.add(i);if(t.indexState){const l=Ww(e);return a.next(h=>{l.put(sL(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=rT(e),i=Ww(e),a=zw(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=zw(e);let i=!0;const a=new Map;return ue.forEach(this.Ze(t),l=>this.tn(e,l).next(h=>{i&&(i=!!h),a.set(l,h)})).next(()=>{if(i){let l=Gt();const h=[];return ue.forEach(a,(_,w)=>{var D;Oe("IndexedDbIndexManager",`Using index ${D=_,`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(rt=>`${rt.fieldPath}:${rt.kind}`).join(",")}`} to execute ${Ap(t)}`);const S=function(rt,ct){const Tt=XM(ct);if(void 0===Tt)return null;for(const Ot of GD(rt,Tt.fieldPath))switch(Ot.op){case"array-contains-any":return Ot.value.arrayValue.values||[];case"array-contains":return[Ot.value]}return null}(w,_),R=function(rt,ct){const Tt=new Map;for(const Ot of Ep(ct))for(const Ir of GD(rt,Ot.fieldPath))switch(Ir.op){case"==":case"in":Tt.set(Ot.fieldPath.canonicalString(),Ir.value);break;case"not-in":case"!=":return Tt.set(Ot.fieldPath.canonicalString(),Ir.value),Array.from(Tt.values())}return null}(w,_),V=function(rt,ct){const Tt=[];let Ot=!0;for(const Ir of Ep(ct)){const Eu=0===Ir.kind?uF(rt,Ir.fieldPath,rt.startAt):lF(rt,Ir.fieldPath,rt.startAt);Tt.push(Eu.value),Ot&&(Ot=Eu.inclusive)}return new Mh(Tt,Ot)}(w,_),j=function(rt,ct){const Tt=[];let Ot=!0;for(const Ir of Ep(ct)){const Eu=0===Ir.kind?lF(rt,Ir.fieldPath,rt.endAt):uF(rt,Ir.fieldPath,rt.endAt);Tt.push(Eu.value),Ot&&(Ot=Eu.inclusive)}return new Mh(Tt,Ot)}(w,_),ae=this.en(_,w,V),ve=this.en(_,w,j),qe=this.nn(_,w,R),lt=this.sn(_.indexId,S,ae,V.inclusive,ve,j.inclusive,qe);return ue.forEach(lt,rt=>r.J(rt,t.limit).next(ct=>{ct.forEach(Tt=>{const Ot=Ze.fromSegments(Tt.documentKey);l.has(Ot)||(l=l.add(Ot),h.push(Ot))})}))}).next(()=>h)}return ue.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:PH(Sn.create(e.filters,"and")).map(r=>aR(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,r,i,a,l,h){const _=(null!=t?t.length:1)*Math.max(r.length,a.length),w=_/(null!=t?t.length:1),D=[];for(let S=0;S<_;++S){const R=t?this.rn(t[S/w]):nT,V=this.on(e,R,r[S%w],i),j=this.un(e,R,a[S%w],l),ae=h.map(ve=>this.on(e,R,ve,!0));D.push(...this.createRange(V,j,ae))}return D}on(e,t,r,i){const a=new Fp(e,Ze.empty(),t,r);return i?a:a.Ue()}un(e,t,r,i){const a=new Fp(e,Ze.empty(),t,r);return i?a.Ue():a}tn(e,t){const r=new kH(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const h of a)r.je(h)&&(!l||h.fields.length>l.fields.length)&&(l=h);return l})}getIndexType(e,t){let r=2;const i=this.Ze(t);return ue.forEach(i,a=>this.tn(e,a).next(l=>{l?0!==r&&l.fields.length<function(h){let _=new Nn(Mr.comparator),w=!1;for(const D of h.filters)for(const S of D.getFlattenedFilters())S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?w=!0:_=_.add(S.field));for(const D of h.orderBy)D.field.isKeyField()||(_=_.add(D.field));return _.size+(w?1:0)}(a)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}cn(e,t){const r=new Gw;for(const i of Ep(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.qe(i.kind);Op.Ie.ue(a,l)}return r.Fe()}rn(e){const t=new Gw;return Op.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const r=new Gw;return Op.Ie.ue(Sp(this.databaseId,t),r.qe(function(i){const a=Ep(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Fe()}nn(e,t,r){if(null===r)return[];let i=[];i.push(new Gw);let a=0;for(const l of Ep(e)){const h=r[a++];for(const _ of i)if(this.hn(t,l.fieldPath)&&xw(h))i=this.ln(i,l,h);else{const w=_.qe(l.kind);Op.Ie.ue(h,w)}}return this.fn(i)}en(e,t,r){return this.nn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Fe();return t}ln(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const h of i){const _=new Gw;_.seed(h.Fe()),Op.Ie.ue(l,_.qe(t.kind)),a.push(_)}return a}hn(e,t){return!!e.filters.find(r=>r instanceof an&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=rT(e),i=Ww(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(a=>{const l=[];return ue.forEach(a,h=>i.get([h.indexId,this.uid]).next(_=>{l.push(function(w,D){const S=D?new bw(D.sequenceNumber,new Oo(kp(D.readTime),new Ze(xl(D.documentKey)),D.largestBatchId)):bw.empty(),R=w.fields.map(([V,j])=>new VD(Mr.fromServerFormat(V),j));return new LD(w.indexId,w.collectionGroup,R,S)}(h,_))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Bt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=rT(e),a=Ww(e);return this.dn(e).next(l=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>ue.forEach(h,_=>a.put(sL(_.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ue.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?ue.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),ue.forEach(h,_=>this._n(e,i,_).next(w=>{const D=this.wn(a,_);return w.isEqual(D)?ue.resolve():this.mn(e,a,_,w,D)}))))})}gn(e,t,r,i){return zw(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.an(r,t.key),documentKey:t.key.path.toArray()})}yn(e,t,r,i){return zw(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.an(r,t.key),t.key.path.toArray()])}_n(e,t,r){const i=zw(e);let a=new Nn(kh);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.an(r,t)])},(l,h)=>{a=a.add(new Fp(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>a)}wn(e,t){let r=new Nn(kh);const i=this.cn(t,e);if(null==i)return r;const a=XM(t);if(null!=a){const l=e.data.field(a.fieldPath);if(xw(l))for(const h of l.arrayValue.values||[])r=r.add(new Fp(t.indexId,e.key,this.rn(h),i))}else r=r.add(new Fp(t.indexId,e.key,nT,i));return r}mn(e,t,r,i,a){Oe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(h,_,w,D,S){const R=h.getIterator(),V=_.getIterator();let j=S_(R),ae=S_(V);for(;j||ae;){let ve=!1,qe=!1;if(j&&ae){const lt=w(j,ae);lt<0?qe=!0:lt>0&&(ve=!0)}else null!=j?qe=!0:ve=!0;ve?(D(ae),ae=S_(V)):qe?(S(j),j=S_(R)):(j=S_(R),ae=S_(V))}}(i,a,kh,h=>{l.push(this.gn(e,t,r,h))},h=>{l.push(this.yn(e,t,r,h))}),ue.waitFor(l)}dn(e){let t=1;return Ww(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,h)=>kh(l,h)).filter((l,h,_)=>!h||0!==kh(l,_[h-1]));const i=[];i.push(e);for(const l of r){const h=kh(l,e),_=kh(l,t);if(0===h)i[0]=e.Ue();else if(h>0&&_<0)i.push(l),i.push(l.Ue());else if(_>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2){if(this.pn(i[l],i[l+1]))return[];a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,nT,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,nT,[]]))}return a}pn(e,t){return kh(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(pL)}getMinOffset(e,t){return ue.mapArray(this.Ze(t),r=>this.tn(e,r).next(i=>i||ut())).next(pL)}}function fL(n){return Di(n,"collectionParents")}function zw(n){return Di(n,"indexEntries")}function rT(n){return Di(n,"indexConfiguration")}function Ww(n){return Di(n,"indexState")}function pL(n){yt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;eR(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Oo(e.readTime,e.documentKey,t)}const gL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class eo{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new eo(e,eo.DEFAULT_COLLECTION_PERCENTILE,eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function mL(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let h=0;const _=r.Z({range:l},(D,S,R)=>(h++,R.delete()));a.push(_.next(()=>{yt(1===h)}));const w=[];for(const D of t.mutations){const S=QF(e,D.key.path,t.batchId);a.push(i.delete(S)),w.push(D.key)}return ue.waitFor(a).next(()=>w)}function iT(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ut();e=n.noDocument}return JSON.stringify(e).length}eo.DEFAULT_COLLECTION_PERCENTILE=10,eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,eo.DEFAULT=new eo(41943040,eo.DEFAULT_COLLECTION_PERCENTILE,eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),eo.DISABLED=new eo(-1,0,0);class sT{constructor(e,t,r,i){this.userId=e,this.yt=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static re(e,t,r,i){yt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new sT(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ph(e).Z({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=F_(e),l=Ph(e);return l.add({}).next(h=>{yt("number"==typeof h);const _=new vR(h,t,r,i),w=function(R,V,j){const ae=j.baseMutations.map(qe=>jw(R.ie,qe)),ve=j.mutations.map(qe=>jw(R.ie,qe));return{userId:V,batchId:j.batchId,localWriteTimeMs:j.localWriteTime.toMillis(),baseMutations:ae,mutations:ve}}(this.yt,this.userId,_),D=[];let S=new Nn((R,V)=>Bt(R.canonicalString(),V.canonicalString()));for(const R of i){const V=QF(this.userId,R.key.path,h);S=S.add(R.key.path.popLast()),D.push(l.put(w)),D.push(a.put(V,cH))}return S.forEach(R=>{D.push(this.indexManager.addToCollectionParentIndex(e,R))}),e.addOnCommittedListener(()=>{this.In[h]=_.keys()}),ue.waitFor(D).next(()=>_)})}lookupMutationBatch(e,t){return Ph(e).get(t).next(r=>r?(yt(r.userId===this.userId),Pp(this.yt,r)):null)}Tn(e,t){return this.In[t]?ue.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Ph(e).Z({index:"userMutationsIndex",range:i},(l,h,_)=>{h.userId===this.userId&&(yt(h.batchId>=r),a=Pp(this.yt,h)),_.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ph(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ph(e).W("userMutationsIndex",t).next(r=>r.map(i=>Pp(this.yt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=JD(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return F_(e).Z({range:i},(l,h,_)=>{const[w,D,S]=l,R=xl(D);if(w===this.userId&&t.path.isEqual(R))return Ph(e).get(S).next(V=>{if(!V)throw ut();yt(V.userId===this.userId),a.push(Pp(this.yt,V))});_.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Nn(Bt);const i=[];return t.forEach(a=>{const l=JD(this.userId,a.path),h=IDBKeyRange.lowerBound(l),_=F_(e).Z({range:h},(w,D,S)=>{const[R,V,j]=w,ae=xl(V);R===this.userId&&a.path.isEqual(ae)?r=r.add(j):S.done()});i.push(_)}),ue.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=JD(this.userId,r),l=IDBKeyRange.lowerBound(a);let h=new Nn(Bt);return F_(e).Z({range:l},(_,w,D)=>{const[S,R,V]=_,j=xl(R);S===this.userId&&r.isPrefixOf(j)?j.length===i&&(h=h.add(V)):D.done()}).next(()=>this.En(e,h))}En(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Ph(e).get(a).next(l=>{if(null===l)throw ut();yt(l.userId===this.userId),r.push(Pp(this.yt,l))}))}),ue.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return mL(e.se,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),ue.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ue.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return F_(e).Z({range:r},(a,l,h)=>{if(a[0]===this.userId){const _=xl(a[1]);i.push(_)}else h.done()}).next(()=>{yt(0===i.length)})})}containsKey(e,t){return _L(e,this.userId,t)}Rn(e){return yL(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function _L(n,e,t){const r=JD(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return F_(n).Z({range:a,X:!0},(h,_,w)=>{const[D,S,R]=h;D===e&&S===i&&(l=!0),w.done()}).next(()=>l)}function Ph(n){return Di(n,"mutations")}function F_(n){return Di(n,"documentMutations")}function yL(n){return Di(n,"mutationQueues")}class Lp{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Lp(0)}static vn(){return new Lp(-1)}}class LH{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Lp(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Ct.fromTimestamp(new hr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>L_(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(yt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return L_(e).Z((l,h)=>{const _=Hw(h);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,a.push(this.removeTargetData(e,_)))}).next(()=>ue.waitFor(a)).next(()=>i)}forEachTarget(e,t){return L_(e).Z((r,i)=>{const a=Hw(i);t(a)})}Vn(e){return vL(e).get("targetGlobalKey").next(t=>(yt(null!==t),t))}Sn(e,t){return vL(e).put("targetGlobalKey",t)}Dn(e,t){return L_(e).put(rL(this.yt,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ap(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return L_(e).Z({range:i,index:"queryTargetsIndex"},(l,h,_)=>{const w=Hw(h);Rw(t,w.target)&&(a=w,_.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Oh(e);return t.forEach(l=>{const h=Ds(l.path);i.push(a.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,l))}),ue.waitFor(i)}removeMatchingKeys(e,t,r){const i=Oh(e);return ue.forEach(t,a=>{const l=Ds(a.path);return ue.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Oh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Oh(e);let a=Gt();return i.Z({range:r,X:!0},(l,h,_)=>{const w=xl(l[1]),D=new Ze(w);a=a.add(D)}).next(()=>a)}containsKey(e,t){const r=Ds(t.path),i=IDBKeyRange.bound([r],[kO(r)],!1,!0);let a=0;return Oh(e).Z({index:"documentTargetsIndex",X:!0,range:i},([l,h],_,w)=>{0!==l&&(a++,w.done())}).next(()=>a>0)}ne(e,t){return L_(e).get(t).next(r=>r?Hw(r):null)}}function L_(n){return Di(n,"targets")}function vL(n){return Di(n,"targetGlobal")}function Oh(n){return Di(n,"targetDocuments")}function wL([n,e],[t,r]){const i=Bt(n,t);return 0===i?Bt(e,r):i}class VH{constructor(e){this.xn=e,this.buffer=new Nn(wL),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();wL(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class UH{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Oe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,_e.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Dh(r)?Oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Ih(r)}yield t.Fn(3e5)}))}}class BH{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ue.resolve(Fo.at);const r=new VH(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(gL)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gL):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let r,i,a,l,h,_,w;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,l=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,h=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(w=Date.now(),QM()<=Ao.in.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-D}ms\n\tDetermined least recently used ${i} in `+(h-l)+`ms\n\tRemoved ${a} targets in `+(_-h)+`ms\n\tRemoved ${S} documents in `+(w-_)+`ms\nTotal Duration: ${w-D}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class jH{constructor(e,t){this.db=e,this.garbageCollector=new BH(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Un(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return oT(e,r)}removeReference(e,t,r){return oT(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return oT(e,t)}Gn(e,t){return function(r,i){let a=!1;return yL(r).tt(l=>_L(r,l,i).next(h=>(h&&(a=!0),ue.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Kn(e,(l,h)=>{if(h<=t){const _=this.Gn(e,l).next(w=>{if(!w)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Ct.min()),Oh(e).delete([0,Ds(l.path)])))});i.push(_)}}).next(()=>ue.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return oT(e,t)}Kn(e,t){const r=Oh(e);let i,a=Fo.at;return r.Z({index:"documentTargetsIndex"},([l,h],{path:_,sequenceNumber:w})=>{0===l?(a!==Fo.at&&t(new Ze(xl(i)),a),a=w,i=_):a=Fo.at}).next(()=>{a!==Fo.at&&t(new Ze(xl(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function oT(n,e){return Oh(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ds(e.path),sequenceNumber:r}));var r}class CL{constructor(){this.changes=new Rh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Xn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ue.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class HH{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Vp(e).put(r)}removeEntry(e,t,r){return Vp(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],XD(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Xn.newInvalidDocument(t);return Vp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(qw(t))},(i,a)=>{r=this.jn(t,a)}).next(()=>r)}Wn(e,t){let r={size:0,document:Xn.newInvalidDocument(t)};return Vp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(qw(t))},(i,a)=>{r={document:this.jn(t,a),size:iT(a)}}).next(()=>r)}getEntries(e,t){let r=Xs();return this.zn(e,t,(i,a)=>{const l=this.jn(i,a);r=r.insert(i,l)}).next(()=>r)}Hn(e,t){let r=Xs(),i=new Nr(Ze.comparator);return this.zn(e,t,(a,l)=>{const h=this.jn(a,l);r=r.insert(a,h),i=i.insert(a,iT(l))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return ue.resolve();let i=new Nn(DL);t.forEach(_=>i=i.add(_));const a=IDBKeyRange.bound(qw(i.first()),qw(i.last())),l=i.getIterator();let h=l.getNext();return Vp(e).Z({index:"documentKeyIndex",range:a},(_,w,D)=>{const S=Ze.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;h&&DL(h,S)<0;)r(h,null),h=l.getNext();h&&h.isEqual(S)&&(r(h,w),h=l.hasNext()?l.getNext():null),h?D.j(qw(h)):D.done()}).next(()=>{for(;h;)r(h,null),h=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),XD(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Vp(e).W(IDBKeyRange.bound(i,a,!0)).next(l=>{let h=Xs();for(const _ of l){const w=this.jn(Ze.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);h=h.insert(w.key,w)}return h})}getAllFromCollectionGroup(e,t,r,i){let a=Xs();const l=IL(t,r),h=IL(t,Oo.max());return Vp(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,h,!0)},(_,w,D)=>{const S=this.jn(Ze.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);a=a.insert(S.key,S),a.size===i&&D.done()}).next(()=>a)}newChangeBuffer(e){return new $H(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return bL(e).get("remoteDocumentGlobalKey").next(t=>(yt(!!t),t))}Qn(e,t){return bL(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function SH(n,e){let t;if(e.document)t=$F(n.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ze.fromSegments(e.noDocument.path),i=kp(e.noDocument.readTime);t=Xn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ut();{const r=Ze.fromSegments(e.unknownDocument.path),i=kp(e.unknownDocument.version);t=Xn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new hr(r[0],r[1]);return Ct.fromTimestamp(i)}(e.readTime)),t}(this.yt,t);if(!r.isNoDocument()||!r.version.isEqual(Ct.min()))return r}return Xn.newInvalidDocument(e)}}function EL(n){return new HH(n)}class $H extends CL{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Rh(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Nn((a,l)=>Bt(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const h=this.Xn.get(a);if(t.push(this.Yn.removeEntry(e,a,h.readTime)),l.isValidDocument()){const _=nL(this.Yn.yt,l);i=i.add(a.path.popLast()),r+=iT(_)-h.size,t.push(this.Yn.addEntry(e,a,_))}else if(r-=h.size,this.trackRemovals){const _=nL(this.Yn.yt,l.convertToNoDocument(Ct.min()));t.push(this.Yn.addEntry(e,a,_))}}),i.forEach(a=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Yn.updateMetadata(e,r)),ue.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((a,l)=>{this.Xn.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function bL(n){return Di(n,"remoteDocumentGlobal")}function Vp(n){return Di(n,"remoteDocumentsV14")}function qw(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function IL(n,e){const t=e.documentKey.path.toArray();return[n,XD(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function DL(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Bt(t[a],r[a]),i)return i;return i=Bt(t.length,r.length),i||(i=Bt(t[t.length-2],r[r.length-2]),i||Bt(t[t.length-1],r[r.length-1]))}class GH{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class TL{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Pw(r.mutation,i,Lo.empty(),hr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Gt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Gt()){const i=Sl();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=Ow();return a.forEach((h,_)=>{l=l.insert(h,_.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Sl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Gt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,h)=>{t.set(l,h)})})}computeViews(e,t,r,i){let a=Xs();const l=Fw(),h=Fw();return t.forEach((_,w)=>{const D=r.get(w.key);i.has(w.key)&&(void 0===D||D.mutation instanceof ed)?a=a.insert(w.key,w):void 0!==D&&(l.set(w.key,D.mutation.getFieldMask()),Pw(D.mutation,w,D.mutation.getFieldMask(),hr.now()))}),this.recalculateAndSaveOverlays(e,a).next(_=>(_.forEach((w,D)=>l.set(w,D)),t.forEach((w,D)=>{var S;return h.set(w,new GH(D,null!==(S=l.get(w))&&void 0!==S?S:null))}),h))}recalculateAndSaveOverlays(e,t){const r=Fw();let i=new Nr((l,h)=>l-h),a=Gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const h of l)h.keys().forEach(_=>{const w=t.get(_);if(null===w)return;let D=r.get(_)||Lo.empty();D=h.applyToLocalView(w,D),r.set(_,D);const S=(i.get(h.batchId)||Gt()).add(_);i=i.insert(h.batchId,S)})}).next(()=>{const l=[],h=i.getReverseIterator();for(;h.hasNext();){const _=h.getNext(),w=_.key,D=_.value,S=NF();D.forEach(R=>{if(!a.has(R)){const V=bF(t.get(R),r.get(R));null!==V&&S.set(R,V),a=a.add(R)}}),l.push(this.documentOverlayCache.saveOverlays(e,w,S))}return ue.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ze.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):lR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):ue.resolve(Sl());let h=-1,_=a;return l.next(w=>ue.forEach(w,(D,S)=>(h<S.largestBatchId&&(h=S.largestBatchId),a.get(D)?ue.resolve():this.remoteDocumentCache.getEntry(e,D).next(R=>{_=_.insert(D,R)}))).next(()=>this.populateOverlays(e,w,a)).next(()=>this.computeViews(e,_,w,Gt())).next(D=>({batchId:h,changes:RF(D)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ze(t)).next(r=>{let i=Ow();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=Ow();return this.indexManager.getCollectionParents(e,i).next(l=>ue.forEach(l,h=>{const _=(w=t,D=h.child(i),new Xc(D,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,D;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(w=>{w.forEach((D,S)=>{a=a.insert(D,S)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(a=>{a.forEach((h,_)=>{const w=_.getKey();null===i.get(w)&&(i=i.insert(w,Xn.newInvalidDocument(w)))});let l=Ow();return i.forEach((h,_)=>{const w=a.get(h);void 0!==w&&Pw(w.mutation,_,Lo.empty(),hr.now()),hR(t,_)&&(l=l.insert(h,_))}),l})}}class zH{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return ue.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Ur(r.createTime)}),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:ER(r.bundledQuery),readTime:Ur(r.readTime)}),ue.resolve();var r}}class WH{constructor(){this.overlays=new Nr(Ze.comparator),this.es=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Sl();return ue.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.oe(e,t,a)}),ue.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.es.delete(r)),ue.resolve()}getOverlaysForCollection(e,t,r){const i=Sl(),a=t.length+1,l=new Ze(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const _=h.getNext().value,w=_.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===a&&_.largestBatchId>r&&i.set(_.getKey(),_)}return ue.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Nr((w,D)=>w-D);const l=this.overlays.getIterator();for(;l.hasNext();){const w=l.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let D=a.get(w.largestBatchId);null===D&&(D=Sl(),a=a.insert(w.largestBatchId,D)),D.set(w.getKey(),w)}}const h=Sl(),_=a.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((w,D)=>h.set(w,D)),!(h.size()>=i)););return ue.resolve(h)}oe(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new CR(t,r));let a=this.es.get(t);void 0===a&&(a=Gt(),this.es.set(t,a)),this.es.set(t,a.add(r.key))}}class xR{constructor(){this.ns=new Nn(Ti.ss),this.rs=new Nn(Ti.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Ti(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Ti(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Ze(new pn([])),r=new Ti(t,e),i=new Ti(t,e+1),a=[];return this.rs.forEachInRange([r,i],l=>{this.cs(l),a.push(l.key)}),a}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ze(new pn([])),r=new Ti(t,e),i=new Ti(t,e+1);let a=Gt();return this.rs.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new Ti(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ti{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ze.comparator(e.key,t.key)||Bt(e._s,t._s)}static os(e,t){return Bt(e._s,t._s)||Ze.comparator(e.key,t.key)}}class qH{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Nn(Ti.ss)}checkEmpty(e){return ue.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.ws;this.ws++;const l=new vR(a,t,r,i);this.mutationQueue.push(l);for(const h of i)this.gs=this.gs.add(new Ti(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ue.resolve(l)}lookupMutationBatch(e,t){return ue.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),a=i<0?0:i;return ue.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ti(t,0),i=new Ti(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],l=>{const h=this.ys(l._s);a.push(h)}),ue.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Nn(Bt);return t.forEach(i=>{const a=new Ti(i,0),l=new Ti(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([a,l],h=>{r=r.add(h._s)})}),ue.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Ze.isDocumentKey(a)||(a=a.child(""));const l=new Ti(new Ze(a),0);let h=new Nn(Bt);return this.gs.forEachWhile(_=>{const w=_.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(h=h.add(_._s)),!0)},l),ue.resolve(this.Is(h))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){yt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return ue.forEach(t.mutations,i=>{const a=new Ti(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Ti(t,0),i=this.gs.firstAfterOrEqual(r);return ue.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ue.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ZH{constructor(e){this.Es=e,this.docs=new Nr(Ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ue.resolve(r?r.document.mutableCopy():Xn.newInvalidDocument(t))}getEntries(e,t){let r=Xs();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Xn.newInvalidDocument(i))}),ue.resolve(r)}getAllFromCollection(e,t,r){let i=Xs();const a=new Ze(t.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:h,value:{document:_}}=l.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||eR(OO(_),r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return ue.resolve(i)}getAllFromCollectionGroup(e,t,r,i){ut()}As(e,t){return ue.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new KH(this)}getSize(e){return ue.resolve(this.size)}}class KH extends CL{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),ue.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class YH{constructor(e){this.persistence=e,this.Rs=new Rh(t=>Ap(t),Rw),this.lastRemoteSnapshotVersion=Ct.min(),this.highestTargetId=0,this.bs=0,this.Ps=new xR,this.targetCount=0,this.vs=Lp.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),ue.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Lp(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.Dn(t),ue.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Rs.forEach((l,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Rs.delete(l),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),ue.waitFor(a).next(()=>i)}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return ue.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),ue.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),ue.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return ue.resolve(r)}containsKey(e,t){return ue.resolve(this.Ps.containsKey(t))}}class SL{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Fo(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new YH(this),this.indexManager=new OH,this.remoteDocumentCache=new ZH(r=>this.referenceDelegate.xs(r)),this.yt=new tL(t),this.Ns=new zH(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new WH,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new qH(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Oe("MemoryPersistence","Starting transaction:",e);const i=new QH(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(a=>this.referenceDelegate.Os(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ms(e,t){return ue.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class QH extends LO{constructor(e){super(),this.currentSequenceNumber=e}}class aT{constructor(e){this.persistence=e,this.Fs=new xR,this.$s=null}static Bs(e){return new aT(e)}get Ls(){if(this.$s)return this.$s;throw ut()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),ue.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ls.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.Ls,r=>{const i=Ze.fromPath(r);return this.qs(e,i).next(a=>{a||t.removeEntry(i,Ct.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return ue.or([()=>ue.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class JH{constructor(e){this.yt=e}$(e,t,r,i){const a=new UD("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",YF,{unique:!0}),h.createObjectStore("documentMutations"),AL(e),function(h){h.createObjectStore("remoteDocuments")}(e));let l=ue.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),AL(e)),l=l.next(()=>function(h){const _=h.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ct.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",w)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(h,_){return _.store("mutations").W().next(w=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",YF,{unique:!0});const D=_.store("mutations"),S=w.map(R=>D.put(R));return ue.waitFor(S)})}(e,a))),l=l.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Us(a))),r<6&&i>=6&&(l=l.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(a)))),r<7&&i>=7&&(l=l.next(()=>this.Gs(a))),r<8&&i>=8&&(l=l.next(()=>this.Qs(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.js(a))),r<11&&i>=11&&(l=l.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(h){const _=h.createObjectStore("documentOverlays",{keyPath:EH});_.createIndex("collectionPathOverlayIndex",bH,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",IH,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(h){const _=h.createObjectStore("remoteDocumentsV14",{keyPath:dH});_.createIndex("documentKeyIndex",hH),_.createIndex("collectionGroupIndex",fH)}(e)).next(()=>this.Ws(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.zs(e,a))),r<15&&i>=15&&(l=l.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:yH}).createIndex("sequenceNumberIndex",vH,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:wH}).createIndex("documentKeyIndex",CH,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=iT(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Us(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>ue.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(h=>ue.forEach(h,_=>{yt(_.userId===a.userId);const w=Pp(this.yt,_);return mL(e,a.userId,w).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Z((l,h)=>{const _=new pn(l),w=[0,Ds(_)];a.push(t.get(w).next(D=>D?ue.resolve():t.put({targetId:0,path:Ds(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ue.waitFor(a))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:_H});const r=t.store("collectionParents"),i=new AR,a=l=>{if(i.add(l)){const h=l.lastSegment(),_=l.popLast();return r.put({collectionId:h,parent:Ds(_)})}};return t.store("remoteDocuments").Z({X:!0},(l,h)=>{const _=new pn(l);return a(_.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,h,_],w)=>{const D=xl(h);return a(D.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const a=Hw(i),l=rL(this.yt,a);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((a,l)=>{const h=t.store("remoteDocumentsV14"),_=(w=l,w.document?new Ze(pn.fromString(w.document.name).popFirst(5)):w.noDocument?Ze.fromSegments(w.noDocument.path):w.unknownDocument?Ze.fromSegments(w.unknownDocument.path):ut()).path.toArray();var w;const D={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(h.put(D))}).next(()=>ue.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=EL(this.yt),a=new SL(aT.Bs,this.yt.ie);return r.W().next(l=>{const h=new Map;return l.forEach(_=>{var w;let D=null!==(w=h.get(_.userId))&&void 0!==w?w:Gt();Pp(this.yt,_).keys().forEach(S=>D=D.add(S)),h.set(_.userId,D)}),ue.forEach(h,(_,w)=>{const D=new Ii(w),S=eT.re(this.yt,D),R=a.getIndexManager(D),V=sT.re(D,this.yt,R,a.referenceDelegate);return new TL(i,V,S,R).recalculateAndSaveOverlaysForDocumentKeys(new yR(t,Fo.at),_).next()})})}}function AL(n){n.createObjectStore("targetDocuments",{keyPath:gH}).createIndex("documentTargetsIndex",mH,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",pH,{unique:!0}),n.createObjectStore("targetGlobal")}const MR="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class RR{constructor(e,t,r,i,a,l,h,_,w,D,S=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=a,this.window=l,this.document=h,this.Js=w,this.Ys=D,this.Xs=S,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=R=>Promise.resolve(),!RR.C())throw new Ne(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new jH(this,i),this.ii=t+"main",this.yt=new tL(_),this.ri=new _u(this.ii,this.Xs,new JH(this.yt)),this.Cs=new LH(this.referenceDelegate,this.yt),this.remoteDocumentCache=EL(this.yt),this.Ns=new AH,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===D&&Vr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(ce.FAILED_PRECONDITION,MR);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Fo(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,_e.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,_e.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,_e.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>uT(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Dh(e))return Oe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Zw(e).get("owner").next(t=>ue.resolve(this.mi(t)))}gi(e){return uT(e).delete(this.clientId)}yi(){var e=this;return(0,_e.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Di(r,"clientMetadata");return i.W().next(a=>{const l=e.Ii(a,18e5),h=a.filter(_=>-1===l.indexOf(_));return ue.forEach(h,_=>i.delete(_.clientId)).next(()=>h)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?ue.resolve(!0):Zw(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Ne(ce.FAILED_PRECONDITION,MR);return!1}}return!(!this.networkEnabled||!this.inForeground)||uT(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Oe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,_e.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new yR(t,Fo.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>uT(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return sT.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new FH(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return eT.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Oe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(l=this.Xs)?TH:14===l?eL:13===l?XF:12===l?DH:11===l?JF:void ut();var l;let h;return this.ri.runTransaction(e,i,a,_=>(h=new yR(_,this.Ss?this.Ss.next():Fo.at),"readwrite-primary"===t?this.fi(h).next(w=>!!w||this.di(h)).next(w=>{if(!w)throw Vr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ne(ce.FAILED_PRECONDITION,FO);return r(h)}).next(w=>this.wi(h).next(()=>w)):this.Vi(h).next(()=>r(h)))).then(_=>(h.raiseOnCommittedEvent(),_))}Vi(e){return Zw(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ne(ce.FAILED_PRECONDITION,MR)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Zw(e).put("owner",t)}static C(){return _u.C()}_i(e){const t=Zw(e);return t.get("owner").next(r=>this.mi(r)?(Oe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ue.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Vr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,P.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Oe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Vr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Vr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Zw(n){return Di(n,"owner")}function uT(n){return Di(n,"clientMetadata")}function NR(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class kR{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=Gt(),i=Gt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new kR(e,t.fromCache,r,i)}}class xL{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(a=>a||this.Oi(e,t,i,r)).next(a=>a||this.Mi(e,t))}ki(e,t){if(dF(t))return ue.resolve(null);let r=Is(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=WD(t,null,"F"),r=Is(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=Gt(...a);return this.Ni.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,r).next(_=>{const w=this.Fi(t,h);return this.$i(t,w,l,_.readTime)?this.ki(e,WD(t,null,"F")):this.Bi(e,w,t,_)}))})))}Oi(e,t,r,i){return dF(t)||i.isEqual(Ct.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(a=>{const l=this.Fi(t,a);return this.$i(t,l,r,i)?this.Mi(e,t):(QM()<=Ao.in.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),dR(t)),this.Bi(e,l,t,PO(i,-1)))})}Fi(e,t){let r=new Nn(pF(e));return t.forEach((i,a)=>{hR(e,a)&&(r=r.add(a))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Mi(e,t){return QM()<=Ao.in.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",dR(t)),this.Ni.getDocumentsMatchingQuery(e,t,Oo.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class XH{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.yt=i,this.qi=new Nr(Bt),this.Ui=new Rh(a=>Ap(a),Rw),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new TL(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function ML(n,e,t,r){return new XH(n,e,t,r)}function RL(n,e){return PR.apply(this,arguments)}function PR(){return PR=(0,_e.Z)(function*(n,e){const t=Ye(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],h=[];let _=Gt();for(const w of i){l.push(w.batchId);for(const D of w.mutations)_=_.add(D.key)}for(const w of a){h.push(w.batchId);for(const D of w.mutations)_=_.add(D.key)}return t.localDocuments.getDocuments(r,_).next(w=>({ji:w,removedBatchIds:l,addedBatchIds:h}))})})}),PR.apply(this,arguments)}function e$(n,e){const t=Ye(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,h,_,w){const D=_.batch,S=D.keys();let R=ue.resolve();return S.forEach(V=>{R=R.next(()=>w.getEntry(h,V)).next(j=>{const ae=_.docVersions.get(V);yt(null!==ae),j.version.compareTo(ae)<0&&(D.applyToRemoteDocument(j,_),j.isValidDocument()&&(j.setReadTime(_.commitVersion),w.addEntry(j)))})}),R.next(()=>l.mutationQueue.removeMutationBatch(h,D))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let h=Gt();for(let _=0;_<l.mutationResults.length;++_)l.mutationResults[_].transformResults.length>0&&(h=h.add(l.batch.mutations[_].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function NL(n){const e=Ye(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function t$(n,e){const t=Ye(n),r=e.snapshotVersion;let i=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.qi;const h=[];e.targetChanges.forEach((D,S)=>{const R=i.get(S);if(!R)return;h.push(t.Cs.removeMatchingKeys(a,D.removedDocuments,S).next(()=>t.Cs.addMatchingKeys(a,D.addedDocuments,S)));let V=R.withSequenceNumber(a.currentSequenceNumber);var j,ae,ve;e.targetMismatches.has(S)?V=V.withResumeToken(ci.EMPTY_BYTE_STRING,Ct.min()).withLastLimboFreeSnapshotVersion(Ct.min()):D.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(D.resumeToken,r)),i=i.insert(S,V),ae=V,ve=D,(0===(j=R).resumeToken.approximateByteSize()||ae.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=3e8||ve.addedDocuments.size+ve.modifiedDocuments.size+ve.removedDocuments.size>0)&&h.push(t.Cs.updateTargetData(a,V))});let _=Xs(),w=Gt();if(e.documentUpdates.forEach(D=>{e.resolvedLimboDocuments.has(D)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,D))}),h.push(kL(a,l,e.documentUpdates).next(D=>{_=D.Wi,w=D.zi})),!r.isEqual(Ct.min())){const D=t.Cs.getLastRemoteSnapshotVersion(a).next(S=>t.Cs.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(D)}return ue.waitFor(h).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,_,w)).next(()=>_)}).then(a=>(t.qi=i,a))}function kL(n,e,t){let r=Gt(),i=Gt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=Xs();return t.forEach((h,_)=>{const w=a.get(h);_.isFoundDocument()!==w.isFoundDocument()&&(i=i.add(h)),_.isNoDocument()&&_.version.isEqual(Ct.min())?(e.removeEntry(h,_.readTime),l=l.insert(h,_)):!w.isValidDocument()||_.version.compareTo(w.version)>0||0===_.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(_),l=l.insert(h,_)):Oe("LocalStore","Ignoring outdated watch update for ",h,". Current version:",w.version," Watch version:",_.version)}),{Wi:l,zi:i}})}function n$(n,e){const t=Ye(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function V_(n,e){const t=Ye(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(a=>a?(i=a,ue.resolve(i)):t.Cs.allocateTargetId(r).next(l=>(i=new Nh(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.qi.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.qi=t.qi.insert(r.targetId,r),t.Ui.set(e,r.targetId)),r})}function U_(n,e,t){return OR.apply(this,arguments)}function OR(){return OR=(0,_e.Z)(function*(n,e,t){const r=Ye(n),i=r.qi.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Dh(l))throw l;Oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.qi=r.qi.remove(e),r.Ui.delete(i.target)}),OR.apply(this,arguments)}function lT(n,e,t){const r=Ye(n);let i=Ct.min(),a=Gt();return r.persistence.runTransaction("Execute query","readonly",l=>function(h,_,w){const D=Ye(h),S=D.Ui.get(w);return void 0!==S?ue.resolve(D.qi.get(S)):D.Cs.getTargetData(_,w)}(r,l,Is(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,h.targetId).next(_=>{a=_})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?i:Ct.min(),t?a:Gt())).next(h=>(FL(r,fF(e),h),{documents:h,Hi:a})))}function PL(n,e){const t=Ye(n),r=Ye(t.Cs),i=t.qi.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.ne(a,e).next(l=>l?l.target:null))}function OL(n,e){const t=Ye(n),r=t.Ki.get(e)||Ct.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,PO(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(FL(t,e,i),i))}function FL(n,e,t){let r=n.Ki.get(e)||Ct.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ki.set(e,r)}function FR(){return FR=(0,_e.Z)(function*(n,e,t,r){const i=Ye(n);let a=Gt(),l=Xs();for(const w of t){const D=e.Ji(w.metadata.name);w.document&&(a=a.add(D));const S=e.Yi(w);S.setReadTime(e.Xi(w.metadata.readTime)),l=l.insert(D,S)}const h=i.Gi.newChangeBuffer({trackRemovals:!0}),_=yield V_(i,(w=r,Is(A_(pn.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>kL(w,h,l).next(D=>(h.apply(w),D)).next(D=>i.Cs.removeMatchingKeysForTargetId(w,_.targetId).next(()=>i.Cs.addMatchingKeys(w,a,_.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(w,D.Wi,D.zi)).next(()=>D.Wi)))}),FR.apply(this,arguments)}function i$(n,e){return LR.apply(this,arguments)}function LR(){return LR=(0,_e.Z)(function*(n,e,t=Gt()){const r=yield V_(n,Is(ER(e.bundledQuery))),i=Ye(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=Ur(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ns.saveNamedQuery(a,e);const h=r.withResumeToken(ci.EMPTY_BYTE_STRING,l);return i.qi=i.qi.insert(h.targetId,h),i.Cs.updateTargetData(a,h).next(()=>i.Cs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Cs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(a,e))})}),LR.apply(this,arguments)}function LL(n,e){return`firestore_clients_${n}_${e}`}function VL(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function VR(n,e){return`firestore_targets_${n}_${e}`}class cT{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Ne(i.error.code,i.error.message))),l?new cT(e,t,i.state,a):(Vr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Kw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Ne(r.error.code,r.error.message))),a?new Kw(e,r.state,i):(Vr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class dT{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=YD();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=jO(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new dT(e,a):(Vr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class UR{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new UR(t.clientId,t.onlineState):(Vr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class BR{constructor(){this.activeTargetIds=YD()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jR{constructor(e,t,r,i,a){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Nr(Bt),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=LL(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new BR),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_e.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const a=e.getItem(LL(e.persistenceKey,i));if(a){const l=dT.Zi(i,a);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(VR(this.persistenceKey,e));if(r){const i=Kw.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(VR(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Oe("SharedClientState","READ",e,t),t}setItem(e,t){Oe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Oe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Oe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void Vr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,_e.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(a){let l=Fo.at;if(null!=a)try{const h=JSON.parse(a);yt("number"==typeof h),l=h}catch(h){Vr("SharedClientState","Failed to read sequence number from WebStorage",h)}return l}(r.newValue);i!==Fo.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Mr(a)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new cT(this.currentUser,e,t,r),a=VL(this.persistenceKey,this.currentUser,e);this.setItem(a,i.tr())}Er(e){const t=VL(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=VR(this.persistenceKey,e),a=new Kw(e,t,r);this.setItem(i,a.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return dT.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return cT.Zi(new Ii(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return Kw.Zi(i,t)}yr(e){return UR.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,_e.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Oe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),l=[],h=[];return a.forEach(_=>{i.has(_)||l.push(_)}),i.forEach(_=>{a.has(_)||h.push(_)}),this.syncEngine.Br(l,h).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=YD();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class UL{constructor(){this.Lr=new BR,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new BR,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class s${Ur(e){}shutdown(){}}class BL{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const o$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class a${constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class u$ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,a){const l=this.ho(e,t);Oe("RestConnection","Sending: ",l,r);const h={};return this.lo(h,i,a),this.fo(e,l,h,r).then(_=>(Oe("RestConnection","Received: ",_),_),_=>{throw Cp("RestConnection",`${e} failed with error: `,_,"url: ",l,"request:",r),_})}_o(e,t,r,i,a,l){return this.ao(e,t,r,i,a)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+E_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}ho(e,t){return`${this.oo}/v1/${t}:${o$[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((a,l)=>{const h=new aj;h.setWithCredentials(!0),h.listenOnce(ij.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case YM.NO_ERROR:const w=h.getResponseJson();Oe("Connection","XHR received:",JSON.stringify(w)),a(w);break;case YM.TIMEOUT:Oe("Connection",'RPC "'+e+'" timed out'),l(new Ne(ce.DEADLINE_EXCEEDED,"Request time out"));break;case YM.HTTP_ERROR:const D=h.getStatus();if(Oe("Connection",'RPC "'+e+'" failed with status:',D,"response text:",h.getResponseText()),D>0){let S=h.getResponseJson();Array.isArray(S)&&(S=S[0]);const R=S?.error;if(R&&R.status&&R.message){const V=function(j){const ae=j.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(ae)>=0?ae:ce.UNKNOWN}(R.status);l(new Ne(V,R.message))}else l(new Ne(ce.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new Ne(ce.UNAVAILABLE,"Connection failed."));break;default:ut()}}finally{Oe("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);h.send(t,"POST",_,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=nj(),l=rj(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new oj({})),this.lo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const _=i.join("");Oe("Connection","Creating WebChannel: "+_,h);const w=a.createWebChannel(_,h);let D=!1,S=!1;const R=new a$({Hr:j=>{S?Oe("Connection","Not sending because WebChannel is closed:",j):(D||(Oe("Connection","Opening WebChannel transport."),w.open(),D=!0),Oe("Connection","WebChannel sending:",j),w.send(j))},Jr:()=>w.close()}),V=(j,ae,ve)=>{j.listen(ae,qe=>{try{ve(qe)}catch(lt){setTimeout(()=>{throw lt},0)}})};return V(w,FD.EventType.OPEN,()=>{S||Oe("Connection","WebChannel transport opened.")}),V(w,FD.EventType.CLOSE,()=>{S||(S=!0,Oe("Connection","WebChannel transport closed"),R.io())}),V(w,FD.EventType.ERROR,j=>{S||(S=!0,Cp("Connection","WebChannel transport errored:",j),R.io(new Ne(ce.UNAVAILABLE,"The operation could not be completed")))}),V(w,FD.EventType.MESSAGE,j=>{var ae;if(!S){const ve=j.data[0];yt(!!ve);const qe=ve,lt=qe.error||(null===(ae=qe[0])||void 0===ae?void 0:ae.error);if(lt){Oe("Connection","WebChannel received error:",lt);const rt=lt.status;let ct=function(Ot){const Ir=Yr[Ot];if(void 0!==Ir)return xF(Ir)}(rt),Tt=lt.message;void 0===ct&&(ct=ce.INTERNAL,Tt="Unknown error status: "+rt+" with message "+lt.message),S=!0,R.io(new Ne(ct,Tt)),w.close()}else Oe("Connection","WebChannel received:",ve),R.ro(ve)}}),V(l,sj.STAT_EVENT,j=>{j.stat===AO.PROXY?Oe("Connection","Detected buffering proxy"):j.stat===AO.NOPROXY&&Oe("Connection","Detected no buffering proxy")}),setTimeout(()=>{R.so()},0),R}}function jL(){return typeof window<"u"?window:null}function hT(){return typeof document<"u"?document:null}function Yw(n){return new Xj(n,!0)}class HR{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&Oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class HL{constructor(e,t,r,i,a,l,h,_){this.Hs=e,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=_,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new HR(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,_e.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,_e.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,_e.Z)(function*(){r.Lo(),r.qo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(Vr(t.toString()),Vr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Uo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Ne(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,_e.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class l$ extends HL{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.yt=a}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function nH(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:ut(),i=e.targetChange.targetIds||[],a=function(_,w){return _.wt?(yt(void 0===w||"string"==typeof w),ci.fromBase64String(w||"")):(yt(void 0===w||w instanceof Uint8Array),ci.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(_){const w=void 0===_.code?ce.UNKNOWN:xF(_.code);return new Ne(w,_.message||"")}(l);t=new PF(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=Al(n,r.document.name),a=Ur(r.document.updateTime),l=r.document.createTime?Ur(r.document.createTime):Ct.min(),h=new zi({mapValue:{fields:r.document.fields}}),_=Xn.newFoundDocument(i,a,l,h);t=new QD(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,i=Al(n,r.document),a=r.readTime?Ur(r.readTime):Ct.min(),l=Xn.newNoDocument(i,a);t=new QD([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=Al(n,r.document);t=new QD([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ut();{const r=e.filter,a=new Gj(r.count||0);t=new kF(r.targetId,a)}}var _;return t}(this.yt,e),r=function(i){if(!("targetChange"in i))return Ct.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Ct.min():a.readTime?Ur(a.readTime):Ct.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Bw(this.yt),t.addTarget=function(i,a){let l;const h=a.target;return l=$D(h)?{documents:GF(i,h)}:{query:_R(i,h)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=VF(i,a.resumeToken):a.snapshotVersion.compareTo(Ct.min())>0&&(l.readTime=k_(i,a.snapshotVersion.toTimestamp())),l}(this.yt,e);const r=function iH(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ut()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Bw(this.yt),t.removeTarget=e,this.Bo(t)}}class c$ extends HL{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.yt=a,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(yt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function rH(n,e){return n&&n.length>0?(yt(void 0!==e),n.map(t=>function(r,i){let a=Ur(r.updateTime?r.updateTime:i);return a.isEqual(Ct.min())&&(a=Ur(i)),new jj(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ur(e.commitTime);return this.listener.Zo(r,t)}return yt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Bw(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>jw(this.yt,r))};this.Bo(t)}}class d$ extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.yt=i,this.nu=!1}su(){if(this.nu)throw new Ne(ce.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.ao(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ne(ce.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection._o(e,t,r,a,l,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ne(ce.UNKNOWN,a.toString())})}terminate(){this.nu=!0}}class f${constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Vr(t),this.ou=!1):Oe("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class p${constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.Ur(h=>{r.enqueueAndForget((0,_e.Z)(function*(){var _;td(l)&&(Oe("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,_e.Z)(function*(w){const D=Ye(w);D._u.add(4),yield B_(D),D.gu.set("Unknown"),D._u.delete(4),yield Qw(D)}),function(w){return _.apply(this,arguments)})(l))}))}),this.gu=new f$(r,i)}}function Qw(n){return GR.apply(this,arguments)}function GR(){return GR=(0,_e.Z)(function*(n){if(td(n))for(const e of n.wu)yield e(!0)}),GR.apply(this,arguments)}function B_(n){return zR.apply(this,arguments)}function zR(){return zR=(0,_e.Z)(function*(n){for(const e of n.wu)yield e(!1)}),zR.apply(this,arguments)}function fT(n,e){const t=Ye(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),ZR(t)?qR(t):H_(t).ko()&&WR(t,e))}function Jw(n,e){const t=Ye(n),r=H_(t);t.du.delete(e),r.ko()&&$L(t,e),0===t.du.size&&(r.ko()?r.Fo():td(t)&&t.gu.set("Unknown"))}function WR(n,e){n.yu.Ot(e.targetId),H_(n).zo(e)}function $L(n,e){n.yu.Ot(e),H_(n).Ho(e)}function qR(n){n.yu=new Kj({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.du.get(e)||null}),H_(n).start(),n.gu.uu()}function ZR(n){return td(n)&&!H_(n).No()&&n.du.size>0}function td(n){return 0===Ye(n)._u.size}function GL(n){n.yu=void 0}function g$(n){return KR.apply(this,arguments)}function KR(){return KR=(0,_e.Z)(function*(n){n.du.forEach((e,t)=>{WR(n,e)})}),KR.apply(this,arguments)}function m$(n,e){return YR.apply(this,arguments)}function YR(){return YR=(0,_e.Z)(function*(n,e){GL(n),ZR(n)?(n.gu.hu(e),qR(n)):n.gu.set("Unknown")}),YR.apply(this,arguments)}function _$(n,e,t){return QR.apply(this,arguments)}function QR(){return QR=(0,_e.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof PF&&2===e.state&&e.cause)try{yield(r=(0,_e.Z)(function*(i,a){const l=a.cause;for(const h of a.targetIds)i.du.has(h)&&(yield i.remoteSyncer.rejectListen(h,l),i.du.delete(h),i.yu.removeTarget(h))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield pT(n,r)}else if(e instanceof QD?n.yu.Kt(e):e instanceof kF?n.yu.Jt(e):n.yu.jt(e),!t.isEqual(Ct.min()))try{const r=yield NL(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.yu.Zt(a);return l.targetChanges.forEach((h,_)=>{if(h.resumeToken.approximateByteSize()>0){const w=i.du.get(_);w&&i.du.set(_,w.withResumeToken(h.resumeToken,a))}}),l.targetMismatches.forEach(h=>{const _=i.du.get(h);if(!_)return;i.du.set(h,_.withResumeToken(ci.EMPTY_BYTE_STRING,_.snapshotVersion)),$L(i,h);const w=new Nh(_.target,h,1,_.sequenceNumber);WR(i,w)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Oe("RemoteStore","Failed to raise snapshot:",r),yield pT(n,r)}var r}),QR.apply(this,arguments)}function pT(n,e,t){return JR.apply(this,arguments)}function JR(){return JR=(0,_e.Z)(function*(n,e,t){if(!Dh(e))throw e;n._u.add(1),yield B_(n),n.gu.set("Offline"),t||(t=()=>NL(n.localStore)),n.asyncQueue.enqueueRetryable((0,_e.Z)(function*(){Oe("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield Qw(n)}))}),JR.apply(this,arguments)}function zL(n,e){return e().catch(t=>pT(n,t,e))}function j_(n){return XR.apply(this,arguments)}function XR(){return XR=(0,_e.Z)(function*(n){const e=Ye(n),t=Fh(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;y$(e);)try{const i=yield n$(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,v$(e,i)}catch(i){yield pT(e,i)}WL(e)&&qL(e)}),XR.apply(this,arguments)}function y$(n){return td(n)&&n.fu.length<10}function v$(n,e){n.fu.push(e);const t=Fh(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function WL(n){return td(n)&&!Fh(n).No()&&n.fu.length>0}function qL(n){Fh(n).start()}function w$(n){return eN.apply(this,arguments)}function eN(){return eN=(0,_e.Z)(function*(n){Fh(n).eu()}),eN.apply(this,arguments)}function C$(n){return tN.apply(this,arguments)}function tN(){return tN=(0,_e.Z)(function*(n){const e=Fh(n);for(const t of n.fu)e.Xo(t.mutations)}),tN.apply(this,arguments)}function E$(n,e,t){return nN.apply(this,arguments)}function nN(){return nN=(0,_e.Z)(function*(n,e,t){const r=n.fu.shift(),i=wR.from(r,e,t);yield zL(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield j_(n)}),nN.apply(this,arguments)}function b$(n,e){return rN.apply(this,arguments)}function rN(){return rN=(0,_e.Z)(function*(n,e){var t;e&&Fh(n).Yo&&(yield(t=(0,_e.Z)(function*(r,i){if(AF(a=i.code)&&a!==ce.ABORTED){const l=r.fu.shift();Fh(r).Mo(),yield zL(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield j_(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),WL(n)&&qL(n)}),rN.apply(this,arguments)}function ZL(n,e){return iN.apply(this,arguments)}function iN(){return iN=(0,_e.Z)(function*(n,e){const t=Ye(n);t.asyncQueue.verifyOperationInProgress(),Oe("RemoteStore","RemoteStore received new credentials");const r=td(t);t._u.add(3),yield B_(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield Qw(t)}),iN.apply(this,arguments)}function sN(n,e){return oN.apply(this,arguments)}function oN(){return oN=(0,_e.Z)(function*(n,e){const t=Ye(n);e?(t._u.delete(2),yield Qw(t)):e||(t._u.add(2),yield B_(t),t.gu.set("Unknown"))}),oN.apply(this,arguments)}function H_(n){return n.pu||(n.pu=function(e,t,r){const i=Ye(e);return i.su(),new l$(t,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(n.datastore,n.asyncQueue,{Yr:g$.bind(null,n),Zr:m$.bind(null,n),Wo:_$.bind(null,n)}),n.wu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.pu.Mo(),ZR(n)?qR(n):n.gu.set("Unknown")):(yield n.pu.stop(),GL(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Fh(n){return n.Iu||(n.Iu=function(e,t,r){const i=Ye(e);return i.su(),new c$(t,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(n.datastore,n.asyncQueue,{Yr:w$.bind(null,n),Zr:b$.bind(null,n),tu:C$.bind(null,n),Zo:E$.bind(null,n)}),n.wu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.Iu.Mo(),yield j_(n)):(yield n.Iu.stop(),n.fu.length>0&&(Oe("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class aN{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new li,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,h=new aN(e,t,l,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $_(n,e){if(Vr("AsyncQueue",`${e}: ${n}`),Dh(n))return new Ne(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class G_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ze.comparator(t.key,r.key):(t,r)=>Ze.comparator(t.key,r.key),this.keyedMap=Ow(),this.sortedSet=new Nr(this.comparator)}static emptySet(e){return new G_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof G_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new G_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class KL{constructor(){this.Tu=new Nr(Ze.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):ut():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class z_{constructor(e,t,r,i,a,l,h,_,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=_,this.hasCachedResults=w}static fromInitialDocuments(e,t,r,i,a){const l=[];return t.forEach(h=>{l.push({type:0,doc:h})}),new z_(e,t,G_.emptySet(t),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class I${constructor(){this.Au=void 0,this.listeners=[]}}class D${constructor(){this.queries=new Rh(e=>hF(e),Nw),this.onlineState="Unknown",this.Ru=new Set}}function uN(n,e){return lN.apply(this,arguments)}function lN(){return lN=(0,_e.Z)(function*(n,e){const t=Ye(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new I$),i)try{a.Au=yield t.onListen(r)}catch(l){const h=$_(l,`Initialization of query '${dR(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.bu(t.onlineState),a.Au&&e.Pu(a.Au)&&hN(t)}),lN.apply(this,arguments)}function cN(n,e){return dN.apply(this,arguments)}function dN(){return dN=(0,_e.Z)(function*(n,e){const t=Ye(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),dN.apply(this,arguments)}function T$(n,e){const t=Ye(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const h of l.listeners)h.Pu(i)&&(r=!0);l.Au=i}}r&&hN(t)}function S$(n,e,t){const r=Ye(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function hN(n){n.Ru.forEach(e=>{e.next()})}class fN{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new z_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=z_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class A${constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class YL{constructor(e){this.yt=e}Ji(e){return Al(this.yt,e)}Yi(e){return e.metadata.exists?$F(this.yt,e.document,!1):Xn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Ur(e)}}class x${constructor(e,t,r){this.Mu=e,this.localStore=t,this.yt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=QL(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=pn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new YL(this.yt);for(const i of e)if(i.metadata.queries){const a=r.Ji(i.metadata.name);for(const l of i.metadata.queries){const h=(t.get(l)||Gt()).add(a);t.set(l,h)}}return t}complete(){var e=this;return(0,_e.Z)(function*(){const t=yield function r$(n,e,t,r){return FR.apply(this,arguments)}(e.localStore,new YL(e.yt),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield i$(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function QL(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class JL{constructor(e){this.key=e}}class XL{constructor(e){this.key=e}}class eV{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Gt(),this.mutatedKeys=Gt(),this.Gu=pF(e),this.Qu=new G_(this.Gu)}get ju(){return this.qu}Wu(e,t){const r=t?t.zu:new KL,i=t?t.Qu:this.Qu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,h=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,w="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((D,S)=>{const R=i.get(D),V=hR(this.query,S)?S:null,j=!!R&&this.mutatedKeys.has(R.key),ae=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let ve=!1;R&&V?R.data.isEqual(V.data)?j!==ae&&(r.track({type:3,doc:V}),ve=!0):this.Hu(R,V)||(r.track({type:2,doc:V}),ve=!0,(_&&this.Gu(V,_)>0||w&&this.Gu(V,w)<0)&&(h=!0)):!R&&V?(r.track({type:0,doc:V}),ve=!0):R&&!V&&(r.track({type:1,doc:R}),ve=!0,(_||w)&&(h=!0)),ve&&(V?(l=l.add(V),a=ae?a.add(D):a.delete(D)):(l=l.delete(D),a=a.delete(D)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const D="F"===this.query.limitType?l.last():l.first();l=l.delete(D.key),a=a.delete(D.key),r.track({type:1,doc:D})}return{Qu:l,zu:r,$i:h,mutatedKeys:a}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const a=e.zu.Eu();a.sort((w,D)=>function(S,R){const V=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ut()}};return V(S)-V(R)}(w.type,D.type)||this.Gu(w.doc,D.doc)),this.Ju(r);const l=t?this.Yu():[],h=0===this.Ku.size&&this.current?1:0,_=h!==this.Uu;return this.Uu=h,0!==a.length||_?{snapshot:new z_(this.query,e.Qu,i,a,e.mutatedKeys,0===h,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new KL,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Gt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new XL(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new JL(r))}),t}tc(e){this.qu=e.Hi,this.Ku=Gt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return z_.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class M${constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class R${constructor(e){this.key=e,this.nc=!1}}class N${constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new Rh(h=>hF(h),Nw),this.rc=new Map,this.oc=new Set,this.uc=new Nr(Ze.comparator),this.cc=new Map,this.ac=new xR,this.hc={},this.lc=new Map,this.fc=Lp.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function k$(n,e){return pN.apply(this,arguments)}function pN(){return pN=(0,_e.Z)(function*(n,e){const t=LN(n);let r,i;const a=t.ic.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.ec();else{const l=yield V_(t.localStore,Is(e));t.isPrimaryClient&&fT(t.remoteStore,l);const h=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield gN(t,e,r,"current"===h,l.resumeToken)}return i}),pN.apply(this,arguments)}function gN(n,e,t,r,i){return mN.apply(this,arguments)}function mN(){return mN=(0,_e.Z)(function*(n,e,t,r,i){n._c=(S,R,V)=>{return(j=(0,_e.Z)(function*(ae,ve,qe,lt){let rt=ve.view.Wu(qe);rt.$i&&(rt=yield lT(ae.localStore,ve.query,!1).then(({documents:Ot})=>ve.view.Wu(Ot,rt)));const ct=lt&&lt.targetChanges.get(ve.targetId),Tt=ve.view.applyChanges(rt,ae.isPrimaryClient,ct);return TN(ae,ve.targetId,Tt.Xu),Tt.snapshot}),function(ae,ve,qe,lt){return j.apply(this,arguments)})(n,S,R,V);var j};const a=yield lT(n.localStore,e,!0),l=new eV(e,a.Hi),h=l.Wu(a.documents),_=Vw.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),w=l.applyChanges(h,n.isPrimaryClient,_);TN(n,t,w.Xu);const D=new M$(e,t,l);return n.ic.set(e,D),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),w.snapshot}),mN.apply(this,arguments)}function P$(n,e){return _N.apply(this,arguments)}function _N(){return _N=(0,_e.Z)(function*(n,e){const t=Ye(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(a=>!Nw(a,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield U_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Jw(t.remoteStore,r.targetId),W_(t,r.targetId)}).catch(Ih))):(W_(t,r.targetId),yield U_(t.localStore,r.targetId,!0))}),_N.apply(this,arguments)}function yN(){return yN=(0,_e.Z)(function*(n,e,t){const r=VN(n);try{const i=yield function(a,l){const h=Ye(a),_=hr.now(),w=l.reduce((R,V)=>R.add(V.key),Gt());let D,S;return h.persistence.runTransaction("Locally write mutations","readwrite",R=>{let V=Xs(),j=Gt();return h.Gi.getEntries(R,w).next(ae=>{V=ae,V.forEach((ve,qe)=>{qe.isValidDocument()||(j=j.add(ve))})}).next(()=>h.localDocuments.getOverlayedDocuments(R,V)).next(ae=>{D=ae;const ve=[];for(const qe of l){const lt=$j(qe,D.get(qe.key).overlayedDocument);null!=lt&&ve.push(new ed(qe.key,lt,aF(lt.value.mapValue),fr.exists(!0)))}return h.mutationQueue.addMutationBatch(R,_,ve,l)}).next(ae=>{S=ae;const ve=ae.applyToLocalDocumentSet(D,j);return h.documentOverlayCache.saveOverlays(R,ae.batchId,ve)})}).then(()=>({batchId:S.batchId,changes:RF(D)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,h){let _=a.hc[a.currentUser.toKey()];_||(_=new Nr(Bt)),_=_.insert(l,h),a.hc[a.currentUser.toKey()]=_}(r,i.batchId,t),yield nd(r,i.changes),yield j_(r.remoteStore)}catch(i){const a=$_(i,"Failed to persist write");t.reject(a)}}),yN.apply(this,arguments)}function tV(n,e){return vN.apply(this,arguments)}function vN(){return vN=(0,_e.Z)(function*(n,e){const t=Ye(n);try{const r=yield t$(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.cc.get(a);l&&(yt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.nc=!0:i.modifiedDocuments.size>0?yt(l.nc):i.removedDocuments.size>0&&(yt(l.nc),l.nc=!1))}),yield nd(t,r,e)}catch(r){yield Ih(r)}}),vN.apply(this,arguments)}function nV(n,e,t){const r=Ye(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((a,l)=>{const h=l.view.bu(e);h.snapshot&&i.push(h.snapshot)}),function(a,l){const h=Ye(a);h.onlineState=l;let _=!1;h.queries.forEach((w,D)=>{for(const S of D.listeners)S.bu(l)&&(_=!0)}),_&&hN(h)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function F$(n,e,t){return wN.apply(this,arguments)}function wN(){return wN=(0,_e.Z)(function*(n,e,t){const r=Ye(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),a=i&&i.key;if(a){let l=new Nr(Ze.comparator);l=l.insert(a,Xn.newNoDocument(a,Ct.min()));const h=Gt().add(a),_=new Lw(Ct.min(),new Map,new Nn(Bt),l,h);yield tV(r,_),r.uc=r.uc.remove(a),r.cc.delete(e),SN(r)}else yield U_(r.localStore,e,!1).then(()=>W_(r,e,t)).catch(Ih)}),wN.apply(this,arguments)}function L$(n,e){return CN.apply(this,arguments)}function CN(){return CN=(0,_e.Z)(function*(n,e){const t=Ye(n),r=e.batch.batchId;try{const i=yield e$(t.localStore,e);DN(t,r,null),IN(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield nd(t,i)}catch(i){yield Ih(i)}}),CN.apply(this,arguments)}function V$(n,e,t){return EN.apply(this,arguments)}function EN(){return EN=(0,_e.Z)(function*(n,e,t){const r=Ye(n);try{const i=yield function(a,l){const h=Ye(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let w;return h.mutationQueue.lookupMutationBatch(_,l).next(D=>(yt(null!==D),w=D.keys(),h.mutationQueue.removeMutationBatch(_,D))).next(()=>h.mutationQueue.performConsistencyCheck(_)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(_,w,l)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,w)).next(()=>h.localDocuments.getDocuments(_,w))})}(r.localStore,e);DN(r,e,t),IN(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield nd(r,i)}catch(i){yield Ih(i)}}),EN.apply(this,arguments)}function bN(){return bN=(0,_e.Z)(function*(n,e){const t=Ye(n);td(t.remoteStore)||Oe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=Ye(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>l.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=$_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),bN.apply(this,arguments)}function IN(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function DN(n,e,t){const r=Ye(n);let i=r.hc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function W_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||rV(n,r)})}function rV(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(Jw(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),SN(n))}function TN(n,e,t){for(const r of t)r instanceof JL?(n.ac.addReference(r.key,e),B$(n,r)):r instanceof XL?(Oe("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||rV(n,r.key)):ut()}function B$(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Oe("SyncEngine","New document in limbo: "+t),n.oc.add(r),SN(n))}function SN(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Ze(pn.fromString(e)),r=n.fc.next();n.cc.set(r,new R$(t)),n.uc=n.uc.insert(t,r),fT(n.remoteStore,new Nh(Is(A_(t.path)),r,2,Fo.at))}}function nd(n,e,t){return AN.apply(this,arguments)}function AN(){return AN=(0,_e.Z)(function*(n,e,t){const r=Ye(n),i=[],a=[],l=[];var h;r.ic.isEmpty()||(r.ic.forEach((h,_)=>{l.push(r._c(_,e,t).then(w=>{if((w||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,w?.fromCache?"not-current":"current"),w){i.push(w);const D=kR.Ci(_.targetId,w);a.push(D)}}))}),yield Promise.all(l),r.sc.Wo(i),yield(h=(0,_e.Z)(function*(_,w){const D=Ye(_);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>ue.forEach(w,R=>ue.forEach(R.Si,V=>D.persistence.referenceDelegate.addReference(S,R.targetId,V)).next(()=>ue.forEach(R.Di,V=>D.persistence.referenceDelegate.removeReference(S,R.targetId,V)))))}catch(S){if(!Dh(S))throw S;Oe("LocalStore","Failed to update sequence numbers: "+S)}for(const S of w){const R=S.targetId;if(!S.fromCache){const V=D.qi.get(R),ae=V.withLastLimboFreeSnapshotVersion(V.snapshotVersion);D.qi=D.qi.insert(R,ae)}}}),function(_,w){return h.apply(this,arguments)})(r.localStore,a))}),AN.apply(this,arguments)}function j$(n,e){return xN.apply(this,arguments)}function xN(){return xN=(0,_e.Z)(function*(n,e){const t=Ye(n);if(!t.currentUser.isEqual(e)){Oe("SyncEngine","User change. New user:",e.toKey());const r=yield RL(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(l=>{l.forEach(h=>{h.reject(new Ne(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield nd(t,r.ji)}var i}),xN.apply(this,arguments)}function H$(n,e){const t=Ye(n),r=t.cc.get(e);if(r&&r.nc)return Gt().add(r.key);{let i=Gt();const a=t.rc.get(e);if(!a)return i;for(const l of a){const h=t.ic.get(l);i=i.unionWith(h.view.ju)}return i}}function $$(n,e){return MN.apply(this,arguments)}function MN(){return MN=(0,_e.Z)(function*(n,e){const t=Ye(n),r=yield lT(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&TN(t,e.targetId,i.Xu),i}),MN.apply(this,arguments)}function G$(n,e){return RN.apply(this,arguments)}function RN(){return RN=(0,_e.Z)(function*(n,e){const t=Ye(n);return OL(t.localStore,e).then(r=>nd(t,r))}),RN.apply(this,arguments)}function z$(n,e,t,r){return NN.apply(this,arguments)}function NN(){return NN=(0,_e.Z)(function*(n,e,t,r){const i=Ye(n),a=yield function(l,h){const _=Ye(l),w=Ye(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",D=>w.Tn(D,h).next(S=>S?_.localDocuments.getDocuments(D,S):ue.resolve(null)))}(i.localStore,e);var h;null!==a?("pending"===t?yield j_(i.remoteStore):"acknowledged"===t||"rejected"===t?(DN(i,e,r||null),IN(i,e),h=e,Ye(Ye(i.localStore).mutationQueue).An(h)):ut(),yield nd(i,a)):Oe("SyncEngine","Cannot apply mutation batch with id: "+e)}),NN.apply(this,arguments)}function kN(){return kN=(0,_e.Z)(function*(n,e){const t=Ye(n);if(LN(t),VN(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield iV(t,r.toArray());t.dc=!0,yield sN(t.remoteStore,!0);for(const a of i)fT(t.remoteStore,a)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(W_(t,l),U_(t.localStore,l,!0))),Jw(t.remoteStore,l)}),yield i,yield iV(t,r),function(a){const l=Ye(a);l.cc.forEach((h,_)=>{Jw(l.remoteStore,_)}),l.ac.fs(),l.cc=new Map,l.uc=new Nr(Ze.comparator)}(t),t.dc=!1,yield sN(t.remoteStore,!1)}}),kN.apply(this,arguments)}function iV(n,e,t){return PN.apply(this,arguments)}function PN(){return PN=(0,_e.Z)(function*(n,e,t){const r=Ye(n),i=[],a=[];for(const l of e){let h;const _=r.rc.get(l);if(_&&0!==_.length){h=yield V_(r.localStore,Is(_[0]));for(const w of _){const D=r.ic.get(w),S=yield $$(r,D);S.snapshot&&a.push(S.snapshot)}}else{const w=yield PL(r.localStore,l);h=yield V_(r.localStore,w),yield gN(r,sV(w),l,!1,h.resumeToken)}i.push(h)}return r.sc.Wo(a),i}),PN.apply(this,arguments)}function sV(n){return cF(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function q$(n){const e=Ye(n);return Ye(Ye(e.localStore).persistence).vi()}function Z$(n,e,t,r){return ON.apply(this,arguments)}function ON(){return ON=(0,_e.Z)(function*(n,e,t,r){const i=Ye(n);if(i.dc)return void Oe("SyncEngine","Ignoring unexpected query state notification.");const a=i.rc.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield OL(i.localStore,fF(a[0])),h=Lw.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,ci.EMPTY_BYTE_STRING);yield nd(i,l,h);break}case"rejected":yield U_(i.localStore,e,!0),W_(i,e,r);break;default:ut()}}),ON.apply(this,arguments)}function K$(n,e,t){return FN.apply(this,arguments)}function FN(){return FN=(0,_e.Z)(function*(n,e,t){const r=LN(n);if(r.dc){for(const i of e){if(r.rc.has(i)){Oe("SyncEngine","Adding an already active target "+i);continue}const a=yield PL(r.localStore,i),l=yield V_(r.localStore,a);yield gN(r,sV(a),l.targetId,!1,l.resumeToken),fT(r.remoteStore,l)}for(const i of t)r.rc.has(i)&&(yield U_(r.localStore,i,!1).then(()=>{Jw(r.remoteStore,i),W_(r,i)}).catch(Ih))}}),FN.apply(this,arguments)}function LN(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=tV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=H$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=F$.bind(null,e),e.sc.Wo=T$.bind(null,e.eventManager),e.sc.wc=S$.bind(null,e.eventManager),e}function VN(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=L$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=V$.bind(null,e),e}class oV{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,_e.Z)(function*(){t.yt=Yw(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return ML(this.persistence,new xL,e.initialUser,this.yt)}yc(e){return new SL(aT.Bs,this.yt)}gc(e){return new UL}terminate(){var e=this;return(0,_e.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class aV extends oV{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield VN(r.Ac.syncEngine),yield j_(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return ML(this.persistence,new xL,e.initialUser,this.yt)}Tc(e,t){return new UH(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new bj(t,this.persistence);return new Ej(e.asyncQueue,r)}yc(e){const t=NR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?eo.withCacheSize(this.cacheSizeBytes):eo.DEFAULT;return new RR(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,jL(),hT(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new UL}}class Q$ extends aV{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof jR&&(r.sharedClientState.syncEngine={Fr:z$.bind(null,i),$r:Z$.bind(null,i),Br:K$.bind(null,i),vi:q$.bind(null,i),Mr:G$.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var a=(0,_e.Z)(function*(l){yield function W$(n,e){return kN.apply(this,arguments)}(r.Ac.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}gc(e){const t=jL();if(!jR.C(t))throw new Ne(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=NR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new jR(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class UN{initialize(e,t){var r=this;return(0,_e.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>nV(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=j$.bind(null,r.syncEngine),yield sN(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new D$}createDatastore(e){const t=Yw(e.databaseInfo.databaseId),r=new u$(e.databaseInfo);return new d$(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=h=>nV(this.syncEngine,h,0),l=BL.C()?new BL:new s$,new p$(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,h,_,w){const D=new N$(r,i,a,l,h,_);return w&&(D.dc=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,_e.Z)(function*(t){const r=Ye(t);Oe("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield B_(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function BN(n,e,t){if(!t)throw new Ne(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function uV(n,e,t,r){if(!0===e&&!0===r)throw new Ne(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function lV(n){if(!Ze.isDocumentKey(n))throw new Ne(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function cV(n){if(Ze.isDocumentKey(n))throw new Ne(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function gT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ut()}function un(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=gT(n);throw new Ne(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function dV(n,e){if(e<=0)throw new Ne(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const hV=new Map;class fV{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ne(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ne(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,uV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xw{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fV({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ne(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ne(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fV(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new cj;switch(t.type){case"gapi":return new pj(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ne(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=hV.get(e);t&&(Oe("ComponentProvider","Removing Datastore"),hV.delete(e),t.terminate())}(this),Promise.resolve()}}class er{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ml(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new er(this.firestore,e,this._key)}}class Wi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Wi(this.firestore,e,this._query)}}class Ml extends Wi{constructor(e,t,r){super(e,t,A_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new er(this.firestore,null,new Ze(e))}withConverter(e){return new Ml(this.firestore,e,this._path)}}function gV(n,e,...t){if(n=(0,P.m9)(n),BN("collection","path",e),n instanceof Xw){const r=pn.fromString(e,...t);return cV(r),new Ml(n,null,r)}{if(!(n instanceof er||n instanceof Ml))throw new Ne(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(pn.fromString(e,...t));return cV(r),new Ml(n.firestore,null,r)}}function mT(n,e,...t){if(n=(0,P.m9)(n),1===arguments.length&&(e=NO.R()),BN("doc","path",e),n instanceof Xw){const r=pn.fromString(e,...t);return lV(r),new er(n,null,new Ze(r))}{if(!(n instanceof er||n instanceof Ml))throw new Ne(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(pn.fromString(e,...t));return lV(r),new er(n.firestore,n instanceof Ml?n.converter:null,new Ze(r))}}function mV(n,e){return n=(0,P.m9)(n),e=(0,P.m9)(e),(n instanceof er||n instanceof Ml)&&(e instanceof er||e instanceof Ml)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function jN(n,e){return n=(0,P.m9)(n),e=(0,P.m9)(e),n instanceof Wi&&e instanceof Wi&&n.firestore===e.firestore&&Nw(n._query,e._query)&&n.converter===e.converter}function _V(n,e=10240){let t=0;return{read:()=>(0,_e.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,_e.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class _T{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Vr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class X${constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new li,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,_e.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,_e.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const a=yield e.Cc(i);return new A$(JSON.parse(a),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,_e.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,_e.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class nG{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,_e.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ne(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,_e.Z)(function*(a,l){const h=Ye(a),_=Bw(h.yt)+"/documents",w={documents:l.map(V=>Uw(h.yt,V))},D=yield h._o("BatchGetDocuments",_,w,l.length),S=new Map;D.forEach(V=>{const j=function tH(n,e){return"found"in e?function(t,r){yt(!!r.found);const i=Al(t,r.found.name),a=Ur(r.found.updateTime),l=r.found.createTime?Ur(r.found.createTime):Ct.min(),h=new zi({mapValue:{fields:r.found.fields}});return Xn.newFoundDocument(i,a,l,h)}(n,e):"missing"in e?function(t,r){yt(!!r.missing),yt(!!r.readTime);const i=Al(t,r.missing),a=Ur(r.readTime);return Xn.newNoDocument(i,a)}(n,e):ut()}(h.yt,V);S.set(j.key.toString(),j)});const R=[];return l.forEach(V=>{const j=S.get(V.toString());yt(!!j),R.push(j)}),R}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new N_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_e.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Ze.fromPath(i);e.mutations.push(new fR(a,e.precondition(a)))}),yield(r=(0,_e.Z)(function*(i,a){const l=Ye(i),h=Bw(l.yt)+"/documents",_={writes:a.map(w=>jw(l.yt,w))};yield l.ao("Commit",h,_)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ut();t=Ct.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ne(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ct.min())?fr.exists(!1):fr.updateTime(t):fr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ct.min()))throw new Ne(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return fr.updateTime(t)}return fr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class rG{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.xo=new HR(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,_e.Z)(function*(){const t=new nG(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Fc(a)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!Dw(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!AF(t)}return!1}}class iG{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ii.UNAUTHENTICATED,this.clientId=NO.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,_e.Z)(function*(h){Oe("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Oe("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,_e.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ne(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new li;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=$_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function yV(n,e){return HN.apply(this,arguments)}function HN(){return HN=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Oe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,_e.Z)(function*(a){r.isEqual(a)||(yield RL(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),HN.apply(this,arguments)}function vV(n,e){return $N.apply(this,arguments)}function $N(){return $N=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield GN(n);Oe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>ZL(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>ZL(e.remoteStore,a)),n.onlineComponents=e}),$N.apply(this,arguments)}function GN(n){return zN.apply(this,arguments)}function zN(){return zN=(0,_e.Z)(function*(n){return n.offlineComponents||(Oe("FirestoreClient","Using default OfflineComponentProvider"),yield yV(n,new oV)),n.offlineComponents}),zN.apply(this,arguments)}function yT(n){return WN.apply(this,arguments)}function WN(){return WN=(0,_e.Z)(function*(n){return n.onlineComponents||(Oe("FirestoreClient","Using default OnlineComponentProvider"),yield vV(n,new UN)),n.onlineComponents}),WN.apply(this,arguments)}function wV(n){return GN(n).then(e=>e.persistence)}function vT(n){return GN(n).then(e=>e.localStore)}function qN(n){return yT(n).then(e=>e.remoteStore)}function ZN(n){return yT(n).then(e=>e.syncEngine)}function q_(n){return KN.apply(this,arguments)}function KN(){return KN=(0,_e.Z)(function*(n){const e=yield yT(n),t=e.eventManager;return t.onListen=k$.bind(null,e.syncEngine),t.onUnlisten=P$.bind(null,e.syncEngine),t}),KN.apply(this,arguments)}function EV(n,e,t={}){const r=new li;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(i,a,l,h,_){const w=new _T({next:S=>{a.enqueueAndForget(()=>cN(i,D));const R=S.docs.has(l);!R&&S.fromCache?_.reject(new Ne(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&S.fromCache&&h&&"server"===h.source?_.reject(new Ne(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(S)},error:S=>_.reject(S)}),D=new fN(A_(l.path),w,{includeMetadataChanges:!0,Nu:!0});return uN(i,D)}(yield q_(n),n.asyncQueue,e,t,r)})),r.promise}function bV(n,e,t={}){const r=new li;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(i,a,l,h,_){const w=new _T({next:S=>{a.enqueueAndForget(()=>cN(i,D)),S.fromCache&&"server"===h.source?_.reject(new Ne(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(S)},error:S=>_.reject(S)}),D=new fN(l,w,{includeMetadataChanges:!0,Nu:!0});return uN(i,D)}(yield q_(n),n.asyncQueue,e,t,r)})),r.promise}class hG{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new HR(this,"async_queue_retry"),this.Wc=()=>{const t=hT();t&&Oe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=hT();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=hT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new li;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,_e.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!Dh(t))throw t;Oe("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,Vr("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=aN.createAndSchedule(this,e,t,r,a=>this.Yc(a));return this.Uc.push(i),i}zc(){this.Kc&&ut()}verifyOperationInProgress(){}Xc(){var e=this;return(0,_e.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function YN(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class fG{constructor(){this._progressObserver={},this._taskCompletionResolver=new li,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class tr extends Xw{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new hG,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||IV(this),this._firestoreClient.terminate()}}function Br(n){return n._firestoreClient||IV(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function IV(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Ij(n._databaseId,a,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var a,h;n._firestoreClient=new iG(n._authCredentials,n._appCheckCredentials,n._queue,r)}function DV(n,e,t){const r=new li;return n.asyncQueue.enqueue((0,_e.Z)(function*(){try{yield yV(n,t),yield vV(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(l=a).name?l.code===ce.FAILED_PRECONDITION||l.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw a;Cp("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var l})).then(()=>r.promise)}function TV(n){if(n._initialized||n._terminated)throw new Ne(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Rl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rl(ci.fromBase64String(e))}catch(t){throw new Ne(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Rl(ci.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class rd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ne(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Up{constructor(e){this._methodName=e}}class wT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Bt(this._lat,e._lat)||Bt(this._long,e._long)}}const bG=/^__.*__$/;class IG{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ed(e,this.data,this.fieldMask,t,this.fieldTransforms):new R_(e,this.data,t,this.fieldTransforms)}}class SV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ed(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function AV(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ut()}}class CT{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.yt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new CT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return IT(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(AV(this.sa)&&bG.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class DG{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=r||Yw(e)}da(e,t,r,i=!1){return new CT({sa:e,methodName:t,fa:r,path:Mr.emptyPath(),oa:!1,la:i},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function Bp(n){const e=n._freezeSettings(),t=Yw(n._databaseId);return new DG(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ET(n,e,t,r,i,a={}){const l=n.da(a.merge||a.mergeFields?2:0,e,t,i);e1("Data must be an object, but it was:",l,r);const h=RV(r,l);let _,w;if(a.merge)_=new Lo(l.fieldMask),w=l.fieldTransforms;else if(a.mergeFields){const D=[];for(const S of a.mergeFields){const R=t1(e,S,t);if(!l.contains(R))throw new Ne(ce.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);kV(D,R)||D.push(R)}_=new Lo(D),w=l.fieldTransforms.filter(S=>_.covers(S.field))}else _=null,w=l.fieldTransforms;return new IG(new zi(h),_,w)}class eC extends Up{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof eC}}function xV(n,e,t){return new CT({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class QN extends Up{_toFieldTransform(e){return new kw(e.path,new x_)}isEqual(e){return e instanceof QN}}class TG extends Up{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=xV(this,e,!0),r=this._a.map(a=>jp(a,t)),i=new Mp(r);return new kw(e.path,i)}isEqual(e){return this===e}}class SG extends Up{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=xV(this,e,!0),r=this._a.map(a=>jp(a,t)),i=new Rp(r);return new kw(e.path,i)}isEqual(e){return this===e}}class AG extends Up{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new M_(e.yt,_F(e.yt,this.wa));return new kw(e.path,t)}isEqual(e){return this===e}}function JN(n,e,t,r){const i=n.da(1,e,t);e1("Data must be an object, but it was:",i,r);const a=[],l=zi.empty();Ip(r,(_,w)=>{const D=bT(e,_,t);w=(0,P.m9)(w);const S=i.ca(D);if(w instanceof eC)a.push(D);else{const R=jp(w,S);null!=R&&(a.push(D),l.set(D,R))}});const h=new Lo(a);return new SV(l,h,i.fieldTransforms)}function XN(n,e,t,r,i,a){const l=n.da(1,e,t),h=[t1(e,r,t)],_=[i];if(a.length%2!=0)throw new Ne(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<a.length;R+=2)h.push(t1(e,a[R])),_.push(a[R+1]);const w=[],D=zi.empty();for(let R=h.length-1;R>=0;--R)if(!kV(w,h[R])){const V=h[R];let j=_[R];j=(0,P.m9)(j);const ae=l.ca(V);if(j instanceof eC)w.push(V);else{const ve=jp(j,ae);null!=ve&&(w.push(V),D.set(V,ve))}}const S=new Lo(w);return new SV(D,S,l.fieldTransforms)}function MV(n,e,t,r=!1){return jp(t,n.da(r?4:3,e))}function jp(n,e){if(NV(n=(0,P.m9)(n)))return e1("Unsupported field value:",e,n),RV(n,e);if(n instanceof Up)return function(t,r){if(!AV(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let h=jp(l,r.aa(a));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,P.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return _F(r.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=hr.fromDate(t);return{timestampValue:k_(r.yt,i)}}if(t instanceof hr){const i=new hr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:k_(r.yt,i)}}if(t instanceof wT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Rl)return{bytesValue:VF(r.yt,t._byteString)};if(t instanceof er){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ha(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:pR(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${gT(t)}`)}(n,e)}function RV(n,e){const t={};return BO(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ip(n,(r,i)=>{const a=jp(i,e.ra(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function NV(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof hr||n instanceof wT||n instanceof Rl||n instanceof er||n instanceof Up)}function e1(n,e,t){if(!NV(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=gT(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function t1(n,e,t){if((e=(0,P.m9)(e))instanceof rd)return e._internalPath;if("string"==typeof e)return bT(n,e);throw IT("Field path arguments must be of type string or ",n,!1,void 0,t)}const xG=new RegExp("[~\\*/\\[\\]]");function bT(n,e,t){if(e.search(xG)>=0)throw IT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new rd(...e.split("."))._internalPath}catch{throw IT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function IT(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let _="";return(a||l)&&(_+=" (found",a&&(_+=` in field ${r}`),l&&(_+=` in document ${i}`),_+=")"),new Ne(ce.INVALID_ARGUMENT,h+n+_)}function kV(n,e){return n.some(t=>t.isEqual(e))}class tC{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new er(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new MG(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(DT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class MG extends tC{data(){return super.data()}}function DT(n,e){return"string"==typeof e?bT(n,e):e instanceof rd?e._internalPath:e._delegate._internalPath}function PV(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ne(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class n1{}class nC extends n1{}function Lh(n,e,...t){let r=[];e instanceof n1&&r.push(e),r=r.concat(t),function(i){const a=i.filter(h=>h instanceof Z_).length,l=i.filter(h=>h instanceof rC).length;if(a>1||a>0&&l>0)throw new Ne(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class rC extends nC{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new rC(e,t,r)}_apply(e){const t=this._parse(e);return VV(e._query,t),new Wi(e.firestore,e.converter,cR(e._query,t))}_parse(e){const t=Bp(e.firestore);return function(i,a,l,h,_,w,D){let S;if(_.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Ne(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){LV(D,w);const R=[];for(const V of D)R.push(FV(h,i,V));S={arrayValue:{values:R}}}else S=FV(h,i,D)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||LV(D,w),S=MV(l,"where",D,"in"===w||"not-in"===w);return an.create(_,w,S)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Z_ extends n1{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Z_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Sn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let a=r;const l=i.getFlattenedFilters();for(const h of l)VV(a,h),a=cR(a,h)}(e._query,t),new Wi(e.firestore,e.converter,cR(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class r1 extends nC{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new r1(e,t)}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Ne(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ne(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new T_(i,a);return function(h,_){if(null===uR(h)){const w=zD(h);null!==w&&UV(0,w,_.field)}}(r,l),l}(e._query,this._field,this._direction);return new Wi(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Xc(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class TT extends nC{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new TT(e,t,r)}_apply(e){return new Wi(e.firestore,e.converter,WD(e._query,this._limit,this._limitType))}}class ST extends nC{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new ST(e,t,r)}_apply(e){const t=OV(e,this.type,this._docOrFields,this._inclusive);return new Wi(e.firestore,e.converter,(i=t,new Xc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class AT extends nC{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new AT(e,t,r)}_apply(e){const t=OV(e,this.type,this._docOrFields,this._inclusive);return new Wi(e.firestore,e.converter,(i=t,new Xc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function OV(n,e,t,r){if(t[0]=(0,P.m9)(t[0]),t[0]instanceof tC)return function(i,a,l,h,_){if(!h)throw new Ne(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const w=[];for(const D of xp(i))if(D.field.isKeyField())w.push(Sp(a,h.key));else{const S=h.data.field(D.field);if(rR(S))throw new Ne(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const R=D.field.canonicalString();throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${R}' (used as the orderBy) does not exist.`)}w.push(S)}return new Mh(w,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Bp(n.firestore);return function(a,l,h,_,w,D){const S=a.explicitOrderBy;if(w.length>S.length)throw new Ne(ce.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const R=[];for(let V=0;V<w.length;V++){const j=w[V];if(S[V].field.isKeyField()){if("string"!=typeof j)throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof j}`);if(!lR(a)&&-1!==j.indexOf("/"))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${j}' contains a slash.`);const ae=a.path.child(pn.fromString(j));if(!Ze.isDocumentKey(ae))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${ae}' is not because it contains an odd number of segments.`);const ve=new Ze(ae);R.push(Sp(l,ve))}else{const ae=MV(h,_,j);R.push(ae)}}return new Mh(R,D)}(n._query,n.firestore._databaseId,i,e,t,r)}}function FV(n,e,t){if("string"==typeof(t=(0,P.m9)(t))){if(""===t)throw new Ne(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lR(e)&&-1!==t.indexOf("/"))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(pn.fromString(t));if(!Ze.isDocumentKey(r))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Sp(n,new Ze(r))}if(t instanceof er)return Sp(n,t._key);throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gT(t)}.`)}function LV(n,e){if(!Array.isArray(n)||0===n.length)throw new Ne(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ne(ce.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function VV(n,e){if(e.isInequality()){const r=zD(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const a=uR(n);null!==a&&UV(0,i,a)}const t=function(r,i){for(const a of r)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ne(ce.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function UV(n,e,t){if(!t.isEqual(e))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class i1{convertValue(e,t="none"){switch(Tp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Dp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ut()}}convertObject(e,t){const r={};return Ip(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new wT(Rr(e.latitude),Rr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=HO(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Sw(e));default:return null}}convertTimestamp(e){const t=Sh(e);return new hr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=pn.fromString(e);yt(ZF(r));const i=new Th(r.get(1),r.get(3)),a=new Ze(r.popFirst(5));return i.isEqual(t)||Vr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function xT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class UG extends i1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new er(this.firestore,null,t)}}class Hp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class id extends tC{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new iC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(DT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class iC extends id{data(e={}){return super.data(e)}}class Vh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Hp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new iC(this._firestore,this._userDataWriter,r.key,r,new Hp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new iC(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Hp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const h=new iC(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Hp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,w=-1;return 0!==l.type&&(_=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),w=a.indexOf(l.doc.key)),{type:BG(l.type),doc:h,oldIndex:_,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function BG(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ut()}}function jV(n,e){return n instanceof id&&e instanceof id?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Vh&&e instanceof Vh&&n._firestore===e._firestore&&jN(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Uh extends i1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new er(this.firestore,null,t)}}function HV(n,e,t){n=un(n,er);const r=un(n.firestore,tr),i=xT(n.converter,e,t);return K_(r,[ET(Bp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,fr.none())])}function $V(n,e,t,...r){n=un(n,er);const i=un(n.firestore,tr),a=Bp(i);let l;return l="string"==typeof(e=(0,P.m9)(e))||e instanceof rd?XN(a,"updateDoc",n._key,e,t,r):JN(a,"updateDoc",n._key,e),K_(i,[l.toMutation(n._key,fr.exists(!0))])}function GV(n,...e){var t,r,i;n=(0,P.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||YN(e[l])||(a=e[l],l++);const h={includeMetadataChanges:a.includeMetadataChanges};if(YN(e[l])){const S=e[l];e[l]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[l+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[l+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let _,w,D;if(n instanceof er)w=un(n.firestore,tr),D=A_(n._key.path),_={next:S=>{e[l]&&e[l](s1(w,n,S))},error:e[l+1],complete:e[l+2]};else{const S=un(n,Wi);w=un(S.firestore,tr),D=S._query;const R=new Uh(w);_={next:V=>{e[l]&&e[l](new Vh(w,R,S,V))},error:e[l+1],complete:e[l+2]},PV(n._query)}return function(S,R,V,j){const ae=new _T(j),ve=new fN(R,ae,V);return S.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return uN(yield q_(S),ve)})),()=>{ae.bc(),S.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return cN(yield q_(S),ve)}))}}(Br(w),D,h,_)}function K_(n,e){return function(t,r){const i=new li;return t.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function O$(n,e,t){return yN.apply(this,arguments)}(yield ZN(t),r,i)})),i.promise}(Br(n),e)}function s1(n,e,t){const r=t.docs.get(e._key),i=new Uh(n);return new id(n,i,e._key,r,new Hp(t.hasPendingWrites,t.fromCache),e.converter)}const YG={maxAttempts:5};class zV{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Bp(e)}set(e,t,r){this._verifyNotCommitted();const i=Bh(e,this._firestore),a=xT(i.converter,t,r),l=ET(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,fr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Bh(e,this._firestore);let l;return l="string"==typeof(t=(0,P.m9)(t))||t instanceof rd?XN(this._dataReader,"WriteBatch.update",a._key,t,r,i):JN(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,fr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Bh(e,this._firestore);return this._mutations=this._mutations.concat(new N_(t._key,fr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Bh(n,e){if((n=(0,P.m9)(n)).firestore!==e)throw new Ne(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class QG extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Bp(e)}get(e){const t=Bh(e,this._firestore),r=new UG(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ut();const a=i[0];if(a.isFoundDocument())return new tC(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new tC(this._firestore,r,t._key,null,t.converter);throw ut()})}set(e,t,r){const i=Bh(e,this._firestore),a=xT(i.converter,t,r),l=ET(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=Bh(e,this._firestore);let l;return l="string"==typeof(t=(0,P.m9)(t))||t instanceof rd?XN(this._dataReader,"Transaction.update",a._key,t,r,i):JN(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=Bh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Bh(e,this._firestore),r=new Uh(this._firestore);return super.get(e).then(i=>new id(this._firestore,r,t._key,i._document,new Hp(!1,!1),t.converter))}}function o1(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ne("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function qV(){if(typeof Uint8Array>"u")throw new Ne("unimplemented","Uint8Arrays are not available in this environment.")}function ZV(){if(!function Dj(){return typeof atob<"u"}())throw new Ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){E_=Li.SDK_VERSION,(0,Li._registerComponent)(new Zs.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),l=new tr(new hj(t.getProvider("auth-internal")),new gj(t.getProvider("app-check-internal")),function(h,_){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Ne(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Th(h.options.projectId,_)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,Li.registerVersion)(xO,"3.8.0",n),(0,Li.registerVersion)(xO,"3.8.0","esm2017")}();class sC{constructor(e){this._delegate=e}static fromBase64String(e){return ZV(),new sC(Rl.fromBase64String(e))}static fromUint8Array(e){return qV(),new sC(Rl.fromUint8Array(e))}toBase64(){return ZV(),this._delegate.toBase64()}toUint8Array(){return qV(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function a1(n){return function o3(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class a3{enableIndexedDbPersistence(e,t){return function gG(n,e){TV(n=un(n,tr));const t=Br(n),r=n._freezeSettings(),i=new UN;return DV(t,i,new aV(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function mG(n){TV(n=un(n,tr));const e=Br(n),t=n._freezeSettings(),r=new UN;return DV(e,r,new Q$(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function _G(n){if(n._initialized&&!n._terminated)throw new Ne(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new li;return n._queue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{yield(t=(0,_e.Z)(function*(r){if(!_u.C())return Promise.resolve();const i=r+"main";yield _u.delete(i)}),function(r){return t.apply(this,arguments)})(NR(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class KV{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Th||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Cp("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function pV(n,e,t,r={}){var i;const a=(n=un(n,Xw))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Cp("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,h;if("string"==typeof r.mockUserToken)l=r.mockUserToken,h=Ii.MOCK_USER;else{l=(0,P.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Ne(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ii(_)}n._authCredentials=new dj(new MO(l,h))}}(this._delegate,e,t,r)}enableNetwork(){return function vG(n){return function sG(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield wV(n),t=yield qN(n);return e.setNetworkEnabled(!0),function(r){const i=Ye(r);return i._u.delete(0),Qw(i)}(t)}))}(Br(n=un(n,tr)))}(this._delegate)}disableNetwork(){return function wG(n){return function oG(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield wV(n),t=yield qN(n);return e.setNetworkEnabled(!1),(r=(0,_e.Z)(function*(i){const a=Ye(i);a._u.add(0),yield B_(a),a.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Br(n=un(n,tr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,uV("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function yG(n){return function(e){const t=new li;return e.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function U$(n,e){return bN.apply(this,arguments)}(yield ZN(e),t)})),t.promise}(Br(n=un(n,tr)))}(this._delegate)}onSnapshotsInSync(e){return function KG(n,e){return function lG(n,e){const t=new _T(e);return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield q_(n),i=t,Ye(r).Ru.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield q_(n),i=t,void Ye(r).Ru.delete(i);var r,i}))}}(Br(n=un(n,tr)),YN(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Y_(this,gV(this._delegate,e))}catch(t){throw Ts(t,"collection()","Firestore.collection()")}}doc(e){try{return new wa(this,mT(this._delegate,e))}catch(t){throw Ts(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ss(this,function J$(n,e){if(n=un(n,Xw),BN("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ne(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Wi(n,null,(t=e,new Xc(pn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ts(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function JG(n,e,t){n=un(n,tr);const r=Object.assign(Object.assign({},YG),t);return function(i){if(i.maxAttempts<1)throw new Ne(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,l){const h=new li;return i.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){const _=yield function CV(n){return yT(n).then(e=>e.datastore)}(i);new rG(i.asyncQueue,_,l,a,h).run()})),h.promise}(Br(n),i=>e(new QG(n,i)),r)}(this._delegate,t=>e(new YV(this,t)))}batch(){return Br(this._delegate),new QV(new zV(this._delegate,e=>K_(this._delegate,e)))}loadBundle(e){return function CG(n,e){const t=Br(n=un(n,tr)),r=new fG;return function cG(n,e,t,r){const i=function(a,l){let h;return h="string"==typeof a?(new TextEncoder).encode(a):a,_=function(_,w){if(_ instanceof Uint8Array)return _V(_,w);if(_ instanceof ArrayBuffer)return _V(new Uint8Array(_),w);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new X$(_,l);var _}(t,Yw(e));n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){!function Y$(n,e,t){const r=Ye(n);var i;(i=(0,_e.Z)(function*(a,l,h){try{const _=yield l.getMetadata();if(yield function(R,V){const j=Ye(R),ae=Ur(V.createTime);return j.persistence.runTransaction("hasNewerBundle","readonly",ve=>j.Ns.getBundleMetadata(ve,V.id)).then(ve=>!!ve&&ve.createTime.compareTo(ae)>=0)}(a.localStore,_))return yield l.close(),h._completeWith({taskState:"Success",documentsLoaded:(R=_).totalDocuments,bytesLoaded:R.totalBytes,totalDocuments:R.totalDocuments,totalBytes:R.totalBytes}),Promise.resolve(new Set);h._updateProgress(QL(_));const w=new x$(_,a.localStore,l.yt);let D=yield l.mc();for(;D;){const R=yield w.Fu(D);R&&h._updateProgress(R),D=yield l.mc()}const S=yield w.complete();return yield nd(a,S.Lu,void 0),yield function(R,V){const j=Ye(R);return j.persistence.runTransaction("Save bundle","readwrite",ae=>j.Ns.saveBundleMetadata(ae,V))}(a.localStore,_),h._completeWith(S.progress),Promise.resolve(S.Bu)}catch(_){return Cp("SyncEngine",`Loading bundle failed with ${_}`),h._failWith(_),Promise.resolve(new Set)}var R}),function(a,l,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield ZN(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function EG(n,e){return function dG(n,e){return n.asyncQueue.enqueue((0,_e.Z)(function*(){return function(t,r){const i=Ye(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ns.getNamedQuery(a,r))}(yield vT(n),e)}))}(Br(n=un(n,tr)),e).then(t=>t?new Wi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ss(this,t):null)}}class MT extends i1{constructor(e){super(),this.firestore=e}convertBytes(e){return new sC(new Rl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return wa.forKey(t,this.firestore,null)}}class YV{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new MT(e)}get(e){const t=Gp(e);return this._delegate.get(t).then(r=>new oC(this._firestore,new id(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Gp(e);return r?(o1("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Gp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Gp(e);return this._delegate.delete(t),this}}class QV{constructor(e){this._delegate=e}set(e,t,r){const i=Gp(e);return r?(o1("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Gp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Gp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class $p{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new iC(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new aC(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=$p.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new $p(e,new MT(e),t),i.set(t,a)),a}}$p.INSTANCES=new WeakMap;class wa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new MT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new wa(t,new er(t._delegate,r,new Ze(e)))}static forKey(e,t,r){return new wa(t,new er(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Y_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Y_(this.firestore,gV(this._delegate,e))}catch(t){throw Ts(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,P.m9)(e))instanceof er&&mV(this._delegate,e)}set(e,t){t=o1("DocumentReference.set",t);try{return t?HV(this._delegate,e,t):HV(this._delegate,e)}catch(r){throw Ts(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?$V(this._delegate,e):$V(this._delegate,e,t,...r)}catch(i){throw Ts(i,"updateDoc()","DocumentReference.update()")}}delete(){return function qG(n){return K_(un(n.firestore,tr),[new N_(n._key,fr.none())])}(this._delegate)}onSnapshot(...e){const t=JV(e),r=XV(e,i=>new oC(this.firestore,new id(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return GV(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function HG(n){n=un(n,er);const e=un(n.firestore,tr),t=Br(e),r=new Uh(e);return function aG(n,e){const t=new li;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(i,a,l){try{const h=yield function(_,w){const D=Ye(_);return D.persistence.runTransaction("read document","readonly",S=>D.localDocuments.getDocument(S,w))}(i,a);h.isFoundDocument()?l.resolve(h):h.isNoDocument()?l.resolve(null):l.reject(new Ne(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const _=$_(h,`Failed to get document '${a} from cache`);l.reject(_)}}),function(i,a,l){return r.apply(this,arguments)})(yield vT(n),e,t);var r})),t.promise}(t,n._key).then(i=>new id(e,r,n._key,i,new Hp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function $G(n){n=un(n,er);const e=un(n.firestore,tr);return EV(Br(e),n._key,{source:"server"}).then(t=>s1(e,n,t))}(this._delegate):function jG(n){n=un(n,er);const e=un(n.firestore,tr);return EV(Br(e),n._key).then(t=>s1(e,n,t))}(this._delegate),t.then(r=>new oC(this.firestore,new id(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new wa(this.firestore,this._delegate.withConverter(e?$p.getInstance(this.firestore,e):null))}}function Ts(n,e,t){return n.message=n.message.replace(e,t),n}function JV(n){for(const e of n)if("object"==typeof e&&!a1(e))return e;return{}}function XV(n,e){var t,r;let i;return i=a1(n[0])?n[0]:a1(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class oC{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new wa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return jV(this._delegate,e._delegate)}}class aC extends oC{data(e){const t=this._delegate.data(e);return function lj(n,e){n||ut()}(void 0!==t),t}}class Ss{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new MT(e)}where(e,t,r){try{return new Ss(this.firestore,Lh(this._delegate,function RG(n,e,t){const r=e,i=DT("where",n);return rC._create(i,r,t)}(e,t,r)))}catch(i){throw Ts(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ss(this.firestore,Lh(this._delegate,function NG(n,e="asc"){const t=e,r=DT("orderBy",n);return r1._create(r,t)}(e,t)))}catch(r){throw Ts(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ss(this.firestore,Lh(this._delegate,function kG(n){return dV("limit",n),TT._create("limit",n,"F")}(e)))}catch(t){throw Ts(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ss(this.firestore,Lh(this._delegate,function PG(n){return dV("limitToLast",n),TT._create("limitToLast",n,"L")}(e)))}catch(t){throw Ts(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ss(this.firestore,Lh(this._delegate,function OG(...n){return ST._create("startAt",n,!0)}(...e)))}catch(t){throw Ts(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ss(this.firestore,Lh(this._delegate,function FG(...n){return ST._create("startAfter",n,!1)}(...e)))}catch(t){throw Ts(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ss(this.firestore,Lh(this._delegate,function LG(...n){return AT._create("endBefore",n,!1)}(...e)))}catch(t){throw Ts(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ss(this.firestore,Lh(this._delegate,function VG(...n){return AT._create("endAt",n,!0)}(...e)))}catch(t){throw Ts(t,"endAt()","Query.endAt()")}}isEqual(e){return jN(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function zG(n){n=un(n,Wi);const e=un(n.firestore,tr),t=Br(e),r=new Uh(e);return function uG(n,e){const t=new li;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(i,a,l){try{const h=yield lT(i,a,!0),_=new eV(a,h.Hi),w=_.Wu(h.documents),D=_.applyChanges(w,!1);l.resolve(D.snapshot)}catch(h){const _=$_(h,`Failed to execute query '${a} against cache`);l.reject(_)}}),function(i,a,l){return r.apply(this,arguments)})(yield vT(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Vh(e,r,n,i))}(this._delegate):"server"===e?.source?function WG(n){n=un(n,Wi);const e=un(n.firestore,tr),t=Br(e),r=new Uh(e);return bV(t,n._query,{source:"server"}).then(i=>new Vh(e,r,n,i))}(this._delegate):function GG(n){n=un(n,Wi);const e=un(n.firestore,tr),t=Br(e),r=new Uh(e);return PV(n._query),bV(t,n._query).then(i=>new Vh(e,r,n,i))}(this._delegate),t.then(r=>new u1(this.firestore,new Vh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=JV(e),r=XV(e,i=>new u1(this.firestore,new Vh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return GV(this._delegate,t,r)}withConverter(e){return new Ss(this.firestore,this._delegate.withConverter(e?$p.getInstance(this.firestore,e):null))}}class l3{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new aC(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class u1{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ss(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new aC(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new l3(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new aC(this._firestore,r))})}isEqual(e){return jV(this._delegate,e._delegate)}}class Y_ extends Ss{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new wa(this.firestore,e):null}doc(e){try{return new wa(this.firestore,void 0===e?mT(this._delegate):mT(this._delegate,e))}catch(t){throw Ts(t,"doc()","CollectionReference.doc()")}}add(e){return function ZG(n,e){const t=un(n.firestore,tr),r=mT(n),i=xT(n.converter,e);return K_(t,[ET(Bp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,fr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new wa(this.firestore,t))}isEqual(e){return mV(this._delegate,e._delegate)}withConverter(e){return new Y_(this.firestore,this._delegate.withConverter(e?$p.getInstance(this.firestore,e):null))}}function Gp(n){return un(n,er)}class l1{constructor(...e){this._delegate=new rd(...e)}static documentId(){return new l1(Mr.keyField().canonicalString())}isEqual(e){return(e=(0,P.m9)(e))instanceof rd&&this._delegate._internalPath.isEqual(e._internalPath)}}class zp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function e3(){return new QN("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new zp(e)}static delete(){const e=function XG(){return new eC("deleteField")}();return e._methodName="FieldValue.delete",new zp(e)}static arrayUnion(...e){const t=function t3(...n){return new TG("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new zp(t)}static arrayRemove(...e){const t=function n3(...n){return new SG("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new zp(t)}static increment(e){const t=function r3(n){return new AG("increment",n)}(e);return t._methodName="FieldValue.increment",new zp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const c3={Firestore:KV,GeoPoint:wT,Timestamp:hr,Blob:sC,Transaction:YV,WriteBatch:QV,DocumentReference:wa,DocumentSnapshot:oC,Query:Ss,QueryDocumentSnapshot:aC,QuerySnapshot:u1,CollectionReference:Y_,FieldPath:l1,FieldValue:zp,setLogLevel:function u3(n){!function uj(n){bh.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function eU(n,e){return function f3(n,e=Gm.z){return new wr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function c1(n,e){return eU(n,e).pipe((0,Je.U)(t=>({payload:t,type:"query"})))}function RT(n,e){return c1(n,e).pipe(rl(void 0),u_(),(0,Je.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,h)=>{const _=i.find(D=>D.doc.ref.isEqual(l.ref)),w=t?.payload.docs.find(D=>D.ref.isEqual(l.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(l.metadata)||!_&&w&&JSON.stringify(w.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:l}})}),a}))}function tU(n,e,t){return RT(n,t).pipe(Rt((r,i)=>function g3(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function m3(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return d1(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return d1(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return d1(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),oD(),(0,Je.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function d1(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function nU(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function h3(n){(function d3(n,e){n.INTERNAL.registerComponent(new Zs.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},c3)))})(n,(e,t)=>new KV(e,t,new a3)),n.registerVersion("@firebase/firestore-compat","0.3.0")}(zm.Z);class rU{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=RT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Je.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(rl(void 0),u_(),I(([r,i])=>i.length>0||!r),(0,Je.U)(([r,i])=>i),mn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Rt((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=nU(e);return tU(this.query,t,this.afs.schedulers.outsideAngular).pipe(mn.iC)}valueChanges(e={}){return c1(this.query,this.afs.schedulers.outsideAngular).pipe((0,Je.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),mn.iC)}get(e){return(0,rn.D)(this.query.get(e)).pipe(mn.iC)}add(e){return this.ref.add(e)}doc(e){return new iU(this.ref.doc(e),this.afs)}}class iU{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=aU(r,t);return new rU(i,a,this.afs)}snapshotChanges(){return function p3(n,e){return eU(n,e).pipe(rl(void 0),u_(),(0,Je.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(mn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Je.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,rn.D)(this.ref.get(e)).pipe(mn.iC)}}class _3{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?RT(this.query,this.afs.schedulers.outsideAngular).pipe((0,Je.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),I(t=>t.length>0),mn.iC):RT(this.query,this.afs.schedulers.outsideAngular).pipe(mn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Rt((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=nU(e);return tU(this.query,t,this.afs.schedulers.outsideAngular).pipe(mn.iC)}valueChanges(e={}){return c1(this.query,this.afs.schedulers.outsideAngular).pipe((0,Je.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),mn.iC)}get(e){return(0,rn.D)(this.query.get(e)).pipe(mn.iC)}}const sU=new d.OlP("angularfire2.enableFirestorePersistence"),oU=new d.OlP("angularfire2.firestore.persistenceSettings"),y3=new d.OlP("angularfire2.firestore.settings"),v3=new d.OlP("angularfire2.firestore.use-emulator");function aU(n,e=(t=>t)){return{query:e(n),ref:n}}let w3=(()=>{class n{constructor(t,r,i,a,l,h,_,w,D,S,R,V,j,ae,ve,qe,lt){this.schedulers=_;const rt=(0,Zr.on)(t,h,r),ct=D;S&&Tm(rt,h,R,j,ae,ve,V,qe),[this.firestore,this.persistenceEnabled$]=(0,Zr.cc)(`${rt.name}.firestore`,"AngularFirestore",rt.name,()=>{const Tt=h.runOutsideAngular(()=>rt.firestore());if(a&&Tt.settings(a),ct&&Tt.useEmulator(...ct),i&&!Tr(l)){const Ot=()=>{try{return(0,rn.D)(Tt.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(Ir){return typeof console<"u"&&console.warn(Ir),at(!1)}};return[Tt,h.runOutsideAngular(Ot)]}return[Tt,at(!1)]},[a,ct,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=aU(i,r),h=this.schedulers.ngZone.run(()=>a);return new rU(h,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new _3(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new iU(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Zr.Dh),d.LFG(Zr.xv,8),d.LFG(sU,8),d.LFG(y3,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(mn.HU),d.LFG(oU,8),d.LFG(v3,8),d.LFG(Lc,8),d.LFG(vl,8),d.LFG(Cm,8),d.LFG(Em,8),d.LFG(bm,8),d.LFG(Im,8),d.LFG(Dm,8),d.LFG(jf,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),C3=(()=>{class n{constructor(){du.Z.registerVersion("angularfire",mn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:sU,useValue:!0},{provide:oU,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[w3]}),n})();var E3=L(5032);const uU="@firebase/database";let h1="";function cU(n){h1=n}class D3{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,P.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,P.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class T3{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,P.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const dU=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new D3(e)}}catch{}return new T3},Wp=dU("localStorage"),f1=dU("sessionStorage"),Q_=new Ao.Yd("@firebase/database"),hU=function(){let n=1;return function(){return n++}}(),fU=function(n){const e=(0,P.dS)(n),t=new P.gQ;t.update(e);const r=t.digest();return P.US.encodeByteArray(r)},uC=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=uC.apply(null,r):e+="object"==typeof r?(0,P.Wl)(r):r,e+=" "}return e};let qp=null,pU=!0;const gU=function(n,e){(0,P.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Q_.logLevel=Ao.in.VERBOSE,qp=Q_.log.bind(Q_),e&&f1.set("logging_enabled",!0)):"function"==typeof n?qp=n:(qp=null,f1.remove("logging_enabled"))},Si=function(...n){if(!0===pU&&(pU=!1,null===qp&&!0===f1.get("logging_enabled")&&gU(!0)),qp){const e=uC.apply(null,n);qp(e)}},lC=function(n){return function(...e){Si(n,...e)}},p1=function(...n){const e="FIREBASE INTERNAL ERROR: "+uC(...n);Q_.error(e)},Nl=function(...n){const e=`FIREBASE FATAL ERROR: ${uC(...n)}`;throw Q_.error(e),new Error(e)},ss=function(...n){const e="FIREBASE WARNING: "+uC(...n);Q_.warn(e)},NT=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},jh="[MIN_NAME]",sd="[MAX_NAME]",Zp=function(n,e){if(n===e)return 0;if(n===jh||e===sd)return-1;if(e===jh||n===sd)return 1;{const t=yU(n),r=yU(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},x3=function(n,e){return n===e?0:n<e?-1:1},cC=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,P.Wl)(e))},g1=function(n){if("object"!=typeof n||null===n)return(0,P.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,P.Wl)(e[r]),t+=":",t+=g1(n[e[r]]);return t+="}",t},mU=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Ai(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const _U=function(n){(0,P.hu)(!NT(n),"Invalid JSON number");const r=1023;let i,a,l,h,_;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=h+r,l=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const w=[];for(_=52;_;_-=1)w.push(l%2?1:0),l=Math.floor(l/2);for(_=11;_;_-=1)w.push(a%2?1:0),a=Math.floor(a/2);w.push(i?1:0),w.reverse();const D=w.join("");let S="";for(_=0;_<64;_+=8){let R=parseInt(D.substr(_,8),2).toString(16);1===R.length&&(R="0"+R),S+=R}return S.toLowerCase()},k3=new RegExp("^-?(0*)\\d{1,10}$"),yU=function(n){if(k3.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},J_=function(n){try{n()}catch(e){setTimeout(()=>{throw ss("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},dC=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class L3{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ss(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class V3{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Si("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ss(e)}}let hC=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const bU=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,TU="websocket",SU="long_polling";class _1{constructor(e,t,r,i,a=!1,l="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Wp.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Wp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function AU(n,e,t){let r;if((0,P.hu)("string"==typeof e,"typeof type must == string"),(0,P.hu)("object"==typeof t,"typeof params must == object"),e===TU)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==SU)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function U3(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Ai(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class B3{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,P.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,P.p$)(this.counters_)}}const y1={},v1={};function w1(n){const e=n.toString();return y1[e]||(y1[e]=new B3),y1[e]}class H3{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&J_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Hh{constructor(e,t,r,i,a,l,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=lC(e),this.stats_=w1(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),AU(t,SU,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new H3(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,P.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new C1((...a)=>{const[l,h,_,w,D]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=h,this.password=_;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&bU.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Hh.forceAllow_=!0}static forceDisallow(){Hh.forceDisallow_=!0}static isAvailable(){return!((0,P.Yr)()||!Hh.forceAllow_&&(Hh.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,P.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,P.h$)(t),i=mU(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,P.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,P.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class C1{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,P.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=hU(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=C1.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){Si("frame writing exception"),h.stack&&Si(h.stack),Si(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Si("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,P.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Si("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let PT=null;typeof MozWebSocket<"u"?PT=MozWebSocket:typeof WebSocket<"u"&&(PT=WebSocket);let X_=(()=>{class n{constructor(t,r,i,a,l,h,_){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=lC(this.connId),this.stats_=w1(r),this.connURL=n.connectionURL_(r,h,_,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const h={v:"5"};return!(0,P.Yr)()&&typeof location<"u"&&location.hostname&&bU.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),a&&(h.ac=a),l&&(h.p=l),AU(t,TU,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Wp.set("previous_websocket_failure",!0);try{let i;if((0,P.Yr)()){i={headers:{"User-Agent":`Firebase/5/${h1}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,h=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new PT(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==PT&&!n.forceDisallow_}static previouslyFailed(){return Wp.isInMemoryStorage||!0===Wp.get("previous_websocket_failure")}markConnectionHealthy(){Wp.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,P.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,P.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,P.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=mU(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),OU=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Hh,X_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=X_&&X_.isAvailable();let i=r&&!X_.previouslyFailed();if(t.webSocketOnly&&(r||ss("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[X_];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class HU{constructor(e,t,r,i,a,l,h,_,w,D){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=_,this.onKill_=w,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=lC("c:"+this.id+":"),this.transportManager_=new OU(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=dC(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=cC("t",e),r=cC("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=cC("t",e),r=cC("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=cC("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?p1("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):p1("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&ss("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),dC(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):dC(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Wp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class $U{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class GU{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,P.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,P.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class OT extends GU{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,P.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new OT}getInitialEvent(e){return(0,P.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Dn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function yn(){return new Dn("")}function Zt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function $h(n){return n.pieces_.length-n.pieceNum_}function Bn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Dn(n.pieces_,e)}function b1(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function fC(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function qU(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Dn(e,0)}function pr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Dn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Dn(t,0)}function Kt(n){return n.pieceNum_>=n.pieces_.length}function As(n,e){const t=Zt(n),r=Zt(e);if(null===t)return e;if(t===r)return As(Bn(n),Bn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function c6(n,e){const t=fC(n,0),r=fC(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=Zp(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function I1(n,e){if($h(n)!==$h(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Ca(n,e){let t=n.pieceNum_,r=e.pieceNum_;if($h(n)>$h(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class d6{constructor(e,t){this.errorPrefix_=t,this.parts_=fC(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,P.ug)(this.parts_[r]);ZU(this)}}function ZU(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Kp(n))}function Kp(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class D1 extends GU{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new D1}getInitialEvent(e){return(0,P.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const pC=1e3;let LT,Yp=(()=>{class n extends $U{constructor(t,r,i,a,l,h,_,w){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=_,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=lC("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=pC,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,P.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");D1.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&OT.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,P.Wl)(l)),(0,P.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new P.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:h=>{const _=h.d;"ok"===h.s?r.resolve(_):r.reject(_)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,P.hu)(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");const _={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(h).set(l,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,_=>{const w=_.d,D=_.s;n.warnOnListenWarnings_(w,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",_),"ok"!==D&&this.removeListen_(i,a),t.onComplete&&t.onComplete(D,w))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,P.r3)(t,"w")){const i=(0,P.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();ss(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,P.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,P.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,h=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const h={p:r,d:i};void 0!==l&&(h.h=l),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,P.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):p1("Unrecognized action received from server: "+(0,P.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,P.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=pC,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=pC,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=pC),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,_e.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let _=!1,w=null;const D=function(){w?w.close():(_=!0,a())};t.realtime_={close:D,sendRequest:function(V){(0,P.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(V)}};const R=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[V,j]=yield Promise.all([t.authTokenProvider_.getToken(R),t.appCheckTokenProvider_.getToken(R)]);_?Si("getToken() completed but was canceled"):(Si("getToken() completed. Creating connection."),t.authToken_=V&&V.accessToken,t.appCheckToken_=j&&j.token,w=new HU(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,ae=>{ss(ae+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(V){t.log_("Failed to get token: "+V),_||(t.repoInfo_.nodeAdmin&&ss(V),D())}}})()}interrupt(t){Si("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Si("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,P.xb)(this.interruptReasons_)&&(this.reconnectDelay_=pC,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>g1(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Dn(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Si("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Si("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,P.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+h1.replace(/\./g,"-")]=1,(0,P.uI)()?t["framework.cordova"]=1:(0,P.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=OT.getInstance().currentlyOnline();return(0,P.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Xt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Xt(e,t)}}class FT{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Xt(jh,e),i=new Xt(jh,t);return 0!==this.compare(r,i)}minPost(){return Xt.MIN}}class QU extends FT{static get __EMPTY_NODE(){return LT}static set __EMPTY_NODE(e){LT=e}compare(e,t){return Zp(e.name,t.name)}isDefinedOn(e){throw(0,P.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Xt.MIN}maxPost(){return new Xt(sd,LT)}makePost(e,t){return(0,P.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Xt(e,LT)}toString(){return".key"}}const kl=new QU;class VT{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let S1,yu=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??to.EMPTY_NODE,this.right=l??to.EMPTY_NODE}copy(t,r,i,a,l){return new n(t??this.key,r??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return to.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return to.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class to{constructor(e,t=to.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new to(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,yu.BLACK,null,null))}remove(e){return new to(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,yu.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new VT(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new VT(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new VT(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new VT(this.root_,null,this.comparator_,!0,e)}}function v6(n,e){return Zp(n.name,e.name)}function T1(n,e){return Zp(n,e)}to.EMPTY_NODE=new class y6{copy(e,t,r,i,a){return this}insert(e,t,r){return new yu(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const JU=function(n){return"number"==typeof n?"number:"+_U(n):"string:"+n},XU=function(n){if(n.isLeafNode()){const e=n.val();(0,P.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,P.r3)(e,".sv"),"Priority must be a string or number.")}else(0,P.hu)(n===S1||n.isEmpty(),"priority of unexpected type.");(0,P.hu)(n===S1||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let e2,t2,n2,ey=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,P.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),XU(this.priorityNode_)}static set __childrenNodeConstructor(t){e2=t}static get __childrenNodeConstructor(){return e2}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Kt(t)?this:".priority"===Zt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Zt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,P.hu)(".priority"!==i||1===$h(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Bn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+JU(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?_U(this.value_):this.value_,this.lazyHash_=fU(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,P.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,P.hu)(a>=0,"Unknown leaf type: "+r),(0,P.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const zn=new class b6 extends FT{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Zp(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Xt.MIN}maxPost(){return new Xt(sd,new ey("[PRIORITY-POST]",n2))}makePost(e,t){const r=t2(e);return new Xt(t,new ey("[PRIORITY-POST]",r))}toString(){return".priority"}},I6=Math.log(2);class D6{constructor(e){this.count=parseInt(Math.log(e+1)/I6,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const UT=function(n,e,t,r){n.sort(e);const i=function(_,w){const D=w-_;let S,R;if(0===D)return null;if(1===D)return S=n[_],R=t?t(S):S,new yu(R,S.node,yu.BLACK,null,null);{const V=parseInt(D/2,10)+_,j=i(_,V),ae=i(V+1,w);return S=n[V],R=t?t(S):S,new yu(R,S.node,yu.BLACK,j,ae)}},h=function(_){let w=null,D=null,S=n.length;const R=function(j,ae){const ve=S-j,qe=S;S-=j;const lt=i(ve+1,qe),rt=n[ve],ct=t?t(rt):rt;V(new yu(ct,rt.node,ae,null,lt))},V=function(j){w?(w.left=j,w=j):(D=j,w=j)};for(let j=0;j<_.count;++j){const ae=_.nextBitIsOne(),ve=Math.pow(2,_.count-(j+1));ae?R(ve,yu.BLACK):(R(ve,yu.BLACK),R(ve,yu.RED))}return D}(new D6(n.length));return new to(r||e,h)};let A1;const ty={};class od{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,P.hu)(ty&&zn,"ChildrenNode.ts has not been loaded"),A1=A1||new od({".priority":ty},{".priority":zn}),A1}get(e){const t=(0,P.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof to?t:null}hasIndex(e){return(0,P.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,P.hu)(e!==kl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(Xt.Wrap);let h,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();h=i?UT(r,e.getCompare()):ty;const _=e.toString(),w=Object.assign({},this.indexSet_);w[_]=e;const D=Object.assign({},this.indexes_);return D[_]=h,new od(D,w)}addToIndexes(e,t){const r=(0,P.UI)(this.indexes_,(i,a)=>{const l=(0,P.DV)(this.indexSet_,a);if((0,P.hu)(l,"Missing index implementation for "+a),i===ty){if(l.isDefinedOn(e.node)){const h=[],_=t.getIterator(Xt.Wrap);let w=_.getNext();for(;w;)w.name!==e.name&&h.push(w),w=_.getNext();return h.push(e),UT(h,l.getCompare())}return ty}{const h=t.get(e.name);let _=i;return h&&(_=_.remove(new Xt(e.name,h))),_.insert(e,e.node)}});return new od(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,P.UI)(this.indexes_,i=>{if(i===ty)return i;{const a=t.get(e.name);return a?i.remove(new Xt(e.name,a)):i}});return new od(r,this.indexSet_)}}let gC,Ht=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&XU(this.priorityNode_),this.children_.isEmpty()&&(0,P.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return gC||(gC=new n(new to(T1),null,od.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||gC}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?gC:r}}getChild(t){const r=Zt(t);return null===r?this:this.getImmediateChild(r).getChild(Bn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,P.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Xt(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const h=a.isEmpty()?gC:this.priorityNode_;return new n(a,h,l)}}updateChild(t,r){const i=Zt(t);if(null===i)return r;{(0,P.hu)(".priority"!==Zt(t)||1===$h(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Bn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(zn,(h,_)=>{r[h]=_.val(t),i++,l&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):l=!1}),!t&&l&&a<2*i){const h=[];for(const _ in r)h[_]=r[_];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+JU(this.getPriority().val())+":"),this.forEachChild(zn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":fU(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new Xt(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Xt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Xt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,Xt.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,Xt.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===mC?-1:0}withIndex(t){if(t===kl||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===kl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(zn),a=r.getIterator(zn);let l=i.getNext(),h=a.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=i.getNext(),h=a.getNext()}return null===l&&null===h}return!1}return!1}}resolveIndex_(t){return t===kl?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const mC=new class T6 extends Ht{constructor(){super(new to(T1),Ht.EMPTY_NODE,od.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ht.EMPTY_NODE}isEmpty(){return!1}};function br(n,e=null){if(null===n)return Ht.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,P.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new ey(n,br(e));if(n instanceof Array){let t=Ht.EMPTY_NODE;return Ai(n,(r,i)=>{if((0,P.r3)(n,r)&&"."!==r.substring(0,1)){const a=br(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(br(e))}{const t=[];let r=!1;if(Ai(n,(l,h)=>{if("."!==l.substring(0,1)){const _=br(h);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),t.push(new Xt(l,_)))}}),0===t.length)return Ht.EMPTY_NODE;const a=UT(t,v6,l=>l.name,T1);if(r){const l=UT(t,zn.getCompare());return new Ht(a,br(e),new od({".priority":l},{".priority":zn}))}return new Ht(a,br(e),od.Default)}}Object.defineProperties(Xt,{MIN:{value:new Xt(jh,Ht.EMPTY_NODE)},MAX:{value:new Xt(sd,mC)}}),QU.__EMPTY_NODE=Ht.EMPTY_NODE,ey.__childrenNodeConstructor=Ht,function w6(n){S1=n}(mC),function E6(n){n2=n}(mC),function C6(n){t2=n}(br);class x1 extends FT{constructor(e){super(),this.indexPath_=e,(0,P.hu)(!Kt(e)&&".priority"!==Zt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Zp(e.name,t.name):a}makePost(e,t){const r=br(e),i=Ht.EMPTY_NODE.updateChild(this.indexPath_,r);return new Xt(t,i)}maxPost(){const e=Ht.EMPTY_NODE.updateChild(this.indexPath_,mC);return new Xt(sd,e)}toString(){return fC(this.indexPath_,0).join("/")}}const M1=new class A6 extends FT{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Zp(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Xt.MIN}maxPost(){return Xt.MAX}makePost(e,t){const r=br(e);return new Xt(t,r)}toString(){return".value"}};function r2(n){return{type:"value",snapshotNode:n}}function ny(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function _C(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function yC(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class R1{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,P.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(_C(t,h)):(0,P.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?l.trackChildChange(ny(t,r)):l.trackChildChange(yC(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(zn,(i,a)=>{t.hasChild(i)||r.trackChildChange(_C(i,a))}),t.isLeafNode()||t.forEachChild(zn,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(yC(i,a,l))}else r.trackChildChange(ny(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Ht.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class vC{constructor(e){this.indexedFilter_=new R1(e.getIndex()),this.index_=e.getIndex(),this.startPost_=vC.getStartPost_(e),this.endPost_=vC.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,a,l){return this.matches(new Xt(t,r))||(r=Ht.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Ht.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Ht.EMPTY_NODE);const a=this;return t.forEachChild(zn,(l,h)=>{a.matches(new Xt(l,h))||(i=i.updateImmediateChild(l,Ht.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class M6{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new vC(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new Xt(t,r))||(r=Ht.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Ht.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Ht.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const h=a.getNext();if(this.withinDirectionalStart(h)){if(!this.withinDirectionalEnd(h))break;i=i.updateImmediateChild(h.name,h.node),l++}}}else{let a;i=t.withIndex(this.index_),i=i.updatePriority(Ht.EMPTY_NODE),a=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let l=0;for(;a.hasNext();){const h=a.getNext();l<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?l++:i=i.updateImmediateChild(h.name,Ht.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const S=this.index_.getCompare();l=(R,V)=>S(V,R)}else l=this.index_.getCompare();const h=e;(0,P.hu)(h.numChildren()===this.limit_,"");const _=new Xt(t,r),w=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),D=this.rangedFilter_.matches(_);if(h.hasChild(t)){const S=h.getImmediateChild(t);let R=i.getChildAfterChild(this.index_,w,this.reverse_);for(;null!=R&&(R.name===t||h.hasChild(R.name));)R=i.getChildAfterChild(this.index_,R,this.reverse_);const V=null==R?1:l(R,_);if(D&&!r.isEmpty()&&V>=0)return a?.trackChildChange(yC(t,r,S)),h.updateImmediateChild(t,r);{a?.trackChildChange(_C(t,S));const ae=h.updateImmediateChild(t,Ht.EMPTY_NODE);return null!=R&&this.rangedFilter_.matches(R)?(a?.trackChildChange(ny(R.name,R.node)),ae.updateImmediateChild(R.name,R.node)):ae}}return r.isEmpty()?e:D&&l(w,_)>=0?(null!=a&&(a.trackChildChange(_C(w.name,w.node)),a.trackChildChange(ny(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(w.name,Ht.EMPTY_NODE)):e}}class BT{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=zn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:jh}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:sd}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,P.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===zn}copy(){const e=new BT;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function N1(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function k1(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function jT(n,e){const t=n.copy();return t.index_=e,t}function i2(n){const e={};if(n.isDefault())return e;let t;if(n.index_===zn?t="$priority":n.index_===M1?t="$value":n.index_===kl?t="$key":((0,P.hu)(n.index_ instanceof x1,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,P.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,P.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,P.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,P.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,P.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function s2(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==zn&&(e.i=n.index_.toString()),e}class HT extends $U{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=lC("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,P.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=HT.getListenId_(e,r),h={};this.listens_[l]=h;const _=i2(e._queryParams);this.restRequest_(a+".json",_,(w,D)=>{let S=D;if(404===w&&(S=null,w=null),null===w&&this.onDataUpdate_(a,S,!1,r),(0,P.DV)(this.listens_,l)===h){let R;R=w?401===w?"permission_denied":"rest_error:"+w:"ok",i(R,null)}})}unlisten(e,t){const r=HT.getListenId_(e,t);delete this.listens_[r]}get(e){const t=i2(e._queryParams),r=e._path.toString(),i=new P.BH;return this.restRequest_(r+".json",t,(a,l)=>{let h=l;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,P.xO)(t);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let _=null;if(h.status>=200&&h.status<300){try{_=(0,P.cI)(h.responseText)}catch{ss("Failed to parse JSON response for "+l+": "+h.responseText)}r(null,_)}else 401!==h.status&&404!==h.status&&ss("Got unsuccessful REST response for "+l+" Status: "+h.status),r(h.status);r=null}},h.open("GET",l,!0),h.send()})}}class F6{constructor(){this.rootNode_=Ht.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function $T(){return{value:null,children:new Map}}function ry(n,e,t){if(Kt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Zt(e);n.children.has(r)||n.children.set(r,$T()),ry(n.children.get(r),e=Bn(e),t)}}function P1(n,e){if(Kt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(zn,(r,i)=>{ry(n,new Dn(r),i)}),P1(n,e)}}if(n.children.size>0){const t=Zt(e);return e=Bn(e),n.children.has(t)&&P1(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function O1(n,e,t){null!==n.value?t(e,n.value):function L6(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{O1(i,new Dn(e.toString()+"/"+r),t)})}class V6{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Ai(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class j6{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new V6(e);const r=1e4+2e4*Math.random();dC(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Ai(e,(i,a)=>{a>0&&(0,P.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),dC(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ea=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ea||(Ea={})),Ea))();function V1(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class GT{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Ea.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Kt(this.path)){if(null!=this.affectedTree.value)return(0,P.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Dn(e));return new GT(yn(),t,this.revert)}}return(0,P.hu)(Zt(this.path)===e,"operationForChild called for unrelated child."),new GT(Bn(this.path),this.affectedTree,this.revert)}}class wC{constructor(e,t){this.source=e,this.path=t,this.type=Ea.LISTEN_COMPLETE}operationForChild(e){return Kt(this.path)?new wC(this.source,yn()):new wC(this.source,Bn(this.path))}}class Qp{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Ea.OVERWRITE}operationForChild(e){return Kt(this.path)?new Qp(this.source,yn(),this.snap.getImmediateChild(e)):new Qp(this.source,Bn(this.path),this.snap)}}class iy{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Ea.MERGE}operationForChild(e){if(Kt(this.path)){const t=this.children.subtree(new Dn(e));return t.isEmpty()?null:t.value?new Qp(this.source,yn(),t.value):new iy(this.source,yn(),t)}return(0,P.hu)(Zt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new iy(this.source,Bn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Gh{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Kt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Zt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class H6{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function CC(n,e,t,r,i,a){const l=r.filter(h=>h.type===t);l.sort((h,_)=>function z6(n,e,t){if(null==e.childName||null==t.childName)throw(0,P.g5)("Should only compare child_ events.");const r=new Xt(e.childName,e.snapshotNode),i=new Xt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,_)),l.forEach(h=>{const _=function G6(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);i.forEach(w=>{w.respondsTo(h.type)&&e.push(w.createEvent(_,n.query_))})})}function zT(n,e){return{eventCache:n,serverCache:e}}function EC(n,e,t,r){return zT(new Gh(e,t,r),n.serverCache)}function a2(n,e,t,r){return zT(n.eventCache,new Gh(e,t,r))}function WT(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Jp(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let U1;class Wn{constructor(e,t=(()=>(U1||(U1=new to(x3)),U1))()){this.value=e,this.children=t}static fromObject(e){let t=new Wn(null);return Ai(e,(r,i)=>{t=t.set(new Dn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:yn(),value:this.value};if(Kt(e))return null;{const r=Zt(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Bn(e),t);return null!=a?{path:pr(new Dn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Kt(e))return this;{const t=Zt(e),r=this.children.get(t);return null!==r?r.subtree(Bn(e)):new Wn(null)}}set(e,t){if(Kt(e))return new Wn(t,this.children);{const r=Zt(e),a=(this.children.get(r)||new Wn(null)).set(Bn(e),t),l=this.children.insert(r,a);return new Wn(this.value,l)}}remove(e){if(Kt(e))return this.children.isEmpty()?new Wn(null):new Wn(null,this.children);{const t=Zt(e),r=this.children.get(t);if(r){const i=r.remove(Bn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Wn(null):new Wn(this.value,a)}return this}}get(e){if(Kt(e))return this.value;{const t=Zt(e),r=this.children.get(t);return r?r.get(Bn(e)):null}}setTree(e,t){if(Kt(e))return t;{const r=Zt(e),a=(this.children.get(r)||new Wn(null)).setTree(Bn(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Wn(this.value,l)}}fold(e){return this.fold_(yn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(pr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,yn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Kt(e))return null;{const a=Zt(e),l=this.children.get(a);return l?l.findOnPath_(Bn(e),pr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,yn(),t)}foreachOnPath_(e,t,r){if(Kt(e))return this;{this.value&&r(t,this.value);const i=Zt(e),a=this.children.get(i);return a?a.foreachOnPath_(Bn(e),pr(t,i),r):new Wn(null)}}foreach(e){this.foreach_(yn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(pr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class vu{constructor(e){this.writeTree_=e}static empty(){return new vu(new Wn(null))}}function bC(n,e,t){if(Kt(e))return new vu(new Wn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=As(i,e);return a=a.updateChild(l,t),new vu(n.writeTree_.set(i,a))}{const i=new Wn(t),a=n.writeTree_.setTree(e,i);return new vu(a)}}}function B1(n,e,t){let r=n;return Ai(t,(i,a)=>{r=bC(r,pr(e,i),a)}),r}function u2(n,e){if(Kt(e))return vu.empty();{const t=n.writeTree_.setTree(e,new Wn(null));return new vu(t)}}function j1(n,e){return null!=Xp(n,e)}function Xp(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(As(t.path,e)):null}function l2(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(zn,(r,i)=>{e.push(new Xt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Xt(r,i.value))}),e}function zh(n,e){if(Kt(e))return n;{const t=Xp(n,e);return new vu(null!=t?new Wn(t):n.writeTree_.subtree(e))}}function H1(n){return n.writeTree_.isEmpty()}function sy(n,e){return c2(yn(),n.writeTree_,e)}function c2(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,P.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=c2(pr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(pr(n,".priority"),r)),t}}function qT(n,e){return g2(e,n)}function Q6(n,e){if(n.snap)return Ca(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Ca(pr(n.path,t),e))return!0;return!1}function X6(n){return n.visible}function d2(n,e,t){let r=vu.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let h;if(a.snap)Ca(t,l)?(h=As(t,l),r=bC(r,h,a.snap)):Ca(l,t)&&(h=As(l,t),r=bC(r,yn(),a.snap.getChild(h)));else{if(!a.children)throw(0,P.g5)("WriteRecord should have .snap or .children");if(Ca(t,l))h=As(t,l),r=B1(r,h,a.children);else if(Ca(l,t))if(h=As(l,t),Kt(h))r=B1(r,yn(),a.children);else{const _=(0,P.DV)(a.children,Zt(h));if(_){const w=_.getChild(Bn(h));r=bC(r,yn(),w)}}}}}return r}function h2(n,e,t,r,i){if(r||i){const a=zh(n.visibleWrites,e);return!i&&H1(a)?t:i||null!=t||j1(a,yn())?sy(d2(n.allWrites,function(w){return(w.visible||i)&&(!r||!~r.indexOf(w.writeId))&&(Ca(w.path,e)||Ca(e,w.path))},e),t||Ht.EMPTY_NODE):null}{const a=Xp(n.visibleWrites,e);if(null!=a)return a;{const l=zh(n.visibleWrites,e);return H1(l)?t:null!=t||j1(l,yn())?sy(l,t||Ht.EMPTY_NODE):null}}}function ZT(n,e,t,r){return h2(n.writeTree,n.treePath,e,t,r)}function $1(n,e){return function ez(n,e,t){let r=Ht.EMPTY_NODE;const i=Xp(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(zn,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=zh(n.visibleWrites,e);return t.forEachChild(zn,(l,h)=>{const _=sy(zh(a,new Dn(l)),h);r=r.updateImmediateChild(l,_)}),l2(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return l2(zh(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function f2(n,e,t,r){return function tz(n,e,t,r,i){(0,P.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=pr(e,t);if(j1(n.visibleWrites,a))return null;{const l=zh(n.visibleWrites,a);return H1(l)?i.getChild(t):sy(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function KT(n,e){return function rz(n,e){return Xp(n.visibleWrites,e)}(n.writeTree,pr(n.treePath,e))}function G1(n,e,t){return function nz(n,e,t,r){const i=pr(e,t),a=Xp(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?sy(zh(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function p2(n,e){return g2(pr(n.treePath,e),n.writeTree)}function g2(n,e){return{treePath:n,writeTree:e}}class az{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,P.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,P.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,yC(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,_C(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,ny(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,P.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,yC(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const m2=new class uz{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class z1{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Gh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return G1(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Jp(this.viewCache_),a=function oz(n,e,t,r,i,a){return function iz(n,e,t,r,i,a,l){let h;const _=zh(n.visibleWrites,e),w=Xp(_,yn());if(null!=w)h=w;else{if(null==t)return[];h=sy(_,t)}if(h=h.withIndex(l),h.isEmpty()||h.isLeafNode())return[];{const D=[],S=l.getCompare(),R=a?h.getReverseIteratorFrom(r,l):h.getIteratorFrom(r,l);let V=R.getNext();for(;V&&D.length<i;)0!==S(V,r)&&D.push(V),V=R.getNext();return D}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function _2(n,e,t,r,i,a){const l=e.eventCache;if(null!=KT(r,t))return e;{let h,_;if(Kt(t))if((0,P.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=Jp(e),S=$1(r,w instanceof Ht?w:Ht.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const w=ZT(r,Jp(e));h=n.filter.updateFullNode(e.eventCache.getNode(),w,a)}else{const w=Zt(t);if(".priority"===w){(0,P.hu)(1===$h(t),"Can't have a priority with additional path components");const D=l.getNode();_=e.serverCache.getNode();const S=f2(r,t,D,_);h=null!=S?n.filter.updatePriority(D,S):l.getNode()}else{const D=Bn(t);let S;if(l.isCompleteForChild(w)){_=e.serverCache.getNode();const R=f2(r,t,l.getNode(),_);S=null!=R?l.getNode().getImmediateChild(w).updateChild(D,R):l.getNode().getImmediateChild(w)}else S=G1(r,w,e.serverCache);h=null!=S?n.filter.updateChild(l.getNode(),w,S,D,i,a):l.getNode()}}return EC(e,h,l.isFullyInitialized()||Kt(t),n.filter.filtersNodes())}}function YT(n,e,t,r,i,a,l,h){const _=e.serverCache;let w;const D=l?n.filter:n.filter.getIndexedFilter();if(Kt(t))w=D.updateFullNode(_.getNode(),r,null);else if(D.filtersNodes()&&!_.isFiltered()){const V=_.getNode().updateChild(t,r);w=D.updateFullNode(_.getNode(),V,null)}else{const V=Zt(t);if(!_.isCompleteForPath(t)&&$h(t)>1)return e;const j=Bn(t),ve=_.getNode().getImmediateChild(V).updateChild(j,r);w=".priority"===V?D.updatePriority(_.getNode(),ve):D.updateChild(_.getNode(),V,ve,j,m2,null)}const S=a2(e,w,_.isFullyInitialized()||Kt(t),D.filtersNodes());return _2(n,S,t,i,new z1(i,S,a),h)}function W1(n,e,t,r,i,a,l){const h=e.eventCache;let _,w;const D=new z1(i,e,a);if(Kt(t))w=n.filter.updateFullNode(e.eventCache.getNode(),r,l),_=EC(e,w,!0,n.filter.filtersNodes());else{const S=Zt(t);if(".priority"===S)w=n.filter.updatePriority(e.eventCache.getNode(),r),_=EC(e,w,h.isFullyInitialized(),h.isFiltered());else{const R=Bn(t),V=h.getNode().getImmediateChild(S);let j;if(Kt(R))j=r;else{const ae=D.getCompleteChild(S);j=null!=ae?".priority"===b1(R)&&ae.getChild(qU(R)).isEmpty()?ae:ae.updateChild(R,r):Ht.EMPTY_NODE}_=V.equals(j)?e:EC(e,n.filter.updateChild(h.getNode(),S,j,R,D,l),h.isFullyInitialized(),n.filter.filtersNodes())}}return _}function y2(n,e){return n.eventCache.isCompleteForChild(e)}function v2(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function q1(n,e,t,r,i,a,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w,_=e;w=Kt(t)?r:new Wn(null).setTree(t,r);const D=e.serverCache.getNode();return w.children.inorderTraversal((S,R)=>{if(D.hasChild(S)){const j=v2(0,e.serverCache.getNode().getImmediateChild(S),R);_=YT(n,_,new Dn(S),j,i,a,l,h)}}),w.children.inorderTraversal((S,R)=>{const V=!e.serverCache.isCompleteForChild(S)&&null===R.value;if(!D.hasChild(S)&&!V){const ae=v2(0,e.serverCache.getNode().getImmediateChild(S),R);_=YT(n,_,new Dn(S),ae,i,a,l,h)}}),_}class _z{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new R1(r.getIndex()),a=function R6(n){return n.loadsAllData()?new R1(n.getIndex()):n.hasLimit()?new M6(n):new vC(n)}(r);this.processor_=function lz(n){return{filter:n}}(a);const l=t.serverCache,h=t.eventCache,_=i.updateFullNode(Ht.EMPTY_NODE,l.getNode(),null),w=a.updateFullNode(Ht.EMPTY_NODE,h.getNode(),null),D=new Gh(_,l.isFullyInitialized(),i.filtersNodes()),S=new Gh(w,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=zT(S,D),this.eventGenerator_=new H6(this.query_)}get query(){return this.query_}}function wz(n,e){const t=Jp(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Kt(e)&&!t.getImmediateChild(Zt(e)).isEmpty())?t.getChild(e):null}function w2(n){return 0===n.eventRegistrations_.length}function C2(n,e,t){const r=[];if(t){(0,P.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function E2(n,e,t,r){e.type===Ea.MERGE&&null!==e.source.queryId&&((0,P.hu)(Jp(n.viewCache_),"We should always have a full cache before handling merges"),(0,P.hu)(WT(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function dz(n,e,t,r,i){const a=new az;let l,h;if(t.type===Ea.OVERWRITE){const w=t;w.source.fromUser?l=W1(n,e,w.path,w.snap,r,i,a):((0,P.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered()&&!Kt(w.path),l=YT(n,e,w.path,w.snap,r,i,h,a))}else if(t.type===Ea.MERGE){const w=t;w.source.fromUser?l=function fz(n,e,t,r,i,a,l){let h=e;return r.foreach((_,w)=>{const D=pr(t,_);y2(e,Zt(D))&&(h=W1(n,h,D,w,i,a,l))}),r.foreach((_,w)=>{const D=pr(t,_);y2(e,Zt(D))||(h=W1(n,h,D,w,i,a,l))}),h}(n,e,w.path,w.children,r,i,a):((0,P.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered(),l=q1(n,e,w.path,w.children,r,i,h,a))}else if(t.type===Ea.ACK_USER_WRITE){const w=t;l=w.revert?function mz(n,e,t,r,i,a){let l;if(null!=KT(r,t))return e;{const h=new z1(r,e,i),_=e.eventCache.getNode();let w;if(Kt(t)||".priority"===Zt(t)){let D;if(e.serverCache.isFullyInitialized())D=ZT(r,Jp(e));else{const S=e.serverCache.getNode();(0,P.hu)(S instanceof Ht,"serverChildren would be complete if leaf node"),D=$1(r,S)}w=n.filter.updateFullNode(_,D,a)}else{const D=Zt(t);let S=G1(r,D,e.serverCache);null==S&&e.serverCache.isCompleteForChild(D)&&(S=_.getImmediateChild(D)),w=null!=S?n.filter.updateChild(_,D,S,Bn(t),h,a):e.eventCache.getNode().hasChild(D)?n.filter.updateChild(_,D,Ht.EMPTY_NODE,Bn(t),h,a):_,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=ZT(r,Jp(e)),l.isLeafNode()&&(w=n.filter.updateFullNode(w,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=KT(r,yn()),EC(e,w,l,n.filter.filtersNodes())}}(n,e,w.path,r,i,a):function pz(n,e,t,r,i,a,l){if(null!=KT(i,t))return e;const h=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(Kt(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return YT(n,e,t,_.getNode().getChild(t),i,a,h,l);if(Kt(t)){let w=new Wn(null);return _.getNode().forEachChild(kl,(D,S)=>{w=w.set(new Dn(D),S)}),q1(n,e,t,w,i,a,h,l)}return e}{let w=new Wn(null);return r.foreach((D,S)=>{const R=pr(t,D);_.isCompleteForPath(R)&&(w=w.set(D,_.getNode().getChild(R)))}),q1(n,e,t,w,i,a,h,l)}}(n,e,w.path,w.affectedTree,r,i,a)}else{if(t.type!==Ea.LISTEN_COMPLETE)throw(0,P.g5)("Unknown operation type: "+t.type);l=function gz(n,e,t,r,i){const a=e.serverCache;return _2(n,a2(e,a.getNode(),a.isFullyInitialized()||Kt(t),a.isFiltered()),t,r,m2,i)}(n,e,t.path,r,a)}const _=a.getChanges();return function hz(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=WT(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(r2(WT(e)))}}(e,l,_),{viewCache:l,changes:_}}(n.processor_,i,e,t,r);return function cz(n,e){(0,P.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,P.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,P.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,b2(n,a.changes,a.viewCache.eventCache.getNode(),null)}function b2(n,e,t,r){return function $6(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function x6(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),CC(n,i,"child_removed",e,r,t),CC(n,i,"child_added",e,r,t),CC(n,i,"child_moved",a,r,t),CC(n,i,"child_changed",e,r,t),CC(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let QT,XT;class I2{constructor(){this.views=new Map}}function Z1(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,P.hu)(null!=a,"SyncTree gave us an op for an invalid query."),E2(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(E2(l,e,t,r));return a}}function D2(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let h=ZT(t,i?r:null),_=!1;h?_=!0:r instanceof Ht?(h=$1(t,r),_=!1):(h=Ht.EMPTY_NODE,_=!1);const w=zT(new Gh(h,_,!1),new Gh(r,i,!1));return new _z(e,w)}return l}function T2(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Wh(n,e){let t=null;for(const r of n.views.values())t=t||wz(r,e);return t}function S2(n,e){return e._queryParams.loadsAllData()?JT(n):n.views.get(e._queryIdentifier)}function A2(n,e){return null!=S2(n,e)}function qh(n){return null!=JT(n)}function JT(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let Mz=1;class x2{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Wn(null),this.pendingWriteTree_=function sz(){return{visibleWrites:vu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function K1(n,e,t,r,i){return function q6(n,e,t,r,i){(0,P.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=bC(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?oy(n,new Qp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Zh(n,e,t=!1){const r=function K6(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function Y6(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,P.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const h=n.allWrites[l];h.visible&&(l>=t&&Q6(h,r.path)?i=!1:Ca(r.path,h.path)&&(a=!0)),l--}return!!i&&(a?(function J6(n){n.visibleWrites=d2(n.allWrites,X6,yn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=u2(n.visibleWrites,r.path):Ai(r.children,_=>{n.visibleWrites=u2(n.visibleWrites,pr(r.path,_))}),!0))}(n.pendingWriteTree_,e)){let a=new Wn(null);return null!=r.snap?a=a.set(yn(),!0):Ai(r.children,l=>{a=a.set(new Dn(l),!0)}),oy(n,new GT(r.path,a,t))}return[]}function IC(n,e,t){return oy(n,new Qp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function eS(n,e,t,r,i=!1){const a=e._path,l=n.syncPointTree_.get(a);let h=[];if(l&&("default"===e._queryIdentifier||A2(l,e))){const _=function Sz(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const h=qh(n);if("default"===i)for(const[_,w]of n.views.entries())l=l.concat(C2(w,t,r)),w2(w)&&(n.views.delete(_),w.query._queryParams.loadsAllData()||a.push(w.query));else{const _=n.views.get(i);_&&(l=l.concat(C2(_,t,r)),w2(_)&&(n.views.delete(i),_.query._queryParams.loadsAllData()||a.push(_.query)))}return h&&!qh(n)&&a.push(new(function Iz(){return(0,P.hu)(QT,"Reference.ts has not been loaded"),QT}())(e._repo,e._path)),{removed:a,events:l}}(l,e,t,r);(function Dz(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const w=_.removed;if(h=_.events,!i){const D=-1!==w.findIndex(R=>R._queryParams.loadsAllData()),S=n.syncPointTree_.findOnPath(a,(R,V)=>qh(V));if(D&&!S){const R=n.syncPointTree_.subtree(a);if(!R.isEmpty()){const V=function Lz(n){return n.fold((e,t,r)=>{if(t&&qh(t))return[JT(t)];{let i=[];return t&&(i=T2(t)),Ai(r,(a,l)=>{i=i.concat(l)}),i}})}(R);for(let j=0;j<V.length;++j){const ae=V[j],ve=ae.query,qe=k2(n,ae);n.listenProvider_.startListening(TC(ve),DC(n,ve),qe.hashFn,qe.onComplete)}}}!S&&w.length>0&&!r&&(D?n.listenProvider_.stopListening(TC(e),null):w.forEach(R=>{const V=n.queryToTagMap.get(nS(R));n.listenProvider_.stopListening(TC(R),V)}))}!function Vz(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=nS(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,w)}return h}function M2(n,e,t,r){const i=Q1(n,r);if(null!=i){const a=J1(i),l=a.path,h=a.queryId,_=As(l,e);return X1(n,l,new Qp(V1(h),_,t))}return[]}function Y1(n,e,t,r=!1){const i=e._path;let a=null,l=!1;n.syncPointTree_.foreachOnPath(i,(R,V)=>{const j=As(R,i);a=a||Wh(V,j),l=l||qh(V)});let _,h=n.syncPointTree_.get(i);h?(l=l||qh(h),a=a||Wh(h,yn())):(h=new I2,n.syncPointTree_=n.syncPointTree_.set(i,h)),null!=a?_=!0:(_=!1,a=Ht.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((V,j)=>{const ae=Wh(j,yn());ae&&(a=a.updateImmediateChild(V,ae))}));const w=A2(h,e);if(!w&&!e._queryParams.loadsAllData()){const R=nS(e);(0,P.hu)(!n.queryToTagMap.has(R),"View does not exist, but we have a tag");const V=function Uz(){return Mz++}();n.queryToTagMap.set(R,V),n.tagToQueryMap.set(V,R)}let S=function Tz(n,e,t,r,i,a){const l=D2(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function Cz(n,e){n.eventRegistrations_.push(e)}(l,t),function Ez(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(zn,(a,l)=>{r.push(ny(a,l))}),t.isFullyInitialized()&&r.push(r2(t.getNode())),b2(n,r,t.getNode(),e)}(l,t)}(h,e,t,qT(n.pendingWriteTree_,i),a,_);if(!w&&!l&&!r){const R=S2(h,e);S=S.concat(function Bz(n,e,t){const r=e._path,i=DC(n,e),a=k2(n,t),l=n.listenProvider_.startListening(TC(e),i,a.hashFn,a.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,P.hu)(!qh(h.value),"If we're adding a query, it shouldn't be shadowed");else{const _=h.fold((w,D,S)=>{if(!Kt(w)&&D&&qh(D))return[JT(D).query];{let R=[];return D&&(R=R.concat(T2(D).map(V=>V.query))),Ai(S,(V,j)=>{R=R.concat(j)}),R}});for(let w=0;w<_.length;++w){const D=_[w];n.listenProvider_.stopListening(TC(D),DC(n,D))}}return l}(n,e,R))}return S}function tS(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,h)=>{const w=Wh(h,As(l,e));if(w)return w});return h2(i,e,a,t,!0)}function oy(n,e){return R2(e,n.syncPointTree_,null,qT(n.pendingWriteTree_,yn()))}function R2(n,e,t,r){if(Kt(n.path))return N2(n,e,t,r);{const i=e.get(yn());null==t&&null!=i&&(t=Wh(i,yn()));let a=[];const l=Zt(n.path),h=n.operationForChild(l),_=e.children.get(l);if(_&&h){const w=t?t.getImmediateChild(l):null,D=p2(r,l);a=a.concat(R2(h,_,w,D))}return i&&(a=a.concat(Z1(i,n,r,t))),a}}function N2(n,e,t,r){const i=e.get(yn());null==t&&null!=i&&(t=Wh(i,yn()));let a=[];return e.children.inorderTraversal((l,h)=>{const _=t?t.getImmediateChild(l):null,w=p2(r,l),D=n.operationForChild(l);D&&(a=a.concat(N2(D,h,_,w)))}),i&&(a=a.concat(Z1(i,n,r,t))),a}function k2(n,e){const t=e.query,r=DC(n,t);return{hashFn:()=>(function yz(n){return n.viewCache_.serverCache.getNode()}(e)||Ht.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function Pz(n,e,t){const r=Q1(n,t);if(r){const i=J1(r),a=i.path,l=i.queryId,h=As(a,e);return X1(n,a,new wC(V1(l),h))}return[]}(n,t._path,r):function kz(n,e){return oy(n,new wC({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function N3(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return eS(n,t,null,a)}}}}function DC(n,e){const t=nS(e);return n.queryToTagMap.get(t)}function nS(n){return n._path.toString()+"$"+n._queryIdentifier}function Q1(n,e){return n.tagToQueryMap.get(e)}function J1(n){const e=n.indexOf("$");return(0,P.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Dn(n.substr(0,e))}}function X1(n,e,t){const r=n.syncPointTree_.get(e);return(0,P.hu)(r,"Missing sync point for query tag that we're tracking"),Z1(r,t,qT(n.pendingWriteTree_,e),null)}function TC(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function xz(){return(0,P.hu)(XT,"Reference.ts has not been loaded"),XT}())(n._repo,n._path):n}class ek{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new ek(t)}node(){return this.node_}}class tk{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=pr(this.path_,e);return new tk(this.syncTree_,t)}node(){return tS(this.syncTree_,this.path_)}}const P2=function(n,e,t){return n&&"object"==typeof n?((0,P.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Hz(n[".sv"],e,t):"object"==typeof n[".sv"]?$z(n[".sv"],e):void(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Hz=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,P.hu)(!1,"Unexpected server value: "+n)},$z=function(n,e,t){n.hasOwnProperty("increment")||(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,P.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,P.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},O2=function(n,e,t,r){return rk(e,new tk(t,n),r)},nk=function(n,e,t){return rk(n,new ek(e),t)};function rk(n,e,t){const r=n.getPriority().val(),i=P2(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,h=P2(l.getValue(),e,t);return h!==l.getValue()||i!==l.getPriority().val()?new ey(h,br(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new ey(i))),l.forEachChild(zn,(h,_)=>{const w=rk(_,e.getImmediateChild(h),t);w!==_&&(a=a.updateImmediateChild(h,w))}),a}}class ik{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function rS(n,e){let t=e instanceof Dn?e:new Dn(e),r=n,i=Zt(t);for(;null!==i;){const a=(0,P.DV)(r.node.children,i)||{children:{},childCount:0};r=new ik(i,r,a),t=Bn(t),i=Zt(t)}return r}function eg(n){return n.node.value}function sk(n,e){n.node.value=e,ok(n)}function F2(n){return n.node.childCount>0}function iS(n,e){Ai(n.node.children,(t,r)=>{e(new ik(t,n,r))})}function L2(n,e,t,r){t&&!r&&e(n),iS(n,i=>{L2(i,e,!0,r)}),t&&r&&e(n)}function SC(n){return new Dn(null===n.parent?n.name:SC(n.parent)+"/"+n.name)}function ok(n){null!==n.parent&&function Wz(n,e,t){const r=function Gz(n){return void 0===eg(n)&&!F2(n)}(t),i=(0,P.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,ok(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,ok(n))}(n.parent,n.name,n)}const qz=/[\[\].#$\/\u0000-\u001F\u007F]/,Zz=/[\[\].#$\u0000-\u001F\u007F]/,ak=10485760,sS=function(n){return"string"==typeof n&&0!==n.length&&!qz.test(n)},V2=function(n){return"string"==typeof n&&0!==n.length&&!Zz.test(n)},AC=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!NT(n)||n&&"object"==typeof n&&(0,P.r3)(n,".sv")},Pl=function(n,e,t,r){r&&void 0===e||xC((0,P.gK)(n,"value"),e,t)},xC=function(n,e,t){const r=t instanceof Dn?new d6(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Kp(r));if("function"==typeof e)throw new Error(n+"contains a function "+Kp(r)+" with contents = "+e.toString());if(NT(e))throw new Error(n+"contains "+e.toString()+" "+Kp(r));if("string"==typeof e&&e.length>ak/3&&(0,P.ug)(e)>ak)throw new Error(n+"contains a string greater than "+ak+" utf8 bytes "+Kp(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Ai(e,(l,h)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!sS(l)))throw new Error(n+" contains an invalid key ("+l+") "+Kp(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function h6(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,P.ug)(e),ZU(n)})(r,l),xC(n,h,r),function f6(n){const e=n.parts_.pop();n.byteLength_-=(0,P.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Kp(r)+" in addition to actual children.")}},U2=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,P.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Ai(e,(l,h)=>{const _=new Dn(l);if(xC(i,h,pr(t,_)),".priority"===b1(_)&&!AC(h))throw new Error(i+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(_)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=fC(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!sS(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(c6);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Ca(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},uk=function(n,e,t){if(!t||void 0!==e){if(NT(e))throw new Error((0,P.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!AC(e))throw new Error((0,P.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},MC=function(n,e,t,r){if(!(r&&void 0===t||sS(t)))throw new Error((0,P.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},RC=function(n,e,t,r){if(!(r&&void 0===t||V2(t)))throw new Error((0,P.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ba=function(n,e){if(".info"===Zt(e))throw new Error(n+" failed = Can't modify data under /.info/")},B2=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!sS(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),V2(n)}(t))throw new Error((0,P.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Jz{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function oS(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!I1(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function j2(n,e,t){oS(n,t),H2(n,r=>I1(r,e))}function Vo(n,e,t){oS(n,t),H2(n,r=>Ca(r,e)||Ca(e,r))}function H2(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(Xz(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function Xz(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();qp&&Si("event: "+t.toString()),J_(r)}}}const $2="repo_interrupt";class tW{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Jz,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=$T(),this.transactionQueueTree_=new ik,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function G2(n){const t=n.infoData_.getNode(new Dn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function NC(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:G2(n)})}function z2(n,e,t,r,i){n.dataUpdateCount++;const a=new Dn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const _=(0,P.UI)(t,w=>br(w));l=function Oz(n,e,t,r){const i=Q1(n,r);if(i){const a=J1(i),l=a.path,h=a.queryId,_=As(l,e),w=Wn.fromObject(t);return X1(n,l,new iy(V1(h),_,w))}return[]}(n.serverSyncTree_,a,_,i)}else{const _=br(t);l=M2(n.serverSyncTree_,a,_,i)}else if(r){const _=(0,P.UI)(t,w=>br(w));l=function Nz(n,e,t){const r=Wn.fromObject(t);return oy(n,new iy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,_)}else{const _=br(t);l=IC(n.serverSyncTree_,a,_)}let h=a;l.length>0&&(h=uy(n,a)),Vo(n.eventQueue_,h,l)}function W2(n,e){lk(n,"connected",e),!1===e&&function oW(n){ay(n,"onDisconnectEvents");const e=NC(n),t=$T();O1(n.onDisconnect_,yn(),(i,a)=>{const l=O2(i,a,n.serverSyncTree_,e);ry(t,i,l)});let r=[];O1(t,yn(),(i,a)=>{r=r.concat(IC(n.serverSyncTree_,i,a));const l=fk(n,i);uy(n,l)}),n.onDisconnect_=$T(),Vo(n.eventQueue_,yn(),r)}(n)}function lk(n,e,t){const r=new Dn("/.info/"+e),i=br(t);n.infoData_.updateSnapshot(r,i);const a=IC(n.infoSyncTree_,r,i);Vo(n.eventQueue_,r,a)}function aS(n){return n.nextWriteId_++}function ck(n,e,t,r,i){ay(n,"set",{path:e.toString(),value:t,priority:r});const a=NC(n),l=br(t,r),h=tS(n.serverSyncTree_,e),_=nk(l,h,a),w=aS(n),D=K1(n.serverSyncTree_,e,_,w,!0);oS(n.eventQueue_,D),n.server_.put(e.toString(),l.val(!0),(R,V)=>{const j="ok"===R;j||ss("set at "+e+" failed: "+R);const ae=Zh(n.serverSyncTree_,w,!j);Vo(n.eventQueue_,e,ae),Kh(0,i,R,V)});const S=fk(n,e);uy(n,S),Vo(n.eventQueue_,S,[])}function aW(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&P1(n.onDisconnect_,e),Kh(0,t,r,i)})}function q2(n,e,t,r){const i=br(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&ry(n.onDisconnect_,e,i),Kh(0,r,a,l)})}function dk(n,e,t){let r;r=".info"===Zt(e._path)?eS(n.infoSyncTree_,e,t):eS(n.serverSyncTree_,e,t),j2(n.eventQueue_,e._path,r)}function Z2(n){n.persistentConnection_&&n.persistentConnection_.interrupt($2)}function ay(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Si(t,...e)}function Kh(n,e,t,r){e&&J_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function hk(n,e,t){return tS(n.serverSyncTree_,e,t)||Ht.EMPTY_NODE}function uS(n,e=n.transactionQueueTree_){if(e||lS(n,e),eg(e)){const t=Y2(n,e);(0,P.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function fW(n,e,t){const r=t.map(w=>w.currentWriteId),i=hk(n,e,r);let a=i;const l=i.hash();for(let w=0;w<t.length;w++){const D=t[w];(0,P.hu)(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const S=As(e,D.path);a=a.updateChild(S,D.currentOutputSnapshotRaw)}const h=a.val(!0),_=e;n.server_.put(_.toString(),h,w=>{ay(n,"transaction put response",{path:_.toString(),status:w});let D=[];if("ok"===w){const S=[];for(let R=0;R<t.length;R++)t[R].status=2,D=D.concat(Zh(n.serverSyncTree_,t[R].currentWriteId)),t[R].onComplete&&S.push(()=>t[R].onComplete(null,!0,t[R].currentOutputSnapshotResolved)),t[R].unwatcher();lS(n,rS(n.transactionQueueTree_,e)),uS(n,n.transactionQueueTree_),Vo(n.eventQueue_,e,D);for(let R=0;R<S.length;R++)J_(S[R])}else{if("datastale"===w)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{ss("transaction at "+_.toString()+" failed: "+w);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=w}uy(n,e)}},l)}(n,SC(e),t)}else F2(e)&&iS(e,t=>{uS(n,t)})}function uy(n,e){const t=K2(n,e),r=SC(t);return function pW(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const _=e[h],w=As(t,_.path);let S,D=!1;if((0,P.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)D=!0,S=_.abortReason,i=i.concat(Zh(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=25)D=!0,S="maxretry",i=i.concat(Zh(n.serverSyncTree_,_.currentWriteId,!0));else{const R=hk(n,_.path,l);_.currentInputSnapshot=R;const V=e[h].update(R.val());if(void 0!==V){xC("transaction failed: Data returned ",V,_.path);let j=br(V);"object"==typeof V&&null!=V&&(0,P.r3)(V,".priority")||(j=j.updatePriority(R.getPriority()));const ve=_.currentWriteId,qe=NC(n),lt=nk(j,R,qe);_.currentOutputSnapshotRaw=j,_.currentOutputSnapshotResolved=lt,_.currentWriteId=aS(n),l.splice(l.indexOf(ve),1),i=i.concat(K1(n.serverSyncTree_,_.path,lt,_.currentWriteId,_.applyLocally)),i=i.concat(Zh(n.serverSyncTree_,ve,!0))}else D=!0,S="nodata",i=i.concat(Zh(n.serverSyncTree_,_.currentWriteId,!0))}Vo(n.eventQueue_,t,i),i=[],D&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===S?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(S),!1,null)))}lS(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)J_(r[h]);uS(n,n.transactionQueueTree_)}(n,Y2(n,t),r),r}function K2(n,e){let t,r=n.transactionQueueTree_;for(t=Zt(e);null!==t&&void 0===eg(r);)r=rS(r,t),t=Zt(e=Bn(e));return r}function Y2(n,e){const t=[];return Q2(n,e,t),t.sort((r,i)=>r.order-i.order),t}function Q2(n,e,t){const r=eg(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);iS(e,i=>{Q2(n,i,t)})}function lS(n,e){const t=eg(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,sk(e,t.length>0?t:void 0)}iS(e,r=>{lS(n,r)})}function fk(n,e){const t=SC(K2(n,e)),r=rS(n.transactionQueueTree_,e);return function zz(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{pk(n,i)}),pk(n,r),L2(r,i=>{pk(n,i)}),t}function pk(n,e){const t=eg(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,P.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,P.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(Zh(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?sk(e,void 0):t.length=a+1,Vo(n.eventQueue_,SC(e),i);for(let l=0;l<r.length;l++)J_(r[l])}}const gk=function(n,e){const t=_W(n),r=t.namespace;return"firebase.com"===t.domain&&Nl(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Nl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ss("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new _1(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Dn(t.pathString)}},_W=function(n){let e="",t="",r="",i="",a="",l=!0,h="https",_=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(h=n.substring(0,w-1),n=n.substring(w+2));let D=n.indexOf("/");-1===D&&(D=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(D,S)),D<S&&(i=function gW(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(D,S)));const R=function mW(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ss(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));w=e.indexOf(":"),w>=0?(l="https"===h||"wss"===h,_=parseInt(e.substring(w+1),10)):w=e.length;const V=e.slice(0,w);if("localhost"===V.toLowerCase())t="localhost";else if(V.split(".").length<=2)t=V;else{const j=e.indexOf(".");r=e.substring(0,j).toLowerCase(),t=e.substring(j+1),a=r}"ns"in R&&(a=R.ns)}return{host:e,port:_,domain:t,subdomain:r,secure:l,scheme:h,pathString:i,namespace:a}},J2="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",yW=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=J2.charAt(t%64),t=Math.floor(t/64);(0,P.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=J2.charAt(e[i]);return(0,P.hu)(20===l.length,"nextPushId: Length should be 20."),l}}();class X2{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,P.Wl)(this.snapshot.exportVal())}}class eB{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class mk{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,P.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class tB{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new P.BH;return aW(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){ba("OnDisconnect.remove",this._path);const e=new P.BH;return q2(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){ba("OnDisconnect.set",this._path),Pl("OnDisconnect.set",e,this._path,!1);const t=new P.BH;return q2(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){ba("OnDisconnect.setWithPriority",this._path),Pl("OnDisconnect.setWithPriority",e,this._path,!1),uk("OnDisconnect.setWithPriority",t,!1);const r=new P.BH;return function uW(n,e,t,r,i){const a=br(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,h)=>{"ok"===l&&ry(n.onDisconnect_,e,a),Kh(0,i,l,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){ba("OnDisconnect.update",this._path),U2("OnDisconnect.update",e,this._path,!1);const t=new P.BH;return function lW(n,e,t,r){if((0,P.xb)(t))return Si("onDisconnect().update() called with empty data.  Don't do anything."),void Kh(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Ai(t,(l,h)=>{const _=br(h);ry(n.onDisconnect_,pr(e,l),_)}),Kh(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class no{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Kt(this._path)?null:b1(this._path)}get ref(){return new Ia(this._repo,this._path)}get _queryIdentifier(){const e=s2(this._queryParams),t=g1(e);return"{}"===t?"default":t}get _queryObject(){return s2(this._queryParams)}isEqual(e){if(!((e=(0,P.m9)(e))instanceof no))return!1;const t=this._repo===e._repo,r=I1(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function l6(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function cS(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Yh(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===kl){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==jh)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==sd)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===zn){if(null!=e&&!AC(e)||null!=t&&!AC(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,P.hu)(n.getIndex()instanceof x1||n.getIndex()===M1,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function dS(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ia extends no{constructor(e,t){super(e,t,new BT,!1)}get parent(){const e=qU(this._path);return null===e?null:new Ia(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class tg{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Dn(e),r=ng(this.ref,e);return new tg(this._node.getChild(t),r,zn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new tg(i,ng(this.ref,r),zn)))}hasChild(e){const t=new Dn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function nB(n,e){return(n=(0,P.m9)(n))._checkNotDeleted("ref"),void 0!==e?ng(n._root,e):n._root}function rB(n,e){(n=(0,P.m9)(n))._checkNotDeleted("refFromURL");const t=gk(e,n._repo.repoInfo_.nodeAdmin);B2("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Nl("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),nB(n,t.path.toString())}function ng(n,e){return null===Zt((n=(0,P.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),RC("child","path",t,!1)):RC("child","path",e,!1),new Ia(n._repo,pr(n._path,e));var t}function _k(n,e){n=(0,P.m9)(n),ba("set",n._path),Pl("set",e,n._path,!1);const t=new P.BH;return ck(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function bW(n,e){U2("update",e,n._path,!1);const t=new P.BH;return function sW(n,e,t,r){ay(n,"update",{path:e.toString(),value:t});let i=!0;const a=NC(n),l={};if(Ai(t,(h,_)=>{i=!1,l[h]=O2(pr(e,h),br(_),n.serverSyncTree_,a)}),i)Si("update() called with empty data.  Don't do anything."),Kh(0,r,"ok",void 0);else{const h=aS(n),_=function Rz(n,e,t,r){!function Z6(n,e,t,r){(0,P.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=B1(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Wn.fromObject(t);return oy(n,new iy({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,h);oS(n.eventQueue_,_),n.server_.merge(e.toString(),t,(w,D)=>{const S="ok"===w;S||ss("update at "+e+" failed: "+w);const R=Zh(n.serverSyncTree_,h,!S),V=R.length>0?uy(n,e):e;Vo(n.eventQueue_,V,R),Kh(0,r,w,D)}),Ai(t,w=>{const D=fk(n,pr(e,w));uy(n,D)}),Vo(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function IW(n){n=(0,P.m9)(n);const e=new mk(()=>{}),t=new kC(e);return function iW(n,e,t){const r=function Fz(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(w,D)=>{const S=As(w,t);r=r||Wh(D,S)});let i=n.syncPointTree_.get(t);i?r=r||Wh(i,yn()):(i=new I2,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new Gh(r,!0,!1):null;return function vz(n){return WT(n.viewCache_)}(D2(i,e,qT(n.pendingWriteTree_,e._path),a?l.getNode():Ht.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=br(i).withIndex(e._queryParams.getIndex());let l;if(Y1(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=IC(n.serverSyncTree_,e._path,a);else{const h=DC(n.serverSyncTree_,e);l=M2(n.serverSyncTree_,e._path,a,h)}return Vo(n.eventQueue_,e._path,l),eS(n.serverSyncTree_,e,t,null,!0),a},i=>(ay(n,"get for query "+(0,P.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new tg(r,new Ia(n._repo,n._path),n._queryParams.getIndex()))}class kC{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new X2("value",this,new tg(e.snapshotNode,new Ia(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new eB(this,e,t):null}matches(e){return e instanceof kC&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class hS{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new eB(this,e,t):null}createEvent(e,t){(0,P.hu)(null!=e.childName,"Child events should have a childName.");const r=ng(new Ia(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new X2(e.type,this,new tg(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof hS&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function PC(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const _=t,w=(D,S)=>{dk(n._repo,n,h),_(D,S)};w.userCallback=t.userCallback,w.context=t.context,t=w}const l=new mk(t,a||void 0),h="value"===e?new kC(l):new hS(e,l);return function cW(n,e,t){let r;r=".info"===Zt(e._path)?Y1(n.infoSyncTree_,e,t):Y1(n.serverSyncTree_,e,t),j2(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>dk(n._repo,n,h)}function yk(n,e,t,r){return PC(n,"value",e,t,r)}function iB(n,e,t,r){return PC(n,"child_added",e,t,r)}function sB(n,e,t,r){return PC(n,"child_changed",e,t,r)}function oB(n,e,t,r){return PC(n,"child_moved",e,t,r)}function aB(n,e,t,r){return PC(n,"child_removed",e,t,r)}function uB(n,e,t){let r=null;const i=t?new mk(t):null;"value"===e?r=new kC(i):e&&(r=new hS(e,i)),dk(n._repo,n,r)}class wu{}class lB extends wu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Pl("endAt",this._value,e._path,!0);const t=k1(e._queryParams,this._value,this._key);if(dS(t),Yh(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new no(e._repo,e._path,t,e._orderByCalled)}}class TW extends wu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Pl("endBefore",this._value,e._path,!1);const t=function O6(n,e,t){let r;return r=k1(n,e,n.index_===kl||t?t:jh),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(dS(t),Yh(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new no(e._repo,e._path,t,e._orderByCalled)}}class cB extends wu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Pl("startAt",this._value,e._path,!0);const t=N1(e._queryParams,this._value,this._key);if(dS(t),Yh(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new no(e._repo,e._path,t,e._orderByCalled)}}class xW extends wu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Pl("startAfter",this._value,e._path,!1);const t=function P6(n,e,t){let r;return r=N1(n,e,n.index_===kl||t?t:sd),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(dS(t),Yh(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new no(e._repo,e._path,t,e._orderByCalled)}}class RW extends wu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new no(e._repo,e._path,function N6(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class kW extends wu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new no(e._repo,e._path,function k6(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class OW extends wu{constructor(e){super(),this._path=e}_apply(e){cS(e,"orderByChild");const t=new Dn(this._path);if(Kt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new x1(t),i=jT(e._queryParams,r);return Yh(i),new no(e._repo,e._path,i,!0)}}class LW extends wu{_apply(e){cS(e,"orderByKey");const t=jT(e._queryParams,kl);return Yh(t),new no(e._repo,e._path,t,!0)}}class UW extends wu{_apply(e){cS(e,"orderByPriority");const t=jT(e._queryParams,zn);return Yh(t),new no(e._repo,e._path,t,!0)}}class jW extends wu{_apply(e){cS(e,"orderByValue");const t=jT(e._queryParams,M1);return Yh(t),new no(e._repo,e._path,t,!0)}}class $W extends wu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Pl("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new lB(this._value,this._key)._apply(new cB(this._value,this._key)._apply(e))}}function Cu(n,...e){let t=(0,P.m9)(n);for(const r of e)t=r._apply(t);return t}(function bz(n){(0,P.hu)(!QT,"__referenceConstructor has already been defined"),QT=n})(Ia),function Az(n){(0,P.hu)(!XT,"__referenceConstructor has already been defined"),XT=n}(Ia);const vk={};function hB(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||Nl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Si("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,w,l=gk(a,i),h=l.repoInfo;typeof process<"u"&&process.env&&(w=process.env.FIREBASE_DATABASE_EMULATOR_HOST),w?(_=!0,a=`http://${w}?ns=${h.namespace}`,l=gk(a,i),h=l.repoInfo):_=!l.repoInfo.secure;const D=i&&_?new hC(hC.OWNER):new V3(n.name,n.options,e);B2("Invalid Firebase Database URL",l),Kt(l.path)||Nl("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function ZW(n,e,t,r){let i=vk[e.name];i||(i={},vk[e.name]=i);let a=i[n.toURLString()];return a&&Nl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new tW(n,false,t,r),i[n.toURLString()]=a,a}(h,n,D,new L3(n.name,t));return new YW(S,n)}class YW{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function nW(n,e,t){if(n.stats_=w1(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new HT(n.repoInfo_,(r,i,a,l)=>{z2(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>W2(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,P.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Yp(n.repoInfo_,e,(r,i,a,l)=>{z2(n,r,i,a,l)},r=>{W2(n,r)},r=>{!function rW(n,e){Ai(e,(t,r)=>{lk(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function j3(n,e){const t=n.toString();return v1[t]||(v1[t]=e()),v1[t]}(n.repoInfo_,()=>new j6(n.stats_,n.server_)),n.infoData_=new F6,n.infoSyncTree_=new x2({startListening:(r,i,a,l)=>{let h=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(h=IC(n.infoSyncTree_,r._path,_),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),lk(n,"connected",!1),n.serverSyncTree_=new x2({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(h,_)=>{const w=l(h,_);Vo(n.eventQueue_,r._path,w)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ia(this._repo,yn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function qW(n,e){const t=vk[e];(!t||t[n.key]!==n)&&Nl(`Database ${e}(${n.repoInfo_}) has already been deleted.`),Z2(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Nl("Cannot call "+e+" on a deleted database.")}}function fB(){OU.IS_TRANSPORT_INITIALIZED&&ss("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function QW(){fB(),Hh.forceDisallow()}function JW(){fB(),X_.forceDisallow(),Hh.forceAllow()}function tq(n,e){gU(n,e)}const rq={".sv":"timestamp"};class oq{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Yp.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Yp.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function nq(n){cU(Li.SDK_VERSION),(0,Li._registerComponent)(new Zs.wA("database",(e,{instanceIdentifier:t})=>hB(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Li.registerVersion)(uU,"0.14.0",n),(0,Li.registerVersion)(uU,"0.14.0","esm2017")}();const cq=new Ao.Yd("@firebase/database-compat"),gB=function(n){cq.warn("FIREBASE WARNING: "+n)};class fq{constructor(e){this._delegate=e}cancel(e){(0,P.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,P.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,P.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,P.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,P.Dv)("OnDisconnect.set",1,2,arguments.length),(0,P.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,P.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,P.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,P.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,gB("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,P.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class pq{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,P.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Qh{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,P.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,P.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,P.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,P.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,P.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),RC("DataSnapshot.child","path",e,!1),new Qh(this._database,this._delegate.child(e))}hasChild(e){return(0,P.Dv)("DataSnapshot.hasChild",1,1,arguments.length),RC("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,P.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,P.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,P.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Qh(this._database,t)))}hasChildren(){return(0,P.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,P.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,P.Dv)("DataSnapshot.ref",0,0,arguments.length),new Uo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class qi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,P.Dv)("Query.on",2,4,arguments.length),(0,P.Wj)("Query.on","callback",t,!1);const l=qi.getCancelAndContextArgs_("Query.on",r,i),h=(w,D)=>{t.call(l.context,new Qh(this.database,w),D)};h.userCallback=t,h.context=l.context;const _=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return yk(this._delegate,h,_),t;case"child_added":return iB(this._delegate,h,_),t;case"child_removed":return aB(this._delegate,h,_),t;case"child_changed":return sB(this._delegate,h,_),t;case"child_moved":return oB(this._delegate,h,_),t;default:throw new Error((0,P.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,P.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,P.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,P.Wj)("Query.off","callback",t,!0),(0,P.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,uB(this._delegate,e,i)}else uB(this._delegate,e)}get(){return IW(this._delegate).then(e=>new Qh(this.database,e))}once(e,t,r,i){(0,P.Dv)("Query.once",1,4,arguments.length),(0,P.Wj)("Query.once","callback",t,!0);const a=qi.getCancelAndContextArgs_("Query.once",r,i),l=new P.BH,h=(w,D)=>{const S=new Qh(this.database,w);t&&t.call(a.context,S,D),l.resolve(S)};h.userCallback=t,h.context=a.context;const _=w=>{a.cancel&&a.cancel.call(a.context,w),l.reject(w)};switch(e){case"value":yk(this._delegate,h,_,{onlyOnce:!0});break;case"child_added":iB(this._delegate,h,_,{onlyOnce:!0});break;case"child_removed":aB(this._delegate,h,_,{onlyOnce:!0});break;case"child_changed":sB(this._delegate,h,_,{onlyOnce:!0});break;case"child_moved":oB(this._delegate,h,_,{onlyOnce:!0});break;default:throw new Error((0,P.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,P.Dv)("Query.limitToFirst",1,1,arguments.length),new qi(this.database,Cu(this._delegate,function NW(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new RW(n)}(e)))}limitToLast(e){return(0,P.Dv)("Query.limitToLast",1,1,arguments.length),new qi(this.database,Cu(this._delegate,function PW(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new kW(n)}(e)))}orderByChild(e){return(0,P.Dv)("Query.orderByChild",1,1,arguments.length),new qi(this.database,Cu(this._delegate,function FW(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return RC("orderByChild","path",n,!1),new OW(n)}(e)))}orderByKey(){return(0,P.Dv)("Query.orderByKey",0,0,arguments.length),new qi(this.database,Cu(this._delegate,function VW(){return new LW}()))}orderByPriority(){return(0,P.Dv)("Query.orderByPriority",0,0,arguments.length),new qi(this.database,Cu(this._delegate,function BW(){return new UW}()))}orderByValue(){return(0,P.Dv)("Query.orderByValue",0,0,arguments.length),new qi(this.database,Cu(this._delegate,function HW(){return new jW}()))}startAt(e=null,t){return(0,P.Dv)("Query.startAt",0,2,arguments.length),new qi(this.database,Cu(this._delegate,function AW(n=null,e){return MC("startAt","key",e,!0),new cB(n,e)}(e,t)))}startAfter(e=null,t){return(0,P.Dv)("Query.startAfter",0,2,arguments.length),new qi(this.database,Cu(this._delegate,function MW(n,e){return MC("startAfter","key",e,!0),new xW(n,e)}(e,t)))}endAt(e=null,t){return(0,P.Dv)("Query.endAt",0,2,arguments.length),new qi(this.database,Cu(this._delegate,function DW(n,e){return MC("endAt","key",e,!0),new lB(n,e)}(e,t)))}endBefore(e=null,t){return(0,P.Dv)("Query.endBefore",0,2,arguments.length),new qi(this.database,Cu(this._delegate,function SW(n,e){return MC("endBefore","key",e,!0),new TW(n,e)}(e,t)))}equalTo(e,t){return(0,P.Dv)("Query.equalTo",1,2,arguments.length),new qi(this.database,Cu(this._delegate,function GW(n,e){return MC("equalTo","key",e,!0),new $W(n,e)}(e,t)))}toString(){return(0,P.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,P.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,P.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof qi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,P.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,P.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,P.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Uo(this.database,new Ia(this._delegate._repo,this._delegate._path))}}class Uo extends qi{constructor(e,t){super(e,new no(t._repo,t._path,new BT,!1)),this.database=e,this._delegate=t}getKey(){return(0,P.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,P.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Uo(this.database,ng(this._delegate,e))}getParent(){(0,P.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Uo(this.database,e):null}getRoot(){return(0,P.Dv)("Reference.root",0,0,arguments.length),new Uo(this.database,this._delegate.root)}set(e,t){(0,P.Dv)("Reference.set",1,2,arguments.length),(0,P.Wj)("Reference.set","onComplete",t,!0);const r=_k(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,P.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,gB("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ba("Reference.update",this._delegate._path),(0,P.Wj)("Reference.update","onComplete",t,!0);const r=bW(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,P.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,P.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function EW(n,e,t){if(ba("setWithPriority",n._path),Pl("setWithPriority",e,n._path,!1),uk("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new P.BH;return ck(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,P.Dv)("Reference.remove",0,1,arguments.length),(0,P.Wj)("Reference.remove","onComplete",e,!0);const t=function wW(n){return ba("remove",n._path),_k(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,P.Dv)("Reference.transaction",1,3,arguments.length),(0,P.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,P.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,P.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function aq(n,e,t){var r;if(n=(0,P.m9)(n),ba("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new P.BH,h=yk(n,()=>{});return function hW(n,e,t,r,i,a){ay(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:hU(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=hk(n,e,void 0);l.currentInputSnapshot=h;const _=l.update(h.val());if(void 0===_)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{xC("transaction failed: Data returned ",_,l.path),l.status=0;const w=rS(n.transactionQueueTree_,e),D=eg(w)||[];let S;D.push(l),sk(w,D),"object"==typeof _&&null!==_&&(0,P.r3)(_,".priority")?(S=(0,P.DV)(_,".priority"),(0,P.hu)(AC(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(tS(n.serverSyncTree_,e)||Ht.EMPTY_NODE).getPriority().val();const R=NC(n),V=br(_,S),j=nk(V,h,R);l.currentOutputSnapshotRaw=V,l.currentOutputSnapshotResolved=j,l.currentWriteId=aS(n);const ae=K1(n.serverSyncTree_,e,j,l.currentWriteId,l.applyLocally);Vo(n.eventQueue_,e,ae),uS(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(_,w,D)=>{let S=null;_?a.reject(_):(S=new tg(D,new Ia(n._repo,n._path),zn),a.resolve(new oq(w,S)))},h,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new pq(a.committed,new Qh(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,P.Dv)("Reference.setPriority",1,2,arguments.length),(0,P.Wj)("Reference.setPriority","onComplete",t,!0);const r=function CW(n,e){n=(0,P.m9)(n),ba("setPriority",n._path),uk("setPriority",e,!1);const t=new P.BH;return ck(n._repo,pr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,P.Dv)("Reference.push",0,2,arguments.length),(0,P.Wj)("Reference.push","onComplete",t,!0);const r=function vW(n,e){n=(0,P.m9)(n),ba("push",n._path),Pl("push",e,n._path,!0);const t=G2(n._repo),r=yW(t),i=ng(n,r),a=ng(n,r);let l;return l=null!=e?_k(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new Uo(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new Uo(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return ba("Reference.onDisconnect",this._delegate._path),new fq(new tB(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class OC{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:QW,forceLongPolling:JW}}useEmulator(e,t,r={}){!function pB(n,e,t,r={}){(n=(0,P.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Nl("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Nl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new hC(hC.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,P.Sg)(r.mockUserToken,n.app.options.projectId);a=new hC(l)}!function WW(n,e,t,r){n.repoInfo_=new _1(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,P.Dv)("database.ref",0,1,arguments.length),e instanceof Uo){const t=rB(this._delegate,e.toString());return new Uo(this,t)}{const t=nB(this._delegate,e);return new Uo(this,t)}}refFromURL(e){(0,P.Dv)("database.refFromURL",1,1,arguments.length);const r=rB(this._delegate,e);return new Uo(this,r)}goOffline(){return(0,P.Dv)("database.goOffline",0,0,arguments.length),function XW(n){(n=(0,P.m9)(n))._checkNotDeleted("goOffline"),Z2(n._repo)}(this._delegate)}goOnline(){return(0,P.Dv)("database.goOnline",0,0,arguments.length),function eq(n){(n=(0,P.m9)(n))._checkNotDeleted("goOnline"),function dW(n){n.persistentConnection_&&n.persistentConnection_.resume($2)}(n._repo)}(this._delegate)}}OC.ServerValue={TIMESTAMP:function iq(){return rq}(),increment:n=>function sq(n){return{".sv":{increment:n}}}(n)};var mq=Object.freeze({__proto__:null,initStandalone:function gq({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){cU(t);const l=new Zs.zt("auth-internal",new Zs.H0("database-standalone"));return l.setComponent(new Zs.wA("auth-internal",()=>r,"PRIVATE")),{instance:new OC(hB(n,l,void 0,e,a),n),namespace:i}}});const _q=OC.ServerValue;function mB(n){return null==n}function _B(n){return"function"==typeof n.set}function yB(n,e){return _B(e)?e:n.ref(e)}function vB(n,e){if(function vq(n){return"string"==typeof n}(n))return e.stringCase();if(_B(n))return e.firebaseCase();if(function wq(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function FC(n,e,t="on",r=Gm.z){return new wr.y(i=>{let a=null;return a=n[t](e,(l,h)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,Je.U)(i=>{const{snapshot:a,prevKey:l}=i;let h=null;return a.exists()&&(h=a.key),{type:e,payload:a,prevKey:l,key:h}}),(0,rv.B)())}function wB(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function bq(n,e){const{payload:t,prevKey:r,key:i}=e,a=wB(n,i),l=function Eq(n,e){if(mB(e))return 0;{const t=wB(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(_=>{const w={payload:_,type:"value",prevKey:h,key:_.key};return h=_.key,n=[...n,w],!1})}return n;case"child_added":if(a>-1){const h=n[a-1];(h&&h.key||null)!==r&&(n=n.filter(_=>_.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(a>-1){const h=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,h),n}return n;default:return n}}function CB(n){return(mB(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function EB(n,e,t){return function Cq(n,e,t){return FC(n,"value","once",t).pipe(Mn(r=>{const i=[at(r)];return e.forEach(a=>i.push(FC(n,a,"on",t))),(0,SE.T)(...i).pipe(Rt(bq,[]))}),oD())}(n,e=CB(e),t)}function bB(n,e,t){const r=(e=CB(e)).map(i=>FC(n,i,"on",t));return(0,SE.T)(...r)}function IB(n,e){return function(r,i){return vB(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function Sq(n){return function(t){return t?vB(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function DB(n,e){return function(){return FC(n,"value","on",e)}}!function yq(n){n.INTERNAL.registerComponent(new Zs.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new OC(i,r)},"PUBLIC").setServiceProps({Reference:Uo,Query:qi,Database:OC,DataSnapshot:Qh,enableLogging:tq,INTERNAL:mq,ServerValue:_q}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.0")}(zm.Z);const Mq=new d.OlP("angularfire2.realtimeDatabaseURL"),Rq=new d.OlP("angularfire2.database.use-emulator");let Nq=(()=>{class n{constructor(t,r,i,a,l,h,_,w,D,S,R,V,j,ae,ve){this.schedulers=h;const qe=_,lt=(0,Zr.on)(t,l,r);w&&Tm(lt,l,D,R,V,j,S,ae),this.database=(0,Zr.cc)(`${lt.name}.database.${i}`,"AngularFireDatabase",lt.name,()=>{const rt=l.runOutsideAngular(()=>lt.database(i||void 0));return qe&&rt.useEmulator(...qe),rt},[qe])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>yB(this.database,t));let a=i;return r&&(a=r(i)),function Aq(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:IB(r,"update"),set:IB(r,"set"),push:i=>r.push(i),remove:Sq(r),snapshotChanges:i=>EB(n,i,t).pipe(mn.iC),stateChanges:i=>bB(n,i,t).pipe(mn.iC),auditTrail:i=>function Iq(n,e,t){return function Tq(n,e,t){return function Dq(n,e){return FC(n,"value","on",e).pipe((0,Je.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function b3(...n){const e=(0,mi.jO)(n);return(0,Yn.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),h=!1;for(let _=0;_<i;_++)(0,ys.Xf)(n[_]).subscribe((0,xn.x)(r,w=>{a[_]=w,!h&&!l[_]&&(l[_]=!0,(h=l.every(_s.y))&&(l=null))},E3.Z));t.subscribe((0,xn.x)(r,_=>{if(h){const w=[_,...a];r.next(e?e(...w):w)}}))})}(e),(0,Je.U)(([i,a])=>{const l=i.lastKeyToLoad,h=a.map(_=>_.key);return{actions:a,lastKeyToLoad:l,loadedKeys:h}}),function I3(n){return(0,Yn.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,xn.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,Je.U)(i=>i.actions))}(n,bB(n,e).pipe(Rt((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(mn.iC),valueChanges:(i,a)=>EB(n,i,t).pipe((0,Je.U)(h=>h.map(_=>a&&a.idField?Object.assign(Object.assign({},_.payload.val()),{[a.idField]:_.key}):_.payload.val())),mn.iC)}}(a,this)}object(t){return function xq(n,e){return{query:n,snapshotChanges:()=>DB(n,e.schedulers.outsideAngular)().pipe(mn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>DB(n,e.schedulers.outsideAngular)().pipe(mn.iC,(0,Je.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>yB(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Zr.Dh),d.LFG(Zr.xv,8),d.LFG(Mq,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(mn.HU),d.LFG(Rq,8),d.LFG(Lc,8),d.LFG(vl,8),d.LFG(Cm,8),d.LFG(Em,8),d.LFG(bm,8),d.LFG(Im,8),d.LFG(Dm,8),d.LFG(jf,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),kq=(()=>{class n{constructor(){du.Z.registerVersion("angularfire",mn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Nq]}),n})();const TB_firebase={apiKey:"AIzaSyCa4OkqpAi47uSjmzypD-6hvPKhpTbkqnM",authDomain:"holiday-craze-780c4.firebaseapp.com",databaseURL:"https://holiday-craze-780c4-default-rtdb.firebaseio.com",projectId:"holiday-craze-780c4",storageBucket:"holiday-craze-780c4.appspot.com",messagingSenderId:"206913540661",appId:"1:206913540661:web:169e7b9f5a7c2068c7d77c"};let Pq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[wI]}),n.\u0275inj=d.cJS({providers:[Qg],imports:[rc,p0,Qg,px,dI,Zr.hO.initializeApp(TB_firebase),YE,C3,DM,kq]}),n})();(0,d.G48)(),Yu().bootstrapModule(Pq).catch(n=>console.error(n))},9751:(pt,Ae,L)=>{L.d(Ae,{y:()=>he});var d=L(930),te=L(727),F=L(8822),oe=L(9635),se=L(2416),de=L(576),le=L(2806);let he=(()=>{class Y{constructor(Re){Re&&(this._subscribe=Re)}lift(Re){const be=new Y;return be.source=this,be.operator=Re,be}subscribe(Re,be,ot){const ye=function G(Y){return Y&&Y instanceof d.Lv||function $(Y){return Y&&(0,de.m)(Y.next)&&(0,de.m)(Y.error)&&(0,de.m)(Y.complete)}(Y)&&(0,te.Nn)(Y)}(Re)?Re:new d.Hp(Re,be,ot);return(0,le.x)(()=>{const{operator:ge,source:tt}=this;ye.add(ge?ge.call(ye,tt):tt?this._subscribe(ye):this._trySubscribe(ye))}),ye}_trySubscribe(Re){try{return this._subscribe(Re)}catch(be){Re.error(be)}}forEach(Re,be){return new(be=pe(be))((ot,ye)=>{const ge=new d.Hp({next:tt=>{try{Re(tt)}catch(dt){ye(dt),ge.unsubscribe()}},error:ye,complete:ot});this.subscribe(ge)})}_subscribe(Re){var be;return null===(be=this.source)||void 0===be?void 0:be.subscribe(Re)}[F.L](){return this}pipe(...Re){return(0,oe.U)(Re)(this)}toPromise(Re){return new(Re=pe(Re))((be,ot)=>{let ye;this.subscribe(ge=>ye=ge,ge=>ot(ge),()=>be(ye))})}}return Y.create=Le=>new Y(Le),Y})();function pe(Y){var Le;return null!==(Le=Y??se.v.Promise)&&void 0!==Le?Le:Promise}},7579:(pt,Ae,L)=>{L.d(Ae,{x:()=>le});var d=L(9751),te=L(727);const oe=(0,L(3888).d)(pe=>function(){pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=L(8737),de=L(2806);let le=(()=>{class pe extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const Y=new he(this,this);return Y.operator=G,Y}_throwIfClosed(){if(this.closed)throw new oe}next(G){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Y of this.currentObservers)Y.next(G)}})}error(G){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:Y}=this;for(;Y.length;)Y.shift().error(G)}})}complete(){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:Y,isStopped:Le,observers:Re}=this;return Y||Le?te.Lc:(this.currentObservers=null,Re.push(G),new te.w0(()=>{this.currentObservers=null,(0,se.P)(Re,G)}))}_checkFinalizedStatuses(G){const{hasError:Y,thrownError:Le,isStopped:Re}=this;Y?G.error(Le):Re&&G.complete()}asObservable(){const G=new d.y;return G.source=this,G}}return pe.create=($,G)=>new he($,G),pe})();class he extends le{constructor($,G){super(),this.destination=$,this.source=G}next($){var G,Y;null===(Y=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===Y||Y.call(G,$)}error($){var G,Y;null===(Y=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===Y||Y.call(G,$)}complete(){var $,G;null===(G=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===G||G.call($)}_subscribe($){var G,Y;return null!==(Y=null===(G=this.source)||void 0===G?void 0:G.subscribe($))&&void 0!==Y?Y:te.Lc}}},930:(pt,Ae,L)=>{L.d(Ae,{Hp:()=>ot,Lv:()=>Y});var d=L(576),te=L(727),F=L(2416),oe=L(7849),se=L(5032);const de=pe("C",void 0,void 0);function pe(Me,we,Ie){return{kind:Me,value:we,error:Ie}}var $=L(3410),G=L(2806);class Y extends te.w0{constructor(we){super(),this.isStopped=!1,we?(this.destination=we,(0,te.Nn)(we)&&we.add(this)):this.destination=dt}static create(we,Ie,Be){return new ot(we,Ie,Be)}next(we){this.isStopped?tt(function he(Me){return pe("N",Me,void 0)}(we),this):this._next(we)}error(we){this.isStopped?tt(function le(Me){return pe("E",void 0,Me)}(we),this):(this.isStopped=!0,this._error(we))}complete(){this.isStopped?tt(de,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(we){this.destination.next(we)}_error(we){try{this.destination.error(we)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Le=Function.prototype.bind;function Re(Me,we){return Le.call(Me,we)}class be{constructor(we){this.partialObserver=we}next(we){const{partialObserver:Ie}=this;if(Ie.next)try{Ie.next(we)}catch(Be){ye(Be)}}error(we){const{partialObserver:Ie}=this;if(Ie.error)try{Ie.error(we)}catch(Be){ye(Be)}else ye(we)}complete(){const{partialObserver:we}=this;if(we.complete)try{we.complete()}catch(Ie){ye(Ie)}}}class ot extends Y{constructor(we,Ie,Be){let He;if(super(),(0,d.m)(we)||!we)He={next:we??void 0,error:Ie??void 0,complete:Be??void 0};else{let H;this&&F.v.useDeprecatedNextContext?(H=Object.create(we),H.unsubscribe=()=>this.unsubscribe(),He={next:we.next&&Re(we.next,H),error:we.error&&Re(we.error,H),complete:we.complete&&Re(we.complete,H)}):He=we}this.destination=new be(He)}}function ye(Me){F.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(Me):(0,oe.h)(Me)}function tt(Me,we){const{onStoppedNotification:Ie}=F.v;Ie&&$.z.setTimeout(()=>Ie(Me,we))}const dt={closed:!0,next:se.Z,error:function ge(Me){throw Me},complete:se.Z}},727:(pt,Ae,L)=>{L.d(Ae,{Lc:()=>de,w0:()=>se,Nn:()=>le});var d=L(576);const F=(0,L(3888).d)(pe=>function(G){pe(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((Y,Le)=>`${Le+1}) ${Y.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var oe=L(8737);class se{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Re of G)Re.remove(this);else G.remove(this);const{initialTeardown:Y}=this;if((0,d.m)(Y))try{Y()}catch(Re){$=Re instanceof F?Re.errors:[Re]}const{_finalizers:Le}=this;if(Le){this._finalizers=null;for(const Re of Le)try{he(Re)}catch(be){$=$??[],be instanceof F?$=[...$,...be.errors]:$.push(be)}}if($)throw new F($)}}add($){var G;if($&&$!==this)if(this.closed)he($);else{if($ instanceof se){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push($)}}_hasParent($){const{_parentage:G}=this;return G===$||Array.isArray(G)&&G.includes($)}_addParent($){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push($),G):G?[G,$]:$}_removeParent($){const{_parentage:G}=this;G===$?this._parentage=null:Array.isArray(G)&&(0,oe.P)(G,$)}remove($){const{_finalizers:G}=this;G&&(0,oe.P)(G,$),$ instanceof se&&$._removeParent(this)}}se.EMPTY=(()=>{const pe=new se;return pe.closed=!0,pe})();const de=se.EMPTY;function le(pe){return pe instanceof se||pe&&"closed"in pe&&(0,d.m)(pe.remove)&&(0,d.m)(pe.add)&&(0,d.m)(pe.unsubscribe)}function he(pe){(0,d.m)(pe)?pe():pe.unsubscribe()}},2416:(pt,Ae,L)=>{L.d(Ae,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(pt,Ae,L)=>{L.d(Ae,{E:()=>te});const te=new(L(9751).y)(se=>se.complete())},8996:(pt,Ae,L)=>{L.d(Ae,{D:()=>we});var d=L(8421),te=L(5363),F=L(9468),de=L(9751),he=L(2202),pe=L(576),$=L(9672);function Y(Ie,Be){if(!Ie)throw new Error("Iterable cannot be null");return new de.y(He=>{(0,$.f)(He,Be,()=>{const H=Ie[Symbol.asyncIterator]();(0,$.f)(He,Be,()=>{H.next().then(me=>{me.done?He.complete():He.next(me.value)})},0,!0)})})}var Le=L(3670),Re=L(8239),be=L(1144),ot=L(6495),ye=L(2206),ge=L(4532),tt=L(3260);function we(Ie,Be){return Be?function Me(Ie,Be){if(null!=Ie){if((0,Le.c)(Ie))return function oe(Ie,Be){return(0,d.Xf)(Ie).pipe((0,F.R)(Be),(0,te.Q)(Be))}(Ie,Be);if((0,be.z)(Ie))return function le(Ie,Be){return new de.y(He=>{let H=0;return Be.schedule(function(){H===Ie.length?He.complete():(He.next(Ie[H++]),He.closed||this.schedule())})})}(Ie,Be);if((0,Re.t)(Ie))return function se(Ie,Be){return(0,d.Xf)(Ie).pipe((0,F.R)(Be),(0,te.Q)(Be))}(Ie,Be);if((0,ye.D)(Ie))return Y(Ie,Be);if((0,ot.T)(Ie))return function G(Ie,Be){return new de.y(He=>{let H;return(0,$.f)(He,Be,()=>{H=Ie[he.h](),(0,$.f)(He,Be,()=>{let me,Z;try{({value:me,done:Z}=H.next())}catch(X){return void He.error(X)}Z?He.complete():He.next(me)},0,!0)}),()=>(0,pe.m)(H?.return)&&H.return()})}(Ie,Be);if((0,tt.L)(Ie))return function dt(Ie,Be){return Y((0,tt.Q)(Ie),Be)}(Ie,Be)}throw(0,ge.z)(Ie)}(Ie,Be):(0,d.Xf)(Ie)}},8421:(pt,Ae,L)=>{L.d(Ae,{Xf:()=>Le});var d=L(655),te=L(1144),F=L(8239),oe=L(9751),se=L(3670),de=L(2206),le=L(4532),he=L(6495),pe=L(3260),$=L(576),G=L(7849),Y=L(8822);function Le(Me){if(Me instanceof oe.y)return Me;if(null!=Me){if((0,se.c)(Me))return function Re(Me){return new oe.y(we=>{const Ie=Me[Y.L]();if((0,$.m)(Ie.subscribe))return Ie.subscribe(we);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Me);if((0,te.z)(Me))return function be(Me){return new oe.y(we=>{for(let Ie=0;Ie<Me.length&&!we.closed;Ie++)we.next(Me[Ie]);we.complete()})}(Me);if((0,F.t)(Me))return function ot(Me){return new oe.y(we=>{Me.then(Ie=>{we.closed||(we.next(Ie),we.complete())},Ie=>we.error(Ie)).then(null,G.h)})}(Me);if((0,de.D)(Me))return ge(Me);if((0,he.T)(Me))return function ye(Me){return new oe.y(we=>{for(const Ie of Me)if(we.next(Ie),we.closed)return;we.complete()})}(Me);if((0,pe.L)(Me))return function tt(Me){return ge((0,pe.Q)(Me))}(Me)}throw(0,le.z)(Me)}function ge(Me){return new oe.y(we=>{(function dt(Me,we){var Ie,Be,He,H;return(0,d.mG)(this,void 0,void 0,function*(){try{for(Ie=(0,d.KL)(Me);!(Be=yield Ie.next()).done;)if(we.next(Be.value),we.closed)return}catch(me){He={error:me}}finally{try{Be&&!Be.done&&(H=Ie.return)&&(yield H.call(Ie))}finally{if(He)throw He.error}}we.complete()})})(Me,we).catch(Ie=>we.error(Ie))})}},6451:(pt,Ae,L)=>{L.d(Ae,{T:()=>de});var d=L(8189),te=L(8421),F=L(515),oe=L(7669),se=L(8996);function de(...le){const he=(0,oe.yG)(le),pe=(0,oe._6)(le,1/0),$=le;return $.length?1===$.length?(0,te.Xf)($[0]):(0,d.J)(pe)((0,se.D)($,he)):F.E}},5403:(pt,Ae,L)=>{L.d(Ae,{x:()=>te});var d=L(930);function te(oe,se,de,le,he){return new F(oe,se,de,le,he)}class F extends d.Lv{constructor(se,de,le,he,pe,$){super(se),this.onFinalize=pe,this.shouldUnsubscribe=$,this._next=de?function(G){try{de(G)}catch(Y){se.error(Y)}}:super._next,this._error=he?function(G){try{he(G)}catch(Y){se.error(Y)}finally{this.unsubscribe()}}:super._error,this._complete=le?function(){try{le()}catch(G){se.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:de}=this;super.unsubscribe(),!de&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}}},4004:(pt,Ae,L)=>{L.d(Ae,{U:()=>F});var d=L(4482),te=L(5403);function F(oe,se){return(0,d.e)((de,le)=>{let he=0;de.subscribe((0,te.x)(le,pe=>{le.next(oe.call(se,pe,he++))}))})}},8189:(pt,Ae,L)=>{L.d(Ae,{J:()=>F});var d=L(5577),te=L(4671);function F(oe=1/0){return(0,d.z)(te.y,oe)}},5577:(pt,Ae,L)=>{L.d(Ae,{z:()=>he});var d=L(4004),te=L(8421),F=L(4482),oe=L(9672),se=L(5403),le=L(576);function he(pe,$,G=1/0){return(0,le.m)($)?he((Y,Le)=>(0,d.U)((Re,be)=>$(Y,Re,Le,be))((0,te.Xf)(pe(Y,Le))),G):("number"==typeof $&&(G=$),(0,F.e)((Y,Le)=>function de(pe,$,G,Y,Le,Re,be,ot){const ye=[];let ge=0,tt=0,dt=!1;const Me=()=>{dt&&!ye.length&&!ge&&$.complete()},we=Be=>ge<Y?Ie(Be):ye.push(Be),Ie=Be=>{Re&&$.next(Be),ge++;let He=!1;(0,te.Xf)(G(Be,tt++)).subscribe((0,se.x)($,H=>{Le?.(H),Re?we(H):$.next(H)},()=>{He=!0},void 0,()=>{if(He)try{for(ge--;ye.length&&ge<Y;){const H=ye.shift();be?(0,oe.f)($,be,()=>Ie(H)):Ie(H)}Me()}catch(H){$.error(H)}}))};return pe.subscribe((0,se.x)($,we,()=>{dt=!0,Me()})),()=>{ot?.()}}(Y,Le,pe,G)))}},5363:(pt,Ae,L)=>{L.d(Ae,{Q:()=>oe});var d=L(9672),te=L(4482),F=L(5403);function oe(se,de=0){return(0,te.e)((le,he)=>{le.subscribe((0,F.x)(he,pe=>(0,d.f)(he,se,()=>he.next(pe),de),()=>(0,d.f)(he,se,()=>he.complete(),de),pe=>(0,d.f)(he,se,()=>he.error(pe),de)))})}},3099:(pt,Ae,L)=>{L.d(Ae,{B:()=>se});var d=L(8421),te=L(7579),F=L(930),oe=L(4482);function se(le={}){const{connector:he=(()=>new te.x),resetOnError:pe=!0,resetOnComplete:$=!0,resetOnRefCountZero:G=!0}=le;return Y=>{let Le,Re,be,ot=0,ye=!1,ge=!1;const tt=()=>{Re?.unsubscribe(),Re=void 0},dt=()=>{tt(),Le=be=void 0,ye=ge=!1},Me=()=>{const we=Le;dt(),we?.unsubscribe()};return(0,oe.e)((we,Ie)=>{ot++,!ge&&!ye&&tt();const Be=be=be??he();Ie.add(()=>{ot--,0===ot&&!ge&&!ye&&(Re=de(Me,G))}),Be.subscribe(Ie),!Le&&ot>0&&(Le=new F.Hp({next:He=>Be.next(He),error:He=>{ge=!0,tt(),Re=de(dt,pe,He),Be.error(He)},complete:()=>{ye=!0,tt(),Re=de(dt,$),Be.complete()}}),(0,d.Xf)(we).subscribe(Le))})(Y)}}function de(le,he,...pe){if(!0===he)return void le();if(!1===he)return;const $=new F.Hp({next:()=>{$.unsubscribe(),le()}});return he(...pe).subscribe($)}},9468:(pt,Ae,L)=>{L.d(Ae,{R:()=>te});var d=L(4482);function te(F,oe=0){return(0,d.e)((se,de)=>{de.add(F.schedule(()=>se.subscribe(de),oe))})}},8505:(pt,Ae,L)=>{L.d(Ae,{b:()=>se});var d=L(576),te=L(4482),F=L(5403),oe=L(4671);function se(de,le,he){const pe=(0,d.m)(de)||le||he?{next:de,error:le,complete:he}:de;return pe?(0,te.e)(($,G)=>{var Y;null===(Y=pe.subscribe)||void 0===Y||Y.call(pe);let Le=!0;$.subscribe((0,F.x)(G,Re=>{var be;null===(be=pe.next)||void 0===be||be.call(pe,Re),G.next(Re)},()=>{var Re;Le=!1,null===(Re=pe.complete)||void 0===Re||Re.call(pe),G.complete()},Re=>{var be;Le=!1,null===(be=pe.error)||void 0===be||be.call(pe,Re),G.error(Re)},()=>{var Re,be;Le&&(null===(Re=pe.unsubscribe)||void 0===Re||Re.call(pe)),null===(be=pe.finalize)||void 0===be||be.call(pe)}))}):oe.y}},4408:(pt,Ae,L)=>{L.d(Ae,{o:()=>se});var d=L(727);class te extends d.w0{constructor(le,he){super()}schedule(le,he=0){return this}}const F={setInterval(de,le,...he){const{delegate:pe}=F;return pe?.setInterval?pe.setInterval(de,le,...he):setInterval(de,le,...he)},clearInterval(de){const{delegate:le}=F;return(le?.clearInterval||clearInterval)(de)},delegate:void 0};var oe=L(8737);class se extends te{constructor(le,he){super(le,he),this.scheduler=le,this.work=he,this.pending=!1}schedule(le,he=0){var pe;if(this.closed)return this;this.state=le;const $=this.id,G=this.scheduler;return null!=$&&(this.id=this.recycleAsyncId(G,$,he)),this.pending=!0,this.delay=he,this.id=null!==(pe=this.id)&&void 0!==pe?pe:this.requestAsyncId(G,this.id,he),this}requestAsyncId(le,he,pe=0){return F.setInterval(le.flush.bind(le,this),pe)}recycleAsyncId(le,he,pe=0){if(null!=pe&&this.delay===pe&&!1===this.pending)return he;null!=he&&F.clearInterval(he)}execute(le,he){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const pe=this._execute(le,he);if(pe)return pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(le,he){let $,pe=!1;try{this.work(le)}catch(G){pe=!0,$=G||new Error("Scheduled action threw falsy error")}if(pe)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:le,scheduler:he}=this,{actions:pe}=he;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(pe,this),null!=le&&(this.id=this.recycleAsyncId(he,le,null)),this.delay=null,super.unsubscribe()}}}},7565:(pt,Ae,L)=>{L.d(Ae,{v:()=>F});var d=L(6063);class te{constructor(se,de=te.now){this.schedulerActionCtor=se,this.now=de}schedule(se,de=0,le){return new this.schedulerActionCtor(this,se).schedule(le,de)}}te.now=d.l.now;class F extends te{constructor(se,de=te.now){super(se,de),this.actions=[],this._active=!1}flush(se){const{actions:de}=this;if(this._active)return void de.push(se);let le;this._active=!0;do{if(le=se.execute(se.state,se.delay))break}while(se=de.shift());if(this._active=!1,le){for(;se=de.shift();)se.unsubscribe();throw le}}}},4986:(pt,Ae,L)=>{L.d(Ae,{z:()=>F});var d=L(4408);const F=new(L(7565).v)(d.o)},6063:(pt,Ae,L)=>{L.d(Ae,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(pt,Ae,L)=>{L.d(Ae,{z:()=>d});const d={setTimeout(te,F,...oe){const{delegate:se}=d;return se?.setTimeout?se.setTimeout(te,F,...oe):setTimeout(te,F,...oe)},clearTimeout(te){const{delegate:F}=d;return(F?.clearTimeout||clearTimeout)(te)},delegate:void 0}},2202:(pt,Ae,L)=>{L.d(Ae,{h:()=>te});const te=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(pt,Ae,L)=>{L.d(Ae,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(pt,Ae,L)=>{L.d(Ae,{_6:()=>de,jO:()=>oe,yG:()=>se});var d=L(576);function F(le){return le[le.length-1]}function oe(le){return(0,d.m)(F(le))?le.pop():void 0}function se(le){return function te(le){return le&&(0,d.m)(le.schedule)}(F(le))?le.pop():void 0}function de(le,he){return"number"==typeof F(le)?le.pop():he}},8737:(pt,Ae,L)=>{function d(te,F){if(te){const oe=te.indexOf(F);0<=oe&&te.splice(oe,1)}}L.d(Ae,{P:()=>d})},3888:(pt,Ae,L)=>{function d(te){const oe=te(se=>{Error.call(se),se.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}L.d(Ae,{d:()=>d})},2806:(pt,Ae,L)=>{L.d(Ae,{O:()=>oe,x:()=>F});var d=L(2416);let te=null;function F(se){if(d.v.useDeprecatedSynchronousErrorHandling){const de=!te;if(de&&(te={errorThrown:!1,error:null}),se(),de){const{errorThrown:le,error:he}=te;if(te=null,le)throw he}}else se()}function oe(se){d.v.useDeprecatedSynchronousErrorHandling&&te&&(te.errorThrown=!0,te.error=se)}},9672:(pt,Ae,L)=>{function d(te,F,oe,se=0,de=!1){const le=F.schedule(function(){oe(),de?te.add(this.schedule(null,se)):this.unsubscribe()},se);if(te.add(le),!de)return le}L.d(Ae,{f:()=>d})},4671:(pt,Ae,L)=>{function d(te){return te}L.d(Ae,{y:()=>d})},1144:(pt,Ae,L)=>{L.d(Ae,{z:()=>d});const d=te=>te&&"number"==typeof te.length&&"function"!=typeof te},2206:(pt,Ae,L)=>{L.d(Ae,{D:()=>te});var d=L(576);function te(F){return Symbol.asyncIterator&&(0,d.m)(F?.[Symbol.asyncIterator])}},576:(pt,Ae,L)=>{function d(te){return"function"==typeof te}L.d(Ae,{m:()=>d})},3670:(pt,Ae,L)=>{L.d(Ae,{c:()=>F});var d=L(8822),te=L(576);function F(oe){return(0,te.m)(oe[d.L])}},6495:(pt,Ae,L)=>{L.d(Ae,{T:()=>F});var d=L(2202),te=L(576);function F(oe){return(0,te.m)(oe?.[d.h])}},8239:(pt,Ae,L)=>{L.d(Ae,{t:()=>te});var d=L(576);function te(F){return(0,d.m)(F?.then)}},3260:(pt,Ae,L)=>{L.d(Ae,{L:()=>oe,Q:()=>F});var d=L(655),te=L(576);function F(se){return(0,d.FC)(this,arguments,function*(){const le=se.getReader();try{for(;;){const{value:he,done:pe}=yield(0,d.qq)(le.read());if(pe)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(he)}}finally{le.releaseLock()}})}function oe(se){return(0,te.m)(se?.getReader)}},4482:(pt,Ae,L)=>{L.d(Ae,{A:()=>te,e:()=>F});var d=L(576);function te(oe){return(0,d.m)(oe?.lift)}function F(oe){return se=>{if(te(se))return se.lift(function(de){try{return oe(de,this)}catch(le){this.error(le)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(pt,Ae,L)=>{function d(){}L.d(Ae,{Z:()=>d})},9635:(pt,Ae,L)=>{L.d(Ae,{U:()=>F,z:()=>te});var d=L(4671);function te(...oe){return F(oe)}function F(oe){return 0===oe.length?d.y:1===oe.length?oe[0]:function(de){return oe.reduce((le,he)=>he(le),de)}}},7849:(pt,Ae,L)=>{L.d(Ae,{h:()=>F});var d=L(2416),te=L(3410);function F(oe){te.z.setTimeout(()=>{const{onUnhandledError:se}=d.v;if(!se)throw oe;se(oe)})}},4532:(pt,Ae,L)=>{function d(te){return new TypeError(`You provided ${null!==te&&"object"==typeof te?"an invalid object":`'${te}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(Ae,{z:()=>d})},655:(pt,Ae,L)=>{function oe(Z,X){var ie={};for(var re in Z)Object.prototype.hasOwnProperty.call(Z,re)&&X.indexOf(re)<0&&(ie[re]=Z[re]);if(null!=Z&&"function"==typeof Object.getOwnPropertySymbols){var Fe=0;for(re=Object.getOwnPropertySymbols(Z);Fe<re.length;Fe++)X.indexOf(re[Fe])<0&&Object.prototype.propertyIsEnumerable.call(Z,re[Fe])&&(ie[re[Fe]]=Z[re[Fe]])}return ie}function he(Z,X,ie,re){return new(ie||(ie=Promise))(function(Pe,gt){function en(cn){try{Ke(re.next(cn))}catch(En){gt(En)}}function jt(cn){try{Ke(re.throw(cn))}catch(En){gt(En)}}function Ke(cn){cn.done?Pe(cn.value):function Fe(Pe){return Pe instanceof ie?Pe:new ie(function(gt){gt(Pe)})}(cn.value).then(en,jt)}Ke((re=re.apply(Z,X||[])).next())})}function ye(Z){return this instanceof ye?(this.v=Z,this):new ye(Z)}function ge(Z,X,ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Fe,re=ie.apply(Z,X||[]),Pe=[];return Fe={},gt("next"),gt("throw"),gt("return"),Fe[Symbol.asyncIterator]=function(){return this},Fe;function gt(Yt){re[Yt]&&(Fe[Yt]=function(tn){return new Promise(function(jr,kt){Pe.push([Yt,tn,jr,kt])>1||en(Yt,tn)})})}function en(Yt,tn){try{!function jt(Yt){Yt.value instanceof ye?Promise.resolve(Yt.value.v).then(Ke,cn):En(Pe[0][2],Yt)}(re[Yt](tn))}catch(jr){En(Pe[0][3],jr)}}function Ke(Yt){en("next",Yt)}function cn(Yt){en("throw",Yt)}function En(Yt,tn){Yt(tn),Pe.shift(),Pe.length&&en(Pe[0][0],Pe[0][1])}}function dt(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ie,X=Z[Symbol.asyncIterator];return X?X.call(Z):(Z=function Y(Z){var X="function"==typeof Symbol&&Symbol.iterator,ie=X&&Z[X],re=0;if(ie)return ie.call(Z);if(Z&&"number"==typeof Z.length)return{next:function(){return Z&&re>=Z.length&&(Z=void 0),{value:Z&&Z[re++],done:!Z}}};throw new TypeError(X?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z),ie={},re("next"),re("throw"),re("return"),ie[Symbol.asyncIterator]=function(){return this},ie);function re(Pe){ie[Pe]=Z[Pe]&&function(gt){return new Promise(function(en,jt){!function Fe(Pe,gt,en,jt){Promise.resolve(jt).then(function(Ke){Pe({value:Ke,done:en})},gt)}(en,jt,(gt=Z[Pe](gt)).done,gt.value)})}}}L.d(Ae,{FC:()=>ge,KL:()=>dt,_T:()=>oe,mG:()=>he,qq:()=>ye})},4650:(pt,Ae,L)=>{L.d(Ae,{$8M:()=>Xu,$Z:()=>Qy,AFp:()=>cM,AaK:()=>he,CHM:()=>Ou,CRH:()=>ph,CZH:()=>cp,CqO:()=>nb,D6c:()=>wD,EJc:()=>OP,EpF:()=>eb,F4k:()=>tb,FYo:()=>kf,FiY:()=>je,G48:()=>z0,Gf:()=>op,GfV:()=>iE,Gpc:()=>G,JOm:()=>Es,KtG:()=>Fu,LFG:()=>In,LSH:()=>qd,Lbi:()=>hM,Lck:()=>Dx,MAs:()=>JE,MMx:()=>yI,NdJ:()=>Pv,OlP:()=>Cn,Oqu:()=>Tb,PXZ:()=>c_,Q6J:()=>Av,QGY:()=>kv,QP$:()=>Qt,Qsj:()=>OS,R0b:()=>Js,RDi:()=>y,Rgc:()=>bl,SBq:()=>Tc,Sil:()=>mM,Suo:()=>VI,TTD:()=>cs,TgZ:()=>Sm,WLB:()=>SI,X6Q:()=>va,XFs:()=>Qe,Xpm:()=>Te,Xts:()=>Lg,Y36:()=>Qd,YKP:()=>mI,YNc:()=>QE,Yjl:()=>Ee,Yz7:()=>tn,Z0I:()=>os,ZZ4:()=>aw,_Bn:()=>gI,_UZ:()=>Mv,_Vd:()=>fl,_c5:()=>PM,_uU:()=>jA,aQg:()=>pp,c2e:()=>fM,cJS:()=>kt,cg1:()=>Bb,dDg:()=>DM,dqk:()=>ln,eFA:()=>uD,ekj:()=>Mm,eoX:()=>u_,f3M:()=>I,g9A:()=>XI,h0i:()=>lh,hGG:()=>OM,hij:()=>Wv,iGM:()=>Ei,ifc:()=>ft,ip1:()=>O0,jDz:()=>vI,kEZ:()=>AI,kL8:()=>Hb,l5B:()=>xI,lG2:()=>K,lqb:()=>hl,lri:()=>IM,n5z:()=>ms,oAB:()=>Vt,oxw:()=>ab,q4F:()=>sE,qLn:()=>Sc,qOj:()=>_m,qZA:()=>Am,rWj:()=>sD,s9C:()=>Ys,sBO:()=>dD,sIi:()=>eh,s_b:()=>Ym,soG:()=>i_,tb:()=>eD,tp0:()=>ht,uIk:()=>KE,vHH:()=>be,vpe:()=>oi,wAp:()=>Dt,xp6:()=>dE,z2F:()=>Lr,zSh:()=>jy,zs3:()=>Ac});var d=L(7579),te=L(727),F=L(9751),oe=L(6451),se=L(3099);function de(s){for(let o in s)if(s[o]===de)return o;throw Error("Could not find renamed property on target object.")}function le(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function he(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(he).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function pe(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const $=de({__forward_ref__:de});function G(s){return s.__forward_ref__=G,s.toString=function(){return he(this())},s}function Y(s){return Le(s)?s():s}function Le(s){return"function"==typeof s&&s.hasOwnProperty($)&&s.__forward_ref__===G}class be extends Error{constructor(o,u){super(function ot(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,u)),this.code=o}}function ye(s){return"string"==typeof s?s:null==s?"":String(s)}function we(s,o){throw new be(-201,!1)}function jt(s,o){null==s&&function Ke(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function tn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function kt(s){return{providers:s.providers||[],imports:s.imports||[]}}function dn(s){return xi(s,Mi)||xi(s,di)}function os(s){return null!==dn(s)}function xi(s,o){return s.hasOwnProperty(o)?s[o]:null}function xs(s){return s&&(s.hasOwnProperty(Qr)||s.hasOwnProperty(Bo))?s[Qr]:null}const Mi=de({\u0275prov:de}),Qr=de({\u0275inj:de}),di=de({ngInjectableDef:de}),Bo=de({ngInjectorDef:de});var Qe=(()=>((Qe=Qe||{})[Qe.Default=0]="Default",Qe[Qe.Host=1]="Host",Qe[Qe.Self=2]="Self",Qe[Qe.SkipSelf=4]="SkipSelf",Qe[Qe.Optional=8]="Optional",Qe))();let kr;function nr(s){const o=kr;return kr=s,o}function hi(s,o,u){const c=dn(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&Qe.Optional?null:void 0!==o?o:void we(he(s))}function kn(s){return{toString:s}.toString()}var qn=(()=>((qn=qn||{})[qn.OnPush=0]="OnPush",qn[qn.Default=1]="Default",qn))(),ft=(()=>{return(s=ft||(ft={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",ft;var s})();const ln=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Jr={},St=[],as=de({\u0275cmp:de}),nn=de({\u0275dir:de}),Ri=de({\u0275pipe:de}),on=de({\u0275mod:de}),rr=de({\u0275fac:de}),Gr=de({__NG_ELEMENT_ID__:de});let it=0;function Te(s){return kn(()=>{const u=!0===s.standalone,c={},f={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===qn.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||St,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||ft.Emulated,id:"c"+it++,styles:s.styles||St,_:null,setInput:null,schemas:s.schemas||null,tView:null},g=s.dependencies,v=s.features;return f.inputs=B(s.inputs,c),f.outputs=B(s.outputs),v&&v.forEach(E=>E(f)),f.directiveDefs=g?()=>("function"==typeof g?g():g).map(At).filter(Mt):null,f.pipeDefs=g?()=>("function"==typeof g?g():g).map(mt).filter(Mt):null,f})}function At(s){return J(s)||Ge(s)}function Mt(s){return null!==s}function Vt(s){return kn(()=>({type:s.type,bootstrap:s.bootstrap||St,declarations:s.declarations||St,imports:s.imports||St,exports:s.exports||St,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function B(s,o){if(null==s)return Jr;const u={};for(const c in s)if(s.hasOwnProperty(c)){let f=s[c],g=f;Array.isArray(f)&&(g=f[1],f=f[0]),u[f]=c,o&&(o[f]=g)}return u}const K=Te;function Ee(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function J(s){return s[as]||null}function Ge(s){return s[nn]||null}function mt(s){return s[Ri]||null}function Qt(s){const o=J(s)||Ge(s)||mt(s);return null!==o&&o.standalone}function _n(s,o){const u=s[on]||null;if(!u&&!0===o)throw new Error(`Type ${he(s)} does not have '\u0275mod' property.`);return u}function _r(s){return Array.isArray(s)&&"object"==typeof s[1]}function zr(s){return Array.isArray(s)&&!0===s[1]}function Iu(s){return 0!=(8&s.flags)}function Sa(s){return 2==(2&s.flags)}function Vl(s){return 1==(1&s.flags)}function Pr(s){return null!==s.template}function Jh(s){return 0!=(256&s[2])}function Qi(s,o){return s.hasOwnProperty(rr)?s[rr]:null}class ls{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function cs(){return oo}function oo(s){return s.type.prototype.ngOnChanges&&(s.setInput=Tu),Aa}function Aa(){const s=ef(this),o=s?.current;if(o){const u=s.previous;if(u===Jr)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Tu(s,o,u,c){const f=ef(s)||function xa(s,o){return s[Hl]=o}(s,{previous:Jr,current:null}),g=f.current||(f.current={}),v=f.previous,E=this.declaredInputs[u],b=v[E];g[E]=new ls(b&&b.currentValue,o,v===Jr),s[c]=o}cs.ngInherit=!0;const Hl="__ngSimpleChanges__";function ef(s){return s[Hl]||null}function On(s){for(;Array.isArray(s);)s=s[0];return s}function pi(s,o){return On(o[s])}function Or(s,o){return On(o[s.index])}function ao(s,o){return s.data[o]}function qt(s,o){const u=o[s];return _r(u)?u:u[0]}function uo(s){return 64==(64&s[2])}function ki(s,o){return null==o?null:s[o]}function Ru(s){s[18]=0}function An(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const xt={lFrame:Jl(null),bindingsEnabled:!0};function fs(){return xt.bindingsEnabled}function Se(){return xt.lFrame.lView}function $t(){return xt.lFrame.tView}function Ou(s){return xt.lFrame.contextLView=s,s[8]}function Fu(s){return xt.lFrame.contextLView=null,s}function Fn(){let s=Lu();for(;null!==s&&64===s.type;)s=s.parent;return s}function Lu(){return xt.lFrame.currentTNode}function gi(s,o){const u=xt.lFrame;u.currentTNode=s,u.isParent=o}function Ra(){return xt.lFrame.isParent}function Ln(){const s=xt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function lo(){return xt.lFrame.bindingIndex++}function lg(s,o){const u=xt.lFrame;u.bindingIndex=u.bindingRootIndex=s,Vu(o)}function Vu(s){xt.lFrame.currentDirectiveIndex=s}function Kl(){return xt.lFrame.currentQueryIndex}function Fa(s){xt.lFrame.currentQueryIndex=s}function Yl(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Uu(s,o,u){if(u&Qe.SkipSelf){let f=o,g=s;for(;!(f=f.parent,null!==f||u&Qe.Host||(f=Yl(g),null===f||(g=g[15],10&f.type))););if(null===f)return!1;o=f,s=g}const c=xt.lFrame=Ql();return c.currentTNode=o,c.lView=s,!0}function Bu(s){const o=Ql(),u=s[1];xt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function Ql(){const s=xt.lFrame,o=null===s?null:s.child;return null===o?Jl(s):o}function Jl(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Xl(){const s=xt.lFrame;return xt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const _d=Xl;function co(){const s=Xl();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function or(){return xt.lFrame.selectedIndex}function ti(s){xt.lFrame.selectedIndex=s}function wn(){const s=xt.lFrame;return ao(s.tView,s.selectedIndex)}function $u(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const g=s.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:E,ngAfterViewInit:b,ngAfterViewChecked:A,ngOnDestroy:N}=g;v&&(s.contentHooks||(s.contentHooks=[])).push(-u,v),E&&((s.contentHooks||(s.contentHooks=[])).push(u,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,E)),b&&(s.viewHooks||(s.viewHooks=[])).push(-u,b),A&&((s.viewHooks||(s.viewHooks=[])).push(u,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,A)),null!=N&&(s.destroyHooks||(s.destroyHooks=[])).push(u,N)}}function fo(s,o,u){zo(s,o,3,u)}function Go(s,o,u,c){(3&s[2])===u&&zo(s,o,u,c)}function wd(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function zo(s,o,u,c){const g=c??-1,v=o.length-1;let E=0;for(let b=void 0!==c?65535&s[18]:0;b<v;b++)if("number"==typeof o[b+1]){if(E=o[b],null!=c&&E>=c)break}else o[b]<0&&(s[18]+=65536),(E<g||-1==g)&&(Cd(s,u,o,b),s[18]=(4294901760&s[18])+b+2),b++}function Cd(s,o,u,c){const f=u[c]<0,g=u[c+1],E=s[f?-u[c]:u[c]];if(f){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(E)}finally{}}}else try{g.call(E)}finally{}}class Vs{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function qo(s,o,u){let c=0;for(;c<u.length;){const f=u[c];if("number"==typeof f){if(0!==f)break;c++;const g=u[c++],v=u[c++],E=u[c++];s.setAttribute(o,v,E,g)}else{const g=f,v=u[++c];qu(g)?s.setProperty(o,g,v):s.setAttribute(o,g,v),c++}}return c}function go(s){return 3===s||4===s||6===s}function qu(s){return 64===s.charCodeAt(0)}function La(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const f=o[c];"number"==typeof f?u=f:0===u||bd(s,u,f,null,-1===u||2===u?o[++c]:null)}}return s}function bd(s,o,u,c,f){let g=0,v=s.length;if(-1===o)v=-1;else for(;g<s.length;){const E=s[g++];if("number"==typeof E){if(E===o){v=-1;break}if(E>o){v=g-1;break}}}for(;g<s.length;){const E=s[g];if("number"==typeof E)break;if(E===u){if(null===c)return void(null!==f&&(s[g+1]=f));if(c===s[g+1])return void(s[g+2]=f)}g++,null!==c&&g++,null!==f&&g++}-1!==v&&(s.splice(v,0,o),g=v+1),s.splice(g++,0,u),null!==c&&s.splice(g++,0,c),null!==f&&s.splice(g++,0,f)}function Id(s){return-1!==s}function yr(s){return 32767&s}function Ua(s,o){let u=function Va(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let Xi=!0;function Ba(s){const o=Xi;return Xi=s,o}let Hn=0;const Pi={};function mo(s,o){const u=Ku(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,Ha(c.data,s),Ha(o,null),Ha(c.blueprint,null));const f=Yu(s,o),g=s.injectorIndex;if(Id(f)){const v=yr(f),E=Ua(f,o),b=E[1].data;for(let A=0;A<8;A++)o[g+A]=E[v+A]|b[v+A]}return o[g+8]=f,g}function Ha(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Ku(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Yu(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,f=o;for(;null!==f;){if(c=Yo(f),null===c)return-1;if(u++,f=f[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function Us(s,o,u){!function Zu(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(Gr)&&(c=u[Gr]),null==c&&(c=u[Gr]=Hn++);const f=255&c;o.data[s+(f>>5)]|=1<<f}(s,o,u)}function Bs(s,o,u){if(u&Qe.Optional||void 0!==s)return s;we()}function rc(s,o,u,c){if(u&Qe.Optional&&void 0===c&&(c=null),0==(u&(Qe.Self|Qe.Host))){const f=s[9],g=nr(void 0);try{return f?f.get(o,c,u&Qe.Optional):hi(o,c,u&Qe.Optional)}finally{nr(g)}}return Bs(c,0,u)}function _o(s,o,u,c=Qe.Default,f){if(null!==s){if(1024&o[2]){const v=function Ko(s,o,u,c,f){let g=s,v=o;for(;null!==g&&null!==v&&1024&v[2]&&!(256&v[2]);){const E=$a(g,v,u,c|Qe.Self,Pi);if(E!==Pi)return E;let b=g.parent;if(!b){const A=v[21];if(A){const N=A.get(u,Pi,c);if(N!==Pi)return N}b=Yo(v),v=v[15]}g=b}return f}(s,o,u,c,Pi);if(v!==Pi)return v}const g=$a(s,o,u,c,Pi);if(g!==Pi)return g}return rc(o,u,c,f)}function $a(s,o,u,c,f){const g=function ic(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Gr)?s[Gr]:void 0;return"number"==typeof o?o>=0?255&o:sc:o}(u);if("function"==typeof g){if(!Uu(o,s,c))return c&Qe.Host?Bs(f,0,c):rc(o,u,c,f);try{const v=g(c);if(null!=v||c&Qe.Optional)return v;we()}finally{_d()}}else if("number"==typeof g){let v=null,E=Ku(s,o),b=-1,A=c&Qe.Host?o[16][6]:null;for((-1===E||c&Qe.SkipSelf)&&(b=-1===E?Yu(s,o):o[E+8],-1!==b&&Ga(c,!1)?(v=o[1],E=yr(b),o=Ua(b,o)):E=-1);-1!==E;){const N=o[1];if(Qu(g,E,N.data)){const O=Sd(E,o,u,v,c,A);if(O!==Pi)return O}b=o[E+8],-1!==b&&Ga(c,o[1].data[E+8]===A)&&Qu(g,E,o)?(v=N,E=yr(b),o=Ua(b,o)):E=-1}}return f}function Sd(s,o,u,c,f,g){const v=o[1],E=v.data[s+8],N=Zo(E,v,u,null==c?Sa(E)&&Xi:c!=v&&0!=(3&E.type),f&Qe.Host&&g===E);return null!==N?gs(o,v,N,E):Pi}function Zo(s,o,u,c,f){const g=s.providerIndexes,v=o.data,E=1048575&g,b=s.directiveStart,N=g>>20,W=f?E+N:s.directiveEnd;for(let ee=c?E:E+N;ee<W;ee++){const Ce=v[ee];if(ee<b&&u===Ce||ee>=b&&Ce.type===u)return ee}if(f){const ee=v[b];if(ee&&Pr(ee)&&ee.type===u)return b}return null}function gs(s,o,u,c){let f=s[u];const g=o.data;if(function po(s){return s instanceof Vs}(f)){const v=f;v.resolving&&function tt(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new be(-200,`Circular dependency in DI detected for ${s}${u}`)}(function ge(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ye(s)}(g[u]));const E=Ba(v.canSeeViewProviders);v.resolving=!0;const b=v.injectImpl?nr(v.injectImpl):null;Uu(s,c,Qe.Default);try{f=s[u]=v.factory(void 0,g,s,c),o.firstCreatePass&&u>=c.directiveStart&&function vd(s,o,u){const{ngOnChanges:c,ngOnInit:f,ngDoCheck:g}=o.type.prototype;if(c){const v=oo(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,v),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,v)}f&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,f),g&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,g),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,g))}(u,g[u],o)}finally{null!==b&&nr(b),Ba(E),v.resolving=!1,_d()}}return f}function Qu(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function Ga(s,o){return!(s&Qe.Self||s&Qe.Host&&o)}class yo{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return _o(this._tNode,this._lView,o,c,u)}}function sc(){return new yo(Fn(),Se())}function ms(s){return kn(()=>{const o=s.prototype.constructor,u=o[rr]||Ju(o),c=Object.prototype;let f=Object.getPrototypeOf(s.prototype).constructor;for(;f&&f!==c;){const g=f[rr]||Ju(f);if(g&&g!==u)return g;f=Object.getPrototypeOf(f)}return g=>new g})}function Ju(s){return Le(s)?()=>{const o=Ju(Y(s));return o&&o()}:Qi(s)}function Yo(s){const o=s[1],u=o.type;return 2===u?o.declTNode:1===u?s[6]:null}function Xu(s){return function Td(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let f=0;for(;f<c;){const g=u[f];if(go(g))break;if(0===g)f+=2;else if("number"==typeof g)for(f++;f<c&&"string"==typeof u[f];)f++;else{if(g===o)return u[f+1];f+=2}}}return null}(Fn(),s)}const js="__parameters__";function Xo(s,o,u){return kn(()=>{const c=function el(s){return function(...u){if(s){const c=s(...u);for(const f in c)this[f]=c[f]}}}(o);function f(...g){if(this instanceof f)return c.apply(this,g),this;const v=new f(...g);return E.annotation=v,E;function E(b,A,N){const O=b.hasOwnProperty(js)?b[js]:Object.defineProperty(b,js,{value:[]})[js];for(;O.length<=N;)O.push(null);return(O[N]=O[N]||[]).push(v),b}}return u&&(f.prototype=Object.create(u.prototype)),f.prototype.ngMetadataName=s,f.annotationCls=f,f})}class Cn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=tn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function sn(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),sn(c,o)):o!==s&&o.push(c)}return o}function Oi(s,o){s.forEach(u=>Array.isArray(u)?Oi(u,o):o(u))}function Wa(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function wr(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Je(s,o,u){let c=$s(s,o);return c>=0?s[1|c]=u:(c=~c,function ac(s,o,u,c){let f=s.length;if(f==o)s.push(u,c);else if(1===f)s.push(c,s[0]),s[0]=u;else{for(f--,s.push(s[f-1],s[f]);f>o;)s[f]=s[f-2],f--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function Za(s,o){const u=$s(s,o);if(u>=0)return s[1|u]}function $s(s,o){return function ea(s,o,u){let c=0,f=s.length>>u;for(;f!==c;){const g=c+(f-c>>1),v=s[g<<u];if(o===v)return g<<u;v>o?f=g:c=g+1}return~(f<<u)}(s,o,1)}const Fi={},cc="__NG_DI_FLAG__",na="ngTempTokenPath",vs=/\n/gm,Yn="__source";let zs;function ws(s){const o=zs;return zs=s,o}function Mn(s,o=Qe.Default){if(void 0===zs)throw new be(-203,!1);return null===zs?hi(s,void 0,o):zs.get(s,o&Qe.Optional?null:void 0,o)}function In(s,o=Qe.Default){return(function Ms(){return kr}()||Mn)(Y(s),o)}function I(s,o=Qe.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),In(s,o)}function T(s){const o=[];for(let u=0;u<s.length;u++){const c=Y(s[u]);if(Array.isArray(c)){if(0===c.length)throw new be(900,!1);let f,g=Qe.Default;for(let v=0;v<c.length;v++){const E=c[v],b=U(E);"number"==typeof b?-1===b?f=E.token:g|=b:f=E}o.push(In(f,g))}else o.push(In(c))}return o}function M(s,o){return s[cc]=o,s.prototype[cc]=o,s}function U(s){return s[cc]}const je=M(Xo("Optional"),8),ht=M(Xo("SkipSelf"),4);var Es=(()=>((Es=Es||{})[Es.Important=1]="Important",Es[Es.DashCase=2]="DashCase",Es))();const mc=new Map;let mf=0;const Co="__ngContext__";function Sr(s,o){_r(o)?(s[Co]=o[20],function Ey(s){mc.set(s[20],s)}(o)):s[Co]=o}function Pd(s,o){return undefined(s,o)}function eu(s){const o=s[3];return zr(o)?o[3]:o}function tu(s){return bg(s[13])}function Eo(s){return bg(s[4])}function bg(s){for(;null!==s&&!zr(s);)s=s[4];return s}function bo(s,o,u,c,f){if(null!=c){let g,v=!1;zr(c)?g=c:_r(c)&&(v=!0,c=c[0]);const E=On(c);0===s&&null!==u?null==f?Ag(o,u,E):Do(o,u,E,f||null,!0):1===s&&null!==u?Do(o,u,E,f||null,!0):2===s?function $d(s,o,u){const c=qr(s,o);c&&function Ef(s,o,u,c){s.removeChild(o,u,c)}(s,c,o,u)}(o,E,v):3===s&&o.destroyNode(E),null!=g&&function If(s,o,u,c,f){const g=u[7];g!==On(u)&&bo(o,s,c,g,f);for(let E=10;E<u.length;E++){const b=u[E];aa(b[1],b,s,o,c,g)}}(o,s,g,u,f)}}function ll(s,o,u){return s.createElement(o,u)}function vf(s,o){const u=s[9],c=u.indexOf(o),f=o[3];512&o[2]&&(o[2]&=-513,An(f,-1)),u.splice(c,1)}function wf(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const f=c[17];null!==f&&f!==s&&vf(f,c),o>0&&(s[u-1][4]=c[4]);const g=wr(s,10+o);!function nu(s,o){aa(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const v=g[19];null!==v&&v.detachView(g[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function Tg(s,o){if(!(128&o[2])){const u=o[11];u.destroyNode&&aa(s,o,u,3,null,null),function xy(s){let o=s[13];if(!o)return Cf(s[1],s);for(;o;){let u=null;if(_r(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)_r(o)&&Cf(o[1],o),o=o[3];null===o&&(o=s),_r(o)&&Cf(o[1],o),u=o&&o[4]}o=u}}(o)}}function Cf(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function Sg(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const f=o[u[c]];if(!(f instanceof Vs)){const g=u[c+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const E=f[g[v]],b=g[v+1];try{b.call(E)}finally{}}else try{g.call(f)}finally{}}}}(s,o),function Ry(s,o){const u=s.cleanup,c=o[7];let f=-1;if(null!==u)for(let g=0;g<u.length-1;g+=2)if("string"==typeof u[g]){const v=u[g+1],E="function"==typeof v?v(o):On(o[v]),b=c[f=u[g+2]],A=u[g+3];"boolean"==typeof A?E.removeEventListener(u[g],b,A):A>=0?c[f=A]():c[f=-A].unsubscribe(),g+=2}else{const v=c[f=u[g+1]];u[g].call(v)}if(null!==c){for(let g=f+1;g<c.length;g++)(0,c[g])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const u=o[17];if(null!==u&&zr(o[3])){u!==o[3]&&vf(u,o);const c=o[19];null!==c&&c.detachView(s)}!function Md(s){mc.delete(s[20])}(o)}}function Ld(s,o,u){return function Vd(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const f=s.data[c.directiveStart].encapsulation;if(f===ft.None||f===ft.Emulated)return null}return Or(c,u)}(s,o.parent,u)}function Do(s,o,u,c,f){s.insertBefore(o,u,c,f)}function Ag(s,o,u){s.appendChild(o,u)}function vc(s,o,u,c,f){null!==c?Do(s,o,u,c,f):Ag(s,o,u)}function qr(s,o){return s.parentNode(o)}let Sf,Ud=function wc(s,o,u){return 40&s.type?Or(s,u):null};function jd(s,o,u,c){const f=Ld(s,c,o),g=o[11],E=function bf(s,o,u){return Ud(s,o,u)}(c.parent||o[6],c,o);if(null!=f)if(Array.isArray(u))for(let b=0;b<u.length;b++)vc(g,f,u[b],E,!1);else vc(g,f,u,E,!1)}function vi(s,o){if(null!==o){const u=o.type;if(3&u)return Or(o,s);if(4&u)return Cc(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return vi(s,c);{const f=s[o.index];return zr(f)?Cc(-1,f):On(f)}}if(32&u)return Pd(o,s)()||On(s[o.index]);{const c=Hd(s,o);return null!==c?Array.isArray(c)?c[0]:vi(eu(s[16]),c):vi(s,o.next)}}return null}function Hd(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Cc(s,o){const u=10+s+1;if(u<o.length){const c=o[u],f=c[1].firstChild;if(null!==f)return vi(c,f)}return o[7]}function Ec(s,o,u,c,f,g,v){for(;null!=u;){const E=c[u.index],b=u.type;if(v&&0===o&&(E&&Sr(On(E),c),u.flags|=4),64!=(64&u.flags))if(8&b)Ec(s,o,u.child,c,f,g,!1),bo(o,s,f,E,g);else if(32&b){const A=Pd(u,c);let N;for(;N=A();)bo(o,s,f,N,g);bo(o,s,f,E,g)}else 16&b?ua(s,o,c,u,f,g):bo(o,s,f,E,g);u=v?u.projectionNext:u.next}}function aa(s,o,u,c,f,g){Ec(u,c,s.firstChild,o,f,g,!1)}function ua(s,o,u,c,f,g){const v=u[16],b=v[6].projection[c.projection];if(Array.isArray(b))for(let A=0;A<b.length;A++)bo(o,s,f,b[A],g);else Ec(s,o,b,v[3],f,g,!0)}function ns(s,o,u){s.setAttribute(o,"style",u)}function la(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function y(s){Sf=s}class fe{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Cr(s){return s instanceof fe?s.changingThisBreaksApplicationSecurity:s}const su=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var ur=(()=>((ur=ur||{})[ur.NONE=0]="NONE",ur[ur.HTML=1]="HTML",ur[ur.STYLE=2]="STYLE",ur[ur.SCRIPT=3]="SCRIPT",ur[ur.URL=4]="URL",ur[ur.RESOURCE_URL=5]="RESOURCE_URL",ur))();function qd(s){const o=function dl(){const s=Se();return s&&s[12]}();return o?o.sanitize(ur.URL,s)||"":function rs(s,o){const u=function xg(s){return s instanceof fe&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}(s,"URL")?Cr(s):function ou(s){return(s=String(s)).match(su)?s:"unsafe:"+s}(ye(s))}const Lg=new Cn("ENVIRONMENT_INITIALIZER"),Zd=new Cn("INJECTOR",-1),Ly=new Cn("INJECTOR_DEF_TYPES");class ZC{get(o,u=Fi){if(u===Fi){const c=new Error(`NullInjectorError: No provider for ${he(o)}!`);throw c.name="NullInjectorError",c}return u}}function bS(...s){return{\u0275providers:KC(0,s)}}function KC(s,...o){const u=[],c=new Set;let f;return Oi(o,g=>{const v=g;Vy(v,u,[],c)&&(f||(f=[]),f.push(v))}),void 0!==f&&YC(f,u),u}function YC(s,o){for(let u=0;u<s.length;u++){const{providers:f}=s[u];Oi(f,g=>{o.push(g)})}}function Vy(s,o,u,c){if(!(s=Y(s)))return!1;let f=null,g=xs(s);const v=!g&&J(s);if(g||v){if(v&&!v.standalone)return!1;f=s}else{const b=s.ngModule;if(g=xs(b),!g)return!1;f=b}const E=c.has(f);if(v){if(E)return!1;if(c.add(f),v.dependencies){const b="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const A of b)Vy(A,o,u,c)}}else{if(!g)return!1;{if(null!=g.imports&&!E){let A;c.add(f);try{Oi(g.imports,N=>{Vy(N,o,u,c)&&(A||(A=[]),A.push(N))})}finally{}void 0!==A&&YC(A,o)}if(!E){const A=Qi(f)||(()=>new f);o.push({provide:f,useFactory:A,deps:St},{provide:Ly,useValue:f,multi:!0},{provide:Lg,useValue:()=>In(f),multi:!0})}const b=g.providers;null==b||E||Oi(b,N=>{o.push(N)})}}return f!==s&&void 0!==s.providers}const IS=de({provide:String,useValue:de});function By(s){return null!==s&&"object"==typeof s&&IS in s}function Dc(s){return"function"==typeof s}const jy=new Cn("Set Injector scope."),Rf={},TS={};let Vg;function Nf(){return void 0===Vg&&(Vg=new ZC),Vg}class hl{}class Hy extends hl{constructor(o,u,c,f){super(),this.parent=u,this.source=c,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Bg(o,v=>this.processProvider(v)),this.records.set(Zd,Kd(void 0,this)),f.has("environment")&&this.records.set(hl,Kd(void 0,this));const g=this.records.get(jy);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(Ly.multi,St,Qe.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const u=ws(this),c=nr(void 0);try{return o()}finally{ws(u),nr(c)}}get(o,u=Fi,c=Qe.Default){this.assertNotDestroyed();const f=ws(this),g=nr(void 0);try{if(!(c&Qe.SkipSelf)){let E=this.records.get(o);if(void 0===E){const b=function eE(s){return"function"==typeof s||"object"==typeof s&&s instanceof Cn}(o)&&dn(o);E=b&&this.injectableDefInScope(b)?Kd(Ug(o),Rf):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(c&Qe.Self?Nf():this.parent).get(o,u=c&Qe.Optional&&u===Fi?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[na]=v[na]||[]).unshift(he(o)),f)throw v;return function Q(s,o,u,c){const f=s[na];throw o[Yn]&&f.unshift(o[Yn]),s.message=function ne(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let f=he(o);if(Array.isArray(o))f=o.map(he).join(" -> ");else if("object"==typeof o){let g=[];for(let v in o)if(o.hasOwnProperty(v)){let E=o[v];g.push(v+":"+("string"==typeof E?JSON.stringify(E):he(E)))}f=`{${g.join(", ")}}`}return`${u}${c?"("+c+")":""}[${f}]: ${s.replace(vs,"\n  ")}`}("\n"+s.message,f,u,c),s.ngTokenPath=f,s[na]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{nr(g),ws(f)}}resolveInjectorInitializers(){const o=ws(this),u=nr(void 0);try{const c=this.get(Lg.multi,St,Qe.Self);for(const f of c)f()}finally{ws(o),nr(u)}}toString(){const o=[],u=this.records;for(const c of u.keys())o.push(he(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new be(205,!1)}processProvider(o){let u=Dc(o=Y(o))?o:Y(o&&o.provide);const c=function AS(s){return By(s)?Kd(void 0,s.useValue):Kd(XC(s),Rf)}(o);if(Dc(o)||!0!==o.multi)this.records.get(u);else{let f=this.records.get(u);f||(f=Kd(void 0,Rf,!0),f.factory=()=>T(f.multi),this.records.set(u,f)),u=o,f.multi.push(o)}this.records.set(u,c)}hydrate(o,u){return u.value===Rf&&(u.value=TS,u.value=u.factory()),"object"==typeof u.value&&u.value&&function MS(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=Y(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function Ug(s){const o=dn(s),u=null!==o?o.factory:Qi(s);if(null!==u)return u;if(s instanceof Cn)throw new be(204,!1);if(s instanceof Function)return function SS(s){const o=s.length;if(o>0)throw function Hs(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new be(204,!1);const u=function Hr(s){const o=s&&(s[Mi]||s[di]);if(o){const u=function $r(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new be(204,!1)}function XC(s,o,u){let c;if(Dc(s)){const f=Y(s);return Qi(f)||Ug(f)}if(By(s))c=()=>Y(s.useValue);else if(function JC(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...T(s.deps||[]));else if(function QC(s){return!(!s||!s.useExisting)}(s))c=()=>In(Y(s.useExisting));else{const f=Y(s&&(s.useClass||s.provide));if(!function xS(s){return!!s.deps}(s))return Qi(f)||Ug(f);c=()=>new f(...T(s.deps))}return c}function Kd(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function $y(s){return!!s.\u0275providers}function Bg(s,o){for(const u of s)Array.isArray(u)?Bg(u,o):$y(u)?Bg(u.\u0275providers,o):o(u)}class RS{}class kS{resolveComponentFactory(o){throw function NS(s){const o=Error(`No component factory found for ${he(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let fl=(()=>{class s{}return s.NULL=new kS,s})();function rE(){return pl(Fn(),Se())}function pl(s,o){return new Tc(Or(s,o))}let Tc=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=rE,s})();function PS(s){return s instanceof Tc?s.nativeElement:s}class kf{}let OS=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function FS(){const s=Se(),u=qt(Fn().index,s);return(_r(u)?u:s)[11]}(),s})(),LS=(()=>{class s{}return s.\u0275prov=tn({token:s,providedIn:"root",factory:()=>null}),s})();class iE{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const sE=new iE("14.2.12"),jg={};function Hg(s){return s.ngOriginalError}class Sc{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&Hg(o);for(;u&&Hg(u);)u=Hg(u);return u||null}}function ha(s){return s instanceof Function?s():s}function Gy(s,o,u){let c=s.length;for(;;){const f=s.indexOf(o,u);if(-1===f)return f;if(0===f||s.charCodeAt(f-1)<=32){const g=o.length;if(f+g===c||s.charCodeAt(f+g)<=32)return f}u=f+1}}const Wg="ng-template";function $S(s,o,u){let c=0;for(;c<s.length;){let f=s[c++];if(u&&"class"===f){if(f=s[c],-1!==Gy(f.toLowerCase(),o,0))return!0}else if(1===f){for(;c<s.length&&"string"==typeof(f=s[c++]);)if(f.toLowerCase()===o)return!0;return!1}}return!1}function uE(s){return 4===s.type&&s.value!==Wg}function GS(s,o,u){return o===(4!==s.type||u?s.value:Wg)}function lE(s,o,u){let c=4;const f=s.attrs||[],g=function cE(s){for(let o=0;o<s.length;o++)if(go(s[o]))return o;return s.length}(f);let v=!1;for(let E=0;E<o.length;E++){const b=o[E];if("number"!=typeof b){if(!v)if(4&c){if(c=2|1&c,""!==b&&!GS(s,b,u)||""===b&&1===o.length){if(So(c))return!1;v=!0}}else{const A=8&c?b:o[++E];if(8&c&&null!==s.attrs){if(!$S(s.attrs,A,u)){if(So(c))return!1;v=!0}continue}const O=xk(8&c?"class":b,f,uE(s),u);if(-1===O){if(So(c))return!1;v=!0;continue}if(""!==A){let W;W=O>g?"":f[O+1].toLowerCase();const ee=8&c?W:null;if(ee&&-1!==Gy(ee,A,0)||2&c&&A!==W){if(So(c))return!1;v=!0}}}}else{if(!v&&!So(c)&&!So(b))return!1;if(v&&So(b))continue;v=!1,c=b|1&c}}return So(c)||v}function So(s){return 0==(1&s)}function xk(s,o,u,c){if(null===o)return-1;let f=0;if(c||!u){let g=!1;for(;f<o.length;){const v=o[f];if(v===s)return f;if(3===v||6===v)g=!0;else{if(1===v||2===v){let E=o[++f];for(;"string"==typeof E;)E=o[++f];continue}if(4===v)break;if(0===v){f+=4;continue}}f+=g?1:2}return-1}return function zS(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function Of(s,o,u=!1){for(let c=0;c<o.length;c++)if(lE(s,o[c],u))return!0;return!1}function zy(s,o){return s?":not("+o.trim()+")":o}function qS(s){let o=s[0],u=1,c=2,f="",g=!1;for(;u<s.length;){let v=s[u];if("string"==typeof v)if(2&c){const E=s[++u];f+="["+v+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?f+="."+v:4&c&&(f+=" "+v);else""!==f&&!So(v)&&(o+=zy(g,f),f=""),c=v,g=g||!So(c);u++}return""!==f&&(o+=zy(g,f)),o}const Ft={};function dE(s){Wy($t(),Se(),or()+s,!1)}function Wy(s,o,u,c){if(!c)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&fo(o,g,u)}else{const g=s.preOrderHooks;null!==g&&Go(o,g,0,u)}ti(u)}function pE(s,o=null,u=null,c){const f=gE(s,o,u,c);return f.resolveInjectorInitializers(),f}function gE(s,o=null,u=null,c,f=new Set){const g=[u||St,bS(s)];return c=c||("object"==typeof s?void 0:he(s)),new Hy(g,o||Nf(),c||null,f)}let Ac=(()=>{class s{static create(u,c){if(Array.isArray(u))return pE({name:""},c,u,"");{const f=u.name??"";return pE({name:f},u.parent,u.providers,f)}}}return s.THROW_IF_NOT_FOUND=Fi,s.NULL=new ZC,s.\u0275prov=tn({token:s,providedIn:"any",factory:()=>In(Zd)}),s.__NG_ELEMENT_ID__=-1,s})();function Qd(s,o=Qe.Default){const u=Se();return null===u?In(s,o):_o(Fn(),u,Y(s),o)}function Qy(){throw new Error("invalid")}function Jd(s,o){return s<<17|o<<2}function qs(s){return s>>17&32767}function Xy(s){return 2|s}function ml(s){return(131068&s)>>2}function IE(s,o){return-131069&s|o<<2}function Qg(s){return 1|s}function Zs(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const f=u[c],g=u[c+1];if(-1!==g){const v=s.data[g];Fa(f),v.contentQueries(2,o[g],g)}}}function Xd(s,o,u,c,f,g,v,E,b,A,N){const O=o.blueprint.slice();return O[0]=f,O[2]=76|c,(null!==N||s&&1024&s[2])&&(O[2]|=1024),Ru(O),O[3]=O[15]=s,O[8]=u,O[10]=v||s&&s[10],O[11]=E||s&&s[11],O[12]=b||s&&s[12]||null,O[9]=A||s&&s[9]||null,O[6]=g,O[20]=function Cy(){return mf++}(),O[21]=N,O[16]=2==o.type?s[16]:O,O}function Nc(s,o,u,c,f){let g=s.data[o];if(null===g)g=function ov(s,o,u,c,f){const g=Lu(),v=Ra(),b=s.data[o]=function im(s,o,u,c,f,g){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,u,o,c,f);return null===s.firstChild&&(s.firstChild=b),null!==g&&(v?null==g.child&&null!==b.parent&&(g.child=b):null===g.next&&(g.next=b)),b}(s,o,u,c,f),function ug(){return xt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=u,g.value=c,g.attrs=f;const v=function $o(){const s=xt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return gi(g,!0),g}function lr(s,o,u,c){if(0===u)return-1;const f=o.length;for(let g=0;g<u;g++)o.push(c),s.blueprint.push(c),s.data.push(null);return f}function av(s,o,u){Bu(o);try{const c=s.viewQuery;null!==c&&Uf(1,c,u);const f=s.template;null!==f&&rm(s,o,f,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Zs(s,o),s.staticViewQueries&&Uf(2,s.viewQuery,u);const g=s.components;null!==g&&function Ao(s,o){for(let u=0;u<o.length;u++)_v(s,o[u])}(o,g)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,co()}}function kc(s,o,u,c){const f=o[2];if(128!=(128&f)){Bu(o);try{Ru(o),function ql(s){return xt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&rm(s,o,u,2,c);const v=3==(3&f);if(v){const A=s.preOrderCheckHooks;null!==A&&fo(o,A,null)}else{const A=s.preOrderHooks;null!==A&&Go(o,A,0,null),wd(o,0)}if(function mv(s){for(let o=tu(s);null!==o;o=Eo(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const f=u[c],g=f[3];0==(512&f[2])&&An(g,1),f[2]|=512}}}(o),function vA(s){for(let o=tu(s);null!==o;o=Eo(o))for(let u=10;u<o.length;u++){const c=o[u],f=c[1];uo(c)&&kc(f,c,f.template,c[8])}}(o),null!==s.contentQueries&&Zs(s,o),v){const A=s.contentCheckHooks;null!==A&&fo(o,A)}else{const A=s.contentHooks;null!==A&&Go(o,A,1),wd(o,1)}!function Li(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const f=u[c];if(f<0)ti(~f);else{const g=f,v=u[++c],E=u[++c];lg(v,g),E(2,o[g])}}}finally{ti(-1)}}(s,o);const E=s.components;null!==E&&function P(s,o){for(let u=0;u<o.length;u++)BE(s,o[u])}(o,E);const b=s.viewQuery;if(null!==b&&Uf(2,b,c),v){const A=s.viewCheckHooks;null!==A&&fo(o,A)}else{const A=s.viewHooks;null!==A&&Go(o,A,2),wd(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,An(o[3],-1))}finally{co()}}}function rm(s,o,u,c,f){const g=or(),v=2&c;try{ti(-1),v&&o.length>22&&Wy(s,o,22,!1),u(c,f)}finally{ti(g)}}function uv(s,o,u){!fs()||(function FE(s,o,u,c){const f=u.directiveStart,g=u.directiveEnd;s.firstCreatePass||mo(u,o),Sr(c,o);const v=u.initialInputs;for(let E=f;E<g;E++){const b=s.data[E],A=Pr(b);A&&VE(o,u,b);const N=gs(o,s,E,u);Sr(N,o),null!==v&&Vf(0,E-f,N,b,0,v),A&&(qt(u.index,o)[8]=N)}}(s,o,u,Or(u,o)),128==(128&u.flags)&&function um(s,o,u){const c=u.directiveStart,f=u.directiveEnd,g=u.index,v=function Zl(){return xt.lFrame.currentDirectiveIndex}();try{ti(g);for(let E=c;E<f;E++){const b=s.data[E],A=o[E];Vu(E),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&pv(b,A)}}finally{ti(-1),Vu(v)}}(s,o,u))}function lv(s,o,u=Or){const c=o.localNames;if(null!==c){let f=o.index+1;for(let g=0;g<c.length;g+=2){const v=c[g+1],E=-1===v?u(o,s):s[v];s[f++]=E}}}function cv(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=dv(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function dv(s,o,u,c,f,g,v,E,b,A){const N=22+c,O=N+f,W=function dA(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:Ft);return u}(N,O),ee="function"==typeof A?A():A;return W[1]={type:s,blueprint:W,template:u,queries:null,viewQuery:E,declTNode:o,data:W.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:O,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:b,consts:ee,incompleteFirstPass:!1}}function Ci(s,o,u,c){const f=vv(o);null===u?f.push(c):(f.push(u),s.firstCreatePass&&$E(s).push(c,f.length-1))}function hv(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const f=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,f):u[c]=[o,f]}return u}function sm(s,o){const c=o.directiveEnd,f=s.data,g=o.attrs,v=[];let E=null,b=null;for(let A=o.directiveStart;A<c;A++){const N=f[A],O=N.inputs,W=null===g||uE(o)?null:yA(O,g);v.push(W),E=hv(O,A,E),b=hv(N.outputs,A,b)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=E,o.outputs=b}function Vi(s,o,u,c,f,g,v,E){const b=Or(o,u);let N,A=o.inputs;!E&&null!=A&&(N=A[c])?(pm(s,u,N,c,f),Sa(o)&&am(u,o.index)):3&o.type&&(c=function om(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),f=null!=v?v(f,o.value||"",c):f,g.setProperty(b,c,f))}function am(s,o){const u=qt(o,s);16&u[2]||(u[2]|=32)}function fv(s,o,u,c){let f=!1;if(fs()){const g=function gA(s,o,u){const c=s.directiveRegistry;let f=null;if(c)for(let g=0;g<c.length;g++){const v=c[g];Of(u,v.selectors,!1)&&(f||(f=[]),Us(mo(u,o),s,v.type),Pr(v)?(LE(s,u),f.unshift(v)):f.push(v))}return f}(s,o,u),v=null===c?null:{"":-1};if(null!==g){f=!0,gv(u,s.data.length,g.length);for(let N=0;N<g.length;N++){const O=g[N];O.providersResolver&&O.providersResolver(O)}let E=!1,b=!1,A=lr(s,o,g.length,null);for(let N=0;N<g.length;N++){const O=g[N];u.mergedAttrs=La(u.mergedAttrs,O.hostAttrs),lm(s,u,o,A,O),_A(A,O,v),null!==O.contentQueries&&(u.flags|=8),(null!==O.hostBindings||null!==O.hostAttrs||0!==O.hostVars)&&(u.flags|=128);const W=O.type.prototype;!E&&(W.ngOnChanges||W.ngOnInit||W.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),E=!0),!b&&(W.ngOnChanges||W.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),b=!0),A++}sm(s,u)}v&&function mA(s,o,u){if(o){const c=s.localNames=[];for(let f=0;f<o.length;f+=2){const g=u[o[f+1]];if(null==g)throw new be(-301,!1);c.push(o[f],g)}}}(u,c,v)}return u.mergedAttrs=La(u.mergedAttrs,u.attrs),f}function OE(s,o,u,c,f,g){const v=g.hostBindings;if(v){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const b=~o.index;(function Lf(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(E)!=b&&E.push(b),E.push(c,f,v)}}function pv(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function LE(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function _A(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;Pr(o)&&(u[""]=s)}}function gv(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function lm(s,o,u,c,f){s.data[c]=f;const g=f.factory||(f.factory=Qi(f.type)),v=new Vs(g,Pr(f),Qd);s.blueprint[c]=v,u[c]=v,OE(s,o,0,c,lr(s,u,f.hostVars,Ft),f)}function VE(s,o,u){const c=Or(o,s),f=cv(u),g=s[10],v=fm(s,Xd(s,f,null,u.onPush?32:16,c,o,g,g.createRenderer(c,u),null,null,null));s[o.index]=v}function Ks(s,o,u,c,f,g){const v=Or(s,o);!function cm(s,o,u,c,f,g,v){if(null==g)s.removeAttribute(o,f,u);else{const E=null==v?ye(g):v(g,c||"",f);s.setAttribute(o,f,E,u)}}(o[11],v,g,s.value,u,c,f)}function Vf(s,o,u,c,f,g){const v=g[o];if(null!==v){const E=c.setInput;for(let b=0;b<v.length;){const A=v[b++],N=v[b++],O=v[b++];null!==E?c.setInput(u,O,A,N):u[N]=O}}}function yA(s,o){let u=null,c=0;for(;c<o.length;){const f=o[c];if(0!==f)if(5!==f){if("number"==typeof f)break;s.hasOwnProperty(f)&&(null===u&&(u=[]),u.push(f,s[f],o[c+1])),c+=2}else c+=2;else c+=4}return u}function dm(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function BE(s,o){const u=qt(o,s);if(uo(u)){const c=u[1];48&u[2]?kc(c,u,c.template,u[8]):u[5]>0&&hm(u)}}function hm(s){for(let c=tu(s);null!==c;c=Eo(c))for(let f=10;f<c.length;f++){const g=c[f];if(uo(g))if(512&g[2]){const v=g[1];kc(v,g,v.template,g[8])}else g[5]>0&&hm(g)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const f=qt(u[c],s);uo(f)&&f[5]>0&&hm(f)}}function _v(s,o){const u=qt(o,s),c=u[1];(function wA(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),av(c,u,u[8])}function fm(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function yv(s){for(;s;){s[2]|=32;const o=eu(s);if(Jh(s)&&!o)return s;s=o}return null}function Pc(s,o,u,c=!0){const f=o[10];f.begin&&f.begin();try{kc(s,o,s.template,u)}catch(v){throw c&&Oc(o,v),v}finally{f.end&&f.end()}}function Uf(s,o,u){Fa(0),o(s,u)}function vv(s){return s[7]||(s[7]=[])}function $E(s){return s.cleanup||(s.cleanup=[])}function Oc(s,o){const u=s[9],c=u?u.get(Sc,null):null;c&&c.handleError(o)}function pm(s,o,u,c,f){for(let g=0;g<u.length;){const v=u[g++],E=u[g++],b=o[v],A=s.data[v];null!==A.setInput?A.setInput(b,f,c,E):b[E]=f}}function gm(s,o,u){let c=u?s.styles:null,f=u?s.classes:null,g=0;if(null!==o)for(let v=0;v<o.length;v++){const E=o[v];"number"==typeof E?g=E:1==g?f=pe(f,E):2==g&&(c=pe(c,E+": "+o[++v]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=f:s.classesWithoutHost=f}function mm(s,o,u,c,f=!1){for(;null!==u;){const g=o[u.index];if(null!==g&&c.push(On(g)),zr(g))for(let E=10;E<g.length;E++){const b=g[E],A=b[1].firstChild;null!==A&&mm(b[1],b,A,c)}const v=u.type;if(8&v)mm(s,o,u.child,c);else if(32&v){const E=Pd(u,o);let b;for(;b=E();)c.push(b)}else if(16&v){const E=Hd(o,u);if(Array.isArray(E))c.push(...E);else{const b=eu(o[16]);mm(b[1],b,E,c,!0)}}u=f?u.projectionNext:u.next}return c}class Bf{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return mm(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(zr(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(wf(o,c),wr(u,c))}this._attachedToViewContainer=!1}Tg(this._lView[1],this._lView)}onDestroy(o){Ci(this._lView[1],this._lView,null,o)}markForCheck(){yv(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Pc(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new be(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Dg(s,o){aa(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new be(902,!1);this._appRef=o}}class CA extends Bf{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Pc(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class Cv extends fl{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=J(o);return new _l(u,this.ngModule)}}function GE(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class bA{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,c){const f=this.injector.get(o,jg,c);return f!==jg||u===jg?f:this.parentInjector.get(o,u,c)}}class _l extends RS{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function ZS(s){return s.map(qS).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return GE(this.componentDef.inputs)}get outputs(){return GE(this.componentDef.outputs)}create(o,u,c,f){let g=(f=f||this.ngModule)instanceof hl?f:f?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const v=g?new bA(o,g):o,E=v.get(kf,null);if(null===E)throw new be(407,!1);const b=v.get(LS,null),A=E.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",O=c?function hA(s,o,u){return s.selectRootElement(o,u===ft.ShadowDom)}(A,c,this.componentDef.encapsulation):ll(A,N,function EA(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(N)),W=this.componentDef.onPush?288:272,ee=dv(0,null,null,1,0,null,null,null,null,null),Ce=Xd(null,ee,null,W,null,null,E,A,b,v,null);let ke,ze;Bu(Ce);try{const We=function DA(s,o,u,c,f,g){const v=u[1];u[22]=s;const b=Nc(v,22,2,"#host",null),A=b.mergedAttrs=o.hostAttrs;null!==A&&(gm(b,A,!0),null!==s&&(qo(f,s,A),null!==b.classes&&la(f,s,b.classes),null!==b.styles&&ns(f,s,b.styles)));const N=c.createRenderer(s,o),O=Xd(u,cv(o),null,o.onPush?32:16,u[22],b,c,N,g||null,null,null);return v.firstCreatePass&&(Us(mo(b,u),v,o.type),LE(v,b),gv(b,u.length,1)),fm(u,O),u[22]=O}(O,this.componentDef,Ce,E,A);if(O)if(c)qo(A,O,["ng-version",sE.full]);else{const{attrs:wt,classes:xe}=function KS(s){const o=[],u=[];let c=1,f=2;for(;c<s.length;){let g=s[c];if("string"==typeof g)2===f?""!==g&&o.push(g,s[++c]):8===f&&u.push(g);else{if(!So(f))break;f=g}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);wt&&qo(A,O,wt),xe&&xe.length>0&&la(A,O,xe.join(" "))}if(ze=ao(ee,22),void 0!==u){const wt=ze.projection=[];for(let xe=0;xe<this.ngContentSelectors.length;xe++){const It=u[xe];wt.push(null!=It?Array.from(It):null)}}ke=function TA(s,o,u,c){const f=u[1],g=function pA(s,o,u){const c=Fn();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),lm(s,c,o,lr(s,o,1,null),u),sm(s,c));const f=gs(o,s,c.directiveStart,c);Sr(f,o);const g=Or(c,o);return g&&Sr(g,o),f}(f,u,o);if(s[8]=u[8]=g,null!==c)for(const E of c)E(g,o);if(o.contentQueries){const E=Fn();o.contentQueries(1,g,E.directiveStart)}const v=Fn();return!f.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(ti(v.index),OE(u[1],v,0,v.directiveStart,v.directiveEnd,o),pv(o,g)),g}(We,this.componentDef,Ce,[WE]),av(ee,Ce,null)}finally{co()}return new Ev(this.componentType,ke,pl(ze,Ce),Ce,ze)}}class Ev extends class tE{}{constructor(o,u,c,f,g){super(),this.location=c,this._rootLView=f,this._tNode=g,this.instance=u,this.hostView=this.changeDetectorRef=new CA(f),this.componentType=o}setInput(o,u){const c=this._tNode.inputs;let f;if(null!==c&&(f=c[o])){const g=this._rootLView;pm(g[1],g,f,o,u),am(g,this._tNode.index)}}get injector(){return new yo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function WE(){const s=Fn();$u(Se()[1],s)}function _m(s){let o=function bv(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let f;if(Pr(s))f=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new be(903,!1);f=o.\u0275dir}if(f){if(u){c.push(f);const v=s;v.inputs=ym(s.inputs),v.declaredInputs=ym(s.declaredInputs),v.outputs=ym(s.outputs);const E=f.hostBindings;E&&Jk(s,E);const b=f.viewQuery,A=f.contentQueries;if(b&&Qk(s,b),A&&SA(s,A),le(s.inputs,f.inputs),le(s.declaredInputs,f.declaredInputs),le(s.outputs,f.outputs),Pr(f)&&f.data.animation){const N=s.data;N.animation=(N.animation||[]).concat(f.data.animation)}}const g=f.features;if(g)for(let v=0;v<g.length;v++){const E=g[v];E&&E.ngInherit&&E(s),E===_m&&(u=!1)}}o=Object.getPrototypeOf(o)}!function qE(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const f=s[c];f.hostVars=o+=f.hostVars,f.hostAttrs=La(f.hostAttrs,u=La(u,f.hostAttrs))}}(c)}function ym(s){return s===Jr?{}:s===St?[]:s}function Qk(s,o){const u=s.viewQuery;s.viewQuery=u?(c,f)=>{o(c,f),u(c,f)}:o}function SA(s,o){const u=s.contentQueries;s.contentQueries=u?(c,f,g)=>{o(c,f,g),u(c,f,g)}:o}function Jk(s,o){const u=s.hostBindings;s.hostBindings=u?(c,f)=>{o(c,f),u(c,f)}:o}let vm=null;function yl(){if(!vm){const s=ln.Symbol;if(s&&s.iterator)vm=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(vm=c)}}}return vm}function eh(s){return!!ZE(s)&&(Array.isArray(s)||!(s instanceof Map)&&yl()in s)}function ZE(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function cu(s,o,u){return s[o]=u}function Ui(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function Fc(s,o,u,c){const f=Ui(s,o,u);return Ui(s,o+1,c)||f}function KE(s,o,u,c){const f=Se();return Ui(f,lo(),o)&&($t(),Ks(wn(),f,s,o,u,c)),KE}function $f(s,o,u,c){return Ui(s,lo(),u)?o+ye(u)+c:Ft}function QE(s,o,u,c,f,g,v,E){const b=Se(),A=$t(),N=s+22,O=A.firstCreatePass?function xA(s,o,u,c,f,g,v,E,b){const A=o.consts,N=Nc(o,s,4,v||null,ki(A,E));fv(o,u,N,ki(A,b)),$u(o,N);const O=N.tViews=dv(2,N,c,f,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,N),O.queries=o.queries.embeddedTView(N)),N}(N,A,b,o,u,c,f,g,v):A.data[N];gi(O,!1);const W=b[11].createComment("");jd(A,b,W,O),Sr(W,b),fm(b,b[N]=dm(W,b,W,O)),Vl(O)&&uv(A,b,O),null!=v&&lv(b,O,E)}function JE(s){return function hs(s,o){return s[o]}(function Wl(){return xt.lFrame.contextLView}(),22+s)}function Av(s,o,u){const c=Se();return Ui(c,lo(),o)&&Vi($t(),wn(),c,s,o,c[11],u,!1),Av}function xv(s,o,u,c,f){const v=f?"class":"style";pm(s,u,o.inputs[v],v,c)}function Sm(s,o,u,c){const f=Se(),g=$t(),v=22+s,E=f[11],b=f[v]=ll(E,o,function Hu(){return xt.lFrame.currentNamespace}()),A=g.firstCreatePass?function RA(s,o,u,c,f,g,v){const E=o.consts,A=Nc(o,s,2,f,ki(E,g));return fv(o,u,A,ki(E,v)),null!==A.attrs&&gm(A,A.attrs,!1),null!==A.mergedAttrs&&gm(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(v,g,f,0,o,u,c):g.data[v];gi(A,!0);const N=A.mergedAttrs;null!==N&&qo(E,b,N);const O=A.classes;null!==O&&la(E,b,O);const W=A.styles;return null!==W&&ns(E,b,W),64!=(64&A.flags)&&jd(g,f,b,A),0===function ku(){return xt.lFrame.elementDepthCount}()&&Sr(b,f),function Pu(){xt.lFrame.elementDepthCount++}(),Vl(A)&&(uv(g,f,A),function PE(s,o,u){if(Iu(o)){const f=o.directiveEnd;for(let g=o.directiveStart;g<f;g++){const v=s.data[g];v.contentQueries&&v.contentQueries(1,u[g],g)}}}(g,A,f)),null!==c&&lv(f,A),Sm}function Am(){let s=Fn();Ra()?function Na(){xt.lFrame.isParent=!1}():(s=s.parent,gi(s,!1));const o=s;!function $l(){xt.lFrame.elementDepthCount--}();const u=$t();return u.firstCreatePass&&($u(u,s),Iu(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Wu(s){return 0!=(16&s.flags)}(o)&&xv(u,o,Se(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Ed(s){return 0!=(32&s.flags)}(o)&&xv(u,o,Se(),o.stylesWithoutHost,!1),Am}function Mv(s,o,u,c){return Sm(s,o,u,c),Am(),Mv}function eb(){return Se()}function kv(s){return!!s&&"function"==typeof s.then}function tb(s){return!!s&&"function"==typeof s.subscribe}const nb=tb;function Pv(s,o,u,c){const f=Se(),g=$t(),v=Fn();return function ib(s,o,u,c,f,g,v,E){const b=Vl(c),N=s.firstCreatePass&&$E(s),O=o[8],W=vv(o);let ee=!0;if(3&c.type||E){const ze=Or(c,o),We=E?E(ze):ze,wt=W.length,xe=E?fn=>E(On(fn[c.index])):c.index;let It=null;if(!E&&b&&(It=function kA(s,o,u,c){const f=s.cleanup;if(null!=f)for(let g=0;g<f.length-1;g+=2){const v=f[g];if(v===u&&f[g+1]===c){const E=o[7],b=f[g+2];return E.length>b?E[b]:null}"string"==typeof v&&(g+=2)}return null}(s,o,f,c.index)),null!==It)(It.__ngLastListenerFn__||It).__ngNextListenerFn__=g,It.__ngLastListenerFn__=g,ee=!1;else{g=ob(c,o,O,g,!1);const fn=u.listen(We,f,g);W.push(g,fn),N&&N.push(f,xe,wt,wt+1)}}else g=ob(c,o,O,g,!1);const Ce=c.outputs;let ke;if(ee&&null!==Ce&&(ke=Ce[f])){const ze=ke.length;if(ze)for(let We=0;We<ze;We+=2){const Rn=o[ke[We]][ke[We+1]].subscribe(g),Dl=W.length;W.push(g,Rn),N&&N.push(f,c.index,Dl,-(Dl+1))}}}(g,f,f[11],v,s,o,0,c),Pv}function sb(s,o,u,c){try{return!1!==u(c)}catch(f){return Oc(s,f),!1}}function ob(s,o,u,c,f){return function g(v){if(v===Function)return c;yv(2&s.flags?qt(s.index,o):o);let b=sb(o,0,c,v),A=g.__ngNextListenerFn__;for(;A;)b=sb(o,0,A,v)&&b,A=A.__ngNextListenerFn__;return f&&!1===b&&(v.preventDefault(),v.returnValue=!1),b}}function ab(s=1){return function ho(s){return(xt.lFrame.contextLView=function ju(s,o){for(;s>0;)o=o[15],s--;return o}(s,xt.lFrame.contextLView))[8]}(s)}function Ys(s,o,u){return Ov(s,"",o,"",u),Ys}function Ov(s,o,u,c,f){const g=Se(),v=$f(g,o,u,c);return v!==Ft&&Vi($t(),wn(),g,s,v,g[11],f,!1),Ov}function FA(s,o,u,c,f){const g=s[u+1],v=null===o;let E=c?qs(g):ml(g),b=!1;for(;0!==E&&(!1===b||v);){const N=s[E+1];fb(s[E],o)&&(b=!0,s[E+1]=c?Qg(N):Xy(N)),E=c?qs(N):ml(N)}b&&(s[u+1]=c?Xy(g):Qg(g))}function fb(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&$s(s,o)>=0}function Mm(s,o){return function bs(s,o,u,c){const f=Se(),g=$t(),v=function ps(s){const o=xt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}(2);g.firstUpdatePass&&function Gv(s,o,u,c){const f=s.data;if(null===f[u+1]){const g=f[or()],v=function $v(s,o){return o>=s.expandoStartIndex}(s,u);(function BA(s,o){return 0!=(s.flags&(o?16:32))})(g,c)&&null===o&&!v&&(o=!1),o=function Cb(s,o,u,c){const f=function Oa(s){const o=xt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let g=c?o.residualClasses:o.residualStyles;if(null===f)0===(c?o.classBindings:o.styleBindings)&&(u=Rm(u=bb(null,s,o,u,c),o.attrs,c),g=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==f)if(u=bb(f,s,o,u,c),null===g){let b=function ji(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==ml(c))return s[qs(c)]}(s,o,c);void 0!==b&&Array.isArray(b)&&(b=bb(null,s,o,b[1],c),b=Rm(b,o.attrs,c),function Cl(s,o,u,c){s[qs(u?o.classBindings:o.styleBindings)]=c}(s,o,c,b))}else g=function Eb(s,o,u){let c;const f=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<f;g++)c=Rm(c,s[g].hostAttrs,u);return Rm(c,o.attrs,u)}(s,o,c)}return void 0!==g&&(c?o.residualClasses=g:o.residualStyles=g),u}(f,g,o,c),function wl(s,o,u,c,f,g){let v=g?o.classBindings:o.styleBindings,E=qs(v),b=ml(v);s[c]=u;let N,A=!1;if(Array.isArray(u)){const O=u;N=O[1],(null===N||$s(O,N)>0)&&(A=!0)}else N=u;if(f)if(0!==b){const W=qs(s[E+1]);s[c+1]=Jd(W,E),0!==W&&(s[W+1]=IE(s[W+1],c)),s[E+1]=function Jy(s,o){return 131071&s|o<<17}(s[E+1],c)}else s[c+1]=Jd(E,0),0!==E&&(s[E+1]=IE(s[E+1],c)),E=c;else s[c+1]=Jd(b,0),0===E?E=c:s[b+1]=IE(s[b+1],c),b=c;A&&(s[c+1]=Xy(s[c+1])),FA(s,N,c,!0),FA(s,N,c,!1),function OA(s,o,u,c,f){const g=f?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&$s(g,o)>=0&&(u[c+1]=Qg(u[c+1]))}(o,N,s,c,g),v=Jd(E,b),g?o.classBindings=v:o.styleBindings=v}(f,g,o,u,v,c)}}(g,s,v,c),o!==Ft&&Ui(f,v,o)&&function Yf(s,o,u,c,f,g,v,E){if(!(3&o.type))return;const b=s.data,A=b[E+1];rh(function DE(s){return 1==(1&s)}(A)?Db(b,o,u,f,ml(A),v):void 0)||(rh(g)||function bE(s){return 2==(2&s)}(A)&&(g=Db(b,null,u,f,E,v)),function Ny(s,o,u,c,f){if(o)f?s.addClass(u,c):s.removeClass(u,c);else{let g=-1===c.indexOf("-")?void 0:Es.DashCase;null==f?s.removeStyle(u,c,g):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),g|=Es.Important),s.setStyle(u,c,f,g))}}(c,v,pi(or(),u),f,g))}(g,g.data[or()],f,f[11],s,f[v+1]=function UA(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=he(Cr(s)))),s}(o,u),c,v)}(s,o,null,!0),Mm}function bb(s,o,u,c,f){let g=null;const v=u.directiveEnd;let E=u.directiveStylingLast;for(-1===E?E=u.directiveStart:E++;E<v&&(g=o[E],c=Rm(c,g.hostAttrs,f),g!==s);)E++;return null!==s&&(u.directiveStylingLast=E),c}function Rm(s,o,u){const c=u?1:2;let f=-1;if(null!==o)for(let g=0;g<o.length;g++){const v=o[g];"number"==typeof v?f=v:f===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Je(s,v,!!u||o[++g]))}return void 0===s?null:s}function Db(s,o,u,c,f,g){const v=null===o;let E;for(;f>0;){const b=s[f],A=Array.isArray(b),N=A?b[1]:b,O=null===N;let W=u[f+1];W===Ft&&(W=O?St:void 0);let ee=O?Za(W,c):N===c?W:void 0;if(A&&!rh(ee)&&(ee=Za(b,c)),rh(ee)&&(E=ee,v))return E;const Ce=s[f+1];f=v?qs(Ce):ml(Ce)}if(null!==o){let b=g?o.residualClasses:o.residualStyles;null!=b&&(E=Za(b,c))}return E}function rh(s){return void 0!==s}function jA(s,o=""){const u=Se(),c=$t(),f=s+22,g=c.firstCreatePass?Nc(c,f,1,o,null):c.data[f],v=u[f]=function Od(s,o){return s.createText(o)}(u[11],o);jd(c,u,v,g),gi(g,!1)}function Tb(s){return Wv("",s,""),Tb}function Wv(s,o,u){const c=Se(),f=$f(c,s,o,u);return f!==Ft&&function lu(s,o,u){const c=pi(o,s);!function yf(s,o,u){s.setValue(o,u)}(s[11],c,u)}(c,or(),f),Wv}const El=void 0;var sP=["en",[["a","p"],["AM","PM"],El],[["AM","PM"],El,El],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],El,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],El,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",El,"{1} 'at' {0}",El],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function WA(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let oh={};function Bb(s){const o=function oP(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=Jv(o);if(u)return u;const c=o.split("-")[0];if(u=Jv(c),u)return u;if("en"===c)return sP;throw new be(701,!1)}function Hb(s){return Bb(s)[Dt.PluralCase]}function Jv(s){return s in oh||(oh[s]=ln.ng&&ln.ng.common&&ln.ng.common.locales&&ln.ng.common.locales[s]),oh[s]}var Dt=(()=>((Dt=Dt||{})[Dt.LocaleId=0]="LocaleId",Dt[Dt.DayPeriodsFormat=1]="DayPeriodsFormat",Dt[Dt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Dt[Dt.DaysFormat=3]="DaysFormat",Dt[Dt.DaysStandalone=4]="DaysStandalone",Dt[Dt.MonthsFormat=5]="MonthsFormat",Dt[Dt.MonthsStandalone=6]="MonthsStandalone",Dt[Dt.Eras=7]="Eras",Dt[Dt.FirstDayOfWeek=8]="FirstDayOfWeek",Dt[Dt.WeekendRange=9]="WeekendRange",Dt[Dt.DateFormat=10]="DateFormat",Dt[Dt.TimeFormat=11]="TimeFormat",Dt[Dt.DateTimeFormat=12]="DateTimeFormat",Dt[Dt.NumberSymbols=13]="NumberSymbols",Dt[Dt.NumberFormats=14]="NumberFormats",Dt[Dt.CurrencyCode=15]="CurrencyCode",Dt[Dt.CurrencySymbol=16]="CurrencySymbol",Dt[Dt.CurrencyName=17]="CurrencyName",Dt[Dt.Currencies=18]="Currencies",Dt[Dt.Directionality=19]="Directionality",Dt[Dt.PluralCase=20]="PluralCase",Dt[Dt.ExtraData=21]="ExtraData",Dt))();const fu="en-US";let Xv=fu;function l0(s,o,u,c,f){if(s=Y(s),Array.isArray(s))for(let g=0;g<s.length;g++)l0(s[g],o,u,c,f);else{const g=$t(),v=Se();let E=Dc(s)?s:Y(s.provide),b=XC(s);const A=Fn(),N=1048575&A.providerIndexes,O=A.directiveStart,W=A.providerIndexes>>20;if(Dc(s)||!s.multi){const ee=new Vs(b,f,Qd),Ce=d0(E,o,f?N:N+W,O);-1===Ce?(Us(mo(A,v),g,E),c0(g,s,o.length),o.push(E),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),u.push(ee),v.push(ee)):(u[Ce]=ee,v[Ce]=ee)}else{const ee=d0(E,o,N+W,O),Ce=d0(E,o,N,N+W),ke=ee>=0&&u[ee],ze=Ce>=0&&u[Ce];if(f&&!ze||!f&&!ke){Us(mo(A,v),g,E);const We=function Ix(s,o,u,c,f){const g=new Vs(s,u,Qd);return g.multi=[],g.index=o,g.componentProviders=0,pI(g,f,c&&!u),g}(f?bx:Ex,u.length,f,c,b);!f&&ze&&(u[Ce].providerFactory=We),c0(g,s,o.length,0),o.push(E),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),u.push(We),v.push(We)}else c0(g,s,ee>-1?ee:Ce,pI(u[f?Ce:ee],b,!f&&c));!f&&c&&ze&&u[Ce].componentProviders++}}}function c0(s,o,u,c){const f=Dc(o),g=function DS(s){return!!s.useClass}(o);if(f||g){const b=(g?Y(o.useClass):o).prototype.ngOnDestroy;if(b){const A=s.destroyHooks||(s.destroyHooks=[]);if(!f&&o.multi){const N=A.indexOf(u);-1===N?A.push(u,[c,b]):A[N+1].push(c,b)}else A.push(u,b)}}}function pI(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function d0(s,o,u,c){for(let f=u;f<c;f++)if(o[f]===s)return f;return-1}function Ex(s,o,u,c){return h0(this.multi,[])}function bx(s,o,u,c){const f=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,E=gs(u,u[1],this.providerFactory.index,c);g=E.slice(0,v),h0(f,g);for(let b=v;b<E.length;b++)g.push(E[b])}else g=[],h0(f,g);return g}function h0(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function gI(s,o=[]){return u=>{u.providersResolver=(c,f)=>function Cx(s,o,u){const c=$t();if(c.firstCreatePass){const f=Pr(s);l0(u,c.data,c.blueprint,f,!0),l0(o,c.data,c.blueprint,f,!1)}}(c,f?f(s):s,o)}}class lh{}class mI{}function Dx(s,o){return new _I(s,o??null)}class _I extends lh{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Cv(this);const c=_n(o);this._bootstrapComponents=ha(c.bootstrap),this._r3Injector=gE(o,u,[{provide:lh,useValue:this},{provide:fl,useValue:this.componentFactoryResolver}],he(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class f0 extends mI{constructor(o){super(),this.moduleType=o}create(o){return new _I(this.moduleType,o)}}class Tx extends lh{constructor(o,u,c){super(),this.componentFactoryResolver=new Cv(this),this.instance=null;const f=new Hy([...o,{provide:lh,useValue:this},{provide:fl,useValue:this.componentFactoryResolver}],u||Nf(),c,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function yI(s,o,u=null){return new Tx(s,o,u).injector}let wP=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const c=KC(0,u.type),f=c.length>0?yI([c],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,f)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=tn({token:s,providedIn:"environment",factory:()=>new s(In(hl))}),s})();function vI(s){s.getStandaloneInjector=o=>o.get(wP).getOrCreateStandaloneInjector(s)}function SI(s,o,u,c,f){return function hh(s,o,u,c,f,g,v){const E=o+u;return Fc(s,E,f,g)?cu(s,E+2,v?c.call(v,f,g):c(f,g)):dh(s,E+2)}(Se(),Ln(),s,o,u,c,f)}function AI(s,o,u,c,f,g){return function fh(s,o,u,c,f,g,v,E){const b=o+u;return function wm(s,o,u,c,f){const g=Fc(s,o,u,c);return Ui(s,o+2,f)||g}(s,b,f,g,v)?cu(s,b+3,E?c.call(E,f,g,v):c(f,g,v)):dh(s,b+3)}(Se(),Ln(),s,o,u,c,f,g)}function xI(s,o,u,c,f,g,v){return function si(s,o,u,c,f,g,v,E,b){const A=o+u;return function xo(s,o,u,c,f,g){const v=Fc(s,o,u,c);return Fc(s,o+2,f,g)||v}(s,A,f,g,v,E)?cu(s,A+4,b?c.call(b,f,g,v,E):c(f,g,v,E)):dh(s,A+4)}(Se(),Ln(),s,o,u,c,f,g,v)}function dh(s,o){const u=s[o];return u===Ft?void 0:u}function Zm(s){return o=>{setTimeout(s,void 0,o)}}const oi=class pu extends d.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){let f=o,g=u||(()=>null),v=c;if(o&&"object"==typeof o){const b=o;f=b.next?.bind(b),g=b.error?.bind(b),v=b.complete?.bind(b)}this.__isAsync&&(g=Zm(g),f&&(f=Zm(f)),v&&(v=Zm(v)));const E=super.subscribe({next:f,error:g,complete:v});return o instanceof te.w0&&o.add(E),E}};function kI(){return this._results[yl()]()}class y0{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=yl(),c=y0.prototype;c[u]||(c[u]=kI)}get changes(){return this._changes||(this._changes=new oi)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const f=sn(o);(this._changesDetected=!function _i(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let f=s[c],g=o[c];if(u&&(f=u(f),g=u(g)),g!==f)return!1}return!0}(c._results,f,u))&&(c._results=f,c.length=f.length,c.last=f[this.length-1],c.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let bl=(()=>{class s{}return s.__NG_ELEMENT_ID__=jx,s})();const Ux=bl,Bx=class extends Ux{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o,u){const c=this._declarationTContainer.tViews,f=Xd(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,u||null);f[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(f[19]=v.createEmbeddedView(c)),av(c,f,o),new Bf(f)}};function jx(){return Km(Fn(),Se())}function Km(s,o){return 4&s.type?new Bx(o,s,pl(s,o)):null}let Ym=(()=>{class s{}return s.__NG_ELEMENT_ID__=Hx,s})();function Hx(){return Qm(Fn(),Se())}const $x=Ym,PI=class extends $x{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return pl(this._hostTNode,this._hostLView)}get injector(){return new yo(this._hostTNode,this._hostLView)}get parentInjector(){const o=Yu(this._hostTNode,this._hostLView);if(Id(o)){const u=Ua(o,this._hostLView),c=yr(o);return new yo(u[1].data[c+8],u)}return new yo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=OI(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){let f,g;"number"==typeof c?f=c:null!=c&&(f=c.index,g=c.injector);const v=o.createEmbeddedView(u||{},g);return this.insert(v,f),v}createComponent(o,u,c,f,g){const v=o&&!function mi(s){return"function"==typeof s}(o);let E;if(v)E=u;else{const O=u||{};E=O.index,c=O.injector,f=O.projectableNodes,g=O.environmentInjector||O.ngModuleRef}const b=v?o:new _l(J(o)),A=c||this.parentInjector;if(!g&&null==b.ngModule){const W=(v?A:this.parentInjector).get(hl,null);W&&(g=W)}const N=b.create(A,f,void 0,g);return this.insert(N.hostView,E),N}insert(o,u){const c=o._lView,f=c[1];if(function Mu(s){return zr(s[3])}(c)){const N=this.indexOf(o);if(-1!==N)this.detach(N);else{const O=c[3],W=new PI(O,O[6],O[3]);W.detach(W.indexOf(o))}}const g=this._adjustIndex(u),v=this._lContainer;!function yc(s,o,u,c){const f=10+c,g=u.length;c>0&&(u[f-1][4]=o),c<g-10?(o[4]=u[f],Wa(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const v=o[17];null!==v&&u!==v&&function My(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(v,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=64}(f,c,v,g);const E=Cc(g,v),b=c[11],A=qr(b,v[7]);return null!==A&&function Fd(s,o,u,c,f,g){c[0]=f,c[6]=o,aa(s,c,u,1,f,g)}(f,v[6],b,c,A,E),o.attachToViewContainerRef(),Wa(Hi(v),g,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=OI(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=wf(this._lContainer,u);c&&(wr(Hi(this._lContainer),u),Tg(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=wf(this._lContainer,u);return c&&null!=wr(Hi(this._lContainer),u)?new Bf(c):null}_adjustIndex(o,u=0){return o??this.length+u}};function OI(s){return s[8]}function Hi(s){return s[8]||(s[8]=[])}function Qm(s,o){let u;const c=o[s.index];if(zr(c))u=c;else{let f;if(8&s.type)f=On(c);else{const g=o[11];f=g.createComment("");const v=Or(s,o);Do(g,qr(g,v),f,function ru(s,o){return s.nextSibling(o)}(g,v),!1)}o[s.index]=u=dm(c,o,f,s),fm(o,u)}return new PI(u,s,o)}class Jm{constructor(o){this.queryList=o,this.matches=null}clone(){return new Jm(this.queryList)}setDirty(){this.queryList.setDirty()}}class Xm{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,f=[];for(let g=0;g<c;g++){const v=u.getByIndex(g);f.push(this.queries[v.indexInDeclarationView].clone())}return new Xm(f)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==e_(o,u).matches&&this.queries[u].setDirty()}}class LI{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class w0{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const f=null!==u?u.length:0,g=this.getByIndex(c).embeddedTView(o,f);g&&(g.indexInDeclarationView=c,null!==u?u.push(g):u=[g])}return null!==u?new w0(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class C0{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new C0(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let f=0;f<c.length;f++){const g=c[f];this.matchTNodeWithReadOption(o,u,ga(u,g)),this.matchTNodeWithReadOption(o,u,Zo(u,o,g,!1,!1))}else c===bl?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,Zo(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const f=this.metadata.read;if(null!==f)if(f===Tc||f===Ym||f===bl&&4&u.type)this.addMatch(u.index,-2);else{const g=Zo(u,o,f,!1,!1);null!==g&&this.addMatch(u.index,g)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function ga(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function Gx(s,o,u,c){return-1===u?function E0(s,o){return 11&s.type?pl(s,o):4&s.type?Km(s,o):null}(o,s):-2===u?function zx(s,o,u){return u===Tc?pl(o,s):u===bl?Km(o,s):u===Ym?Qm(o,s):void 0}(s,o,c):gs(s,s[1],u,o)}function b0(s,o,u,c){const f=o[19].queries[c];if(null===f.matches){const g=s.data,v=u.matches,E=[];for(let b=0;b<v.length;b+=2){const A=v[b];E.push(A<0?null:Gx(o,g[A],v[b+1],u.metadata.read))}f.matches=E}return f.matches}function I0(s,o,u,c){const f=s.queries.getByIndex(u),g=f.matches;if(null!==g){const v=b0(s,o,f,u);for(let E=0;E<g.length;E+=2){const b=g[E];if(b>0)c.push(v[E/2]);else{const A=g[E+1],N=o[-b];for(let O=10;O<N.length;O++){const W=N[O];W[17]===W[3]&&I0(W[1],W,A,c)}if(null!==N[9]){const O=N[9];for(let W=0;W<O.length;W++){const ee=O[W];I0(ee[1],ee,A,c)}}}}}return c}function Ei(s){const o=Se(),u=$t(),c=Kl();Fa(c+1);const f=e_(u,c);if(s.dirty&&function xu(s){return 4==(4&s[2])}(o)===(2==(2&f.metadata.flags))){if(null===f.matches)s.reset([]);else{const g=f.crossesNgTemplate?I0(u,o,c,[]):b0(u,o,f,c);s.reset(g,PS),s.notifyOnChanges()}return!0}return!1}function op(s,o,u){const c=$t();c.firstCreatePass&&(D0(c,new LI(s,o,u),-1),2==(2&o)&&(c.staticViewQueries=!0)),UI(c,Se(),o)}function VI(s,o,u,c){const f=$t();if(f.firstCreatePass){const g=Fn();D0(f,new LI(o,u,c),g.index),function qx(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(f,s),2==(2&u)&&(f.staticContentQueries=!0)}UI(f,Se(),u)}function ph(){return function Wx(s,o){return s[19].queries[o].queryList}(Se(),Kl())}function UI(s,o,u){const c=new y0(4==(4&u));Ci(s,o,c,c.destroy),null===o[19]&&(o[19]=new Xm),o[19].queries.push(new Jm(c))}function D0(s,o,u){null===s.queries&&(s.queries=new w0),s.queries.track(new C0(o,u))}function e_(s,o){return s.queries.getByIndex(o)}function _h(...s){}const O0=new Cn("Application Initializer");let cp=(()=>{class s{constructor(u){this.appInits=u,this.resolve=_h,this.reject=_h,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,f)=>{this.resolve=c,this.reject=f})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const g=this.appInits[f]();if(kv(g))u.push(g);else if(nb(g)){const v=new Promise((E,b)=>{g.subscribe({complete:E,error:b})});u.push(v)}}Promise.all(u).then(()=>{c()}).catch(f=>{this.reject(f)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(In(O0,8))},s.\u0275prov=tn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const cM=new Cn("AppId",{providedIn:"root",factory:function dM(){return`${F0()}${F0()}${F0()}`}});function F0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const XI=new Cn("Platform Initializer"),hM=new Cn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),eD=new Cn("appBootstrapListener");let fM=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=tn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const i_=new Cn("LocaleId",{providedIn:"root",factory:()=>I(i_,Qe.Optional|Qe.SkipSelf)||function tD(){return typeof $localize<"u"&&$localize.locale||fu}()}),OP=new Cn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class gM{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let mM=(()=>{class s{compileModuleSync(u){return new f0(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),g=ha(_n(u).declarations).reduce((v,E)=>{const b=J(E);return b&&v.push(new _l(b)),v},[]);return new gM(c,g)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=tn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const vM=(()=>Promise.resolve(0))();function V0(s){typeof Zone>"u"?vM.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Js{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new oi(!1),this.onMicrotaskEmpty=new oi(!1),this.onStable=new oi(!1),this.onError=new oi(!1),typeof Zone>"u")throw new be(908,!1);Zone.assertZonePatched();const f=this;if(f._nesting=0,f._outer=f._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const g=Zone.AsyncStackTaggingZoneSpec;f._inner=f._inner.fork(new g("Angular"))}Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!c&&u,f.shouldCoalesceRunChangeDetection=c,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function wM(){let s=ln.requestAnimationFrame,o=ln.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function EM(s){const o=()=>{!function a_(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(ln,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,U0(s),s.isCheckStableRunning=!0,o_(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),U0(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,f,g,v,E)=>{try{return rD(s),u.invokeTask(f,g,v,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),iD(s)}},onInvoke:(u,c,f,g,v,E,b)=>{try{return rD(s),u.invoke(f,g,v,E,b)}finally{s.shouldCoalesceRunChangeDetection&&o(),iD(s)}},onHasTask:(u,c,f,g)=>{u.hasTask(f,g),c===f&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,U0(s),o_(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(u,c,f,g)=>(u.handleError(f,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Js.isInAngularZone())throw new be(909,!1)}static assertNotInAngularZone(){if(Js.isInAngularZone())throw new be(909,!1)}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,f){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+f,o,CM,_h,_h);try{return g.runTask(v,u,c)}finally{g.cancelTask(v)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const CM={};function o_(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function U0(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function rD(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function iD(s){s._nesting--,o_(s)}class bM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new oi,this.onMicrotaskEmpty=new oi,this.onStable=new oi,this.onError=new oi}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,f){return o.apply(u,c)}}const IM=new Cn(""),sD=new Cn("");let B0,DM=(()=>{class s{constructor(u,c,f){this._ngZone=u,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,B0||(function oD(s){B0=s}(f),f.addToWindow(c)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Js.assertNotInAngularZone(),V0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())V0(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,f){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:g,updateCb:f})}whenStable(u,c,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,c,f){return[]}}return s.\u0275fac=function(u){return new(u||s)(In(Js),In(u_),In(sD))},s.\u0275prov=tn({token:s,factory:s.\u0275fac}),s})(),u_=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return B0?.findTestabilityInTree(this,u,c)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=tn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),zc=null;const aD=new Cn("AllowMultipleToken"),ko=new Cn("PlatformDestroyListeners");class c_{constructor(o,u){this.name=o,this.token=u}}function uD(s,o,u=[]){const c=`Platform: ${o}`,f=new Cn(c);return(g=[])=>{let v=Fr();if(!v||v.injector.get(aD,!1)){const E=[...u,...g,{provide:f,useValue:!0}];s?s(E):function dp(s){if(zc&&!zc.get(aD,!1))throw new be(400,!1);zc=s;const o=s.get(mu);(function d_(s){const o=s.get(XI,null);o&&o.forEach(u=>u())})(s)}(function ai(s=[],o){return Ac.create({name:o,providers:[{provide:jy,useValue:"platform"},{provide:ko,useValue:new Set([()=>zc=null])},...s]})}(E,c))}return function SM(s){const o=Fr();if(!o)throw new be(401,!1);return o}()}}function Fr(){return zc?.get(mu)??null}let mu=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const f=function $0(s,o){let u;return u="noop"===s?new bM:("zone.js"===s?void 0:s)||new Js(o),u}(c?.ngZone,function lD(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),g=[{provide:Js,useValue:f}];return f.run(()=>{const v=Ac.create({providers:g,parent:this.injector,name:u.moduleType.name}),E=u.create(v),b=E.injector.get(Sc,null);if(!b)throw new be(402,!1);return f.runOutsideAngular(()=>{const A=f.onError.subscribe({next:N=>{b.handleError(N)}});E.onDestroy(()=>{f_(this._modules,E),A.unsubscribe()})}),function h_(s,o,u){try{const c=u();return kv(c)?c.catch(f=>{throw o.runOutsideAngular(()=>s.handleError(f)),f}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(b,f,()=>{const A=E.injector.get(cp);return A.runInitializers(),A.donePromise.then(()=>(function KA(s){jt(s,"Expected localeId to be defined"),"string"==typeof s&&(Xv=s.toLowerCase().replace(/_/g,"-"))}(E.injector.get(i_,fu)||fu),this._moduleDoBootstrap(E),E))})})}bootstrapModule(u,c=[]){const f=G0({},c);return function j0(s,o,u){const c=new f0(u);return Promise.resolve(c)}(0,0,u).then(g=>this.bootstrapModuleFactory(g,f))}_moduleDoBootstrap(u){const c=u.injector.get(Lr);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(f=>c.bootstrap(f));else{if(!u.instance.ngDoBootstrap)throw new be(403,!1);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new be(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(ko,null);u&&(u.forEach(c=>c()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(In(Ac))},s.\u0275prov=tn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function G0(s,o){return Array.isArray(o)?o.reduce(G0,s):{...s,...o}}let Lr=(()=>{class s{constructor(u,c,f){this._zone=u,this._injector=c,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new F.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),v=new F.y(E=>{let b;this._zone.runOutsideAngular(()=>{b=this._zone.onStable.subscribe(()=>{Js.assertNotInAngularZone(),V0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{Js.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{b.unsubscribe(),A.unsubscribe()}});this.isStable=(0,oe.T)(g,v.pipe((0,se.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,c){const f=u instanceof RS;if(!this._injector.get(cp).done)throw!f&&Qt(u),new be(405,false);let v;v=f?u:this._injector.get(fl).resolveComponentFactory(u),this.componentTypes.push(v.componentType);const E=function l_(s){return s.isBoundToModule}(v)?void 0:this._injector.get(lh),A=v.create(Ac.NULL,[],c||v.selector,E),N=A.location.nativeElement,O=A.injector.get(IM,null);return O?.registerApplication(N),A.onDestroy(()=>{this.detachView(A.hostView),f_(this.components,A),O?.unregisterApplication(N)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new be(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;f_(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(eD,[]).concat(this._bootstrapListeners).forEach(f=>f(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>f_(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new be(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)(In(Js),In(hl),In(Sc))},s.\u0275prov=tn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function f_(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let p_=!0,fp=!1;function va(){return fp=!0,p_}function z0(){if(fp)throw new Error("Cannot enable prod mode after platform setup.");p_=!1}let dD=(()=>{class s{}return s.__NG_ELEMENT_ID__=W0,s})();function W0(s){return function hD(s,o,u){if(Sa(s)&&!u){const c=qt(s.index,o);return new Bf(c,c)}return 47&s.type?new Bf(o[16],o):null}(Fn(),Se(),16==(16&s))}class m_{constructor(){}supports(o){return eh(o)}create(o){return new tw(o)}}const ew=(s,o)=>o;class tw{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||ew}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,f=0,g=null;for(;u||c;){const v=!c||u&&u.currentIndex<mD(c,f,g)?u:c,E=mD(v,f,g),b=v.currentIndex;if(v===c)f--,c=c._nextRemoved;else if(u=u._next,null==v.previousIndex)f++;else{g||(g=[]);const A=E-f,N=b-f;if(A!=N){for(let W=0;W<A;W++){const ee=W<g.length?g[W]:g[W]=0,Ce=ee+W;N<=Ce&&Ce<A&&(g[W]=ee+1)}g[v.previousIndex]=N-A}}E!==b&&o(v,E,b)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!eh(o))throw new be(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let f,g,v,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)g=o[E],v=this._trackByFn(E,g),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,g,v,E)),Object.is(u.item,g)||this._addIdentityChange(u,g)):(u=this._mismatch(u,g,v,E),c=!0),u=u._next}else f=0,function jf(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[yl()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,E=>{v=this._trackByFn(f,E),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,E,v,f)),Object.is(u.item,E)||this._addIdentityChange(u,E)):(u=this._mismatch(u,E,v,f),c=!0),u=u._next,f++}),this.length=f;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,f){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,g,f)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,f))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,g,f)):o=this._addAfter(new nw(u,c),g,f),o}_verifyReinsertion(o,u,c,f){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?o=this._reinsertAfter(g,o._prev,f):o.currentIndex!=f&&(o.currentIndex=f,this._addToMoves(o,f)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const f=o._prevRemoved,g=o._nextRemoved;return null===f?this._removalsHead=g:f._nextRemoved=g,null===g?this._removalsTail=f:g._prevRemoved=f,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const f=null===u?this._itHead:u._next;return o._next=f,o._prev=u,null===f?this._itTail=o:f._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new rw),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new rw),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class nw{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class gD{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class rw{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new gD,this.map.set(u,c)),c.add(o)}get(o,u){const f=this.map.get(o);return f?f.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function mD(s,o,u){const c=s.previousIndex;if(null===c)return c;let f=0;return u&&c<u.length&&(f=u[c]),c+o+f}class iw{constructor(){}supports(o){return o instanceof Map||ZE(o)}create(){return new _D}}class _D{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||ZE(o)))throw new be(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,f)=>{if(u&&u.key===f)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const g=this._getOrCreateRecordForKey(f,c);u=this._insertBeforeOrAppend(u,g)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const f=this._records.get(o);this._maybeAddToChanges(f,u);const g=f._prev,v=f._next;return g&&(g._next=v),v&&(v._prev=g),f._next=null,f._prev=null,f}const c=new sw(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class sw{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ow(){return new aw([new m_])}let aw=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const f=c.factories.slice();u=u.concat(f)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||ow()),deps:[[s,new ht,new je]]}}find(u){const c=this.factories.find(f=>f.supports(u));if(null!=c)return c;throw new be(901,!1)}}return s.\u0275prov=tn({token:s,providedIn:"root",factory:ow}),s})();function __(){return new pp([new iw])}let pp=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const f=c.factories.slice();u=u.concat(f)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||__()),deps:[[s,new ht,new je]]}}find(u){const c=this.factories.find(f=>f.supports(u));if(c)return c;throw new be(901,!1)}}return s.\u0275prov=tn({token:s,providedIn:"root",factory:__}),s})();const PM=uD(null,"core",[]);let OM=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(In(Lr))},s.\u0275mod=Vt({type:s}),s.\u0275inj=kt({}),s})();function wD(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(pt,Ae,L)=>{L.d(Ae,{Z:()=>be});var d=L(2090),te=L(4859),F=L(9681),oe=L(1877);class se{constructor(ye,ge){this._delegate=ye,this.firebase=ge,(0,F._addComponent)(ye,new te.wA("app-compat",()=>this,"PUBLIC")),this.container=ye.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ye){this._delegate.automaticDataCollectionEnabled=ye}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ye=>{this._delegate.checkDestroyed(),ye()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(ye,ge=F._DEFAULT_ENTRY_NAME){var tt;this._delegate.checkDestroyed();const dt=this._delegate.container.getProvider(ye);return!dt.isInitialized()&&"EXPLICIT"===(null===(tt=dt.getComponent())||void 0===tt?void 0:tt.instantiationMode)&&dt.initialize(),dt.getImmediate({identifier:ge})}_removeServiceInstance(ye,ge=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ye).clearInstance(ge)}_addComponent(ye){(0,F._addComponent)(this._delegate,ye)}_addOrOverwriteComponent(ye){(0,F._addOrOverwriteComponent)(this._delegate,ye)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const le=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function pe(){const ot=function he(ot){const ye={},ge={__esModule:!0,initializeApp:function Me(He,H={}){const me=F.initializeApp(He,H);if((0,d.r3)(ye,me.name))return ye[me.name];const Z=new ot(me,ge);return ye[me.name]=Z,Z},app:dt,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function Ie(He){const H=He.name,me=H.replace("-compat","");if(F._registerComponent(He)&&"PUBLIC"===He.type){const Z=(X=dt())=>{if("function"!=typeof X[me])throw le.create("invalid-app-argument",{appName:H});return X[me]()};void 0!==He.serviceProps&&(0,d.ZB)(Z,He.serviceProps),ge[me]=Z,ot.prototype[me]=function(...X){return this._getService.bind(this,H).apply(this,He.multipleInstances?X:[])}}return"PUBLIC"===He.type?ge[me]:null},removeApp:function tt(He){delete ye[He]},useAsService:function Be(He,H){return"serverAuth"===H?null:H},modularAPIs:F}};function dt(He){if(!(0,d.r3)(ye,He=He||F._DEFAULT_ENTRY_NAME))throw le.create("no-app",{appName:He});return ye[He]}return ge.default=ge,Object.defineProperty(ge,"apps",{get:function we(){return Object.keys(ye).map(He=>ye[He])}}),dt.App=ot,ge}(se);return ot.INTERNAL=Object.assign(Object.assign({},ot.INTERNAL),{createFirebaseNamespace:pe,extendNamespace:function ye(ge){(0,d.ZB)(ot,ge)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),ot}(),G=new oe.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ot=self.firebase.SDK_VERSION;ot&&ot.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const be=$;!function Re(ot){(0,F.registerVersion)("@firebase/app-compat","0.2.0",ot)}()},9681:(pt,Ae,L)=>{L.r(Ae),L.d(Ae,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>xs,_DEFAULT_ENTRY_NAME:()=>jt,_addComponent:()=>Yt,_addOrOverwriteComponent:()=>tn,_apps:()=>cn,_clearComponents:()=>os,_components:()=>En,_getProvider:()=>kt,_registerComponent:()=>jr,_removeServiceInstance:()=>dn,deleteApp:()=>Bo,getApp:()=>Qr,getApps:()=>di,initializeApp:()=>Mi,onLog:()=>Ms,registerVersion:()=>kr,setLogLevel:()=>nr});var d=L(5861),te=L(4859),F=L(1877),oe=L(2090),se=L(8766);class de{constructor(Te){this.container=Te}getPlatformInfoString(){return this.container.getProviders().map(nt=>{if(function le(it){return"VERSION"===it.getComponent()?.type}(nt)){const At=nt.getImmediate();return`${At.library}/${At.version}`}return null}).filter(nt=>nt).join(" ")}}const he="@firebase/app",$=new F.Yd("@firebase/app"),jt="[DEFAULT]",Ke={[he]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},cn=new Map,En=new Map;function Yt(it,Te){try{it.container.addComponent(Te)}catch(nt){$.debug(`Component ${Te.name} failed to register with FirebaseApp ${it.name}`,nt)}}function tn(it,Te){it.container.addOrOverwriteComponent(Te)}function jr(it){const Te=it.name;if(En.has(Te))return $.debug(`There were multiple attempts to register component ${Te}.`),!1;En.set(Te,it);for(const nt of cn.values())Yt(nt,it);return!0}function kt(it,Te){const nt=it.container.getProvider("heartbeat").getImmediate({optional:!0});return nt&&nt.triggerHeartbeat(),it.container.getProvider(Te)}function dn(it,Te,nt=jt){kt(it,Te).clearInstance(nt)}function os(){En.clear()}const Hr=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class $r{constructor(Te,nt,At){this._isDeleted=!1,this._options=Object.assign({},Te),this._config=Object.assign({},nt),this._name=nt.name,this._automaticDataCollectionEnabled=nt.automaticDataCollectionEnabled,this._container=At,this.container.addComponent(new te.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Te){this.checkDestroyed(),this._automaticDataCollectionEnabled=Te}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Te){this._isDeleted=Te}checkDestroyed(){if(this.isDeleted)throw Hr.create("app-deleted",{appName:this._name})}}const xs="9.15.0";function Mi(it,Te={}){let nt=it;"object"!=typeof Te&&(Te={name:Te});const At=Object.assign({name:jt,automaticDataCollectionEnabled:!1},Te),Mt=At.name;if("string"!=typeof Mt||!Mt)throw Hr.create("bad-app-name",{appName:String(Mt)});if(nt||(nt=(0,oe.aH)()),!nt)throw Hr.create("no-options");const Vt=cn.get(Mt);if(Vt){if((0,oe.vZ)(nt,Vt.options)&&(0,oe.vZ)(At,Vt.config))return Vt;throw Hr.create("duplicate-app",{appName:Mt})}const z=new te.H0(Mt);for(const K of En.values())z.addComponent(K);const B=new $r(nt,At,z);return cn.set(Mt,B),B}function Qr(it=jt){const Te=cn.get(it);if(!Te&&it===jt)return Mi();if(!Te)throw Hr.create("no-app",{appName:it});return Te}function di(){return Array.from(cn.values())}function Bo(it){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,d.Z)(function*(it){const Te=it.name;cn.has(Te)&&(cn.delete(Te),yield Promise.all(it.container.getProviders().map(nt=>nt.delete())),it.isDeleted=!0)})).apply(this,arguments)}function kr(it,Te,nt){var At;let Mt=null!==(At=Ke[it])&&void 0!==At?At:it;nt&&(Mt+=`-${nt}`);const Vt=Mt.match(/\s|\//),z=Te.match(/\s|\//);if(Vt||z){const B=[`Unable to register library "${Mt}" with version "${Te}":`];return Vt&&B.push(`library name "${Mt}" contains illegal characters (whitespace or "/")`),Vt&&z&&B.push("and"),z&&B.push(`version name "${Te}" contains illegal characters (whitespace or "/")`),void $.warn(B.join(" "))}jr(new te.wA(`${Mt}-version`,()=>({library:Mt,version:Te}),"VERSION"))}function Ms(it,Te){if(null!==it&&"function"!=typeof it)throw Hr.create("invalid-log-argument");(0,F.Am)(it,Te)}function nr(it){(0,F.Ub)(it)}const kn="firebase-heartbeat-store";let qn=null;function vn(){return qn||(qn=(0,se.X3)("firebase-heartbeat-database",1,{upgrade:(it,Te)=>{0===Te&&it.createObjectStore(kn)}}).catch(it=>{throw Hr.create("idb-open",{originalErrorMessage:it.message})})),qn}function ft(){return(ft=(0,d.Z)(function*(it){try{return(yield vn()).transaction(kn).objectStore(kn).get(jn(it))}catch(Te){if(Te instanceof oe.ZR)$.warn(Te.message);else{const nt=Hr.create("idb-get",{originalErrorMessage:Te?.message});$.warn(nt.message)}}})).apply(this,arguments)}function ln(it,Te){return gr.apply(this,arguments)}function gr(){return(gr=(0,d.Z)(function*(it,Te){try{const At=(yield vn()).transaction(kn,"readwrite");return yield At.objectStore(kn).put(Te,jn(it)),At.done}catch(nt){if(nt instanceof oe.ZR)$.warn(nt.message);else{const At=Hr.create("idb-set",{originalErrorMessage:nt?.message});$.warn(At.message)}}})).apply(this,arguments)}function jn(it){return`${it.name}!${it.options.appId}`}class as{constructor(Te){this.container=Te,this._heartbeatsCache=null;const nt=this.container.getProvider("app").getImmediate();this._storage=new on(nt),this._heartbeatsCachePromise=this._storage.read().then(At=>(this._heartbeatsCache=At,At))}triggerHeartbeat(){var Te=this;return(0,d.Z)(function*(){const At=Te.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Mt=nn();if(null===Te._heartbeatsCache&&(Te._heartbeatsCache=yield Te._heartbeatsCachePromise),Te._heartbeatsCache.lastSentHeartbeatDate!==Mt&&!Te._heartbeatsCache.heartbeats.some(Vt=>Vt.date===Mt))return Te._heartbeatsCache.heartbeats.push({date:Mt,agent:At}),Te._heartbeatsCache.heartbeats=Te._heartbeatsCache.heartbeats.filter(Vt=>{const z=new Date(Vt.date).valueOf();return Date.now()-z<=2592e6}),Te._storage.overwrite(Te._heartbeatsCache)})()}getHeartbeatsHeader(){var Te=this;return(0,d.Z)(function*(){if(null===Te._heartbeatsCache&&(yield Te._heartbeatsCachePromise),null===Te._heartbeatsCache||0===Te._heartbeatsCache.heartbeats.length)return"";const nt=nn(),{heartbeatsToSend:At,unsentEntries:Mt}=function Ri(it,Te=1024){const nt=[];let At=it.slice();for(const Mt of it){const Vt=nt.find(z=>z.agent===Mt.agent);if(Vt){if(Vt.dates.push(Mt.date),rr(nt)>Te){Vt.dates.pop();break}}else if(nt.push({agent:Mt.agent,dates:[Mt.date]}),rr(nt)>Te){nt.pop();break}At=At.slice(1)}return{heartbeatsToSend:nt,unsentEntries:At}}(Te._heartbeatsCache.heartbeats),Vt=(0,oe.L)(JSON.stringify({version:2,heartbeats:At}));return Te._heartbeatsCache.lastSentHeartbeatDate=nt,Mt.length>0?(Te._heartbeatsCache.heartbeats=Mt,yield Te._storage.overwrite(Te._heartbeatsCache)):(Te._heartbeatsCache.heartbeats=[],Te._storage.overwrite(Te._heartbeatsCache)),Vt})()}}function nn(){return(new Date).toISOString().substring(0,10)}class on{constructor(Te){this.app=Te,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Te=this;return(0,d.Z)(function*(){return(yield Te._canUseIndexedDBPromise)&&(yield function vt(it){return ft.apply(this,arguments)}(Te.app))||{heartbeats:[]}})()}overwrite(Te){var nt=this;return(0,d.Z)(function*(){var At;if(yield nt._canUseIndexedDBPromise){const Vt=yield nt.read();return ln(nt.app,{lastSentHeartbeatDate:null!==(At=Te.lastSentHeartbeatDate)&&void 0!==At?At:Vt.lastSentHeartbeatDate,heartbeats:Te.heartbeats})}})()}add(Te){var nt=this;return(0,d.Z)(function*(){var At;if(yield nt._canUseIndexedDBPromise){const Vt=yield nt.read();return ln(nt.app,{lastSentHeartbeatDate:null!==(At=Te.lastSentHeartbeatDate)&&void 0!==At?At:Vt.lastSentHeartbeatDate,heartbeats:[...Vt.heartbeats,...Te.heartbeats]})}})()}}function rr(it){return(0,oe.L)(JSON.stringify({version:2,heartbeats:it})).length}!function Gr(it){jr(new te.wA("platform-logger",Te=>new de(Te),"PRIVATE")),jr(new te.wA("heartbeat",Te=>new as(Te),"PRIVATE")),kr(he,"0.9.0",it),kr(he,"0.9.0","esm2017"),kr("fire-js","")}("")},4859:(pt,Ae,L)=>{L.d(Ae,{H0:()=>he,wA:()=>F,zt:()=>se});var d=L(5861),te=L(2090);class F{constructor($,G,Y){this.name=$,this.instanceFactory=G,this.type=Y,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const oe="[DEFAULT]";class se{constructor($,G){this.name=$,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const G=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(G)){const Y=new te.BH;if(this.instancesDeferred.set(G,Y),this.isInitialized(G)||this.shouldAutoInitialize())try{const Le=this.getOrInitializeService({instanceIdentifier:G});Le&&Y.resolve(Le)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate($){var G;const Y=this.normalizeInstanceIdentifier($?.identifier),Le=null!==(G=$?.optional)&&void 0!==G&&G;if(!this.isInitialized(Y)&&!this.shouldAutoInitialize()){if(Le)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Y})}catch(Re){if(Le)return null;throw Re}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function le(pe){return"EAGER"===pe.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:oe})}catch{}for(const[G,Y]of this.instancesDeferred.entries()){const Le=this.normalizeInstanceIdentifier(G);try{const Re=this.getOrInitializeService({instanceIdentifier:Le});Y.resolve(Re)}catch{}}}}clearInstance($=oe){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,d.Z)(function*(){const G=Array.from($.instances.values());yield Promise.all([...G.filter(Y=>"INTERNAL"in Y).map(Y=>Y.INTERNAL.delete()),...G.filter(Y=>"_delete"in Y).map(Y=>Y._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=oe){return this.instances.has($)}getOptions($=oe){return this.instancesOptions.get($)||{}}initialize($={}){const{options:G={}}=$,Y=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(Y))throw Error(`${this.name}(${Y}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Le=this.getOrInitializeService({instanceIdentifier:Y,options:G});for(const[Re,be]of this.instancesDeferred.entries())Y===this.normalizeInstanceIdentifier(Re)&&be.resolve(Le);return Le}onInit($,G){var Y;const Le=this.normalizeInstanceIdentifier(G),Re=null!==(Y=this.onInitCallbacks.get(Le))&&void 0!==Y?Y:new Set;Re.add($),this.onInitCallbacks.set(Le,Re);const be=this.instances.get(Le);return be&&$(be,Le),()=>{Re.delete($)}}invokeOnInitCallbacks($,G){const Y=this.onInitCallbacks.get(G);if(Y)for(const Le of Y)try{Le($,G)}catch{}}getOrInitializeService({instanceIdentifier:$,options:G={}}){let Y=this.instances.get($);if(!Y&&this.component&&(Y=this.component.instanceFactory(this.container,{instanceIdentifier:(pe=$,pe===oe?void 0:pe),options:G}),this.instances.set($,Y),this.instancesOptions.set($,G),this.invokeOnInitCallbacks(Y,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,Y)}catch{}var pe;return Y||null}normalizeInstanceIdentifier($=oe){return this.component?this.component.multipleInstances?$:oe:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class he{constructor($){this.name=$,this.providers=new Map}addComponent($){const G=this.getProvider($.name);if(G.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);G.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const G=new se($,this);return this.providers.set($,G),G}getProviders(){return Array.from(this.providers.values())}}},1877:(pt,Ae,L)=>{L.d(Ae,{Am:()=>pe,Ub:()=>he,Yd:()=>le,in:()=>te});const d=[];var te=(()=>{return($=te||(te={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",te;var $})();const F={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},oe=te.INFO,se={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},de=($,G,...Y)=>{if(G<$.logLevel)return;const Le=(new Date).toISOString(),Re=se[G];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Re](`[${Le}]  ${$.name}:`,...Y)};class le{constructor(G){this.name=G,this._logLevel=oe,this._logHandler=de,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in te))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?F[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...G),this._logHandler(this,te.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...G),this._logHandler(this,te.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,te.INFO,...G),this._logHandler(this,te.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,te.WARN,...G),this._logHandler(this,te.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...G),this._logHandler(this,te.ERROR,...G)}}function he($){d.forEach(G=>{G.setLogLevel($)})}function pe($,G){for(const Y of d){let Le=null;G&&G.level&&(Le=F[G.level]),Y.userLogHandler=null===$?null:(Re,be,...ot)=>{const ye=ot.map(ge=>{if(null==ge)return null;if("string"==typeof ge)return ge;if("number"==typeof ge||"boolean"==typeof ge)return ge.toString();if(ge instanceof Error)return ge.message;try{return JSON.stringify(ge)}catch{return null}}).filter(ge=>ge).join(" ");be>=(Le??Re.logLevel)&&$({level:te[be].toLowerCase(),message:ye,args:ot,type:Re.name})}}}},259:(pt,Ae,L)=>{L.d(Ae,{C6:()=>d.getApps,Mq:()=>d.getApp});var d=L(9681);(0,d.registerVersion)("firebase","9.15.0","app")},9260:(pt,Ae,L)=>{L.d(Ae,{Z:()=>d.Z});var d=L(3942);d.Z.registerVersion("firebase","9.15.0","app-compat")},9169:(pt,Ae,L)=>{L.r(Ae);var d=L(5861),te=L(3942),F=L(2090),oe=L(9681),se=L(1877),de=L(655),le=L(4859);const be=function Le(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ot=function Re(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ye=new F.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),tt=new se.Yd("@firebase/auth");function dt(y,...p){tt.logLevel<=se.in.ERROR&&tt.error(`Auth (${oe.SDK_VERSION}): ${y}`,...p)}function Me(y,...p){throw He(y,...p)}function we(y,...p){return He(y,...p)}function Ie(y,p,m){const C=Object.assign(Object.assign({},ot()),{[p]:m});return new F.LL("auth","Firebase",C).create(p,{appName:y.name})}function Be(y,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&Me(y,"argument-error"),Ie(y,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function He(y,...p){if("string"!=typeof y){const m=p[0],C=[...p.slice(1)];return C[0]&&(C[0].appName=y.name),y._errorFactory.create(m,...C)}return ye.create(y,...p)}function H(y,p,...m){if(!y)throw He(p,...m)}function me(y){const p="INTERNAL ASSERTION FAILED: "+y;throw dt(p),new Error(p)}function Z(y,p){y||me(p)}const X=new Map;function ie(y){Z(y instanceof Function,"Expected a class definition");let p=X.get(y);return p?(Z(p instanceof y,"Instance stored in cache mismatched with class"),p):(p=new y,X.set(y,p),p)}function Pe(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function gt(){return"http:"===en()||"https:"===en()}function en(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class cn{constructor(p,m){this.shortDelay=p,this.longDelay=m,Z(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return function jt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(gt()||(0,F.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function En(y,p){Z(y.emulator,"Emulator should always be set here");const{url:m}=y.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class Yt{static initialize(p,m,C){this.fetchImpl=p,m&&(this.headersImpl=m),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void me("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void me("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void me("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const tn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},jr=new cn(3e4,6e4);function kt(y,p){return y.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:y.tenantId}):p}function dn(y,p,m,C){return os.apply(this,arguments)}function os(){return(os=(0,d.Z)(function*(y,p,m,C,x={}){return xi(y,x,(0,d.Z)(function*(){let k={},q={};C&&("GET"===p?q=C:k={body:JSON.stringify(C)});const fe=(0,F.xO)(Object.assign({key:y.config.apiKey},q)).slice(1),Ue=yield y._getAdditionalHeaders();return Ue["Content-Type"]="application/json",y.languageCode&&(Ue["X-Firebase-Locale"]=y.languageCode),Yt.fetch()(Mi(y,y.config.apiHost,m,fe),Object.assign({method:p,headers:Ue,referrerPolicy:"no-referrer"},k))}))})).apply(this,arguments)}function xi(y,p,m){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,d.Z)(function*(y,p,m){y._canInitEmulator=!1;const C=Object.assign(Object.assign({},tn),p);try{const x=new Qr(y),k=yield Promise.race([m(),x.promise]);x.clearNetworkTimeout();const q=yield k.json();if("needConfirmation"in q)throw di(y,"account-exists-with-different-credential",q);if(k.ok&&!("errorMessage"in q))return q;{const fe=k.ok?q.errorMessage:q.error.message,[Ue,et]=fe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ue)throw di(y,"credential-already-in-use",q);if("EMAIL_EXISTS"===Ue)throw di(y,"email-already-in-use",q);if("USER_DISABLED"===Ue)throw di(y,"user-disabled",q);const bt=C[Ue]||Ue.toLowerCase().replace(/[_\s]+/g,"-");if(et)throw Ie(y,bt,et);Me(y,bt)}}catch(x){if(x instanceof F.ZR)throw x;Me(y,"network-request-failed")}})).apply(this,arguments)}function $r(y,p,m,C){return xs.apply(this,arguments)}function xs(){return(xs=(0,d.Z)(function*(y,p,m,C,x={}){const k=yield dn(y,p,m,C,x);return"mfaPendingCredential"in k&&Me(y,"multi-factor-auth-required",{_serverResponse:k}),k})).apply(this,arguments)}function Mi(y,p,m,C){const x=`${p}${m}?${C}`;return y.config.emulator?En(y.config,x):`${y.config.apiScheme}://${x}`}class Qr{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,C)=>{this.timer=setTimeout(()=>C(we(this.auth,"network-request-failed")),jr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function di(y,p,m){const C={appName:y.name};m.email&&(C.email=m.email),m.phoneNumber&&(C.phoneNumber=m.phoneNumber);const x=we(y,p,C);return x.customData._tokenResponse=m,x}function Qe(){return(Qe=(0,d.Z)(function*(y,p){return dn(y,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function kr(y,p){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,d.Z)(function*(y,p){return dn(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function nr(y,p){return hi.apply(this,arguments)}function hi(){return(hi=(0,d.Z)(function*(y,p){return dn(y,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function Zi(y){if(y)try{const p=new Date(Number(y));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function vn(){return(vn=(0,d.Z)(function*(y,p=!1){const m=(0,F.m9)(y),C=yield m.getIdToken(p),x=ft(C);H(x&&x.exp&&x.auth_time&&x.iat,m.auth,"internal-error");const k="object"==typeof x.firebase?x.firebase:void 0,q=k?.sign_in_provider;return{claims:x,token:C,authTime:Zi(vt(x.auth_time)),issuedAtTime:Zi(vt(x.iat)),expirationTime:Zi(vt(x.exp)),signInProvider:q||null,signInSecondFactor:k?.sign_in_second_factor||null}})).apply(this,arguments)}function vt(y){return 1e3*Number(y)}function ft(y){const[p,m,C]=y.split(".");if(void 0===p||void 0===m||void 0===C)return dt("JWT malformed, contained fewer than 3 sections"),null;try{const x=(0,F.tV)(m);return x?JSON.parse(x):(dt("Failed to decode base64 JWT payload"),null)}catch(x){return dt("Caught error parsing JWT payload as JSON",x?.toString()),null}}function gr(y,p){return jn.apply(this,arguments)}function jn(){return(jn=(0,d.Z)(function*(y,p,m=!1){if(m)return p;try{return yield p}catch(C){throw C instanceof F.ZR&&Jr(C)&&y.auth.currentUser===y&&(yield y.auth.signOut()),C}})).apply(this,arguments)}function Jr({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class St{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const x=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const C=this.getInterval(p);this.timerId=setTimeout((0,d.Z)(function*(){yield m.iteration()}),C)}iteration(){var p=this;return(0,d.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&p.schedule(!0))}p.schedule()})()}}class as{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zi(this.lastLoginAt),this.creationTime=Zi(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function nn(y){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,d.Z)(function*(y){var p;const m=y.auth,C=yield y.getIdToken(),x=yield gr(y,nr(m,{idToken:C}));H(x?.users.length,m,"internal-error");const k=x.users[0];y._notifyReloadListener(k);const q=null!==(p=k.providerUserInfo)&&void 0!==p&&p.length?it(k.providerUserInfo):[],fe=Gr(y.providerData,q),bt=!!y.isAnonymous&&!(y.email&&k.passwordHash||fe?.length),_t={uid:k.localId,displayName:k.displayName||null,photoURL:k.photoUrl||null,email:k.email||null,emailVerified:k.emailVerified||!1,phoneNumber:k.phoneNumber||null,tenantId:k.tenantId||null,providerData:fe,metadata:new as(k.createdAt,k.lastLoginAt),isAnonymous:bt};Object.assign(y,_t)})).apply(this,arguments)}function rr(){return(rr=(0,d.Z)(function*(y){const p=(0,F.m9)(y);yield nn(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Gr(y,p){return[...y.filter(C=>!p.some(x=>x.providerId===C.providerId)),...p]}function it(y){return y.map(p=>{var{providerId:m}=p,C=(0,de._T)(p,["providerId"]);return{providerId:m,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}function nt(){return(nt=(0,d.Z)(function*(y,p){const m=yield xi(y,{},(0,d.Z)(function*(){const C=(0,F.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:x,apiKey:k}=y.config,q=Mi(y,x,"/v1/token",`key=${k}`),fe=yield y._getAdditionalHeaders();return fe["Content-Type"]="application/x-www-form-urlencoded",Yt.fetch()(q,{method:"POST",headers:fe,body:C})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class At{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){H(p.idToken,"internal-error"),H(typeof p.idToken<"u","internal-error"),H(typeof p.refreshToken<"u","internal-error");const m="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function ln(y){const p=ft(y);return H(p,"internal-error"),H(typeof p.exp<"u","internal-error"),H(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var C=this;return(0,d.Z)(function*(){return H(!C.accessToken||C.refreshToken,p,"user-token-expired"),m||!C.accessToken||C.isExpired?C.refreshToken?(yield C.refresh(p,C.refreshToken),C.accessToken):null:C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var C=this;return(0,d.Z)(function*(){const{accessToken:x,refreshToken:k,expiresIn:q}=yield function Te(y,p){return nt.apply(this,arguments)}(p,m);C.updateTokensAndExpiration(x,k,Number(q))})()}updateTokensAndExpiration(p,m,C){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(p,m){const{refreshToken:C,accessToken:x,expirationTime:k}=m,q=new At;return C&&(H("string"==typeof C,"internal-error",{appName:p}),q.refreshToken=C),x&&(H("string"==typeof x,"internal-error",{appName:p}),q.accessToken=x),k&&(H("number"==typeof k,"internal-error",{appName:p}),q.expirationTime=k),q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new At,this.toJSON())}_performRefresh(){return me("not implemented")}}function Mt(y,p){H("string"==typeof y||typeof y>"u","internal-error",{appName:p})}class Vt{constructor(p){var{uid:m,auth:C,stsTokenManager:x}=p,k=(0,de._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new St(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=C,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=k.displayName||null,this.email=k.email||null,this.emailVerified=k.emailVerified||!1,this.phoneNumber=k.phoneNumber||null,this.photoURL=k.photoURL||null,this.isAnonymous=k.isAnonymous||!1,this.tenantId=k.tenantId||null,this.providerData=k.providerData?[...k.providerData]:[],this.metadata=new as(k.createdAt||void 0,k.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,d.Z)(function*(){const C=yield gr(m,m.stsTokenManager.getToken(m.auth,p));return H(C,m.auth,"internal-error"),m.accessToken!==C&&(m.accessToken=C,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),C})()}getIdTokenResult(p){return function qn(y){return vn.apply(this,arguments)}(this,p)}reload(){return function on(y){return rr.apply(this,arguments)}(this)}_assign(p){this!==p&&(H(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new Vt(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){H(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var C=this;return(0,d.Z)(function*(){let x=!1;p.idToken&&p.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(p),x=!0),m&&(yield nn(C)),yield C.auth._persistUserIfCurrent(C),x&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var p=this;return(0,d.Z)(function*(){const m=yield p.getIdToken();return yield gr(p,function Bo(y,p){return Qe.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var C,x,k,q,fe,Ue,et,bt;const _t=null!==(C=m.displayName)&&void 0!==C?C:void 0,hn=null!==(x=m.email)&&void 0!==x?x:void 0,Cr=null!==(k=m.phoneNumber)&&void 0!==k?k:void 0,rs=null!==(q=m.photoURL)&&void 0!==q?q:void 0,xg=null!==(fe=m.tenantId)&&void 0!==fe?fe:void 0,Mg=null!==(Ue=m._redirectEventId)&&void 0!==Ue?Ue:void 0,Rg=null!==(et=m.createdAt)&&void 0!==et?et:void 0,zd=null!==(bt=m.lastLoginAt)&&void 0!==bt?bt:void 0,{uid:Ng,emailVerified:ky,isAnonymous:da,providerData:iu,stsTokenManager:kg}=m;H(Ng&&kg,p,"internal-error");const Py=At.fromJSON(this.name,kg);H("string"==typeof Ng,p,"internal-error"),Mt(_t,p.name),Mt(hn,p.name),H("boolean"==typeof ky,p,"internal-error"),H("boolean"==typeof da,p,"internal-error"),Mt(Cr,p.name),Mt(rs,p.name),Mt(xg,p.name),Mt(Mg,p.name),Mt(Rg,p.name),Mt(zd,p.name);const su=new Vt({uid:Ng,auth:p,email:hn,emailVerified:ky,displayName:_t,isAnonymous:da,photoURL:rs,phoneNumber:Cr,tenantId:xg,stsTokenManager:Py,createdAt:Rg,lastLoginAt:zd});return iu&&Array.isArray(iu)&&(su.providerData=iu.map(ou=>Object.assign({},ou))),Mg&&(su._redirectEventId=Mg),su}static _fromIdTokenResponse(p,m,C=!1){return(0,d.Z)(function*(){const x=new At;x.updateFromServerResponse(m);const k=new Vt({uid:m.localId,auth:p,stsTokenManager:x,isAnonymous:C});return yield nn(k),k})()}}const B=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(m,C){var x=this;return(0,d.Z)(function*(){x.storage[m]=C})()}_get(m){var C=this;return(0,d.Z)(function*(){const x=C.storage[m];return void 0===x?null:x})()}_remove(m){var C=this;return(0,d.Z)(function*(){delete C.storage[m]})()}_addListener(m,C){}_removeListener(m,C){}}return y.type="NONE",y})();function K(y,p,m){return`firebase:${y}:${p}:${m}`}class Ee{constructor(p,m,C){this.persistence=p,this.auth=m,this.userKey=C;const{config:x,name:k}=this.auth;this.fullUserKey=K(this.userKey,x.apiKey,k),this.fullPersistenceKey=K("persistence",x.apiKey,k),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,d.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?Vt._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,d.Z)(function*(){if(m.persistence===p)return;const C=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,C?m.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,C="authUser"){return(0,d.Z)(function*(){if(!m.length)return new Ee(ie(B),p,C);const x=(yield Promise.all(m.map(function(){var et=(0,d.Z)(function*(bt){if(yield bt._isAvailable())return bt});return function(bt){return et.apply(this,arguments)}}()))).filter(et=>et);let k=x[0]||ie(B);const q=K(C,p.config.apiKey,p.name);let fe=null;for(const et of m)try{const bt=yield et._get(q);if(bt){const _t=Vt._fromJSON(p,bt);et!==k&&(fe=_t),k=et;break}}catch{}const Ue=x.filter(et=>et._shouldAllowMigration);return k._shouldAllowMigration&&Ue.length?(k=Ue[0],fe&&(yield k._set(q,fe.toJSON())),yield Promise.all(m.map(function(){var et=(0,d.Z)(function*(bt){if(bt!==k)try{yield bt._remove(q)}catch{}});return function(bt){return et.apply(this,arguments)}}())),new Ee(k,p,C)):new Ee(k,p,C)})()}}function J(y){const p=y.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(_n(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(Ge(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Ve(p))return"Blackberry";if($e(p))return"Webos";if(mt(p))return"Safari";if((p.includes("chrome/")||Qt(p))&&!p.includes("edge/"))return"Chrome";if(Wt(p))return"Android";{const C=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===C?.length)return C[1]}return"Other"}function Ge(y=(0,F.z$)()){return/firefox\//i.test(y)}function mt(y=(0,F.z$)()){const p=y.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function Qt(y=(0,F.z$)()){return/crios\//i.test(y)}function _n(y=(0,F.z$)()){return/iemobile/i.test(y)}function Wt(y=(0,F.z$)()){return/android/i.test(y)}function Ve(y=(0,F.z$)()){return/blackberry/i.test(y)}function $e(y=(0,F.z$)()){return/webos/i.test(y)}function Ut(y=(0,F.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function ro(y=(0,F.z$)()){return Ut(y)||Wt(y)||$e(y)||Ve(y)||/windows phone/i.test(y)||_n(y)}function Rs(y,p=[]){let m;switch(y){case"Browser":m=J((0,F.z$)());break;case"Worker":m=`${J((0,F.z$)())}-${y}`;break;default:m=y}const C=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${oe.SDK_VERSION}/${C}`}class jo{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const C=k=>new Promise((q,fe)=>{try{q(p(k))}catch(Ue){fe(Ue)}});C.onAbort=m,this.queue.push(C);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,d.Z)(function*(){if(m.auth.currentUser===p)return;const C=[];try{for(const x of m.queue)yield x(p),x.onAbort&&C.push(x.onAbort)}catch(x){C.reverse();for(const k of C)try{k()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:x?.message})}})()}}class Pt{constructor(p,m,C){this.app=p,this.heartbeatServiceProvider=m,this.config=C,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new io(this),this.idTokenSubscription=new io(this),this.beforeStateQueue=new jo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ye,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=C.sdkClientVersion}_initializeWithPersistence(p,m){var C=this;return m&&(this._popupRedirectResolver=ie(m)),this._initializationPromise=this.queue((0,d.Z)(function*(){var x,k;if(!C._deleted&&(C.persistenceManager=yield Ee.create(C,p),!C._deleted)){if(null!==(x=C._popupRedirectResolver)&&void 0!==x&&x._shouldInitProactively)try{yield C._popupRedirectResolver._initialize(C)}catch{}yield C.initializeCurrentUser(m),C.lastNotifiedUid=(null===(k=C.currentUser)||void 0===k?void 0:k.uid)||null,!C._deleted&&(C._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,d.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,d.Z)(function*(){var C;const x=yield m.assertedPersistence.getCurrentUser();let k=x,q=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const fe=null===(C=m.redirectUser)||void 0===C?void 0:C._redirectEventId,Ue=k?._redirectEventId,et=yield m.tryRedirectSignIn(p);(!fe||fe===Ue)&&et?.user&&(k=et.user,q=!0)}if(!k)return m.directlySetCurrentUser(null);if(!k._redirectEventId){if(q)try{yield m.beforeStateQueue.runMiddleware(k)}catch(fe){k=x,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(fe))}return k?m.reloadAndSetCurrentUserOrClear(k):m.directlySetCurrentUser(null)}return H(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===k._redirectEventId?m.directlySetCurrentUser(k):m.reloadAndSetCurrentUserOrClear(k)})()}tryRedirectSignIn(p){var m=this;return(0,d.Z)(function*(){let C=null;try{C=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch{yield m._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,d.Z)(function*(){try{yield nn(p)}catch(C){if("auth/network-request-failed"!==C?.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function Ke(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var p=this;return(0,d.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,d.Z)(function*(){const C=p?(0,F.m9)(p):null;return C&&H(C.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(C&&C._clone(m))})()}_updateCurrentUser(p,m=!1){var C=this;return(0,d.Z)(function*(){if(!C._deleted)return p&&H(C.tenantId===p.tenantId,C,"tenant-id-mismatch"),m||(yield C.beforeStateQueue.runMiddleware(p)),C.queue((0,d.Z)(function*(){yield C.directlySetCurrentUser(p),C.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,d.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,d.Z)(function*(){yield m.assertedPersistence.setPersistence(ie(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new F.LL("auth","Firebase",p())}onAuthStateChanged(p,m,C){return this.registerStateListener(this.authStateSubscription,p,m,C)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,C){return this.registerStateListener(this.idTokenSubscription,p,m,C)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var C=this;return(0,d.Z)(function*(){const x=yield C.getOrInitRedirectPersistenceManager(m);return null===p?x.removeCurrentUser():x.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,d.Z)(function*(){if(!m.redirectPersistenceManager){const C=p&&ie(p)||m._popupRedirectResolver;H(C,m,"argument-error"),m.redirectPersistenceManager=yield Ee.create(m,[ie(C._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,d.Z)(function*(){var C,x;return m._isInitialized&&(yield m.queue((0,d.Z)(function*(){}))),(null===(C=m._currentUser)||void 0===C?void 0:C._redirectEventId)===p?m._currentUser:(null===(x=m.redirectUser)||void 0===x?void 0:x._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,d.Z)(function*(){if(p===m.currentUser)return m.queue((0,d.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,C,x){if(this._deleted)return()=>{};const k="function"==typeof m?m:m.next.bind(m),q=this._isInitialized?Promise.resolve():this._initializationPromise;return H(q,this,"internal-error"),q.then(()=>k(this.currentUser)),"function"==typeof m?p.addObserver(m,C,x):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,d.Z)(function*(){m.currentUser&&m.currentUser!==p&&m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh(),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return H(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Rs(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,d.Z)(function*(){var m;const C={"X-Client-Version":p.clientVersion};p.app.options.appId&&(C["X-Firebase-gmpid"]=p.app.options.appId);const x=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return x&&(C["X-Firebase-Client"]=x),C})()}}function Tn(y){return(0,F.m9)(y)}class io{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,F.ne)(m=>this.observer=m)}get next(){return H(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ki(y){const p=y.indexOf(":");return p<0?"":y.substr(0,p+1)}function Ns(y){if(!y)return null;const p=Number(y);return isNaN(p)?null:p}class Dr{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return me("not implemented")}_getIdTokenResponse(p){return me("not implemented")}_linkToIdToken(p,m){return me("not implemented")}_getReauthenticationResolver(p){return me("not implemented")}}function Kn(y,p){return Da.apply(this,arguments)}function Da(){return(Da=(0,d.Z)(function*(y,p){return dn(y,"POST","/v1/accounts:resetPassword",kt(y,p))})).apply(this,arguments)}function Jt(y,p){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,d.Z)(function*(y,p){return dn(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Fl(y,p){return so.apply(this,arguments)}function so(){return(so=(0,d.Z)(function*(y,p){return dn(y,"POST","/v1/accounts:update",kt(y,p))})).apply(this,arguments)}function Yi(){return(Yi=(0,d.Z)(function*(y,p){return $r(y,"POST","/v1/accounts:signInWithPassword",kt(y,p))})).apply(this,arguments)}function Ps(y,p){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,d.Z)(function*(y,p){return dn(y,"POST","/v1/accounts:sendOobCode",kt(y,p))})).apply(this,arguments)}function Pn(y,p){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,d.Z)(function*(y,p){return Ps(y,p)})).apply(this,arguments)}function _r(y,p){return zr.apply(this,arguments)}function zr(){return(zr=(0,d.Z)(function*(y,p){return Ps(y,p)})).apply(this,arguments)}function Iu(y,p){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,d.Z)(function*(y,p){return Ps(y,p)})).apply(this,arguments)}function Vl(y,p){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,d.Z)(function*(y,p){return Ps(y,p)})).apply(this,arguments)}function ad(){return(ad=(0,d.Z)(function*(y,p){return $r(y,"POST","/v1/accounts:signInWithEmailLink",kt(y,p))})).apply(this,arguments)}function Ul(){return(Ul=(0,d.Z)(function*(y,p){return $r(y,"POST","/v1/accounts:signInWithEmailLink",kt(y,p))})).apply(this,arguments)}class Bl extends Dr{constructor(p,m,C,x=null){super("password",C),this._email=p,this._password=m,this._tenantId=x}static _fromEmailAndPassword(p,m){return new Bl(p,m,"password")}static _fromEmailAndCode(p,m,C=null){return new Bl(p,m,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,d.Z)(function*(){switch(m.signInMethod){case"password":return function Ta(y,p){return Yi.apply(this,arguments)}(p,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function Jh(y,p){return ad.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:Me(p,"internal-error")}})()}_linkToIdToken(p,m){var C=this;return(0,d.Z)(function*(){switch(C.signInMethod){case"password":return Jt(p,{idToken:m,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function ud(y,p){return Ul.apply(this,arguments)}(p,{idToken:m,email:C._email,oobCode:C._password});default:Me(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function sr(y,p){return ld.apply(this,arguments)}function ld(){return(ld=(0,d.Z)(function*(y,p){return $r(y,"POST","/v1/accounts:signInWithIdp",kt(y,p))})).apply(this,arguments)}class us extends Dr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new us(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):Me("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:C,signInMethod:x}=m,k=(0,de._T)(m,["providerId","signInMethod"]);if(!C||!x)return null;const q=new us(C,x);return q.idToken=k.idToken||void 0,q.accessToken=k.accessToken||void 0,q.secret=k.secret,q.nonce=k.nonce,q.pendingToken=k.pendingToken||null,q}_getIdTokenResponse(p){return sr(p,this.buildRequest())}_linkToIdToken(p,m){const C=this.buildRequest();return C.idToken=m,sr(p,C)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,sr(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,F.xO)(m)}return p}}function ig(y,p){return cd.apply(this,arguments)}function cd(){return(cd=(0,d.Z)(function*(y,p){return dn(y,"POST","/v1/accounts:sendVerificationCode",kt(y,p))})).apply(this,arguments)}function Os(){return(Os=(0,d.Z)(function*(y,p){return $r(y,"POST","/v1/accounts:signInWithPhoneNumber",kt(y,p))})).apply(this,arguments)}function dd(){return(dd=(0,d.Z)(function*(y,p){const m=yield $r(y,"POST","/v1/accounts:signInWithPhoneNumber",kt(y,p));if(m.temporaryProof)throw di(y,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const og={USER_NOT_FOUND:"user-not-found"};function hd(){return(hd=(0,d.Z)(function*(y,p){return $r(y,"POST","/v1/accounts:signInWithPhoneNumber",kt(y,Object.assign(Object.assign({},p),{operation:"REAUTH"})),og)})).apply(this,arguments)}class Fs extends Dr{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new Fs({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new Fs({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function jl(y,p){return Os.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function sg(y,p){return dd.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function ag(y,p){return hd.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:C,verificationCode:x}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:C,code:x}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:C,phoneNumber:x,temporaryProof:k}=p;return C||m||x||k?new Fs({verificationId:m,verificationCode:C,phoneNumber:x,temporaryProof:k}):null}}class Du{constructor(p){var m,C,x,k,q,fe;const Ue=(0,F.zd)((0,F.pd)(p)),et=null!==(m=Ue.apiKey)&&void 0!==m?m:null,bt=null!==(C=Ue.oobCode)&&void 0!==C?C:null,_t=function fd(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=Ue.mode)&&void 0!==x?x:null);H(et&&bt&&_t,"argument-error"),this.apiKey=et,this.operation=_t,this.code=bt,this.continueUrl=null!==(k=Ue.continueUrl)&&void 0!==k?k:null,this.languageCode=null!==(q=Ue.languageCode)&&void 0!==q?q:null,this.tenantId=null!==(fe=Ue.tenantId)&&void 0!==fe?fe:null}static parseLink(p){const m=function pd(y){const p=(0,F.zd)((0,F.pd)(y)).link,m=p?(0,F.zd)((0,F.pd)(p)).deep_link_id:null,C=(0,F.zd)((0,F.pd)(y)).deep_link_id;return(C?(0,F.zd)((0,F.pd)(C)).link:null)||C||m||p||y}(p);try{return new Du(m)}catch{return null}}}let Qi=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(m,C){return Bl._fromEmailAndPassword(m,C)}static credentialWithLink(m,C){const x=Du.parseLink(C);return H(x,"argument-error"),Bl._fromEmailAndCode(m,x.code,x.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class ls{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class cs extends ls{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class oo extends cs{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return H("providerId"in m&&"signInMethod"in m,"argument-error"),us._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return H(p.idToken||p.accessToken,"argument-error"),us._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return oo.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return oo.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:C,oauthTokenSecret:x,pendingToken:k,nonce:q,providerId:fe}=p;if(!C&&!x&&!m&&!k||!fe)return null;try{return new oo(fe)._credential({idToken:m,accessToken:C,nonce:q,pendingToken:k})}catch{return null}}}let Aa=(()=>{class y extends cs{constructor(){super("facebook.com")}static credential(m){return us._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Tu=(()=>{class y extends cs{constructor(){super("google.com"),this.addScope("profile")}static credential(m,C){return us._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:C})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:C,oauthAccessToken:x}=m;if(!C&&!x)return null;try{return y.credential(C,x)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Hl=(()=>{class y extends cs{constructor(){super("github.com")}static credential(m){return us._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class xa extends Dr{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return sr(p,this.buildRequest())}_linkToIdToken(p,m){const C=this.buildRequest();return C.idToken=m,sr(p,C)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,sr(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:C,signInMethod:x,pendingToken:k}=m;return C&&x&&k&&C===x?new xa(C,k):null}static _create(p,m){return new xa(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class fi extends ls{constructor(p){H(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return fi.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return fi.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=xa.fromJSON(p);return H(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:C}=p;if(!m||!C)return null;try{return xa._create(C,m)}catch{return null}}}let ei=(()=>{class y extends cs{constructor(){super("twitter.com")}static credential(m,C){return us._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:C})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:C,oauthTokenSecret:x}=m;if(!C||!x)return null;try{return y.credential(C,x)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Ho(y,p){return gd.apply(this,arguments)}function gd(){return(gd=(0,d.Z)(function*(y,p){return $r(y,"POST","/v1/accounts:signUp",kt(y,p))})).apply(this,arguments)}class Tr{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,C,x=!1){return(0,d.Z)(function*(){const k=yield Vt._fromIdTokenResponse(p,C,x),q=tf(C);return new Tr({user:k,providerId:q,_tokenResponse:C,operationType:m})})()}static _forOperation(p,m,C){return(0,d.Z)(function*(){yield p._updateTokensIfNecessary(C,!0);const x=tf(C);return new Tr({user:p,providerId:x,_tokenResponse:C,operationType:m})})()}}function tf(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function On(){return(On=(0,d.Z)(function*(y){var p;const m=Tn(y);if(yield m._initializationPromise,null!==(p=m.currentUser)&&void 0!==p&&p.isAnonymous)return new Tr({user:m.currentUser,providerId:null,operationType:"signIn"});const C=yield Ho(m,{returnSecureToken:!0}),x=yield Tr._fromIdTokenResponse(m,"signIn",C,!0);return yield m._updateCurrentUser(x.user),x})).apply(this,arguments)}class Su extends F.ZR{constructor(p,m,C,x){var k;super(m.code,m.message),this.operationType=C,this.user=x,Object.setPrototypeOf(this,Su.prototype),this.customData={appName:p.name,tenantId:null!==(k=p.tenantId)&&void 0!==k?k:void 0,_serverResponse:m.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(p,m,C,x){return new Su(p,m,C,x)}}function rf(y,p,m,C){return("reauthenticate"===p?m._getReauthenticationResolver(y):m._getIdTokenResponse(y)).catch(k=>{throw"auth/multi-factor-auth-required"===k.code?Su._fromErrorAndOperation(y,k,p,C):k})}function pi(y){return new Set(y.map(({providerId:p})=>p).filter(p=>!!p))}function Au(){return(Au=(0,d.Z)(function*(y,p){const m=(0,F.m9)(y);yield qt(!0,m,p);const{providerUserInfo:C}=yield kr(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),x=pi(C||[]);return m.providerData=m.providerData.filter(k=>x.has(k.providerId)),x.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function ao(y,p){return hs.apply(this,arguments)}function hs(){return(hs=(0,d.Z)(function*(y,p,m=!1){const C=yield gr(y,p._linkToIdToken(y.auth,yield y.getIdToken()),m);return Tr._forOperation(y,"link",C)})).apply(this,arguments)}function qt(y,p,m){return xu.apply(this,arguments)}function xu(){return(xu=(0,d.Z)(function*(y,p,m){yield nn(p);const x=!1===y?"provider-already-linked":"no-such-provider";H(pi(p.providerData).has(m)===y,p.auth,x)})).apply(this,arguments)}function uo(y,p){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,d.Z)(function*(y,p,m=!1){const{auth:C}=y,x="reauthenticate";try{const k=yield gr(y,rf(C,x,p,y),m);H(k.idToken,C,"internal-error");const q=ft(k.idToken);H(q,C,"internal-error");const{sub:fe}=q;return H(y.uid===fe,C,"user-mismatch"),Tr._forOperation(y,x,k)}catch(k){throw"auth/user-not-found"===k?.code&&Me(C,"user-mismatch"),k}})).apply(this,arguments)}function ki(y,p){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,d.Z)(function*(y,p,m=!1){const C="signIn",x=yield rf(y,C,p),k=yield Tr._fromIdTokenResponse(y,C,x);return m||(yield y._updateCurrentUser(k.user)),k})).apply(this,arguments)}function An(y,p){return xt.apply(this,arguments)}function xt(){return(xt=(0,d.Z)(function*(y,p){return ki(Tn(y),p)})).apply(this,arguments)}function Nu(y,p){return sf.apply(this,arguments)}function sf(){return(sf=(0,d.Z)(function*(y,p){const m=(0,F.m9)(y);return yield qt(!1,m,p.providerId),ao(m,p)})).apply(this,arguments)}function ku(y,p){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,d.Z)(function*(y,p){return uo((0,F.m9)(y),p)})).apply(this,arguments)}function $l(y,p){return fs.apply(this,arguments)}function fs(){return(fs=(0,d.Z)(function*(y,p){return $r(y,"POST","/v1/accounts:signInWithCustomToken",kt(y,p))})).apply(this,arguments)}function Ma(){return(Ma=(0,d.Z)(function*(y,p){const m=Tn(y),C=yield $l(m,{token:p,returnSecureToken:!0}),x=yield Tr._fromIdTokenResponse(m,"signIn",C);return yield m._updateCurrentUser(x.user),x})).apply(this,arguments)}class Se{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?$t._fromServerResponse(p,m):Me(p,"internal-error")}}class $t extends Se{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new $t(m)}}function Ou(y,p,m){var C;H((null===(C=m.url)||void 0===C?void 0:C.length)>0,y,"invalid-continue-uri"),H(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(H(m.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(H(m.android.packageName.length>0,y,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function Fn(){return(Fn=(0,d.Z)(function*(y,p,m){const C=(0,F.m9)(y),x={requestType:"PASSWORD_RESET",email:p};m&&Ou(C,x,m),yield _r(C,x)})).apply(this,arguments)}function $o(){return($o=(0,d.Z)(function*(y,p,m){yield Kn((0,F.m9)(y),{oobCode:p,newPassword:m})})).apply(this,arguments)}function Ra(){return(Ra=(0,d.Z)(function*(y,p){yield Fl((0,F.m9)(y),{oobCode:p})})).apply(this,arguments)}function Na(y,p){return zl.apply(this,arguments)}function zl(){return(zl=(0,d.Z)(function*(y,p){const m=(0,F.m9)(y),C=yield Kn(m,{oobCode:p}),x=C.requestType;switch(H(x,m,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":H(C.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":H(C.mfaInfo,m,"internal-error");default:H(C.email,m,"internal-error")}let k=null;return C.mfaInfo&&(k=Se._fromServerResponse(Tn(m),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:k},operation:x}})).apply(this,arguments)}function md(){return(md=(0,d.Z)(function*(y,p){const{data:m}=yield Na((0,F.m9)(y),p);return m.email})).apply(this,arguments)}function Ln(){return(Ln=(0,d.Z)(function*(y,p,m){const C=Tn(y),x=yield Ho(C,{returnSecureToken:!0,email:p,password:m}),k=yield Tr._fromIdTokenResponse(C,"signIn",x);return yield C._updateCurrentUser(k.user),k})).apply(this,arguments)}function lo(){return(lo=(0,d.Z)(function*(y,p,m){const C=(0,F.m9)(y),x={requestType:"EMAIL_SIGNIN",email:p};H(m.handleCodeInApp,C,"argument-error"),m&&Ou(C,x,m),yield Iu(C,x)})).apply(this,arguments)}function Pa(){return(Pa=(0,d.Z)(function*(y,p,m){const C=(0,F.m9)(y),x=Qi.credentialWithLink(p,m||Pe());return H(x._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),An(C,x)})).apply(this,arguments)}function lg(y,p){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,d.Z)(function*(y,p){return dn(y,"POST","/v1/accounts:createAuthUri",kt(y,p))})).apply(this,arguments)}function Oa(){return(Oa=(0,d.Z)(function*(y,p){const C={identifier:p,continueUri:gt()?Pe():"http://localhost"},{signinMethods:x}=yield lg((0,F.m9)(y),C);return x||[]})).apply(this,arguments)}function Fa(){return(Fa=(0,d.Z)(function*(y,p){const m=(0,F.m9)(y),x={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};p&&Ou(m.auth,x,p);const{email:k}=yield Pn(m.auth,x);k!==y.email&&(yield y.reload())})).apply(this,arguments)}function Uu(){return(Uu=(0,d.Z)(function*(y,p,m){const C=(0,F.m9)(y),k={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:p};m&&Ou(C.auth,k,m);const{email:q}=yield Vl(C.auth,k);q!==y.email&&(yield y.reload())})).apply(this,arguments)}function Bu(y,p){return Ql.apply(this,arguments)}function Ql(){return(Ql=(0,d.Z)(function*(y,p){return dn(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Xl(){return(Xl=(0,d.Z)(function*(y,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const C=(0,F.m9)(y),k={idToken:yield C.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},q=yield gr(C,Bu(C.auth,k));C.displayName=q.displayName||null,C.photoURL=q.photoUrl||null;const fe=C.providerData.find(({providerId:Ue})=>"password"===Ue);fe&&(fe.displayName=C.displayName,fe.photoURL=C.photoURL),yield C._updateTokensIfNecessary(q)})).apply(this,arguments)}function ho(y,p,m){return ju.apply(this,arguments)}function ju(){return(ju=(0,d.Z)(function*(y,p,m){const{auth:C}=y,k={idToken:yield y.getIdToken(),returnSecureToken:!0};p&&(k.email=p),m&&(k.password=m);const q=yield gr(y,Jt(C,k));yield y._updateTokensIfNecessary(q,!0)})).apply(this,arguments)}class ti{constructor(p,m,C={}){this.isNewUser=p,this.providerId=m,this.profile=C}}class wn extends ti{constructor(p,m,C,x){super(p,m,C),this.username=x}}class yd extends ti{constructor(p,m){super(p,"facebook.com",m)}}class ec extends wn{constructor(p,m){super(p,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class af extends ti{constructor(p,m){super(p,"google.com",m)}}class tc extends wn{constructor(p,m,C){super(p,"twitter.com",m,C)}}function Hu(y){const{user:p,_tokenResponse:m}=y;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function or(y){var p,m;if(!y)return null;const{providerId:C}=y,x=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},k=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!C&&y?.idToken){const q=null===(m=null===(p=ft(y.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(q)return new ti(k,"anonymous"!==q&&"custom"!==q?q:null)}if(!C)return null;switch(C){case"facebook.com":return new yd(k,x);case"github.com":return new ec(k,x);case"google.com":return new af(k,x);case"twitter.com":return new tc(k,x,y.screenName||null);case"custom":case"anonymous":return new ti(k,null);default:return new ti(k,C,x)}}(m)}class po{constructor(p,m,C){this.type=p,this.credential=m,this.auth=C}static _fromIdtoken(p,m){return new po("enroll",p,m)}static _fromMfaPendingCredential(p){return new po("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,C;if(p?.multiFactorSession){if(null!==(m=p.multiFactorSession)&&void 0!==m&&m.pendingCredential)return po._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(C=p.multiFactorSession)&&void 0!==C&&C.idToken)return po._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Gu{constructor(p,m,C){this.session=p,this.hints=m,this.signInResolver=C}static _fromError(p,m){const C=Tn(p),x=m.customData._serverResponse,k=(x.mfaInfo||[]).map(fe=>Se._fromServerResponse(C,fe));H(x.mfaPendingCredential,C,"internal-error");const q=po._fromMfaPendingCredential(x.mfaPendingCredential);return new Gu(q,k,function(){var fe=(0,d.Z)(function*(Ue){const et=yield Ue._process(C,q);delete x.mfaInfo,delete x.mfaPendingCredential;const bt=Object.assign(Object.assign({},x),{idToken:et.idToken,refreshToken:et.refreshToken});switch(m.operationType){case"signIn":const _t=yield Tr._fromIdTokenResponse(C,m.operationType,bt);return yield C._updateCurrentUser(_t.user),_t;case"reauthenticate":return H(m.user,C,"internal-error"),Tr._forOperation(m.user,m.operationType,bt);default:Me(C,"internal-error")}});return function(Ue){return fe.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,d.Z)(function*(){return m.signInResolver(p)})()}}function zu(y,p){return dn(y,"POST","/v2/accounts/mfaEnrollment:start",kt(y,p))}class uf{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(C=>Se._fromServerResponse(p.auth,C)))})}static _fromUser(p){return new uf(p)}getSession(){var p=this;return(0,d.Z)(function*(){return po._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,m){var C=this;return(0,d.Z)(function*(){const x=p,k=yield C.getSession(),q=yield gr(C.user,x._process(C.user.auth,k,m));return yield C.user._updateTokensIfNecessary(q),C.user.reload()})()}unenroll(p){var m=this;return(0,d.Z)(function*(){const C="string"==typeof p?p:p.uid,x=yield m.user.getIdToken(),k=yield gr(m.user,function Ed(y,p){return dn(y,"POST","/v2/accounts/mfaEnrollment:withdraw",kt(y,p))}(m.user.auth,{idToken:x,mfaEnrollmentId:C}));m.enrolledFactors=m.enrolledFactors.filter(({uid:q})=>q!==C),yield m.user._updateTokensIfNecessary(k);try{yield m.user.reload()}catch(q){if("auth/user-token-expired"!==q?.code)throw q}})()}}const Wo=new WeakMap,go="__sak";class qu{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(go,"1"),this.storage.removeItem(go),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Va=(()=>{class y extends qu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,C)=>this.onStorageEvent(m,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function La(){const y=(0,F.z$)();return mt(y)||Ut(y)}()&&function bn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=ro(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const C of Object.keys(this.listeners)){const x=this.storage.getItem(C),k=this.localCache[C];x!==k&&m(C,k,x)}}onStorageEvent(m,C=!1){if(!m.key)return void this.forAllChangedKeys((fe,Ue,et)=>{this.notifyListeners(fe,et)});const x=m.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const fe=this.storage.getItem(x);if(m.newValue!==fe)null!==m.newValue?this.storage.setItem(x,m.newValue):this.storage.removeItem(x);else if(this.localCache[x]===m.newValue&&!C)return}const k=()=>{const fe=this.storage.getItem(x);!C&&this.localCache[x]===fe||this.notifyListeners(x,fe)},q=this.storage.getItem(x);!function ir(){return(0,F.w1)()&&10===document.documentMode}()||q===m.newValue||m.newValue===m.oldValue?k():setTimeout(k,10)}notifyListeners(m,C){this.localCache[m]=C;const x=this.listeners[m];if(x)for(const k of Array.from(x))k(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,C,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:C,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(C)}_removeListener(m,C){this.listeners[m]&&(this.listeners[m].delete(C),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,C){var x=()=>super._set,k=this;return(0,d.Z)(function*(){yield x().call(k,m,C),k.localCache[m]=JSON.stringify(C)})()}_get(m){var C=()=>super._get,x=this;return(0,d.Z)(function*(){const k=yield C().call(x,m);return x.localCache[m]=JSON.stringify(k),k})()}_remove(m){var C=()=>super._remove,x=this;return(0,d.Z)(function*(){yield C().call(x,m),delete x.localCache[m]})()}}return y.type="LOCAL",y})(),Xi=(()=>{class y extends qu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,C){}_removeListener(m,C){}}return y.type="SESSION",y})();let Dd=(()=>{class y{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const C=this.receivers.find(k=>k.isListeningto(m));if(C)return C;const x=new y(m);return this.receivers.push(x),x}isListeningto(m){return this.eventTarget===m}handleEvent(m){var C=this;return(0,d.Z)(function*(){const x=m,{eventId:k,eventType:q,data:fe}=x.data,Ue=C.handlersMap[q];if(!Ue?.size)return;x.ports[0].postMessage({status:"ack",eventId:k,eventType:q});const et=Array.from(Ue).map(function(){var _t=(0,d.Z)(function*(hn){return hn(x.origin,fe)});return function(hn){return _t.apply(this,arguments)}}()),bt=yield function Ba(y){return Promise.all(y.map(function(){var p=(0,d.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(C){return{fulfilled:!1,reason:C}}});return function(m){return p.apply(this,arguments)}}()))}(et);x.ports[0].postMessage({status:"done",eventId:k,eventType:q,response:bt})})()}_subscribe(m,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(C)}_unsubscribe(m,C){this.handlersMap[m]&&C&&this.handlersMap[m].delete(C),(!C||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function ja(y="",p=10){let m="";for(let C=0;C<p;C++)m+=Math.floor(10*Math.random());return y+m}class nc{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,C=50){var x=this;return(0,d.Z)(function*(){const k=typeof MessageChannel<"u"?new MessageChannel:null;if(!k)throw new Error("connection_unavailable");let q,fe;return new Promise((Ue,et)=>{const bt=ja("",20);k.port1.start();const _t=setTimeout(()=>{et(new Error("unsupported_event"))},C);fe={messageChannel:k,onMessage(hn){const Cr=hn;if(Cr.data.eventId===bt)switch(Cr.data.status){case"ack":clearTimeout(_t),q=setTimeout(()=>{et(new Error("timeout"))},3e3);break;case"done":clearTimeout(q),Ue(Cr.data.response);break;default:clearTimeout(_t),clearTimeout(q),et(new Error("invalid_response"))}}},x.handlers.add(fe),k.port1.addEventListener("message",fe.onMessage),x.target.postMessage({eventType:p,eventId:bt,data:m},[k.port2])}).finally(()=>{fe&&x.removeMessageHandler(fe)})})()}}function Hn(){return window}function Zu(){return typeof Hn().WorkerGlobalScope<"u"&&"function"==typeof Hn().importScripts}function Ha(){return(Ha=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Us="firebaseLocalStorageDb",Bs="firebaseLocalStorage",rc="fbase_key";class _o{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function $a(y,p){return y.transaction([Bs],p?"readwrite":"readonly").objectStore(Bs)}function Zo(){const y=indexedDB.open(Us,1);return new Promise((p,m)=>{y.addEventListener("error",()=>{m(y.error)}),y.addEventListener("upgradeneeded",()=>{const C=y.result;try{C.createObjectStore(Bs,{keyPath:rc})}catch(x){m(x)}}),y.addEventListener("success",(0,d.Z)(function*(){const C=y.result;C.objectStoreNames.contains(Bs)?p(C):(C.close(),yield function Sd(){const y=indexedDB.deleteDatabase(Us);return new _o(y).toPromise()}(),p(yield Zo()))}))})}function gs(y,p,m){return ic.apply(this,arguments)}function ic(){return(ic=(0,d.Z)(function*(y,p,m){const C=$a(y,!0).put({[rc]:p,value:m});return new _o(C).toPromise()})).apply(this,arguments)}function Ga(){return(Ga=(0,d.Z)(function*(y,p){const m=$a(y,!1).get(p),C=yield new _o(m).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function yo(y,p){const m=$a(y,!0).delete(p);return new _o(m).toPromise()}const Ko=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,d.Z)(function*(){return m.db||(m.db=yield Zo()),m.db})()}_withRetries(m){var C=this;return(0,d.Z)(function*(){let x=0;for(;;)try{const k=yield C._openDb();return yield m(k)}catch(k){if(x++>3)throw k;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,d.Z)(function*(){return Zu()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,d.Z)(function*(){m.receiver=Dd._getInstance(function Yu(){return Zu()?self:null}()),m.receiver._subscribe("keyChanged",function(){var C=(0,d.Z)(function*(x,k){return{keyProcessed:(yield m._poll()).includes(k.key)}});return function(x,k){return C.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var C=(0,d.Z)(function*(x,k){return["keyChanged"]});return function(x,k){return C.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,d.Z)(function*(){var C,x;if(m.activeServiceWorker=yield function mo(){return Ha.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new nc(m.activeServiceWorker);const k=yield m.sender._send("ping",{},800);!k||(null===(C=k[0])||void 0===C?void 0:C.fulfilled)&&(null===(x=k[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var C=this;return(0,d.Z)(function*(){if(C.sender&&C.activeServiceWorker&&function Ku(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:m},C.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Zo();return yield gs(m,go,"1"),yield yo(m,go),!0}catch{}return!1})()}_withPendingWrite(m){var C=this;return(0,d.Z)(function*(){C.pendingWrites++;try{yield m()}finally{C.pendingWrites--}})()}_set(m,C){var x=this;return(0,d.Z)(function*(){return x._withPendingWrite((0,d.Z)(function*(){return yield x._withRetries(k=>gs(k,m,C)),x.localCache[m]=C,x.notifyServiceWorker(m)}))})()}_get(m){var C=this;return(0,d.Z)(function*(){const x=yield C._withRetries(k=>function Qu(y,p){return Ga.apply(this,arguments)}(k,m));return C.localCache[m]=x,x})()}_remove(m){var C=this;return(0,d.Z)(function*(){return C._withPendingWrite((0,d.Z)(function*(){return yield C._withRetries(x=>yo(x,m)),delete C.localCache[m],C.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,d.Z)(function*(){const C=yield m._withRetries(q=>{const fe=$a(q,!1).getAll();return new _o(fe).toPromise()});if(!C)return[];if(0!==m.pendingWrites)return[];const x=[],k=new Set;for(const{fbase_key:q,value:fe}of C)k.add(q),JSON.stringify(m.localCache[q])!==JSON.stringify(fe)&&(m.notifyListeners(q,fe),x.push(q));for(const q of Object.keys(m.localCache))m.localCache[q]&&!k.has(q)&&(m.notifyListeners(q,null),x.push(q));return x})()}notifyListeners(m,C){this.localCache[m]=C;const x=this.listeners[m];if(x)for(const k of Array.from(x))k(C)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(C)}_removeListener(m,C){this.listeners[m]&&(this.listeners[m].delete(C),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Yo(y,p){return dn(y,"POST","/v2/accounts/mfaSignIn:start",kt(y,p))}function js(){return(js=(0,d.Z)(function*(y){return(yield dn(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Jo(y){return new Promise((p,m)=>{const C=document.createElement("script");C.setAttribute("src",y),C.onload=p,C.onerror=x=>{const k=we("internal-error");k.customData=x,m(k)},C.type="text/javascript",C.charset="UTF-8",function Qo(){var y,p;return null!==(p=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==p?p:document}().appendChild(C)})}function el(y){return`__${y}${Math.floor(1e6*Math.random())}`}const za=1e12;class Cn{constructor(p){this.auth=p,this.counter=za,this._widgets=new Map}render(p,m){const C=this.counter;return this._widgets.set(C,new cg(p,this.auth.name,m||{})),this.counter++,C}reset(p){var m;const C=p||za;null===(m=this._widgets.get(C))||void 0===m||m.delete(),this._widgets.delete(C)}getResponse(p){var m;return(null===(m=this._widgets.get(p||za))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,d.Z)(function*(){var C;return null===(C=m._widgets.get(p||za))||void 0===C||C.execute(),""})()}}class cg{constructor(p,m,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof p?document.getElementById(p):p;H(x,"argument-error",{appName:m}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ly(y){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<y;C++)p.push(m.charAt(Math.floor(Math.random()*m.length)));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const dg=el("rcb"),cy=new cn(3e4,6e4);class lf{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=Hn().grecaptcha)||void 0===p||!p.render)}load(p,m=""){return H(function LC(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(m),p,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(Hn().grecaptcha):new Promise((C,x)=>{const k=Hn().setTimeout(()=>{x(we(p,"network-request-failed"))},cy.get());Hn()[dg]=()=>{Hn().clearTimeout(k),delete Hn()[dg];const fe=Hn().grecaptcha;if(!fe)return void x(we(p,"internal-error"));const Ue=fe.render;fe.render=(et,bt)=>{const _t=Ue(et,bt);return this.counter++,_t},this.hostLanguage=m,C(fe)},Jo(`https://www.google.com/recaptcha/api.js??${(0,F.xO)({onload:dg,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(k),x(we(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var m;return!(null===(m=Hn().grecaptcha)||void 0===m||!m.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class oc{load(p){return(0,d.Z)(function*(){return new Cn(p)})()}clearedOneInstance(){}}const hy="recaptcha",fy={theme:"light",type:"image"};class vr{constructor(p,m=Object.assign({},fy),C){this.parameters=m,this.type=hy,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Tn(C),this.isInvisible="invisible"===this.parameters.size,H(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof p?document.getElementById(p):p;H(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new oc:new lf,this.validateStartingState()}verify(){var p=this;return(0,d.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),C=p.getAssertedRecaptcha();return C.getResponse(m)||new Promise(k=>{const q=fe=>{!fe||(p.tokenChangeListeners.delete(q),k(fe))};p.tokenChangeListeners.add(q),p.isInvisible&&C.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){H(!this.parameters.sitekey,this.auth,"argument-error"),H(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),H(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(C=>C(m)),"function"==typeof p)p(m);else if("string"==typeof p){const C=Hn()[p];"function"==typeof C&&C(m)}}}assertNotDestroyed(){H(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,d.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const C=document.createElement("div");m.appendChild(C),m=C}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,d.Z)(function*(){H(gt()&&!Zu(),p.auth,"internal-error"),yield function rn(){let y=null;return new Promise(p=>{"complete"!==document.readyState?(y=()=>p(),window.addEventListener("load",y)):p()}).catch(p=>{throw y&&window.removeEventListener("load",y),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function ni(y){return js.apply(this,arguments)}(p.auth);H(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return H(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class mi{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=Fs._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function _i(){return(_i=(0,d.Z)(function*(y,p,m){const C=Tn(y),x=yield Hs(C,p,(0,F.m9)(m));return new mi(x,k=>An(C,k))})).apply(this,arguments)}function Oi(){return(Oi=(0,d.Z)(function*(y,p,m){const C=(0,F.m9)(y);yield qt(!1,C,"phone");const x=yield Hs(C.auth,p,(0,F.m9)(m));return new mi(x,k=>Nu(C,k))})).apply(this,arguments)}function wr(){return(wr=(0,d.Z)(function*(y,p,m){const C=(0,F.m9)(y),x=yield Hs(C.auth,p,(0,F.m9)(m));return new mi(x,k=>ku(C,k))})).apply(this,arguments)}function Hs(y,p,m){return tl.apply(this,arguments)}function tl(){return(tl=(0,d.Z)(function*(y,p,m){var C;const x=yield m.verify();try{let k;if(H("string"==typeof x,y,"argument-error"),H(m.type===hy,y,"argument-error"),k="string"==typeof p?{phoneNumber:p}:p,"session"in k){const q=k.session;if("phoneNumber"in k)return H("enroll"===q.type,y,"internal-error"),(yield zu(y,{idToken:q.credential,phoneEnrollmentInfo:{phoneNumber:k.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{H("signin"===q.type,y,"internal-error");const fe=(null===(C=k.multiFactorHint)||void 0===C?void 0:C.uid)||k.multiFactorUid;return H(fe,y,"missing-multi-factor-info"),(yield Yo(y,{mfaPendingCredential:q.credential,mfaEnrollmentId:fe,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:q}=yield ig(y,{phoneNumber:k.phoneNumber,recaptchaToken:x});return q}}finally{m._reset()}})).apply(this,arguments)}function ac(){return(ac=(0,d.Z)(function*(y,p){yield ao((0,F.m9)(y),p)})).apply(this,arguments)}let qa=(()=>{class y{constructor(m){this.providerId=y.PROVIDER_ID,this.auth=Tn(m)}verifyPhoneNumber(m,C){return Hs(this.auth,m,(0,F.m9)(C))}static credential(m,C){return Fs._fromVerification(m,C)}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:C,temporaryProof:x}=m;return C&&x?Fs._fromTokenResponse(C,x):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function wo(y,p){return p?ie(p):(H(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class _s extends Dr{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return sr(p,this._buildIdpRequest())}_linkToIdToken(p,m){return sr(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return sr(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function Je(y){return ki(y.auth,new _s(y),y.bypassAuthState)}function Za(y){const{auth:p,user:m}=y;return H(m,p,"internal-error"),uo(m,new _s(y),y.bypassAuthState)}function $s(y){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,d.Z)(function*(y){const{auth:p,user:m}=y;return H(m,p,"internal-error"),ao(m,new _s(y),y.bypassAuthState)})).apply(this,arguments)}class ea{constructor(p,m,C,x,k=!1){this.auth=p,this.resolver=C,this.user=x,this.bypassAuthState=k,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,d.Z)(function*(C,x){p.pendingPromise={resolve:C,reject:x};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(k){p.reject(k)}});return function(C,x){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,d.Z)(function*(){const{urlResponse:C,sessionId:x,postBody:k,tenantId:q,error:fe,type:Ue}=p;if(fe)return void m.reject(fe);const et={auth:m.auth,requestUri:C,sessionId:x,tenantId:q||void 0,postBody:k||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Ue)(et))}catch(bt){m.reject(bt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Je;case"linkViaPopup":case"linkViaRedirect":return $s;case"reauthViaPopup":case"reauthViaRedirect":return Za;default:Me(this.auth,"internal-error")}}resolve(p){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const xn=new cn(2e3,1e4);function ta(){return(ta=(0,d.Z)(function*(y,p,m){const C=Tn(y);Be(y,p,ls);const x=wo(C,m);return new Gs(C,"signInViaPopup",p,x).executeNotNull()})).apply(this,arguments)}function lc(){return(lc=(0,d.Z)(function*(y,p,m){const C=(0,F.m9)(y);Be(C.auth,p,ls);const x=wo(C.auth,m);return new Gs(C.auth,"reauthViaPopup",p,x,C).executeNotNull()})).apply(this,arguments)}function Ya(){return(Ya=(0,d.Z)(function*(y,p,m){const C=(0,F.m9)(y);Be(C.auth,p,ls);const x=wo(C.auth,m);return new Gs(C.auth,"linkViaPopup",p,x,C).executeNotNull()})).apply(this,arguments)}let Gs=(()=>{class y extends ea{constructor(m,C,x,k,q){super(m,C,k,q),this.provider=x,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var m=this;return(0,d.Z)(function*(){const C=yield m.execute();return H(C,m.auth,"internal-error"),C})()}onExecution(){var m=this;return(0,d.Z)(function*(){Z(1===m.filter.length,"Popup operations only handle one event");const C=ja();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],C),m.authWindow.associatedEvent=C,m.resolver._originValidation(m.auth).catch(x=>{m.reject(x)}),m.resolver._isIframeWebStorageSupported(m.auth,x=>{x||m.reject(we(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(we(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const m=()=>{var C,x;this.pollId=null!==(x=null===(C=this.authWindow)||void 0===C?void 0:C.window)&&void 0!==x&&x.closed?window.setTimeout(()=>{this.pollId=null,this.reject(we(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,xn.get())};m()}}return y.currentPopupAction=null,y})();const Fi=new Map;class cc extends ea{constructor(p,m,C=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,C),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,d.Z)(function*(){let C=Fi.get(m.auth._key());if(!C){try{const k=(yield function na(y,p){return ri.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;C=()=>Promise.resolve(k)}catch(x){C=()=>Promise.reject(x)}Fi.set(m.auth._key(),C)}return m.bypassAuthState||Fi.set(m.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,C=this;return(0,d.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(C,p);if("unknown"!==p.type){if(p.eventId){const x=yield C.auth._redirectUserForId(p.eventId);if(x)return C.user=x,m().call(C,p);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function ri(){return(ri=(0,d.Z)(function*(y,p){const m=Mn(p),C=ws(y);if(!(yield C._isAvailable()))return!1;const x="true"===(yield C._get(m));return yield C._remove(m),x})).apply(this,arguments)}function vs(y,p){return es.apply(this,arguments)}function es(){return(es=(0,d.Z)(function*(y,p){return ws(y)._set(Mn(p),"true")})).apply(this,arguments)}function zs(y,p){Fi.set(y._key(),p)}function ws(y){return ie(y._redirectPersistence)}function Mn(y){return K("pendingRedirect",y.config.apiKey,y.name)}function I(){return(I=(0,d.Z)(function*(y,p,m){const C=Tn(y);Be(y,p,ls);const x=wo(C,m);return yield vs(x,C),x._openRedirect(C,p,"signInViaRedirect")})).apply(this,arguments)}function U(){return(U=(0,d.Z)(function*(y,p,m){const C=(0,F.m9)(y);Be(C.auth,p,ls);const x=wo(C.auth,m);yield vs(x,C.auth);const k=yield Et(C);return x._openRedirect(C.auth,p,"reauthViaRedirect",k)})).apply(this,arguments)}function De(){return(De=(0,d.Z)(function*(y,p,m){const C=(0,F.m9)(y);Be(C.auth,p,ls);const x=wo(C.auth,m);yield qt(!1,C,p.providerId),yield vs(x,C.auth);const k=yield Et(C);return x._openRedirect(C.auth,p,"linkViaRedirect",k)})).apply(this,arguments)}function Xe(){return(Xe=(0,d.Z)(function*(y,p){return yield Tn(y)._initializationPromise,ht(y,p,!1)})).apply(this,arguments)}function ht(y,p){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,d.Z)(function*(y,p,m=!1){const C=Tn(y),x=wo(C,p),q=yield new cc(C,x,m).execute();return q&&!m&&(delete q.user._redirectEventId,yield C._persistUserIfCurrent(q.user),yield C._setRedirectUser(null,p)),q})).apply(this,arguments)}function Et(y){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,d.Z)(function*(y){const p=ja(`${y.uid}:::`);return y._redirectEventId=p,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),p})).apply(this,arguments)}class ra{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(p,C)&&(m=!0,this.sendToConsumer(p,C),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Gn(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Nt(y);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var C;if(p.error&&!Nt(p)){const x=(null===(C=p.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";m.onError(we(this.auth,x))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const C=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&C}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ia(p))}saveEventToCache(p){this.cachedEventUids.add(ia(p)),this.lastProcessedEventTime=Date.now()}}function ia(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(p=>p).join("-")}function Nt({type:y,error:p}){return"unknown"===y&&"auth/no-auth-event"===p?.code}function ii(y){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,d.Z)(function*(y,p={}){return dn(y,"GET","/v1/projects",p)})).apply(this,arguments)}const VC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pg=/^https?/;function cf(){return(cf=(0,d.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:p}=yield ii(y);for(const m of p)try{if(gg(m))return}catch{}Me(y,"unauthorized-domain")})).apply(this,arguments)}function gg(y){const p=Pe(),{protocol:m,hostname:C}=new URL(p);if(y.startsWith("chrome-extension://")){const q=new URL(y);return""===q.hostname&&""===C?"chrome-extension:"===m&&y.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&q.hostname===C}if(!pg.test(m))return!1;if(VC.test(y))return C===y;const x=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(C)}const mg=new cn(3e4,6e4);function py(){const y=Hn().___jsl;if(y?.H)for(const p of Object.keys(y.H))if(y.H[p].r=y.H[p].r||[],y.H[p].L=y.H[p].L||[],y.H[p].r=[...y.H[p].L],y.CP)for(let m=0;m<y.CP.length;m++)y.CP[m]=null}let ts=null;function df(y){return ts=ts||function ar(y){return new Promise((p,m)=>{var C,x,k;function q(){py(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{py(),m(we(y,"network-request-failed"))},timeout:mg.get()})}if(null!==(x=null===(C=Hn().gapi)||void 0===C?void 0:C.iframes)&&void 0!==x&&x.Iframe)p(gapi.iframes.getContext());else{if(null===(k=Hn().gapi)||void 0===k||!k.load){const fe=el("iframefcb");return Hn()[fe]=()=>{gapi.load?q():m(we(y,"network-request-failed"))},Jo(`https://apis.google.com/js/api.js?onload=${fe}`).catch(Ue=>m(Ue))}q()}}).catch(p=>{throw ts=null,p})}(y),ts}const _g=new cn(5e3,15e3),gy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},my=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yg(y){const p=y.config;H(p.authDomain,y,"auth-domain-config-required");const m=p.emulator?En(p,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,C={apiKey:p.apiKey,appName:y.name,v:oe.SDK_VERSION},x=my.get(y.config.apiHost);x&&(C.eid=x);const k=y._getFrameworks();return k.length&&(C.fw=k.join(",")),`${m}?${(0,F.xO)(C).slice(1)}`}function pf(){return pf=(0,d.Z)(function*(y){const p=yield df(y),m=Hn().gapi;return H(m,y,"internal-error"),p.open({where:document.body,url:yg(y),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gy,dontclear:!0},C=>new Promise(function(){var x=(0,d.Z)(function*(k,q){yield C.restyle({setHideOnLeave:!1});const fe=we(y,"network-request-failed"),Ue=Hn().setTimeout(()=>{q(fe)},_g.get());function et(){Hn().clearTimeout(Ue),k(C)}C.ping(et).then(et,()=>{q(fe)})});return function(k,q){return x.apply(this,arguments)}}()))}),pf.apply(this,arguments)}const _y={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class yy{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function xd(y,p,m,C,x,k){H(y.config.authDomain,y,"auth-domain-config-required"),H(y.config.apiKey,y,"invalid-api-key");const q={apiKey:y.config.apiKey,appName:y.name,authType:m,redirectUrl:C,v:oe.SDK_VERSION,eventId:x};if(p instanceof ls){p.setDefaultLanguage(y.languageCode),q.providerId=p.providerId||"",(0,F.xb)(p.getCustomParameters())||(q.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Ue,et]of Object.entries(k||{}))q[Ue]=et}if(p instanceof cs){const Ue=p.getScopes().filter(et=>""!==et);Ue.length>0&&(q.scopes=Ue.join(","))}y.tenantId&&(q.tid=y.tenantId);const fe=q;for(const Ue of Object.keys(fe))void 0===fe[Ue]&&delete fe[Ue];return`${function hc({config:y}){return y.emulator?En(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,F.xO)(fe).slice(1)}`}const sa="webStorageSupport";class pc extends class wy{constructor(p){this.factorId=p}_process(p,m,C){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,C);case"signin":return this._finalizeSignIn(p,m.credential);default:return me("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new pc(p)}_finalizeEnroll(p,m,C){return function Wu(y,p){return dn(y,"POST","/v2/accounts/mfaEnrollment:finalize",kt(y,p))}(p,{idToken:m,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function Xu(y,p){return dn(y,"POST","/v2/accounts/mfaSignIn:finalize",kt(y,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let gc=(()=>{class y{constructor(){}static assertion(m){return pc._fromCredential(m)}}return y.FACTOR_ID="phone",y})();var mc="@firebase/auth";class Cy{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,d.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(C=>{p(C?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);!m||(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){H(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Co(){return window}function Rd(){return(Rd=(0,d.Z)(function*(y,p,m){var C;const{BuildInfo:x}=Co();Z(p.sessionId,"AuthEvent did not contain a session ID");const k=yield al(p.sessionId),q={};return Ut()?q.ibi=x.packageName:Wt()?q.apn=x.packageName:Me(y,"operation-not-supported-in-this-environment"),x.displayName&&(q.appDisplayName=x.displayName),q.sessionId=k,xd(y,m,p.type,void 0,null!==(C=p.eventId)&&void 0!==C?C:void 0,q)})).apply(this,arguments)}function _c(){return(_c=(0,d.Z)(function*(y){const{BuildInfo:p}=Co(),m={};Ut()?m.iosBundleId=p.packageName:Wt()?m.androidPackageName=p.packageName:Me(y,"operation-not-supported-in-this-environment"),yield ii(y,m)})).apply(this,arguments)}function Nd(){return(Nd=(0,d.Z)(function*(y,p,m){const{cordova:C}=Co();let x=()=>{};try{yield new Promise((k,q)=>{let fe=null;function Ue(){var _t;k();const hn=null===(_t=C.plugins.browsertab)||void 0===_t?void 0:_t.close;"function"==typeof hn&&hn(),"function"==typeof m?.close&&m.close()}function et(){fe||(fe=window.setTimeout(()=>{q(we(y,"redirect-cancelled-by-user"))},2e3))}function bt(){"visible"===document?.visibilityState&&et()}p.addPassiveListener(Ue),document.addEventListener("resume",et,!1),Wt()&&document.addEventListener("visibilitychange",bt,!1),x=()=>{p.removePassiveListener(Ue),document.removeEventListener("resume",et,!1),document.removeEventListener("visibilitychange",bt,!1),fe&&window.clearTimeout(fe)}})}finally{x()}})).apply(this,arguments)}function al(y){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,d.Z)(function*(y){const p=ul(y),m=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(m)).map(x=>x.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function ul(y){if(Z(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const p=new ArrayBuffer(y.length),m=new Uint8Array(p);for(let C=0;C<y.length;C++)m[C]=y.charCodeAt(C);return m}(0,F.Pz)("authIdTokenMaxAge"),function vg(y){(0,oe._registerComponent)(new le.wA("auth",(p,{options:m})=>{const C=p.getProvider("app").getImmediate(),x=p.getProvider("heartbeat"),{apiKey:k,authDomain:q}=C.options;return((fe,Ue)=>{H(k&&!k.includes(":"),"invalid-api-key",{appName:fe.name}),H(!q?.includes(":"),"argument-error",{appName:fe.name});const et={apiKey:k,authDomain:q,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Rs(y)},bt=new Pt(fe,Ue,et);return function Fe(y,p){const m=p?.persistence||[],C=(Array.isArray(m)?m:[m]).map(ie);p?.errorMap&&y._updateErrorMap(p.errorMap),y._initializeWithPersistence(C,p?.popupRedirectResolver)}(bt,m),bt})(C,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,C)=>{p.getProvider("auth-internal").initialize()})),(0,oe._registerComponent)(new le.wA("auth-internal",p=>{const m=Tn(p.getProvider("auth").getImmediate());return new Cy(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,oe.registerVersion)(mc,"0.21.0",function Ey(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,oe.registerVersion)(mc,"0.21.0","esm2017")}("Browser");class Pd extends ra{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(p)),super.onEvent(p)}initialized(){var p=this;return(0,d.Z)(function*(){yield p.initPromise})()}}function Cg(y){return eu.apply(this,arguments)}function eu(){return(eu=(0,d.Z)(function*(y){const p=yield tu()._get(Eo(y));return p&&(yield tu()._remove(Eo(y))),p})).apply(this,arguments)}function Ay(){const y=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const C=Math.floor(Math.random()*p.length);y.push(p.charAt(C))}return y.join("")}function tu(){return ie(Va)}function Eo(y){return K("authEvent",y.config.apiKey,y.name)}function bo(y){if(!y?.includes("?"))return{};const[p,...m]=y.split("?");return(0,F.zd)(m.join("?"))}function ll(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:we("no-auth-event")}}function yc(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function vf(y=(0,F.z$)()){return!("file:"!==yc()&&"ionic:"!==yc()&&"capacitor:"!==yc()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Sg(){try{const y=self.localStorage,p=ja();if(y)return y.setItem(p,"1"),y.removeItem(p),!function Ry(y=(0,F.z$)()){return function Tg(){return(0,F.w1)()&&11===document?.documentMode}()||function Cf(y=(0,F.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,F.hl)()}catch{return Ld()&&(0,F.hl)()}return!1}function Ld(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Vd(){return(function My(){return"http:"===yc()||"https:"===yc()}()||(0,F.ru)()||vf())&&!function wf(){return(0,F.b$)()||(0,F.UG)()}()&&Sg()&&!Ld()}function Do(){return vf()&&typeof document<"u"}function vc(){return(vc=(0,d.Z)(function*(){return!!Do()&&new Promise(y=>{const p=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),y(!0)})})})).apply(this,arguments)}const yi={LOCAL:"local",NONE:"none",SESSION:"session"},qr=H,ru="persistence";function wc(y){return Ud.apply(this,arguments)}function Ud(){return(Ud=(0,d.Z)(function*(y){yield y._initializationPromise;const p=Bd(),m=K(ru,y.config.apiKey,y.name);p&&p.setItem(m,y._getPersistence())})).apply(this,arguments)}function Bd(){var y;try{return(null===(y=function Ef(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const jd=H;class vi{constructor(){this.browserResolver=ie(class Es{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xi,this._completeRedirectFn=ht,this._overrideRedirectResult=zs}_openPopup(p,m,C,x){var k=this;return(0,d.Z)(function*(){var q;Z(null===(q=k.eventManagers[p._key()])||void 0===q?void 0:q.manager,"_initialize() not called before _openPopup()");const fe=xd(p,m,C,Pe(),x);return function ol(y,p,m,C=500,x=600){const k=Math.max((window.screen.availHeight-x)/2,0).toString(),q=Math.max((window.screen.availWidth-C)/2,0).toString();let fe="";const Ue=Object.assign(Object.assign({},_y),{width:C.toString(),height:x.toString(),top:k,left:q}),et=(0,F.z$)().toLowerCase();m&&(fe=Qt(et)?"_blank":m),Ge(et)&&(p=p||"http://localhost",Ue.scrollbars="yes");const bt=Object.entries(Ue).reduce((hn,[Cr,rs])=>`${hn}${Cr}=${rs},`,"");if(function Xr(y=(0,F.z$)()){var p;return Ut(y)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(et)&&"_self"!==fe)return function vy(y,p){const m=document.createElement("a");m.href=y,m.target=p;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(C)}(p||"",fe),new yy(null);const _t=window.open(p||"",fe,bt);H(_t,y,"popup-blocked");try{_t.focus()}catch{}return new yy(_t)}(p,fe,ja())})()}_openRedirect(p,m,C,x){var k=this;return(0,d.Z)(function*(){return yield k._originValidation(p),function Pi(y){Hn().location.href=y}(xd(p,m,C,Pe(),x)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:x,promise:k}=this.eventManagers[m];return x?Promise.resolve(x):(Z(k,"If manager is not set, promise should be"),k)}const C=this.initAndGetManager(p);return this.eventManagers[m]={promise:C},C.catch(()=>{delete this.eventManagers[m]}),C}initAndGetManager(p){var m=this;return(0,d.Z)(function*(){const C=yield function ff(y){return pf.apply(this,arguments)}(p),x=new ra(p);return C.register("authEvent",k=>(H(k?.authEvent,p,"invalid-auth-event"),{status:x.onEvent(k.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:x},m.iframes[p._key()]=C,x})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(sa,{type:sa},x=>{var k;const q=null===(k=x?.[0])||void 0===k?void 0:k[sa];void 0!==q&&m(!!q),Me(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Ws(y){return cf.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return ro()||mt()||Ut()}}),this.cordovaResolver=ie(class yf{constructor(){this._redirectPersistence=Xi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ht,this._overrideRedirectResult=zs}_initialize(p){var m=this;return(0,d.Z)(function*(){const C=p._key();let x=m.eventManagers.get(C);return x||(x=new Pd(p),m.eventManagers.set(C,x),m.attachCallbackListeners(p,x)),x})()}_openPopup(p){Me(p,"operation-not-supported-in-this-environment")}_openRedirect(p,m,C,x){var k=this;return(0,d.Z)(function*(){!function Sy(y){var p,m,C,x,k,q,fe,Ue,et,bt;const _t=Co();H("function"==typeof(null===(p=_t?.universalLinks)||void 0===p?void 0:p.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),H(typeof(null===(m=_t?.BuildInfo)||void 0===m?void 0:m.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),H("function"==typeof(null===(k=null===(x=null===(C=_t?.cordova)||void 0===C?void 0:C.plugins)||void 0===x?void 0:x.browsertab)||void 0===k?void 0:k.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),H("function"==typeof(null===(Ue=null===(fe=null===(q=_t?.cordova)||void 0===q?void 0:q.plugins)||void 0===fe?void 0:fe.browsertab)||void 0===Ue?void 0:Ue.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),H("function"==typeof(null===(bt=null===(et=_t?.cordova)||void 0===et?void 0:et.InAppBrowser)||void 0===bt?void 0:bt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const q=yield k._initialize(p);yield q.initialized(),q.resetRedirect(),function Yn(){Fi.clear()}(),yield k._originValidation(p);const fe=function wg(y,p,m=null){return{type:p,eventId:m,urlResponse:null,sessionId:Ay(),postBody:null,tenantId:y.tenantId,error:we(y,"no-auth-event")}}(p,C,x);yield function Xa(y,p){return tu()._set(Eo(y),p)}(p,fe);const Ue=yield function oa(y,p,m){return Rd.apply(this,arguments)}(p,fe,m),et=yield function Dy(y){const{cordova:p}=Co();return new Promise(m=>{p.plugins.browsertab.isAvailable(C=>{let x=null;C?p.plugins.browsertab.openUrl(y):x=p.InAppBrowser.open(y,function mr(y=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),m(x)})})}(Ue);return function Ty(y,p,m){return Nd.apply(this,arguments)}(p,q,et)})()}_isIframeWebStorageSupported(p,m){throw new Error("Method not implemented.")}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Qa(y){return _c.apply(this,arguments)}(p)),this.originValidationPromises[m]}attachCallbackListeners(p,m){const{universalLinks:C,handleOpenURL:x,BuildInfo:k}=Co(),q=setTimeout((0,d.Z)(function*(){yield Cg(p),m.onEvent(ll())}),500),fe=function(){var bt=(0,d.Z)(function*(_t){clearTimeout(q);const hn=yield Cg(p);let Cr=null;hn&&_t?.url&&(Cr=function Eg(y,p){var m,C;const x=function Ig(y){const p=bo(y),m=p.link?decodeURIComponent(p.link):void 0,C=bo(m).link,x=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return bo(x).link||x||C||m||y}(p);if(x.includes("/__/auth/callback")){const k=bo(x),q=k.firebaseError?function bg(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(k.firebaseError)):null,fe=null===(C=null===(m=q?.code)||void 0===m?void 0:m.split("auth/"))||void 0===C?void 0:C[1],Ue=fe?we(fe):null;return Ue?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ue,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:x,postBody:null}}return null}(hn,_t.url)),m.onEvent(Cr||ll())});return function(hn){return bt.apply(this,arguments)}}();typeof C<"u"&&"function"==typeof C.subscribe&&C.subscribe(null,fe);const Ue=x,et=`${k.packageName.toLowerCase()}://`;Co().handleOpenURL=function(){var bt=(0,d.Z)(function*(_t){if(_t.toLowerCase().startsWith(et)&&fe({url:_t}),"function"==typeof Ue)try{Ue(_t)}catch(hn){console.error(hn)}});return function(_t){return bt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Xi,this._completeRedirectFn=ht,this._overrideRedirectResult=zs}_initialize(p){var m=this;return(0,d.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,m,C,x){var k=this;return(0,d.Z)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._openPopup(p,m,C,x)})()}_openRedirect(p,m,C,x){var k=this;return(0,d.Z)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._openRedirect(p,m,C,x)})()}_isIframeWebStorageSupported(p,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,m)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return Do()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return jd(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,d.Z)(function*(){if(p.underlyingResolver)return;const m=yield function Ag(){return vc.apply(this,arguments)}();p.underlyingResolver=m?p.cordovaResolver:p.browserResolver})()}}function Hd(y){return y.unwrap()}function $d(y){return aa(y)}function aa(y){const{_tokenResponse:p}=y instanceof F.ZR?y.customData:y;if(!p)return null;if(!(y instanceof F.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return qa.credentialFromResult(y);const m=p.providerId;if(!m||"password"===m)return null;let C;switch(m){case"google.com":C=Tu;break;case"facebook.com":C=Aa;break;case"github.com":C=Hl;break;case"twitter.com":C=ei;break;default:const{oauthIdToken:x,oauthAccessToken:k,oauthTokenSecret:q,pendingToken:fe,nonce:Ue}=p;return k||q||x||fe?fe?m.startsWith("saml.")?xa._create(m,fe):us._fromParams({providerId:m,signInMethod:m,pendingToken:fe,idToken:x,accessToken:k}):new oo(m).credential({idToken:x,accessToken:k,rawNonce:Ue}):null}return y instanceof F.ZR?C.credentialFromError(y):C.credentialFromResult(y)}function wi(y,p){return p.catch(m=>{throw m instanceof F.ZR&&function Ec(y,p){var m;const C=null===(m=p.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===p?.code)p.resolver=new Ny(y,function Vn(y,p){var m;const C=(0,F.m9)(y),x=p;return H(p.customData.operationType,C,"argument-error"),H(null===(m=x.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,C,"argument-error"),Gu._fromError(C,x)}(y,p));else if(C){const x=aa(p),k=p;x&&(k.credential=x,k.tenantId=C.tenantId||void 0,k.email=C.email||void 0,k.phoneNumber=C.phoneNumber||void 0)}}(y,m),m}).then(m=>{const x=m.user;return{operationType:m.operationType,credential:$d(m),additionalUserInfo:Hu(m),user:ns.getOrCreate(x)}})}function ua(y,p){return If.apply(this,arguments)}function If(){return(If=(0,d.Z)(function*(y,p){const m=yield p;return{verificationId:m.verificationId,confirm:C=>wi(y,m.confirm(C))}})).apply(this,arguments)}class Ny{constructor(p,m){this.resolver=m,this.auth=function Cc(y){return y.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return wi(Hd(this.auth),this.resolver.resolveSignIn(p))}}class ns{constructor(p){this._delegate=p,this.multiFactor=function qo(y){const p=(0,F.m9)(y);return Wo.has(p)||Wo.set(p,uf._fromUser(p)),Wo.get(p)}(p)}static getOrCreate(p){return ns.USER_MAP.has(p)||ns.USER_MAP.set(p,new ns(p)),ns.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var m=this;return(0,d.Z)(function*(){return wi(m.auth,Nu(m._delegate,p))})()}linkWithPhoneNumber(p,m){var C=this;return(0,d.Z)(function*(){return ua(C.auth,function sn(y,p,m){return Oi.apply(this,arguments)}(C._delegate,p,m))})()}linkWithPopup(p){var m=this;return(0,d.Z)(function*(){return wi(m.auth,function nl(y,p,m){return Ya.apply(this,arguments)}(m._delegate,p,vi))})()}linkWithRedirect(p){var m=this;return(0,d.Z)(function*(){return yield wc(Tn(m.auth)),function Q(y,p,m){return function ne(y,p,m){return De.apply(this,arguments)}(y,p,m)}(m._delegate,p,vi)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var m=this;return(0,d.Z)(function*(){return wi(m.auth,ku(m._delegate,p))})()}reauthenticateWithPhoneNumber(p,m){return ua(this.auth,function Wa(y,p,m){return wr.apply(this,arguments)}(this._delegate,p,m))}reauthenticateWithPopup(p){return wi(this.auth,function fg(y,p,m){return lc.apply(this,arguments)}(this._delegate,p,vi))}reauthenticateWithRedirect(p){var m=this;return(0,d.Z)(function*(){return yield wc(Tn(m.auth)),function T(y,p,m){return function M(y,p,m){return U.apply(this,arguments)}(y,p,m)}(m._delegate,p,vi)})()}sendEmailVerification(p){return function Kl(y,p){return Fa.apply(this,arguments)}(this._delegate,p)}unlink(p){var m=this;return(0,d.Z)(function*(){return yield function Or(y,p){return Au.apply(this,arguments)}(m._delegate,p),m})()}updateEmail(p){return function _d(y,p){return ho((0,F.m9)(y),p,null)}(this._delegate,p)}updatePassword(p){return function co(y,p){return ho((0,F.m9)(y),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function hg(y,p){return ac.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function Jl(y,p){return Xl.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,m){return function Yl(y,p,m){return Uu.apply(this,arguments)}(this._delegate,p,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ns.USER_MAP=new WeakMap;const la=H;let cl=(()=>{class y{constructor(m,C){if(this.app=m,C.isInitialized())return this._delegate=C.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:x}=m.options;la(x,"invalid-api-key",{appName:m.name}),la(x,"invalid-api-key",{appName:m.name});const k=typeof window<"u"?vi:void 0;this._delegate=C.initialize({options:{persistence:ca(x,m.name),popupRedirectResolver:k}}),this._delegate._updateErrorMap(be),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ns.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,C){!function bu(y,p,m){const C=Tn(y);H(C._canInitEmulator,C,"emulator-config-failed"),H(/^https?:\/\//.test(p),C,"invalid-emulator-scheme");const x=!!m?.disableWarnings,k=Ki(p),{host:q,port:fe}=function Zn(y){const p=Ki(y),m=/(\/\/)?([^?#/]+)/.exec(y.substr(p.length));if(!m)return{host:"",port:null};const C=m[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(C);if(x){const k=x[1];return{host:k,port:Ns(C.substr(k.length+1))}}{const[k,q]=C.split(":");return{host:k,port:Ns(q)}}}(p);C.config.emulator={url:`${k}//${q}${null===fe?"":`:${fe}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:q,port:fe,protocol:k.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function ks(){function y(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,m,C)}applyActionCode(m){return function gi(y,p){return Ra.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Na(this._delegate,m)}confirmPasswordReset(m,C){return function Lu(y,p,m){return $o.apply(this,arguments)}(this._delegate,m,C)}createUserWithEmailAndPassword(m,C){var x=this;return(0,d.Z)(function*(){return wi(x._delegate,function ka(y,p,m){return Ln.apply(this,arguments)}(x._delegate,m,C))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function Vu(y,p){return Oa.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function ps(y,p){return"EMAIL_SIGNIN"===Du.parseLink(p)?.operation}(0,m)}getRedirectResult(){var m=this;return(0,d.Z)(function*(){la(Vd(),m._delegate,"operation-not-supported-in-this-environment");const C=yield function je(y,p){return Xe.apply(this,arguments)}(m._delegate,vi);return C?wi(m._delegate,Promise.resolve(C)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function nu(y,p){Tn(y)._logFramework(p)}(this._delegate,m)}onAuthStateChanged(m,C,x){const{next:k,error:q,complete:fe}=bc(m,C,x);return this._delegate.onAuthStateChanged(k,q,fe)}onIdTokenChanged(m,C,x){const{next:k,error:q,complete:fe}=bc(m,C,x);return this._delegate.onIdTokenChanged(k,q,fe)}sendSignInLinkToEmail(m,C){return function ql(y,p,m){return lo.apply(this,arguments)}(this._delegate,m,C)}sendPasswordResetEmail(m,C){return function Fu(y,p,m){return Fn.apply(this,arguments)}(this._delegate,m,C||void 0)}setPersistence(m){var C=this;return(0,d.Z)(function*(){let x;switch(function bf(y,p){qr(Object.values(yi).includes(p),y,"invalid-persistence-type"),(0,F.b$)()?qr(p!==yi.SESSION,y,"unsupported-persistence-type"):(0,F.UG)()?qr(p===yi.NONE,y,"unsupported-persistence-type"):Ld()?qr(p===yi.NONE||p===yi.LOCAL&&(0,F.hl)(),y,"unsupported-persistence-type"):qr(p===yi.NONE||Sg(),y,"unsupported-persistence-type")}(C._delegate,m),m){case yi.SESSION:x=Xi;break;case yi.LOCAL:x=(yield ie(Ko)._isAvailable())?Ko:Va;break;case yi.NONE:x=B;break;default:return Me("argument-error",{appName:C._delegate.name})}return C._delegate.setPersistence(x)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return wi(this._delegate,function nf(y){return On.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return wi(this._delegate,An(this._delegate,m))}signInWithCustomToken(m){return wi(this._delegate,function Gl(y,p){return Ma.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,C){return wi(this._delegate,function Ji(y,p,m){return An((0,F.m9)(y),Qi.credential(p,m))}(this._delegate,m,C))}signInWithEmailLink(m,C){return wi(this._delegate,function ug(y,p,m){return Pa.apply(this,arguments)}(this._delegate,m,C))}signInWithPhoneNumber(m,C){return ua(this._delegate,function at(y,p,m){return _i.apply(this,arguments)}(this._delegate,m,C))}signInWithPopup(m){var C=this;return(0,d.Z)(function*(){return la(Vd(),C._delegate,"operation-not-supported-in-this-environment"),wi(C._delegate,function uc(y,p,m){return ta.apply(this,arguments)}(C._delegate,m,vi))})()}signInWithRedirect(m){var C=this;return(0,d.Z)(function*(){return la(Vd(),C._delegate,"operation-not-supported-in-this-environment"),yield wc(C._delegate),function In(y,p,m){return function rl(y,p,m){return I.apply(this,arguments)}(y,p,m)}(C._delegate,m,vi)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function Wl(y,p){return md.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=yi,y})();function bc(y,p,m){let C=y;"function"!=typeof y&&({next:C,error:p,complete:m}=y);const x=C;return{next:q=>x(q&&ns.getOrCreate(q)),error:p,complete:m}}function ca(y,p){const m=function To(y,p){const m=Bd();if(!m)return[];const C=K(ru,y,p);switch(m.getItem(C)){case yi.NONE:return[B];case yi.LOCAL:return[Ko,Xi];case yi.SESSION:return[Xi];default:return[]}}(y,p);if(typeof self<"u"&&!m.includes(Ko)&&m.push(Ko),typeof window<"u")for(const C of[Va,Xi])m.includes(C)||m.push(C);return m.includes(B)||m.push(B),m}class Df{constructor(){this.providerId="phone",this._delegate=new qa(Hd(te.Z.auth()))}static credential(p,m){return qa.credential(p,m)}verifyPhoneNumber(p,m){return this._delegate.verifyPhoneNumber(p,m)}unwrap(){return this._delegate}}Df.PHONE_SIGN_IN_METHOD=qa.PHONE_SIGN_IN_METHOD,Df.PROVIDER_ID=qa.PROVIDER_ID;const Ic=H;class Tf{constructor(p,m,C=te.Z.app()){var x;Ic(null===(x=C.options)||void 0===x?void 0:x.apiKey,"invalid-api-key",{appName:C.name}),this._delegate=new vr(p,m,C.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Sf(y){y.INTERNAL.registerComponent(new le.wA("auth-compat",p=>{const m=p.getProvider("app-compat").getImmediate(),C=p.getProvider("auth");return new cl(m,C)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Qi,FacebookAuthProvider:Aa,GithubAuthProvider:Hl,GoogleAuthProvider:Tu,OAuthProvider:oo,SAMLAuthProvider:fi,PhoneAuthProvider:Df,PhoneMultiFactorGenerator:gc,RecaptchaVerifier:Tf,TwitterAuthProvider:ei,Auth:cl,AuthCredential:Dr,Error:F.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.3.0")}(te.Z)},8766:(pt,Ae,L)=>{L.d(Ae,{Lj:()=>Me,X3:()=>dt});var d=L(5861);let F,oe;const le=new WeakMap,he=new WeakMap,pe=new WeakMap,$=new WeakMap,G=new WeakMap;let Re={get(H,me,Z){if(H instanceof IDBTransaction){if("done"===me)return he.get(H);if("objectStoreNames"===me)return H.objectStoreNames||pe.get(H);if("store"===me)return Z.objectStoreNames[1]?void 0:Z.objectStore(Z.objectStoreNames[0])}return ge(H[me])},set:(H,me,Z)=>(H[me]=Z,!0),has:(H,me)=>H instanceof IDBTransaction&&("done"===me||"store"===me)||me in H};function ye(H){return"function"==typeof H?function ot(H){return H!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function de(){return oe||(oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(H)?function(...me){return H.apply(tt(this),me),ge(le.get(this))}:function(...me){return ge(H.apply(tt(this),me))}:function(me,...Z){const X=H.call(tt(this),me,...Z);return pe.set(X,me.sort?me.sort():[me]),ge(X)}}(H):(H instanceof IDBTransaction&&function Le(H){if(he.has(H))return;const me=new Promise((Z,X)=>{const ie=()=>{H.removeEventListener("complete",re),H.removeEventListener("error",Fe),H.removeEventListener("abort",Fe)},re=()=>{Z(),ie()},Fe=()=>{X(H.error||new DOMException("AbortError","AbortError")),ie()};H.addEventListener("complete",re),H.addEventListener("error",Fe),H.addEventListener("abort",Fe)});he.set(H,me)}(H),((H,me)=>me.some(Z=>H instanceof Z))(H,function se(){return F||(F=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(H,Re):H)}function ge(H){if(H instanceof IDBRequest)return function Y(H){const me=new Promise((Z,X)=>{const ie=()=>{H.removeEventListener("success",re),H.removeEventListener("error",Fe)},re=()=>{Z(ge(H.result)),ie()},Fe=()=>{X(H.error),ie()};H.addEventListener("success",re),H.addEventListener("error",Fe)});return me.then(Z=>{Z instanceof IDBCursor&&le.set(Z,H)}).catch(()=>{}),G.set(me,H),me}(H);if($.has(H))return $.get(H);const me=ye(H);return me!==H&&($.set(H,me),G.set(me,H)),me}const tt=H=>G.get(H);function dt(H,me,{blocked:Z,upgrade:X,blocking:ie,terminated:re}={}){const Fe=indexedDB.open(H,me),Pe=ge(Fe);return X&&Fe.addEventListener("upgradeneeded",gt=>{X(ge(Fe.result),gt.oldVersion,gt.newVersion,ge(Fe.transaction))}),Z&&Fe.addEventListener("blocked",()=>Z()),Pe.then(gt=>{re&&gt.addEventListener("close",()=>re()),ie&&gt.addEventListener("versionchange",()=>ie())}).catch(()=>{}),Pe}function Me(H,{blocked:me}={}){const Z=indexedDB.deleteDatabase(H);return me&&Z.addEventListener("blocked",()=>me()),ge(Z).then(()=>{})}const we=["get","getKey","getAll","getAllKeys","count"],Ie=["put","add","delete","clear"],Be=new Map;function He(H,me){if(!(H instanceof IDBDatabase)||me in H||"string"!=typeof me)return;if(Be.get(me))return Be.get(me);const Z=me.replace(/FromIndex$/,""),X=me!==Z,ie=Ie.includes(Z);if(!(Z in(X?IDBIndex:IDBObjectStore).prototype)||!ie&&!we.includes(Z))return;const re=function(){var Fe=(0,d.Z)(function*(Pe,...gt){const en=this.transaction(Pe,ie?"readwrite":"readonly");let jt=en.store;return X&&(jt=jt.index(gt.shift())),(yield Promise.all([jt[Z](...gt),ie&&en.done]))[0]});return function(gt){return Fe.apply(this,arguments)}}();return Be.set(me,re),re}!function be(H){Re=H(Re)}(H=>({...H,get:(me,Z,X)=>He(me,Z)||H.get(me,Z,X),has:(me,Z)=>!!He(me,Z)||H.has(me,Z)}))},5861:(pt,Ae,L)=>{function d(F,oe,se,de,le,he,pe){try{var $=F[he](pe),G=$.value}catch(Y){return void se(Y)}$.done?oe(G):Promise.resolve(G).then(de,le)}function te(F){return function(){var oe=this,se=arguments;return new Promise(function(de,le){var he=F.apply(oe,se);function pe(G){d(he,de,le,pe,$,"next",G)}function $(G){d(he,de,le,pe,$,"throw",G)}pe(void 0)})}}L.d(Ae,{Z:()=>te})}},pt=>{pt(pt.s=4896)}]);